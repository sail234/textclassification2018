软件 学报 JOURNALOFSOFTWARE 　 Vol 　 No 　 P 小波 空间 的 视图 变形 合成 徐丹 　 鲍歌 　 石教英 　 摘要 　 该文 提出 一种 新 的 基于 D 离散 小 波 变换 和 图像 变形 技术 的 视图 合成 方法 该 方法 完全 依赖于 已知 的 一对 视图 来 合成 期间 的 变换 视图 无需 相机 标定 或 其他 几何 信息 其 基本 思想 是 ： 首先 采用 立体 视觉 技术 找出 图像 对间 的 基本 矩阵 将 两个 图像 变换 到 一个 规范 的 模式定义 下 即使 得 其 图像 平面 平行 并且 对应 像素 位于 同 一条 扫描线 上 然后 给出 一种 小 波 空间 的 图像 变形 方法 可以 快速 地 生成 期间 的 变换 视图 而且 还 便于 进一步 对小波 系数 进行 量化 编码 绘制 时先作 必要 的 解码 再 通过 小 波 逆变换 将 合成 的 小波 系数 恢复 到 图像 空间 最后 经过 一个 后置 变换 将 期间 视图 从 规范 模式 变 回到 原来 的 模式定义 中该 方法 的 特点 是 ， 小 波 变换 不仅 可以 同时 保持 频域 和 空域 的 良好 特性 而且 还 提供 一种 多 分辨率 的 表示 模式 提高 了 算法 的 性能 另外 文章 还 对 不同 小 波 类型 的 影响 进行 了 讨论 　 关键词 　 视图 合成 小 波 变换 图像 变形 基本 矩阵 IBMRimagebasedmodelingandrendering 极线 　 中图法 分类号 　 TPViewSynthesisviaWaveletBasedMorphingXUDan （ StateKeyLaboratoryofCADCGZhejiangUniversity 　 Hangzhou 　 ） BAOPaul （ DepartmentofComputing 　 ThePolytechnicUniversityHongKong ） SHIJiaoying （ StateKeyLaboratoryofCADCGZhejiangUniversity 　 Hangzhou 　 ） Abstract 　 　 ThispaperpresentsanewviewsynthesistechniqueusingimagemorphingandDdiscretewavelettransformThepaperaimsatpairwiseimagesthatareknownwithoutcameracalibrationandanyothergeometricinformationFirstlyestimatethefundamentalmatrixrelatedwithanypairofimagesbytechniquesfromstereovisionUsingfundamentalmatrixanypairofimageplanescanberectifiedtobeparallelandtheircorrespondingpointslieonthesamescanlineSecondlythepaperdescribesanimagemorphingalgorithmrunninginthewaveletdomainTheproposedalgorithmcansynthesizenewviewsmorequicklyAnyquantizationtechniquescanbeembeddedheretocompressthecoefficientsindepthWhendisplayingcompressedimagesaredecodedandaninversewavelettransformisachievedFinallyapostwarpingprocedureisusedtotransformtheinterpolatedviewsatdesiredpositionNicefeaturesofusingwavelettransformationareitsgoodlocalityinbothspaceandfrequencyanditsmultiresolutionrepresentationmodewhichmakesthegeneratedviewsberefinedprogressivelyandhenceissuitableforcommunicationAlsothepaperdiscussestheinfluencesofdifferentkindsofwaveletontheresultsKeywords 　 ViewsynthesiswavelettransformimagemorphingfundamentalmatrixIBMRimagebasedmodelingandrenderingepipolarline 　 　 IBMRimagebasedmodelingandrendering 即 基于 图像 的 建模 和 绘制 是 近年来 国内外 计算机 图形 学界 和 计算机 视觉 界 讨论 、 研究 的 焦点 它 不 依赖于 几何 模型 而是 利用 一组 预先 获得 的 图像 来 编码 场景 并 通过 适当 的 插值 来 合成 位于 不同 视点 的 新 视图 目前 已 提出 了 很多 IBMR 方法 ［ ］ 如 基于 全视 函数 的 方法 、 基于 立体 视觉 的 方法 、 基于 视图 插值 和 视图 变形 的 方法 、 图像 拼合 及 分层 绘制 等 其中 基于 视图 变形 viewmorphing 的 视图 合成 方法 是 由 Seitz 和 Dyer 在 SIGGRAPH 会议 上 提出 的 一种 采用 图像 变形 技术 的 方法 ［ ］ 众所周知 图像 变形 imagemorphing 技术 可以 在 两幅 形状 及 色彩 完全 不同 的 图像 之间 产生 一系列 连续 的 期间 过渡 图像 这些 期间 图像 的 面目 可能 与 起始 和 终结 图像 完全 不同 与其 相反 视图 变形 强调 物理 的 合理性 即 所 生成 的 期间 图像 应该 保持 起始 和 终结 图像 的 形状 理论 上 视图 变形 的 理想 结果 应该 产生 对象 在 不同 视点 的 相应 透视 视图 　 　 Seitz 等 人 的 视图 变形 方法 可以 总结 为个 步骤 首先 将 起始 和 终结 图像 变换 到 一个 规范化 的 结构 模式定义 下 使得 它们 的 图像 平面 平行 并且 对应 像素 位于 同 一条 扫描线 上称 这 一 特性 为 扫描线 特性 然后 期间 的 图像 通过 一般 的 图像 变形 技术 产生 扫描线 特性 保证 了 图像 变形 的 结果 是 形状 不变 的 最后 通过 一个 后置 变换 将 中间 图像 还原 回 初始 的 结构 模式定义 下 与 其他 IBMR 方法 相比 视图 变形 方法 的 优点 是 简单 、 不 需要 几何 信息 而且 在 单调 性 monotonicity 的 约束 下 可以 不 考虑 可见 性 问题 ［ ］ 但 它 仍然 存在 着 传统 图像 变形 方法 所 面临 的 问题 这 将 下文 加以 讨论 　 　 图像 变形 技术 是 一种 极为 普遍 的 图形 技术 它 产生 一系列 连续 变化 的 期间 图像 使得 起始 图像 逐渐 地 变化 到 终结 图像 这 其中 的 关键问题 是 如何 从 已知 的 图像 对应 特征 点 或线 推演 出 一组 相应 的 变换 函数 warpfunctions ［ ］ 也 称为 传递函数 transitionfunction 事实上 传递函数 是 一组 D 几何变换 一方面 ， 它 使 起始 图像 沿着 终结 图像 的 方向 扭曲 另一方面 又 使 终结 图像 沿 相反 方向 变形 形成 两个 相对 的 时间 序列 最后 在 同一 时刻 的 两幅 变形 图像 组合成 该 时刻 的 新 视图 　 　 MeshBase ［ ］ 和 FieldBased ［ ］ 是 两种 最 流行 的 图像 变形 方法 在 前 一种 方法 中 特征 被 指定 为 非 均匀 的 控制 网格 变换 函数 通过 样条 插值 产生 其 缺点 是 在 每 一 时刻 都 要 掌握 网格 信息 而 对 网格 的 控制 操纵 较为 复杂 后 一 方法 提供 了 良好 的 接口 来 指定 起始 和 目标 图像 中 的 特征 线段 变换 图像 时 每 一 特征 线段 都 有 一定 的 影响 域 变形 图像 由 所有 线段 影响 域 的 加权 平均 来 确定 这些 方法 的 一个 共同 缺点 就是 非常 耗时 计算 时间 取决于 图像 分辨率 和 特征 数目 另外 图像 质量 还 受 特征 附近 的 高频 噪声 的 影响 　 　 众所周知 消除 噪声 的 常用 手段 是 将 空间 域 的 数据 转化 到 频域 滤掉 高频 部分 ； 而 另一方面 层次 方法 是 提高 算法 效率 的 简便 途径 基于 上述 两点 考虑 我们 提出 了 基 于小波 的 方法 这 是因为 小 波 分解 不仅 提供 了 一种 多 分辨率 的 层次 表示 结构 同时 又 保持 了 空域 和 频域 的 良好 局部性 事实上 已经 有 作者 发表 了 频域 空间 的 三维 变形 技术 例如 文献 ［ ］ 提出 了 一种 基 于小波 的 方法 以 实现 两组 体 数据 集间 的 变形 ； 还有 人 提出 了 基于 Fourier 变换 的 三维 体 变形 方法 ［ ］ 　 　 本文 提出 了 一种 面向 IBMR 应用 的 快速 视图 变形 方法 该 方法 是 对 文献 ［ ］ 中 所 提出 的 算法 的 一种 改进 其 特点 在于 将 传统 的 图像 变形 技术 移植 到 小波 空间 完成 既 提高 了 算法 效率 ， 又 消除 了 噪声 另外 在 我们 的 算法 体系 下 还 可以 灵活 地 嵌入 各种 基 于小波 空间 的 图像处理 方法 如 滤波 、 量化 等等 这 非常 有利于 图像 、 视频 数据 的 通信 以及 基于 Web 的 IBMR 应用 　 　 我们 的 方法 由步 组成 ， 假设 I 和 I 是 两幅 已知 的 图像 　 　 步骤 修正 利用 基本 矩阵 fundamentalmatrix 找出 两个 变换 矩阵 H 和 H 将 参考 图像 变换 到 规范化 的 模式定义 下 即使 得 HI 和 HI 的 图像 平面 平行 并且 满足 扫描线 特性 这一 特性 保证 了 图像 的 插值 是 线性 的 且 为 形状 保持 的 　 　 步骤 小 波 空间 的 图像 变形 先用 D 小波 变换 将 修正 后 的 图像 分解成 金字塔 结构 然后 再用 FieldBased 图像 变形 技术 逐层 地 插值 产生 中间 视图 的 小波 系数 　 　 步骤 量化 小 波 变换 系数 可以 进一步 地 量化 以利于 存储 和 通信 例如 可以 采用 VQ 技术 显示 时 编码数据 可以 很快 地 解码 步骤 重构 用小波 逆变换 将 插值 产生 的 期间 系数 变换 回 图像 空间 生成 新 的 视图 然后 再作 一个 后置 变换 ， 将 期间 图像 由 规范 模式定义 还原 回 最初 的 模式定义 　 基本 矩阵 和 图像 校正 　 　 我们 的 前提 是 在 更 一般 的 情况 下 讨论 视图 合成 问题 即 只 知道 参考 图像 本身 而 没有 任何 其他 相机 参数 这一 假设 更 适合 IBMR 应用 为此 ， 需要 掌握 一些 计算机 视觉 的 知识 在 立体 视觉 中 如果 从 投影 空间 并非 从 欧几里德 空间 考虑 两个 相机 之间 的 几何 关系 被 称为 极 几何 epipolargeometry 关系 两个 相机 之间 的 重要 极 几何 信息 隐含 在 一个 × 、 秩为 的 矩阵 中称 该 矩阵 为 基本 矩阵 fundamentalmatrix 简记 为 FM ［ ］ 　 　 如图所示 假设 两个 相机 的 投影 中心 为 C 和 C 两个 图像 所在 的 平面 分别 为 I 和 I 称过 两 投影 中心 的 直线 为 基线 baseline 记为 CC 设 CC 在 I 和 I 上 的 投影 分别 为 e 和 e 称为 极点 epipoleI 上 通过 e 的 直线 和 I 上 通过 e 的 直线 称为 极线 epipolarline 如果 已知 I 和 I 上 两 对应点 m 和 m ′ I 上过 m 的 极线 称为 m ′ 的 极线 记为 l ′ ； 反过来 ， 称过 m ′ 的 极线 为 m 的 极线 记为 lFigEpipolargeometrybetweentwocameras 图 　 两个 相机 间 的 极 几何 约束 　 　 FM 包含 了 一对 图像 间 全部 的 几何 信息 我们 的 首要任务 就是 要 估计 出 FM 为此 需要 知道 到 两幅 参考 图间 的 特征 对应 关系 我们 已经 开发 了 一种 在 小波 空间 中 自动 寻找 局部 对应 匹配 的 方法 ［ ］ 其 缺点 是 非常 耗时 一种 简单 而 直接 的 方法 就是 交互 地 指定 至少 对 对应点 但 不能 保证 精度 文献 ［ ］ 分析 了 用 不同 方法 计算 FM 的 稳定性 和 不确定性 　 　 给定 图像 I 中 的 一点 m 其 相应 的 图像 I 中 的 极线 l ′ 表示 为 l ′ Fm 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 根据 立体 视觉 中 著名 的 极 约束 epipolarconstrain 条件 I 中 任意 一点 m 在 I 中 的 对应点 m ′ 一定 在 极线 l ′ 上 并且 满足 m ′ Fm 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 如果 已知 至少 个 对应点 F 的 参数 可以 用 最小 二 乘法 或 非线性 的 方法 估计 出来 非线性 方法 通常 比 线性 方法 更 精确 、 更 稳定 在 我们 的 方法 中先用 线性 方法 拟合 一个 初始值 F 然后 再用 非线性 的 迭代法 找到 较 稳定 、 较 精确 的 解 详细 的 讨论 和 分析 请 见 文献 ［ ］ 　 　 为了 将 两幅 图像 修正 到 一 规范化 的 模式定义 下 必须 找到 两个 变换 H 和 H 使得 HI 和 HI 满足 扫描线 特性 文献 ［ ］ 证明 了 满足 扫描线 特性 的 充分 必要条件 是 ， 其 FM 具有 如下 形式 ： 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 可以 相差 一个 常数 比例 因子 也就是说 ， H 和 H 满足 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 文献 ［ ］ 同时 也 给出 了 由 F 矩阵 计算 修正 变换 H 和 H 的 方法 　 二维 小 波 变换 　 　 小 波 分析 是 最初 用于 信号处理 的 技术 ［ ］ 但 目前 它 已 广泛 地 用于 图形学 领域 例如 ， 表面 造型 、 辐射 度 、 光线 跟踪 、 纹理 映射 、 体 绘制 及 图像压缩 等 这 有 两 方面 的 原因 ： 一方面 ， 小 波 变换 在 空域 和 频域 都 有 很 好 的 局部性 ； 另一方面 ， 小波 多 分辨率 分析 又 为 信号 表示 提供 了 一种 层次结构 小 波 变换 将 一个 函数 分解 为 不同 分辨率 的 层次 每 一层 上 有 个域 其中 一个 域 是 对 原函数 的 平滑 拟合 称为 拟合 域 approximatedband ； 另外 个域 描述 了 拟合 域 与 原函数 的 差别 称为 细节 域 detailband 这种 表示 为 加速 某些 图形 算法 提供 了 可能 这里 ， 简要 介绍 一下 D 小波 多 分辨率 分解 的 情况 　 　 形式化 地一 函数 f ∈ LR 在 分辨率 i 上 的 平滑 拟合 是 一个 投影 记为 Aj ： L （ R ） → VjVj ∈ L （ R ） ， 它 在 任意 较 高分辨率 j 上 的 细节 域 是 f 到 L （ R ） 的 子 空间 Oj 上 的 投影 记为 Pj ： L （ R ） → Oj ， j ＞ i 我们 可以 适当 地 选取 投影 函数 使得 它们 彼此 正交 并且 都 与 Vi 正交 对于 离散 函数 存在 两个 函数 集 组成 Vi 和 Oj 的 正交 基 分别 称 它们 为 小 波函数 和 尺度 函数 记 为 ψ j ， n ＝ － j ／ ψ （ jt － n ） n ∈ Z 　 　 　 　 　 　 　 　 　 　 　 　 　 　 φ j ， n ＝ － j ／ φ （ jt － n ） n ∈ Z 　 　 　 　 　 　 　 　 　 　 　 　 　 　 根据 这 两个 函数 分辨率 j 上 的 细节 域 和 拟合 域 分别 定义 为 Djfj 〈 f （ u ） ， ψ j ， n 〉 　 　 　 　 　 　 　 　 　 　 　 　 　 　 Adjfnj 〈 f （ u ） ， φ j ， n 〉 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 和 式 的 内积 可以 用 函数 的 金字塔 分解 来 代替 对于 二维 离散 图像 函数 金字塔 算法 连续 地 沿着 每 一维 分解 具体来讲 是 通过 一个 低通滤波器 和 一个 高通 滤波器 来 实现 如图所示 其中 H 和 G 分别 是 两个 滤波器 的 脉冲响应 定义 为 Hn 〈 φ u φ un 〉 　 　 　 　 　 　 　 　 　 　 　 　 　 　 Gn 〈 ψ u ψ un 〉 　 　 　 　 　 　 　 　 　 　 　 　 　 FigWaveletdecompositionforimage 图 　 图像 函数 的 二维 小 波 分解 　 　 图是 一个 小 波 变换 的 例子 注意 ， 在 每 一 分辨率 层次 上 的 拟合 域 和 细节 域 都 保持 了 空间 局部性 同时 ， 小 波 变换 通过 高通 和 底 通滤波 把 高频 和 低频 区域分割 开来 左 上下 角是 低频 区域 右上角 是 水平 高频 垂直 低频 区域 左下角 是 垂直 高频 水平 低频 区域 而 右下角 则 是 高频 区 这样 就 为 除噪 和 特征提取 提供 了 方便 FigTwoDimensionalwavelettransform 图 　 D 小波 变换 　 小 波 空间 的 图像 变形 技术 　 　 由 于小波 变换 的 空间 局部性 因此 考虑 把 传统 的 域 变形 算法 移植 到 小波 变换 的 每 一个 带通子 图像 中 唯一 要 解决 的 问题 是 如何 在 小波 空间 中 定位 相应 的 特征 线段 　 点 的 能量 分布 　 　 决定 特征 线 在 各小波 子域 中 的 位置 的 一种 简单 方法 是 将 其 空间 坐标 沿 每 一维 乘以 常数 因子 jn 其中 n 是 原始 图像 分辨率 j 是 当前 层 的 分辨率 　 　 然而 实验 表明 ， 并 不是 所有 的 小波 都 满足 这一 简单 的 空间 特性 因为 图像 的 离散 小 波 变换 是 基于 矢量 而 非 基于 点 的 也就是说 小 波 空间 中 每 一点 都 会 受 图像 空间 中 多个 像素 的 影响 像素 个数 取决于 带通 滤波器 的 长度 反过来 图像 空间 的 每 一 像素 都 对 小波 空间 的 多个 系数 有 贡献 总之 我们 必须 知道 小 波 变换 后 一个点 的 能量 分布 为此 我们 将 一个点 图像 即 只有 一个 像素 被 点亮 的 图像 变换 到 小波 空间 中 并 观察 其 能量 分布图 是 一个点 图像 在 不同 小 波 变换 下 的 能量 分布 系数 的 能量 越高 它 看起来 越暗 FigEnergydistributionofvariouskindsofwavelet 图 　 不同 小 波 变换 的 点 能量 分布 　 　 由 于小波 变换 会 引入 负值 系数 图 显示 时取 了 绝对值 尽管如此 有些 被 影响 系数 的 能量 因为 太小 仍然 看不见 从图 可以 看出 滤波器 越短 能量 的 分布 越 集中 ， 且 越 接近 理想 的 位置 即 坐标 以 常数 因子 逐层 缩小 相反 地小波 越 平滑 其 能量 分布 的 区域 越大 注意 图中 显示 的 能量 分布 区域 不 一定 是 连通 的 　 特征 线 位置 的 确定 　 　 我们 已经 讨论 了 不同 小波基 的 选取 会 影响 不同 小 波 子域 中 特征 线 的 确定 为了 精确 地 、 自 适应 地 获得 特征 在 各 子域 的 坐标 我们 设计 了 一个 简单 的 算法 来 快速 地 决定 与 原 线段 一致 的 新 特征 位置 这里 ， 一致性 意味着 新 线段 控制点 选取 的 合理性 　 　 算法 for 每一多 分辨率 层次 l 　 　 　 　 　 　 　 for 每 一线 段 及其 每 一端 点 　 　 　 　 　 　 　 将点 图像 变换 到 某个 选定 的 小波 空间 点 图像 的 大小 与 起始 图 和 终结 图 相同 ； 　 　 　 　 　 　 　 从 拟合 域 和 细节 域 中 选取 当前 特征 端点 的 新 位置 ； 　 　 　 　 　 　 　 在 每个 子域 中 建立 一个 与 当前 处理 线段 对应 的 新 的 线段 ； 　 　 　 　 　 　 　 end ％ forline 　 　 　 　 　 end ％ forlevel 　 　 从 拟合 域 和 细节 域 中 选取 当前 特征 端点 的 新 位置 可以 有 不同 的 规则 例如 选择 能量 最小 、 能量 最大 、 能量 均值 以及 能量 绝对值 最大 的 系数 我们 的 实验 表明 ， 最后 一个 规则 结果 较 好 即 选择 最暗 的 点 作为 新 的 特征 控制点 　 小 波 空间 中 的 变形 　 　 一旦 我们 确定 了 某 一 层次 上及 某 一 子域 中 的 特征 线段 集 就 可以 将 一般 图像 空间 中 的 变形 算法 直接 应用 到 小波 空间 中先 变形 起始 和 终结 图像 的 小波 系数 再 利用 它们 插值 生成 期间 图像 的 小波 系数 最后 用逆小波 变换 获得 图像 空间 的 新 视图 图 显示 了 一个 图像 的 变形 系列 它 拟合 一个 物体 的 旋转 其中 第幅 和 最后 一幅 取自 Seitzs 的 网页 它们 分别 是 起始 和 终结 图像 Fig 　 Sequenceofmorphingimage 图 　 图像 变形 系列 　 不同 小波 的 比较 　 　 由于 不同 的 小波 基有 不同 的 特性 因此 我们 用 第中节 介绍 的 方法 所 得到 的 新 特征 线段 坐标 可能 彼此 不同 这 意味着 变形 算法 必须 在 每个 子域 中 运行 一遍 我们 称 这种 方法 为 复杂 算法 如果 是 这样 用小波 分析 的 方法 似乎 没有 达到 加速 变形 算法 的 目的 通过 分析 不同 带通 子域 中 特征 线 的 输出 我们 发现 ， 如果 小心 地 选择 小波基 可以 使 它们 的 输出 完全相同 基于 正交 小波 的 变形 　 　 Haar 小波 和 Daubechies 小波 是 最 简单 的 正交 小 波 特征 线 的 输出 在 每个 方向 域 上 是 一样 的 因此 ， 对于 Haar 和 Daubechies 可以 运行 一个 所谓 的 快速 变形 算法 即 只 需 计算 拟合 域 中 每个 系数 的 变形 位置 然后 直接 利用 这一 结果 来 获得 其他 个子 域 的 变形 系数 这样 只 花费 传统 变形 算法 四分之一 的 时间 图是 用 Haar 和 Daubechies 小波 的 变形 例子 结果 是 比较 理想 的 ； 图 给出 了 快速 算法 和 复杂 算法 的 比较 两幅 图中 的 结果 都 表示 从 起始 到 终止 图像 的 变化 过程 中 ， 中间 的 那 一幅 图像 小波 基越 平滑 即 滤波器 宽度 越 宽 则 个子 域 的 特征 线 输出 差别 越大 这时 ， 快速 变形 就 会 失败 如图 a 所示 盒子 表面 非常 模糊 因而 只能 依靠 复杂 算法 逐个 子域 地 进行 计算 FigFastviewmorphingofsimplewavelet 图 　 简单 小波 的 快速 变形 FigComparisonbetweenthefastalgorithmandthecomplexalgorithm 图 　 快速 算法 和 复杂 算法 的 比较 基于 双 正交 小波 的 变形 　 　 前面 已经 讨论 了 快速 算法 只能 适合 简单 的 小波 而 复杂 算法 通常 可 为 平滑 小 波 提供 一个 较 合理 的 结果 但 计算 时间 却 不少 于 传统 的 变形 算法 而且 会 产生 走样 比较 图中 b 的 质量 为 快速 获得 高质量 的 变形 图像 我们 考虑 另一类 所谓 双 正交 对称 小 波 　 　 不同于 前面 的 正交 小波 双 正交 小波 的 优点 在于 ， 基本 的 滤波 操作 是从 矢量 两边 一起 进行 的 ， 并且 两边 的 延拓 无论 何时 都 是 相等 的 因此 ， 我们 可以 直接 确定 特征 线 在 多 分辨率 小波域 中 的 新 位置 即将 特征 线 控制点 的 坐标 逐层 地 除以 常数 因子 而 无需 通过 算法 决定 当然 ， 此刻 可以 直接 采用 快速 算法 图 b ～ d 表明 无论 滤波器 有 多长 能量 的 分布 都 集中 并且 以 理想 位置 为 中心 不失 一般性 这里 只 给出 样条 小波 的 实验 结果 如图所示 FigViewmorphingviabiorthogonalwavelet 图 　 双 正交 小波 的 变形 结果 　 　 上 图 说明 对于 这类 小波 快速 算法 能 获得 合理 的 结果 　 绘制 合成 　 　 前面 已经 讨论 了 如何 在 小波 空间 的 多 分辨率 表示 下 生成 插值 的 小波 系数 本节 将 讨论 重构 问题 还 将 指出 我们 的 算法 体系 非常适合 视频 和 图像 的 通信 　 后置 变换 postwarp 　 　 为了 产生 图像 空间 的 期间 图像 只 需 将 小波 空间 的 变形 结果 用逆小波 变换 变 回到 图像 空间 中 这 只 需要 ～ 秒 的 时间 剩下 的 问题 是 把 这些 图像 从 标准 模式定义 恢复 成 最初 的 模式定义 　 　 一个 简单 但 很 有效 的 方法 是 在 两源 参考 图像 中 分别 选择 一个 四边形 的 个 控制点 然后 依 时间 线性插值 期间 四边形 任意 两 四边形 间 都 可以 产生 正反 两个 仿射变换 实现 两 图像 间 形状 的 变换 因此 让 两个 初始 参考 图像 朝着 同一个 期间 形状 变形 然后 再 对 它们 的 颜色 插值 产生 合并 的 颜色 　 可见 性 分析 　 　 由于 视点 的 变化 及 场景 中 物体 的 相互 遮挡 会 使得 有些 原来 可见 的 场 景点 在 某些 视图 中 不 可见 而 一些 原来 不 可见 的 场 景点 在 新 视图 中 又 变得 可见 这 将 导致 合成 图像 中 出现 一些 空洞 或 重叠 的 现象 从 图像 变换 的 角度 来讲 重叠 是因为 多个 像素 被 映射 到 一个 像素 上 空洞 是因为 相邻 像素 变换 后 不再 相邻 而是 相差 几个 像素 这样 就 使得 一些 可见 的 前 景点 被 错误 地用 背景 颜色 代替 在 IBMR 应用 中 空洞 是 很 难 填充 的 因为 无法 从 原图 中 获得 空洞 位置 的 信息 这里 我们 只 简单 地用 附近 的 已知 点 插值 来 填充 但 图像 效果 不佳 我们 正在 研究 一种 新 的 解决 方法 试图 能够 恢复 每 一点 的 深度 信息 　 便于 通信 的 特点 　 　 本文 所 介绍 的 视图 变形 方法 的 一个 优点 就是 便于 通信 首先 利用 小 波 变换 的 多 分辨率 特性 可以 在 上层 非常 快地 得到 一个 粗略 的 解 然后 该 结果 可以 逐层 地 逐步求精 这一 特点 非常适合 图像 及 视频 的 传输 尤其 是 分布式 的 IBMR 应用 其次 因为 小 波 用于 图像压缩 已 是 非常 成熟 的 技术 所以 一些 量化 方法 就 可以 直接 嵌入 到 小波 空间 中 比如 VQ 这样 可以 大大减少 传输 的 数据 当然 ， 这 需要 在 客户端 进行 解码 和 绘制 　 实验 结果 　 　 我们 已经 知道 ， 传统 的 变形 算法 执行 效率 完全 取决于 特征 线 的 个数 和 图像 的 分辨率 基 于小波 的 方法 之所以 能 加速 变形 算法 的 效率 原因 之一 就是 小 波 分解 可以 看作 是 对 原 图像 的 子 采样 在 我们 的 快速 算法 中小 波 变换 只 分解 一层 合成 速度 提高 倍 结果 已 显示 在 图 ～ 中 另外 由 于小波 变换 把 图像 数据 转换 到 频域 空间 因而 可以 嵌入 一些 频域 空间 的 分析 技术 如去 噪 、 过滤 等 还有 一种 图像 空间 中 的 变形 算法 所 不 可能 得到 的 效果 ， 就是 可以 使 不同 的 频域 带 具有 不同 的 传递 速率 例如 可以 让 低频 部分 快速 过渡 而 高频 部分 缓慢 过渡 反之 也 可以 我们 知道 ， 高频 部分 对应 于 图像 的 细节 而 低频 部分 反映 图像 的 全局 信息 因此 ， 改变 不同 频域 成分 的 传递 速率 可以 得到 一些 有趣 的 期间 图像 　 　 基 于小波 变形 方法 的 缺点 是 结果 质量 比 传统 方法 差 一些 这 并 不是 小 波 空间 的 变形 算法 所 造成 的 而是 因为 小 波 变换 的 子 采样 问题 我们 比较 了 我们 的 结果 与 传统 方法 在 一半 图像 分辨率 下 的 结果 之后 发现 它们 是 完全 一样 的 为了 改进 结果 图像 的 质量 可以 把 小波 变形 结果 的 高频 部分 代之以 传统 方法 的 高频 部分 另 一 方法 是 ， 在 放大 的 原图 中 选择 特征 线 再 把 这组 特征 线及 原图 返回 原来 的 大小 比例 ， 并 实施 变形 算法 这样 做 的 目的 主要 是 提高 指定 特征 线 的 精度 　 总结 　 　 这里 我们 讨论 了 一种 用于 IBMR 应用 中 合成 新 视图 的 有效 的 视图 变形 方法 该 方法 将 核心 的 图像 变形 部分 放到 小 波 空间 中 去 实现 从而 加速 了 算法 执行 的 效率 同时 消除 了 噪声 我们 讨论 了 不同 小波 的 选择 对 结果 的 影响 同时 也 给出 了 相应 的 解决 策略 需要 指出 的 是 该 方法 利用 立体 视觉 的 知识 来 获得 有关 两幅 图像 间 的 极 几何 约束 关系 没有 对 相机 的 限制 不 需要 校正 相机 另外 基 于小波 的 方法 能够 获得 逐步求精 的 结果 因而 很 适合 Web 上 IBMR 的 应用 徐丹 （ 浙江大学 CAD ＆ CG 国家 重点 实验室 　 杭州 　 ） 　 鲍歌 （ 香港理工大学 电子计算 系 　 香港 ） 　 石教英 （ 浙江大学 CAD ＆ CG 国家 重点 实验室 　 杭州 　 ） 参考文献 ， XuDanPanZhigengShiJiaoyingTechniquesofimagebasedrenderinginvirtualrealityJournalofImageandGraphicsofChina ～ 徐丹 潘志庚 石教英 虚拟现实 中 基于 图像 的 绘制 技术 中国 图像 图形学 报 ～ ， SeitzSMDyerCRViewmorphingInProceedingsoftheACMSpecialInterestGrouponComputerGraphicsSIGGRAPHNewYorkACMPress ～ ， SeitzSMDyerCRPhotorealisticscenereconstructionbyvoxelcoloringInProceedingsoftheImageUnderstandingWorkshop ～ ， WolbergGDigitalImageWarpingLosAlamitosCAIEEEComputerSocietyPress ， NishitaTFujiiTNakamaeEMetamorphosisusingBezierclippingInProceedingsofthestPacificConferenceonComputerGraphicsandApplicationsSeoulWorldScientificPublishingCo ～ ， BeierTNeelySFeatureBasedimagemetamorphosisComputerGraphics ～ ， HeTSWangSArieKWaveletBasedvolumemorphingInProceedingsoftheVisualizationWashingtonDCIEEEComputerSocietyPress ～ ， HughesJFScheduleFouriervolumemorphingInProceedingsoftheACMSpecialInterestGrouponComputerGraphicsSIGGRAPHComputerGraphicsNewYorkACMPress ～ ， LuongQTDericheRFaugerasOetalOndeterminingthefundamentalmatrixanalysisofdifferentmethodsandexperimentalresultsTechnicalReportNoRRNRIAInstitutNationaldeRechercheenInformatiqueetenAutomatique ， XuDanBaoPaulShiJiao － yingImagemosaicsbasedoncomplexwaveletdecompositionJournalofSoftwae ～ 徐丹 鲍歌 石教英 基于 复值 小波 分解 的 图像 拼合 软件 学报 ～ ， StollnitzEJDeroseTDSalesinDHWaveletsforcomputergraphicstheoryandapplicationsSanFranciscoCAMorganKaufmannPublishersInc ， MallatSMultiresolutionapproximationandwaveletorthonormalbasesofLRIEEETransactionsonPatternAnalysisandMachineIntelligenceAmericanMathematicsSociety ～