自动化 学报 ACTAAUTOMATICASINICA 　 Vol 　 No 　 P 受限 柔性 机器人 基于 遗传算法 的 自 适应 模糊控制 樊晓平 　 徐建 闽 毛宗源 摘要 研究 一类 平面 双 连杆 受限 柔性 机器人 的 混合 位置 ／ 力 控制 问题 ， 提出 一种 自 适应 模糊 逻辑 控制 方案 ， 利用 遗传 学习 算法 对 控制器 中 的 参数 进行 学习 和 修正 ， 达到 提高 系统 控制精度 、 改善 系统 鲁棒性 的 目的 计算机 仿真 结果表明 这种 控制器 设计方案 具有 很 好 的 特性 关键词 受限 柔性 机器人 ， 位置 ／ 力 控制 ， 遗传算法 ， 自 适应 模糊控制 GENETICALGORITHMBASEDADAPTIVEFUZZYCONTROLFORCONSTRAINEDFLEXIBLELINKMANIPULATORSFANXiaopingInstituteofInformationandControlEngineeringChangshaRailwayUniversityChangshaXUJianminMAOZongyuanDeptofAutomaticControlEngineeringSouthChinaUniversityofTechnologyGuangzhouAbstractInthispaperthehydridpositionandforcecontrolproblemisdiscussedforaclassofplanartwolinkconstrainedflexiblemanipulatorsAGAbasedadaptivefuzzycontrolschemeispresentedtocontrolthetippositionandthecontactforceandadigitalgeneticalgorithmisusedtoupdatetheparametersofthecontrollersoastoenhancethecontrolprecisionandimprovetherobustnessofthesystemComputersimulationresultsdemonstratethatthecontrollerdesignmethodpresentedherehasverygoodperformanceKeywordsConstrainedflexiblemanipulatorsposition ／ forcecontrolgeneticalgorithmsGAsadaptivefuzzylogiccontrol 引言 　 　 模糊 逻辑 已经 广泛 而 成功 地 应用 于 诸如 电子 防震 摄像机 、 自动 聚焦 照相机 、 洗衣机 、 空气 调节器 、 水泥 窑 等 各种 实用 场合 但是 ， 这种 设计 方法 也 存在 一些 不足之处 首先 ， 模糊控制 规则 都 是 面向 知识 和 经验 的 ， 对 操作者 的 控制策略 建立 可靠 的 语言 模型 并非易事 其次 ， 当 系统 参数 的 变化 超出 操作者 经验 范围 时 ， 需要 对 模糊 控制器 进行 重调 第三 ， 一个 模糊 控制系统 的 动态 性能 不能 先验 确定 因此 ， 模糊 逻辑 控制器 的 应用 也 就 相应 受到限制 ［ ］ 　 　 为了 改善 模糊 逻辑 控制器 的 性能 ， 提高 控制系统 的 鲁棒性 ， LXWang 对 自 适应 模糊 系统 进行 了 深入研究 ， 提出 了 几种 模糊 逻辑系统 训练 和 自 适应控制 的 有效 方法 ［ ］ 此后 ， 一些 改进 的 控制 方案 也 相继 提出 ［ ］ 一般而言 ， 一个 自 适应 模糊 系统 就是 一个 带有 训练 或 学习 算法 的 模糊 逻辑系统 这里 ， 模糊 逻辑系统 是 由 一组 模糊 IFTHEN 规则 构成 ， 而 训练 或 学习 算法 则 依据 输入输出 数据 来 调整 模糊 逻辑系统 的 参数 因此 ， 训练 或 学习 算法 对于 系统 的 控制 性能 起着 十分 重要 的 作用 由于 遗传算法 GAs 是 一种 全局 、 鲁棒且 与 数据 无关 的 搜索 技术 ， 因而 有 可能 成为 自动 、 有效 地 搜索 控制器 参数 以 获得 较 好 控制 性能 的 一种 好 方法 ［ ～ ］ 　 　 本文 利用 遗传算法 杰出 的 寻优 能力 ， 提出 一种 基于 遗传算法 的 自 适应 模糊 逻辑 控制 方案 来 控制 一台 双 连杆 受限 柔性 机器人 终端 执行器 的 运动 该 系统 具有 文献 ［ ］ 所 描述 的 自 适应 模糊 逻辑系统 的 形式 ， 但 控制器 参数 则 利用 一种 简单 而 有效 的 十进制 遗传算法 优化 程序 进行 确定 受限 柔性 机器人 的 动力学 模型 　 　 考察 图 所示 由 一根 刚性 连杆 和 一根 柔性 前臂 构成 的 受限 机器人 系统 假设 系统 末端 要求 在 一 光滑 曲面 上 滑动 ， 即受 如下 约束 ： Φ xy 　 图 受限 平面 两 自由度 柔性 机器人 式 中 x ， y 是 某 一 平面 上 的 惯性 笛卡尔 坐标 变量 图中 ， θ θ 分别 是 关节 的 转角 和 关节 的 虚拟 转角 ， wrt 记为 柔性 前臂 相对 于 虚拟 刚性 连杆 在 时间 t 和 空间 点 r ≤ r ≤ L 处 的 横向 位移 当 实际 连杆 位置 低于 虚拟 刚性 连杆 时为 正 ， 否则 为 负 ； L 和 L 分别 是 连杆 和 连杆 的 长度 ； fn 是 约束力 接触力 　 　 根据 图 选定 的 坐标 ， 由 振动 理论 知 ， 柔性 前臂 的 横向 位移 wrt 可用 一 截断 的 n 阶 振型 函数 来 表示 ， 即 　 式 中 qit 表示 时变 广义坐标 i … ， n 　 　 于是 ， 利用 文 ［ ］ 中 的 结果 ， 在 一定 假设 条件 下 ， 该 刚性 柔性 机器人 系统 的 动力学 模型 可以 表述 为 　 式 中 其它 各 分量 的 具体 构成 见文 ［ ］ 　 　 上述 模型 还 可 进一步 简化 为 ［ ］ 　 　 式 中 θ Ω θ 是 由 约束方程 所 导出 的 隐 函数 关系 ， 其他 各 元素 定义 见文 ［ ］ 　 　 我们 的 任务 就是 确定 控制 律 τ ， 使得 系统 输出 θ 按照 指定 的 规律 变化 以 保证 机器人 终端 执行器 始终 在 约束 面上 无 滑动 地 移动 ， 并 使 机器人 终端 执行器 与 约束 面 之间 的 接触力 满足 给定 的 要求 自 适应 模糊 逻辑 控制器 　 　 假设 系统 模型 ， 中 函数 矩阵 和 函数 向量 已知 ， 则 可 选择 理想 控制 律为 　 式 中 是 电机 的 期望 转角 ， λ d 是 与 期望 接触力 相对 应 的 期望 lagrange 乘子 ， Kv 和 Kp 是 正常 数 ， Kf ≠ 是 力反馈 增益 代入 原始 模型 和 式 ， 得 闭环 系统 　 　 此时 显然 有 　 即 理想 控制 律 可以 同时 实现 柔性 机器人 终端 执行器 的 混合 位置 ／ 力 控制 然而 ， 遗憾 的 是 ， 由于 函数 矩阵 和 函数 向量 在 实际 控制 过程 中 往往 是 未知量 且 难以 精确 辨识 ， 上述 理想 控制 律 τ 一般 无法 实现 ， 因而 也 就 不能 获得理想 的 控制 效果 　 　 为了 改善 控制 ， 解决 模型 不 准确 或 未知 时 的 控制 问题 ， 人们 提出 采用 模糊 逻辑系统 方法 来 实现 模糊 逻辑 控制 业已 证明 ， 自 适应 模糊 逻辑系统 可以 任意 精度 逼近 任何 实 连续 非线性 函数 ， 即 有 如下 万能 逼近 定理 UniversalApproximationTheorem 成立 ： 　 　 定理 ［ ］ 对于 紧集 U ∈ Rn 上 任何 给定 的 实 连续函数 g 和 任意 ε ， 必 存在 一个 模糊 逻辑系统 f 　 使得 　 式 中 各 参数 可 根据 自 适应 律 加以 确定 　 　 利用 文 ［ ， ］ 类似 的 思想 ， 可 将 控制器 设计 为 模糊 自 适应控制 律 τ τ cx ｜ γ ， 　 式 中 γ 为 系统 的 可调 参数 向量 ， x 为 系统 状态 向量 ， 　 　 选取 单点 singleton 模糊化 、 中心 平均 去 模糊化 、 Gauss 隶属 函数 以及 和积 模糊推理 规则 ， 于是 ， 模糊 自 适应控制 律 τ cx ｜ γ 可以 写成 式 的 形式 　 其中 M 为 规则 数 ， k 为 状态 数 ， k ， 为 第 l 条 规则 中 结论 隶属 度为 所 对应 的 输出 值 向量 ， 分别 为 第 i 个 状态 对应 于 第 l 条 规则 隶属 函数 的 期望 均值 和 方差 显然 ， 该 模糊 逻辑系统 的 可调 参数 为 它们 分别 满足 约束 关系 ： 为 分析 简单 起 见 ， 不失 一般性 ， 假设 　 　 于是 ， 根据 定理 的 结果 ， 我们 有 如下 命题 成立 ： 　 　 命题 若能 恰当 选择 系统 可调 参数 向量 γ ， 使得 　 则 将 同时 实现 柔性 机器人 终端 执行器 的 混合 位置 ／ 力 控制 基于 遗传算法 的 参数 学习 算法 　 　 由 命题 可知 ， 为了 获得 良好 的 控制 效果 ， 必须 首先 恰当 地 选择 或 确定 自 适应 模糊 逻辑系统 中 的 各个 参数 为此 ， 结合 图 的 遗传 搜索 过程 ， 我们 提出 如下 遗传 学习 算法 ： 图 遗传 搜索 过程 结构 示意图 　 　 步骤 在 解 空间 上 随机 产生 初始化 种群 种群 大小 取为 N 可调 参数 包括 和 因而 必须 对 所有 参数均 设定 初始化 种群 ， 其 变化 范围 分别 为 … M 当 控制 对象 参数 发生变化 时 ， 上述 参数 变化 范围 也 应作 相应 修改 　 　 Step 根据 性能 要求 确定 适应度 函数 由于 控制 目的 是 使得 受控对象 — — 柔性 机器人 的 末端 位置 和 接触力 满足 给定 指标 要求 ， 我们 可以 取 适应度 函数 为 　 式 中 C 是 一个 很大 的 正数 ， 用以 保证 fitness 　 　 步骤 计算 所有 染色体 的 适应度 　 　 步骤 按 轮盘 赌 方式 ， 按 一定 的 概率分布 从 当前 种群 中 产生 候选 的 复制 输出 这样 将 使得 具有 较 高 适应度 的 染色体 有 更 多 的 子代 遗传 到 下一代 　 　 步骤 对于 被 选定 复制 的 染色体 ， 产生 一个 与其 适应度 成正比 的 复制品 ， 并 送入 配对 池 作为 新 的 父代 　 　 步骤 利用 浮点 交叉 和 变异 算子 ， 通过 交叉 和 变异 产生 新 的 种群 浮点 交叉 算子 的 基本功能 是 ： 随机 选取 两个 父代 染色体 彼此 交换 遗传信息 以 产生 两个 新 的 子代 染色体 ， 直到 获得 与 原种 群 相同 个数 的 染色体 为止 一般 情况 下 ， 交叉 率 crossoverrate 常选为 左右 这种 浮点 交叉 算子 可以 用 数学 描述 为 IF 父 代为 ω n ， kf 和 ω n ， kf ， THEN 　 　 图 十进制 浮点 遗传算法 功能 框图 上式 中 α ∈ ， 是 一个 随机数 变异 过程 则 是 按照 一定 的 变异 概率 一般 取 ～ 左右 改变 选定 个体 的 遗传信息 ， 从而 引入 新 的 遗传信息 得到 新 的 个体 的 过程 假设 选定 的 个体 由 十进制 数对 ω n ， kf 描述 ， 其 在 变异 时 的 最大 变化 量 分别 为 ω nmaxkfmax ， 则 经过 变异 后 的 新 个体 变为 　 式 中 α α ∈ ， 均 为 随机数 　 　 Step 重复 以上 步骤 ， 直至 找到 最优 解 为止 　 　 上述 流程 可以 用图 所示 的 十进制 浮点 遗传算法 计算 框图 表示 计算机 仿真 　 　 考虑 一台 平面 双 连杆 受限 柔性 连杆 机器人 ， 其 结构 参数 见文 ［ ］ 要求 该 机器人 的 终端 执行器 在 约束 面 YX 上 运行 ， 且 沿 约束 表面 法线 方向 的 接触力 保持 为 希望 值 于是 ， 对应 的 约束条件 变为 　 由此 容易 得到 对应 的 隐 函数 关系 θ Ω θ 　 　 假设 要求 机器人 系统 终端 执行器 与 约束 面 之间 的 接触力 为 fdnN 于是 ， 容易 求得 系统 的 期望 Lagrange 算子 为 　 　 　 利用 前述 遗传 学习 算法 对 上述 实验 机器人 进行 计算机 仿真 设定 遗传算法 中 的 选择 概率 为 ， 交叉 概率 为 ， 变异 概率 为 ， 适应度 函数 中 的 常数 C 选择 为 于是 ， 经过 次 迭代 学习 后 分别 得到 受限 柔性 机器人 的 连杆 实际 输出 转角 和 Lagrange 算子 变化 曲线 如图所示 作为 对比 ， 以上 各图 中 同时 还 画出 了 各自 的 期望 曲线图 则 是 机器人 终端 执行器 与 接触面 之间 的 接触力 曲线 — — 期望 曲线 实际 曲线图 期望 输出 变化 曲线 和 实际 输出 变化 曲线图 期望 和 实际 接触力 f 变化 曲线 结论 　 　 本文 利用 遗传算法 GAs 讨论 了 受限 柔性 机器人 自 适应 模糊 逻辑 控制器 设计 问题 ， 提出 了 对 控制器 参数 进行 调整 的 遗传 学习 算法 利用 业已 建立 的 简化 的 受限 柔性 机器人 动力学 模型 ， 借助于 文 ［ ］ 研究 的 自 适应 模糊 逻辑 系统结构 ， 通过 遗传 学习 算法 对 控制器 参数 进行 学习 和 调整 ， 实现 了 对 受限 柔性 机器人 的 混合 位置 ／ 力 控制 计算机 仿真 结果表明 ， 本文 提出 的 基于 遗传算法 的 自 适应 模糊 逻辑 控制 方案 既 具有 很 高 的 控制精度 ， 又 克服 了 一般 模糊 逻辑系统 参数 难以 优化 设计 的 困难 ， 是 一种 有效 的 受限 柔性 机器人 智能 控制 的 好 方法 樊晓平 年 生年 月 、 年 月 和 年 月 分别 在 江西 工学院 电机工程 系 、 长沙 铁道 学院 电子 工程系 和 华南理工大学 自动控制 工程系 获工学 学士 、 硕士 和 博士学位 现任 长沙 铁道 学院 信息 与 控制工程 研究所 所长 、 教务处 处长 、 教授 目前 的 研究 领域 为 自 适应控制 ， 鲁棒控制 ， 智能 控制 ， 机器人 控制 ， CIMS 等 徐建 闽 年 生年 月 在 江西 工学院 电机工程 系 获工学 学士学位 ， 年 和 年 分别 在 华南理工大学 自动化系 获工学 硕士 和 博士学位 现任 华南理工大学 科研 处处长 教授 ， 博士生 导师 主要 研究 领域 为 自 适应控制 、 鲁棒控制 、 智能 控制 、 现代 交通 工程 ， CIMS ， 机器人 控制 等 毛宗源 年 生年 大连 工学院 船厂 船舶 电气 自动化 专业 毕业 现为 华南理工大学 自动控制 工程系 教授 、 博士生 导师 主要 研究 领域 为 工业 自动化 、 模糊控制 、 神经网络 、 智能 控制 等 国家自然科学基金 和 湖南省 自然科学 基金 JJY 资助 项目 樊晓平 长沙 铁道 学院 信息 与 控制工程 研究所 长沙 徐建 闽 华南理工大学 自动控制 工程系 广州 毛宗源 华南理工大学 自动控制 工程系 广州 参考文献 ， ZhangBSEdmundsJMSelforganizingfuzzylogiccontrollerInIEEProceedingsD ， ， ： ～ ， WangLXAdaptiveFuzzySystemsandControlDesignandStabilityAnalysisEnglewoodCliffsPTRPrenticeHall ， 张乃尧 ， 金晖 对 稳定 的 模糊 自 适应控制 方案 的 研究 与 改进 自动化 学报 ， ， ： ～ ， FanXiaopingXuJianminMaoZongyuanZhouQijieAdaptivefuzzycontrolofconstrainedflexiblelinkanipulatorsIntJofPlantEngineeringandManagement ， ： ～ ， TarngYSYehZMNianCYGeneticsynthesisoffuzzylogiccontrollersinturningFuzzySetsandSystems ， ： ～ ， ShiGAgeneticalgorithmappliedtoaclassicjobshopschedulingproblemInternationalJournalofSystemsScience ， ： ～ ， GeSSLeeTHZhuGGeneticalgorithmtuningofLyapunovbasedcontrollersAnapplicationtoasinglelinkflexiblerobotsystemIEEETransIndustrialElectronics ， ： ～ ， 樊晓平 ， 颜 全胜 ， 徐建 闽 等 平面 双 连杆 受限 柔性 机器人 臂 的 动力学 建模 控制 理论 与 应用 ， ， ： ～ ， 樊晓平 ， 徐建 闽 、 毛宗源 等 平面 双 连杆 受限 柔性 机器人 臂 的 模型简化 及其 控制 高技术 通讯 ， ， ： ～ 收稿 日期 收 修改稿 日期