　 自动化 学报 ACTAAUTOMATICASINICA 年 第卷 第期 volNo 基于 IDEF 的 CIMS 底层 控制 Petri 网 模型 的 自动 生成 方法 王君英 　 段 广洪 　 　 摘 　 要 　 IDEF 广泛 用于 CIMS 的 功能 说明 ， Petri 网 适用 于 对 离散 事件 动态 系统 建模 在 CIMS 中 ， 两者 结合 起来 ， 对于 CIMS 底层 控制 、 生产 调度 、 动态 仿真 都 具有 重要 意义 文中 研究 了 IDEF 的 形式化 描述 方法 ， 讨论 了 有关 概念 ， 给出 了 由 IDEF 生成 Petri 网 的 形式化 方法 ， 并用 一例 说明 其 整体 思想 　 　 关键词 　 IDEFIntegratedcomputeraidedmanufacturingDEFinitionmethod ， 控制 ， CIMS ， Petri 网 THEAUTOMATICGENERATIONMETHODOFPETRINETMODELFORLOWLEVELCONTROLOFCIMSBASEDONIDEFWANGJUNYINGDUANGUANGHONGCIMSERCTsinghuaUniversityBeijing 　 　 AbstractIDEFiswidelyusedinthefunctionmodelingofCIMSandPetrinetsaresuitableformodelingofdiscreteeventdynamicsystemsItisofimportantsignificanceforthelowlevelcontrolofCIMSproductionscheduleanddynamicsimulationthatbothsarecombinedinthefieldofCIMSlowlevelcontrolThispaperdescribestheformalnotationofIDEFdiscussestherelevantconceptsandgivestheformalmethodofgeneratingPetrinetfromIDEFAtlastanexampleisgiventoillustratetheidea 　 　 KeywordsIDEFcontrolCIMSPetrinet 　 　 　 引 　 言 　 　 IDEF 是 美国空军 资助 由 SoftTech 公司 开发 的 ， 适用 于 复杂 系统 的 功能 说明 ， 已 在 CIMS 中 得到 了 广泛应用 对 CIMS 的 控制 功能 说明 ， IDEF 得到 的 是 一个 静态 的 分布式 功能 模型 ， 其中 内含 了 并发 性 对于 控制 一个 系统 来说 ， 仅仅 有 静态 的 信息 是 远远不够 的 ， 还要 了解 其 动态 特性 ， 如 冲突 、 死锁 、 工件 生产 中 的 瓶颈 等 因此 ， 人们 希望 能 从 IDEF 直接 生成 一种 动态 模型 Petri 网在 许多 方面 都 与 IDEF 有 相同 或 相近 的 特性 ， 如 结构 、 分布 性 、 并发 性 等 故 从 IDEF 生成 Petri 网 的 研究 就 成为 国际 上 关注 的 焦点 之一 ［ ， ］ 　 　 　 IDEF 对 CIMS 底层 控制系统 的 建模 　 　 在 CIMS 底层 控制系统 中 采用 IDEF 建模 的 主要 思想 是 　 　 系统 是 由 活动 组成 ， 每个 活动 用 一个 活动 方框 表示 ； 　 　 活动 方框 中 的 机制 是 完成 该 活动 的 执行者 ， 这些 执行者 可能 是 加工 中心 、 AGV 、 机器人 等 ， 且 可以 共享 ； 　 　 每个 活动 一定 要 有 一个 控制 信号 作为 进入 该 活动 的 主令 信号 ； 　 　 每个 活动 一定 要 有 一个 输出 信号 作为 该 活动 结束 信号 　 　 　 IDEF 的 形式 描述 　 　 设 IDEF 是 一个二元 组 　 IDEFAL 　 　 其中 A 是 一个 类似 于 BNF 产生 式 的 表达式 ， 表示 IDEF 图 的 结构 、 层次 和 组成 的 活动 方框 ， 可 表示 为 A ∷ A ｜ A ｜ A … ｜ AnA ∷ A ｜ A … A ∷ A ｜ A … … 　 　 通过 回代 ， A 可 表示 为 由 根 结点 活动 方框 组成 的 结构 ； L 表示 由根 结点 活动 方框 组成 的 关系式 Aij ∶ I ∧ C ∧ M → OI 为 输入 集合 ， C 为 控制 集合 ， M 为 机制 ， ∧ 为 逻辑 与 ， → 表示 生成 ； 例如 ， i ∧ i ∧ c ∧ M → o ∧ o 读作 ： 输入 i 和 i 在 c 控制 下 ， 由 M 完成 ， 生成 o 和 o 这里 应当 注意 选择 和 冲突 问题 ， 在 形式化 建模 时 ， 认为 选择 和 冲突 都 是 一个 变量 ， 在 Petri 网中 ， 由 运行机制 决定 了 其 是 选择 和 冲突 功能 　 　 形式化 的 具体方法 是 　 　 列出 由根 结点 活动 方框 的 关系式 ； 　 　 以根 结点 活动 方框 为行 ， 以 所有 箭头 为列 选择 和 冲突 作为 一个 箭头 ， 文中 暂 不 考虑 其他 种类 箭头 的 合并 ， 得到 一个 IDEF 性能 矩阵 D 　 　 根 结点 活动 方框 关系式 的 输入 是 指 I 和 C ， 相同 机制 合并 为 一个 　 　 　 Petri 网 模型 自动 生成 　 　 Petri 网 关联矩阵 的 生成 　 　 　 Z 阵 　 　 Z 阵是 一个 表示 根 结点 活动 方框 过程 的 矩阵 　 　 　 　 　 D 阵 　 　 其中 Dij 是从 D 中 分裂 出不含 机制 的 性能 矩阵 　 　 　 D 阵 　 　 其中 Dij ， 是 机制 关联矩阵 则 Petri 网 的 关联矩阵 为 　 　 CZDD 　 　 　 初始 标识 的 构成 　 　 直接 从 IDEF 图上 并 没有 Petri 网 初始 标识 的 信息 但是 ， 有些 东西 是 客观存在 ， 例如 机器人 、 加工 中心 等 ， 它们 在 参与 加工 的 过程 中 ， 始终 不会 消失 ， 即 守恒 因此 ， 有关 机制 的 标识 应 在 没有 参与 加工 时为 设 P 为 机制 集合 ， 如果 pi ∈ P ， 则 Mpi 　 　 表示 加工 物流 的 工件 ， 在 加工 中 数量 是 守恒 的 ， 其 初始 标识 应在料 坯库 中 ， 且 与 数量 有关 设 S 为料 坯库 ， MSnn 为 S 中存 的 料坯数 对于 信息流 ， 必须 给出 能 使 系统 工作 的 第一个 信号 signal 在 信息流 回路 中 ， 这个 信号 的 加权 托 肯数 是 守恒 的 ， Msignal 　 　 　 例 　 子 　 　 某一 CIMS 底层 车间 由 两台 数控车床 、 两台 数控铣 床 、 一台 机械手 、 输入 料 缓冲区 、 输出 料 缓冲区 及 单元 控制器 组成 该 系统 同时 加工 两种 工件 ， 工件 先 在 车床 或 上 加工 ， 然后 再 在 铣床 上 加工 ； 工件 先 在 车 床上 加工 ， 然后 在 铣床 或 上 加工 ； 整个 过程 用 机械手 来 上下 料 　 　 其 形式化 表示 为 IDEFALIDEF 的 结构 为 　 　 A ∷ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A ｜ A 工件 的 关系式 　 　 　 　 　 　 　 　 　 　 　 　 工件 关系式 A ∶ p ∧ s ∧ c → c ∧ d 　 　 　 　 　 　 　 A ∶ p ∧ e ∧ s → e ∧ fA ∶ c ∧ d ∧ M → c ∧ d 　 　 　 　 　 　 　 A ∶ e ∧ f ∧ M → e ∧ fA ∶ c ∧ d ∧ L → c ∧ d 　 　 　 　 　 　 　 A ∶ e ∧ f ∧ L → e ∧ fA ∶ c ∧ d ∧ L → c ∧ d 　 　 　 　 　 　 　 A ∶ e ∧ f ∧ M → e ∧ fA ∶ c ∧ d ∧ M → c ∧ d 　 　 　 　 　 　 　 A ∶ e ∧ f ∧ X → e ∧ fA ∶ c ∧ d ∧ X → c ∧ d 　 　 　 　 　 　 A ∶ e ∧ f ∧ X → e ∧ fA ∶ c ∧ d ∧ M → c ∧ d 　 　 　 　 　 　 　 A ∶ e ∧ f ∧ M → e ∧ fA ∶ c ∧ d ∧ s ′ → p ′ ∧ c 　 　 　 　 　 A ∶ e ∧ f ∧ s ′ → p ′ ∧ e 为了 节约 篇幅 ， 此处 略去 各 符号 的 意义 　 　 所 得到 的 Petri 网 如图所示 其中 qqqqqqqq 为 活动 过程 位置 元素 图 初始 标识 为 　 　 物流 ： MpMp 　 　 机制 ： MsMsMMMLMLMXMX 　 　 信息 ： McMeMf 有 了 上述 模型 ， 就 可以 动态 仿真 、 分析 和 控制 该 系统 作者 单位 ： 清华大学 国家 CIMS 工程 研究 中心 　 北京 　 参考文献 　 　 MohsenAJafariThomasOBoucherArulebasedsystemforgeneratingaladderlogiccontrolprogramfromahighlevelsystemmodelJournalofIntelligentManufacturing 　 　 ThomasOBouchermohsenAJafariDesignofafactoryfloorsequencecontrollerfromahighlevelsystemspecificationJournalofManufacturingsystem 收稿 日期