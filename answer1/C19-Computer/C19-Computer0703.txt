自动化 学报 ACTAAUTOMATICASINICA 年 第卷 第期 VolNo 基于 神经网络 的 通用 软 测量 技术 王旭东 　 邵惠鹤 关键词 　 软 测量 ， RBF 神经网络 ， 竞争 学习 ， 精馏塔 THEGENERALSOFTSENSORBASEDONNEURALNETWORKSWANGXUDONG 　 　 SHAOHUIHEInstituteofAutomationShanghaiJiaotongUniversityShanghai 　 Keywords 　 SoftsensorRBFneuralnetworkcompetitivelearningdistillationcolumn 　 引言 　 　 目前 建立 软 测量 模型 有 多种 方法 ， 但是 还 缺乏 通用性 ， 通常 一种 方法 往往 难以 适应 不同 的 工业 过程 ， 甚至 同 一类 工业 过程 不同 的 装置 也 难以 适应 如罗荣富 等 ［ ］ 用 趋化性 神经网络 成功 地 建立 了 精馏塔 产品 成分 估计 的 软 测量 模型 ， 并 将 其 用于 精馏 过程 推断 控制 可是 这 类 方法 在 更换 装置 时 必须 重新 设计 神经网络 结构 ， 因为 神经网络 隐含 层 单元 的 确定 需要 人 的 介入 ， 因此 软 测量 模型 缺乏 通用性 从而 影响 它 的 推广应用 　 RBF 神经网络 与 软 测量 模型 的 通用性 　 　 建立 软 测量 模型 可以 从 两个 方面 入手 ， 一是 分析 工业 过程 的 机理 得到 机理 模型 ； 另 一种 是 通过 反映 过程 运行 的 数据 直接 建立 模型 由于 机理 方程 推导 和 运算 的 复杂性 ， 通常 采用 第二种 方法 在 这类 方法 中 ， 基于 前向 神经网络 建立 软 测量 模型 是 比较 有效 的 一种 ， 因为 神经网络 能够 较为 有效 地 处理过程 的 非线性 和 滞后 ， 同时 它 不 需要 很多 工业 过程 的 先验 知识 ， 而是 根据 输入输出 数据 直接 建模 由于 许多 前向 网络 隐含 层 神经 单元 难以 在 算法 中 确定 出来 ， 在 网络 训练 时 需要 人为 地 选择 隐含 层 神经元 数目 ， 因此 阻碍 了 软 测量 模型 的 灵活性 与 其它 前向 网络 相比 ， RBF 神经网络 不但 具有 良好 的 逼近 性能 ， 而且 可以 在 网络 训练 过程 中 由 算法 确定 隐含 层 神经元 的 个数 因此 RBF 神经网络 不仅 能够 很 好 地 建立 软 测量 模型 ， 而且 保证 了 软 测量方法 的 通用性 　 　 训练 RBF 网络 所 需要 确定 的 参数 主要 有基 函数 的 中心 、 隐含 层 神经元 个数 及 网络 输出 权值 基 函数 的 中心 可以 采用 Kmeans 法 、 竞争 学习 等 方法 实现 ； 网络 的 输出 权值 可以 采用 多种 方法 实现 ， 最为 常用 的 是 正交 最小 二 乘法 OLSOrthogonalLeastSquares ［ ］ OLS 很 好地解决 了 网络 权值 的 计算 和 隐含 层 神经元 个数 的 确定 问题 ， 因此 它 使 基于 RBF 神经网络 的 软 测量 模型 具有 较 好 的 通用性 将 这种 软 测量方法 挂 接到 工业 控制 软件平台 上 ， 对 使用者 来说 十分 方便 基于 OLS 法 训练 RBF 神经网络 存在 的 问题 ， 作者 在 文献 ［ ］ 做 了 一些 改进 　 竞争 学习 实现 的 递阶聚类 　 　 利用 神经网络 可以 实现 对于 给定 学习 样本 的 拟合 ， 而且 学习 的 精度 可以 非常 高 但是 如果 学习 样本 存在 严重 的 非线性 或 存在 某种 矛盾 ， 那么 利用 神经网络 完成 拟合 是 很 困难 的 在 这种 情况 下 如果 要 实现 所 需 的 训练 精度 ， 会 造成 网络 非常 庞大 、 学习 时间 长 、 运算 十分复杂 和 过 拟合 问题 ， 造成 训练 后 网络 的 性能 差 根据 这些 情况 ， 可 将 学习 样本 集 按照 某种 标准 进行 划分 ， 使 划分 后 得到 的 子类 比较 容易 用 神经网络 学习 对于 给定 的 样本 集合 ， 每个 样本 的 类 属 往往 不 明确 ， 因此 要 一步 完成 整个 样本 集 的 划分 是 有 困难 的 为了 解决 这个 问题 ， 提出 递阶聚类 的 方法 　 　 假定 样本 集为 S ｛ Xii … ， N ｝ ， Xi 是 样本 ， N 是 样本 数目 首先 采用 改进 的 竞争 学习 方法 将 S 分解成 M 个子 类 Si ｛ Xjj … ， Ni ｝ i … ， M ， Ni 是 第 i 个子 类 的 样本数 ， 这是 第一级 的 分解 ； 然后 将 其中 的 一些 子类 继续 进行 第二级 的 分解 ， 如此 递阶 就是 递阶聚类 的 思想 判断 某 一级 的 子类 是否 应该 继续 分解 需要 根据 RBF 网络 的 学习 情况 而定 这种 分解 中止 判据 的 可操作性 是 和 RBF 神经网络 的 结构 特点 、 训练方法 密切相关 的 RBF 神经网络 具有 参数 线性化 的 特点 以及 OLS 算法 可以 自动 寻找 网络 隐含 层 神经元 数目 ， 而且 不 存在 局部 极小 化 问题 因此 RBF 神经网络 学习 某个 样本 集时 不 需要 加入 人为 的 调节 同时 在 作者 改进 的 RBF 神经网络 训练方法 中 ［ ］ ， 为了 提高 网络 的 综合性 能 ， 网络 训练 的 中止 条件 加入 了 防止 过 拟合 的 约束条件 ， 而 不 单纯 看 网络 的 训练 精度 这种 改进 保证 了 网络 学习 精度 足够 时 网络 的 性能 也 较 好 ， 这样 当 网络 训练 完成 时 ， 可以 从 精度 上 判断 某个 子类 是否 需要 进一步 分解 如果 RBF 神经网络 学习 某个 子类 后 精度 不够 ， 那么 这个 子类 就 需 进一步 的 分解 ， 否则 该 子类 不必 分解 这种 方法 易于 用 软件 实现 递阶聚类 的 思想 如图所示 图 　 递阶聚类 　 　 聚类 的 方法 有 许多种 ， 其中 竞争 学习 是 一种 非 监督 的 学习 方法 ， 可以 较 好 地 完成 聚类 RPCLRivalPenalizedCompetitiveLearning 方法 是 一种 较为 有效 的 竞争 学习 方法 但是 由于 RPCL 方法 中 蕴含着 FSCLFrequencySensitiveCompetitiveLearning 法 ， 这会 造成 学习 中 存在 一定 的 矛盾性 FSCL 方法 的 主要 思想 是 增加 获胜 机会 少 的 竞争 单元 更 多 获胜 的 机会 ， 而 PRCL 方法 的 思想 是 让 竞争 次 胜者 远离 最终 的 聚类 点 ， 从而 剔除 多余 单元 因此 如果 将 二者 融合 在 一个 算法 中 ， 就 会 造成 RPCL 法 的 惩罚 效果 不 明显 ， 竞争 的 次 胜 单元 经常 转化成 获胜 单元 这样 多余 的 单元 在 远离 最终 聚类 点 一段距离 后 又 重新 回来 ， 并且 始终 处于 这种 振荡 之中 ， 因此 多余 的 竞争 单元 数目 不能 剔除 ， 造成 竞争 学习 得不到 正确 的 结果 在 文献 ［ ］ 中以 实例 说明 和 改进 了 这个 问题 结合 改进 的 RPCL 法 和 递阶聚类 的 思想 可以 实现 样本空间 的 有效 划分 ， 便于 用 RBF 神经网络 学习 每 一个 子 样本空间 　 分布式 RBF 网络 及其 综合 　 　 当 复杂 的 样本空间 用 递阶聚类 思想 实现 样本空间 划分 后 ， 每个 子 样本空间 都 能 容易 地 由 RBF 神经网络 完成 学习 任务 对 整个 样本空间 而言 ， 是 许多 网络 分布 在 各个 子 样本空间 完成 学习 任务 的 ， 这样 一个 分布式 的 网络 不利于 应用 ， 因此 需要 将 网络综合 起来 网络综合 的 方法 较 多 ， 本文 选用 模糊 分类器 将 网络综合 ， 如图所示 图中 的 模糊 分类器 是 网络综合 的 工具 ， 具体方法 如下 图 　 分布式 RBF 网络 的 综合 　 　 假定 图中 分布式 网络 具有 M 个子 网络 ｛ RBFii … ， M ｝ ， 新 的 过程 输入 X 对 每个 子 网络 的 隶属 度为 ｛ μ ii … ， M ｝ ， 那么 整个 网络 的 输出 Y 为 　 　 　 　 输入 X 对 每个 子 网络 隶属 度 可以 采用 下述 方法 确定 ： 首先 确定 输入 X 对 学习 样本 集中 每 一个 样本 Xi 的 隶属 度 ， 然后 根据 这些 隶属 度 确定 输入 X 对 每个 子 网络 的 隶属 度 方法 如下 　 　 选定 性能指标 　 　 并且 满足 η i 的 确定 可以 通过 式 最小化 求 出 利用 Lagrangian 拉格朗 日 乘子法 可以 解 出 η i ， 即 η i 　 　 η j ≠ i ， 　 　 ifdi 　 　 i … ， N ， 　 　 输入 X 对 与 网络 RBFi 的 隶属 度为 　 　 式 中 Ni 是 第 i 个子 网络 的 学习 样本 数目 　 软 测量 模型 建立 的 实例 　 　 某 炼油厂 精馏塔 由 两个 塔 A ， A 串接 后 共同完成 气体 分离 任务 其中 塔 A 的 塔底 产品 B ， 其中 主要 成分 是 丙烷 ， 而塔 A 的 塔顶 产品 D ， 其中 主要 成分 是 丙烯 为了 估计 产品 B 中 的 丙烷 含量 CB 和 产品 D 中 的 丙烯 含量 CD ， 可 利用 分布式 RBF 神经网络 建立 软 测量 模型 根据 对 该 精馏塔 系统 的 了解 和 分析 ， 选择 辅助 变量 为塔 A 的 温差 Δ TA ， 塔 A 的 温差 Δ TA 以及 塔 A 顶部 的 压力 PCB ， CD 数据 可 从 炼油厂 的 分析 报表 中 收集 ， 然后 对应 地 从 操作 数据 中 收集 Δ Τ A ， Δ Τ A ， P 的 数据 在 样本 聚类 之前 ， 首先 将 样本 归一化 ， 然后 根据 归一化 的 学习 样本 ， 以 过程 的 输出 变量 为 基准 ， 将 学习 样本 进行 递阶 分类 图是 学习 样本 集 第一次 聚类 后 的 结果 第一次 聚类 将 学习 样本 分成 类 ， 然后 继续 将 这类 分别 聚类 ， 如此 递阶 执行 ， 得到 了 个子 类 ， 这个 子类 分别 用个 RBF 神经网络 去 学习 图是 第一次 聚类 后 第五个 子类 二次 聚类 的 结果 　 　 学习 样本 经聚类 、 学习 之后 得到 分布式 RBF 神经网络 运用 模糊 分类器 进行 综合 ， 这个 综合 的 分布式 RBF 神经网络 不但 能够 重现 学习 数据 ， 而且 给定 新 的 过程 输入 可以 较为理想 地 估计 过程 的 输出表 反映 了 RBF 神经网络 软 测量 模型 对 过程 输出 的 估计 是 有效 的 图 　 学习 样本 输出 变量 第一级 分类 的 结果 图 　 一阶 分类 后 第五类 的 再 聚类 结果 表 　 软 测量 输出 与 过程 实际 输出 的 比较 CD 的 软 测量 值 CB 的 软 测量 值 CD 的 实际 值 CB 的 实际 值 　 　 为了 进一步 检验 分布式 RBF 神经网络 软 测量 的 效果 ， 用 标准 方差 进行 检验 和 比较 表是 分布式 RBF 神经网络 软 测量 估计 器 和 基于 卡尔曼滤波 实现 的 估计 器 之 标准 方差 比较 表 　 　 由表 可知 利用 分布式 RBF 网络 建立 的 软 测量 模型 可以 较为理想 地 完成 对 精馏塔 产品 成分 的 估计 表 　 两种 估计 器 标准 方差 的 比较 输出 变量 RBF 神经网络 软 测量 的 标准 方差 卡尔曼滤波 估计 器 的 标准 方差 D 中 的 丙烯 含量 CD 摩尔 分数 摩尔 分数 B 中 的 丙烷 含量 CB 摩尔 分数 摩尔 分数 　 通用 软 测量方法 与 控制 软件平台 的 关系 　 　 本文 从 RBF 神经网络 的 特点 出发 ， 提出 了 一种 通用 的 神经网络 软 测量 模型 的 建立 方法 设计 通用 软 测量 模型 的 方法 在 开发 工业 控制软件 中 具有 非常 重要 的 意义 由于 RBF 神经网络 的 特点 ， 利用 分布式 RBF 神经网络 的 方法 在 建立 软 测量 模型 时 不 需要 加入 人为 的 干预 ， 软件 使用者 只 需要 根据 工业 过程 的 背景 选择 好 辅助 变量 和 主导 变量 、 收集 过程 的 数据 即可 因此 这种 软 测量方法 就 可以 作为 一个 工具 放在 控制 软件平台 之上 ， 使用者 可以 很 方便 地 应用 ， 而 不 需要 在 如何 建立 软 测量 模型 上花 时间 ， 具有 较 好 的 通用性 还有 一个 优点 是 通用 软 测量方法 挂接 在 软件平台 上 之后 ， 可以 与 挂接 在 平台 之上 的 其它 控制软件 方便 地 互通信息 例如 设计 好软 测量 模型 之后 ， 平台 上 的 控制 模块 可以 很 方便 地 利用 软 测量 实现 各种 控制策略 国家自然科学基金 资助 项目 作者 单位 ： 上海交通大学 自动化 研究所 　 上海 　 参考文献 　 　 罗荣富 ， 邵惠鹤 分布式 网络 局部 学习 方法 及其 在 推断 控制 中 的 应用 自动化 学报 ， ， ： — 　 　 ChenSCowanCFNGrantPMOrthogonalLeastSquaresLearningAlgorithmforRadialBasisFunctionNetworksIEEETransonNeuralNetworksMarch ， ： — 　 　 王旭东 ， 邵惠鹤 RBF 神经网络 及其 在 非线性 系统 建模 中 的 应用 控制 理论 与 应用 ， ， ： — 　 　 XuLeietalRivalPenalizedCompetitiveLearningforClusteringAnalysisRBFNetandCurveDetectionIEEETransactionsonNeuralNetworks ， ： — 　 　 WangXudongLuoRongfuShaoHuiheDesigningasoftsensorforadistillationcolumnwiththefuzzydistributedradialbasisfunctionneuralnetworkthIEEEConferenceonDecisionandControl — 收稿 日期 　 － －