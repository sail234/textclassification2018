信息 与 控制 InformationandControl 年 　 第卷 　 第期 　 Vol 　 No 　 神经元 自 适应 预测 PID 控制器 及 实现 杨 　 智 　 高 　 靖 　 　 摘 　 要 ： 采用 单 神经元 构成 PID 控制器 ， 并 和 预测 控制 结合 克服 时滞 对 控制系统 的 影响 ． 对大 时滞 大 惯性 的 电 加热炉 的 实时控制 结果表明 ， 这种 自 适应 控制算法 切实可行 ， 且 具有 较强 的 鲁棒性 ， 适合 于 控制 大 时滞 被控 过程 ． 　 　 关键词 ： 神经元 ， 最优 预测 ， PID ， 时滞 系统 ， 工控机 　 　 中 图 分类号 ： TP 　 　 　 　 　 　 文献 标识码 ： BANADAPTIVENEURONPIDCONTROLLERWITHOPTIMALPREDICTIVEANDITSREALIZATIONYANGZhiGAOJingDeptofElectricalandinformationengineeringGansuUnivofTechLanzhouAbstractInthispaperanadaptiveneuronPIDcontrollerwithoptimalpredictionwhichissuitablefortheprocesswithunknowntimevaryingdelaydisturbanceandtimevaryingparametersispresentedThecontrolalgorithmcombinedintelligentcontrolwithpredictivecontrolTherealtimetemperaturecontrolresultoftheelectricalfurnaceshowsthatthepresentedadaptiveneuronPIDcontrollerwithoptimalpredictionmayberealizedandhashighrobustnessespeciallyforthedelaysystemsKeywordsneuron ， adaptivecontrol ， predictivecontrol ， PID ， delaysystems ， industrialprocesscomputer 　 引言 　 　 常规 的 PID 调节器 是 一种 应用 十分 广泛 且 比较 成熟 的 控制算法 ， 对于 受控对象 结构 和 参数 已知 的 场合 ， 可 获得 较 好 的 控制 效果 ． 但 对于 工业 过程 中 常见 的 慢 时变 大 时滞 控制系统 ， 由于 时滞 变化 可能 会 使 系统 不 稳定 ， 常规 的 PID 调节器 不能 获得 良好 的 控制 品质 ． 神经元 自 适应 预测 PID 控制算法 利用 模型 加权 函数 的 误差 函数 确定 时滞 ， 然后 与 预测 控制 的 超前 预测 功能 结合 ， 起到 克服 时变 时滞 的 作用 ， 并 利用 神经元 构成 PID 控制器 实现 参数 自 适应 ． 这种 自 适应 控制算法 适合 控制 有 扰动 ， 参数 时变 尤其 时滞 时变 的 大 时滞 被控 过程 ． 对大 时滞 大 惯性 的 电 加热炉 的 实时控制 表明 ， 提出 的 神经元 自 适应 预测 PID 控制器 切实可行 ， 可以 构成 较 实用 的 工程 控制器 ． 　 神经元 自 适应 预测 PID 控制算法 　 　 神经元 自 适应 预测 PID 控制系统 结构图 如图所示 ． 图 神经元 自 适应 预测 PID 控制系统 结构图 时滞 的 辨识 　 　 假设 被控 过程 的 动态 特性 可用 下列 差分 方程 表示 AzykBzukdCz ε k 　 　 　 　 　 　 　 　 　 　 其中 Azaz … anzn ； Bzbbz … bnznb ≠ ； Czcz … cnznuk 、 yk 分别 是 过程 的 控制 和 输出 序列 ； ε k 是 环境 干扰 ， 为 随机变量 ； 是 输出 对 输入 响应 的 时滞 时间 ， 是 过程 的 阶次 ． 作者 在 文中 ， 用 一个 修正 的 广义 模型 重写 式 ， 得 AzykBzuk 　 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 ， Bzbnz … bnndmaxzndmax ； dmax 是 过程 时滞 时间 的 上限 ， 并 预先 可知 ， 且 ≤ d ≤ dmax ， 则 存在 下列 方程 bii … dbnjbjdjd … ndbllnd … ndmax 用 递推 的 最小 二 乘法 对 修正 的 广义 模型 进行 参数估计 ， 有 Xyk … yknuk … ukndmax 当 k → ∞ 时 ， i 和 l → ， 对于 确定 的 k ， i 、 l 为 一较 小 的 值 ． 辨识 出 z 的 系数 后 ， 就 可 计算误差 函数 Fdd 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 ， ∑ ji … ndmax 当 Fd 为 最 小时 ， 对应 的 d 就是 时滞 时间 ． 最优 预测 的 设计 由 Diophantine 方程 CzAzFzzdGz 　 　 　 　 　 　 　 　 　 　 　 其中 ， Fzfz … fdzdGzggz … gnzn ． 由式 和 式 可得 　 　 以 kdk 表示 根据 k 时刻 输入输出 值 对 kd 时刻 输出量 ykd 的 预测值 ， 可以 找到 一个 最优 d 步 预测 kdk 使 预测 方差 最小 ， 即 满足 下式 Eykdkdk ≤ Eykdkdk 　 　 　 　 　 　 　 　 　 式 中 E 表示 均值 ． 将式 代入 式 ， 可 得 最优 预测 为 　 　 　 　 　 克服 时滞 的 理论 分析 　 　 控制器 按 PID 控制器 设计 ， 有 yrykdkPzRzuk 　 　 　 　 　 　 　 　 　 　 　 　 其中 ， PzppzpzRzz 由式 、 式 和 式 可得 最优 预测 PID 控制系统 的 输出 为 　 若 使用 常规 的 PID 控制器 ， 系统 的 输出 为 　 　 　 　 　 　 由式 看出 ， 最优 预测 PID 控制系统 的 闭环 特征方程 中 已经 没有 时滞 项 ， 即 整个 控制系统 已 消除 了 时滞 对系统 品质 的 影响 ， 而 常规 PID 控制系统 式 的 特征方程 中 仍 有 时滞 项 ． ． 神经元 自 适应 预测 PID 控制器 用 梯度 最小 法 极小 化 目标 函数 ， 得 权值 调整 方程 为 　 　 　 　 　 　 　 　 　 其中 ， η i 为 学习 步长 ， 目标 函数 取为 ： 　 　 　 　 　 　 　 　 　 　 　 式 中 ， yr 为 期望 的 设定值 ， ynkd 为 被控 过程 输出 的 d 拍 超前 最优 预测 ， d 为 时滞 时间 ． 　 　 神经元 的 输出 为 　 　 　 　 　 　 　 　 　 其中 ， kv 为 神经元 放大系数 ， xik 为 神经元 输入 ， 取 xkekek 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 xkek 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 xkekekek 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 ， ek 为 最优 预测值 形成 的 反馈 偏差 ， 用 被控 过程 未来 的 最优 状态 来 控制 其 当前 行为 ， 提高 控制 决策 的 智能性 及 控制系统 的 动态 品质 ， 减小 时滞 对系统 稳定性 的 影响 ． ekyrykd 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 而 ， 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 可 最终 得出 权值 的 修正 公式 为 其中 ， 神经元 放大系数 kv 的 在线 调整 公式 取为 kvkkv α yrykdyr 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 中 ， kv 为 kv 的 稳态 值 ， α 为 调整 系数 一般 取 kv 的 十分之一 ． 该 变换 使 偏差 较大 时 kv 也 较大 ， 增加 响应速度 ； 偏差 较 小时 ， kv 近似 为 kv ， 减小 超调量 ． 　 　 kv 值 的 在线 调整 使得 η i 对 控制 特性 的 影响 甚微 ， 几乎 不予考虑 ． 　 神经元 自 适应 预测 PID 控制器 在 电 加热炉 上 的 应用 　 　 电 加热炉 温度 控制系统 的 硬件 电路 如图所示 ． 图 硬件 电路图 　 　 IPC 工控机 及 GENIE 软件包 是 台湾 研华 公司 生产 的 标准 PC 平台 上 的 工控机 及 组态 软件 ． 其 特点 是 成本低 、 易 掌握 及 功能强大 ． GENIE 运行 于 Windows 环境 下 ， 它 的 实时 性能 好 ， 有 丰富 的 图形用户界面 ， 使用 基于 任务 扫描 的 执行 方式 ． 任务 设计 器 使用 工具箱 ， 大大简化 了 过程 控制 和 数据 采集 ． AD 、 DO 转换 分别 采用 研华 公司 生产 的 PCLL 、 PCL 电路板 ， PCLDD 是 热电偶 输入 模板 ， 它 完成 热电偶 的 冷端 补偿 及 温度 信号 的 放大 与 转换 ． 　 　 根据 控制系统 要求 ， 电阻炉 的 温度 通过 K 型 热电偶 采集 ， 进入 PCLDD 放大 与 冷端 补偿 后 ， 送入 PCLL 完成 AD 转换 ， 将 信号 送给 主机 后 完成 控制算法 得出 控制 量 ， 经 PCL 完成 DO 转换 后 输出 给 端子板 ， 控制 固态 继电器 的 通断 ． 由于 GENIE 自带 有 一套 动态 连接 库 驱动程序 ， 所以 无需 为 外围 电路 编写 驱动程序 ． 　 　 GENIE 的 运行 方式 是 一种 基于 扫描 的 多任务 执行 方式 ， 编程器 使用 类似 于 VB 的 编程语言 ， 本 温度控制 的 软件设计 部分 由 四个 模块 组成 ， 任务 特性 如 表表 任务 特性 表 　 功能 运行 时间 执行 方式 运行 周期 TASK 辨识 、 预测 PID 控制 、 滤波 永远 立即 STASK 占空比 控制 　 命令式 msTASK 初始化 一次 立即 TASK 报警 永远 立即 ms 　 各 模块 中 ， 利用 提供 的 虚拟 标识 来 记录 各 次 控制 量 ， 它 的 值 存在 数据中心 内 ， 具有 全局性 和 开放性 ． 　 　 实时控制 时 ， 为了 防止 kv 设置 过大而达 不到 稳态 值 或 人为 产生 输出 振荡 ， kv 的 设置 应从 百分位 开始 ． 当 输出 超调 过 大 ， 应适当 减小 kv ； 当 输出 跟踪 不上 设定值 ， 应适当 增大 kv ； 若 控制 量 uk 持续增长 直到 上 限值 ， 说明 kv 设置 太 大 ， 应 大幅度降低 ； 若 控制 量 uk 变化 甚微 ， 以至于 输出 值 持续 缓慢 增长 或 缓慢 降低 ， 说明 kv 设置 太小 而 使 神经元 失去 了 自 学习 能力 ， 应 大幅度 的 增大 kv ． 　 　 当 采样 周期 取 s ， 设定值 ℃ ， 取 kv ， 在 个 小时 内 的 炉温 输出 曲线 如图所示 ． 当权 值 已 趋于 稳态 值 ， 控制 量 已 基本 不变 时 ， 炉温 输出 有 ℃ 以内 的 正 偏差 ， ℃ 以内 的 负 偏差 ， 满足 控制精度 要求 ． 图 神经元 自 适应 预测 PID 控制器 温度 　 　 图为 图 的 控制 量 曲线 ． 若 在 ℃ 以前 采用 纯 比例控制 ， 在 ℃ 时 切换 为 提出 的 新 算法 ， 如图所示 控制 超调 小 ， 偏差 在 ± ℃ 以内 ， 控制 效果 更佳 ． 　 　 　 　 　 　 　 　 　 图 控制 量 曲线 　 　 　 　 　 　 　 　 　 　 　 图 改进 初始 控制策略 的 温度 实时控制 结果 　 结论 　 　 提出 的 神经元 自 适应 预测 PID 控制器 ， 能够 提高 控制系统 的 自 适应能力 和 鲁棒性 ， 克服 了 被控 过程 的 时滞 ． 该 控制器 结构 简单 ， 易于 实现 ， 只要 设置 合适 的 kv 值 ， 即可 得到 满意 的 控制 效果 ． 注释 ： 清华大学 智能 技术 与 系统 国家 重点 资助 项目 ； 甘肃省 自然科学 基金 资助 项目 ； 作者简介 　 杨 　 智 ， 男 ， 岁 ， 教授 ． 研究 领域 为 过程 控制 ， 智能 控制 及大 时滞 系统 的 稳定性 及 控制策略 等 ． 　 　 　 　 　 　 高 　 靖 ， 女 ， 岁 ， 硕士生 ． 研究 领域 为 过程 控制 ， 智能 控制 等 ． 作者 单位 ： 甘肃工业大学 电气 与 信息工程 系 　 兰州 　 参考文献 　 LuiXiyuanMansurMStabilityAnalysisandStabilityConditionintheDelayIntervalsforSecondOrderDelaySystemINTJControl ～ 　 刘希远 杨智 陈 铁军 钟春 时变 大 时滞 极点 配置 最优 预报 自 校正 PID 控制器 控制 与 决策 ～ 　 杨智 刘希远 时变 分数 时滞 系统 最优 预报 自 校正 极点 配置 PID 控制算法 控制 理论 与 应用 ～ 收稿 日期 ：