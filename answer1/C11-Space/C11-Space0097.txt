航空 计测 技术 AVIATIONMETROLOGYMEASUREMENTTECHNOLOGY 年 第卷 第期 VolNo 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 梁志国 　 李 少壮 　 李 　 滨 　 　 摘 　 要 　 介绍 了 两种 新 的 精确 评价 数据 采集 系统 的 直流 增益 和 线性 度 的 方法 与 过程 ， 即 “ 按码 精确 评价 法 ” 和 “ 定 间距 为 量化 误差 整数倍 精确 评价 法 ” 。 同时 讨论 介绍 了 方法 的 优缺点 及 应用 。 　 　 关键词 　 数据 采集 系统 　 增益 　 线性 度 　 评价 PreciseEvaluationofDCGainandLinearityofDataAcquisitionSystemLiangZhiguoLiShaozhuangLiBin 　 　 Abstract 　 TwonewevaluationmethodsandprocessesabouttheDCgainandlinearityofdataacquisitionsystemarepresentedinthispaperTheyarepreciseevaluationonquantizationstepsandpreciseevaluationondeterminingdeviationbetweeninputvaluesAtthesametimetheadvantagesdefectsandapplicationofthesemethodsareintroducedanddiscussed 　 　 Keywords 　 DataacquisitionsystemGainLinearityEvaluation 概述 　 　 数据 采集 系统 ， 作为 应用 非常 广泛 的 现代 通用 测量 设备 之一 ， 在 很多 场合 被 用于 各种 参量 和 过程 的 精密 测量 。 无疑 ， 人们 希望 对 其 本身 的 测量 性能 进行 精确 评价 。 本文 所 要 讨论 的 就是 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 问题 。 　 测量 系统 直流 增益 和 线性 度 的 几种 评价 方法 　 　 增益 是 在 稳态 线性系统 中 ， 输出 信号 的 幅值 或 功率 与 相应 输入 信号 的 幅值 或 功率 之 比 。 线性 度 是 校准 曲线 与 规定 直线 的 一致 程度 。 　 　 数据 采集 系统 的 直流 增益 和 线性 度均 属 其 静态 特性 指标 。 静态 特性 指标 的 评价 一般 需要 经过 两个 步骤 ： ① 建立 被 评价 系统 的 输入输出 特性 的 数学模型 传递函数 或 线性方程 式 ， 确定 模型 参数 ； ② 由 数学模型 的 有关 参数 确定 被 评价 的 静态 特性 指标 。 　 　 对于 单 输入 x 单 输出 y 的 线性 测量 系统 来说 ， 其 数学模型 可 写成 y ＝ Gx ＋ d 　 　 其中 ， G 和 d 为 待定 的 模型 参数 　 　 直流 增益 以及 线性 度 这 两个 指标 的 给出 ， 均 是 在 实际 物理 系统 的 输入输出 呈现出 符合 叠加 原理 的 线性关系 下 ， 即 系统 的 数学模型 是 线性方程 式 的 基础 上 定义 的 。 　 　 直流 增益 通常 的 评价 法有 两点 法 、 多点 法 ， 有时 也 使用 三点 法 。 即可 使用 不同 的 方式 和 方法 确定 系统 的 数学模型 线性方程 式 的 系数 G 和 d 。 　 　 两点 法是 在 测量 系统 测量范围 上限 附近 和 下限 附近 各选 一点 ， 分别 输入 信号 x 和 x ， 获得 相应 的 测量 值 输出 y 和 y 。 则 测量 系统 的 模型 参数 G ＝ y － y ／ x － x 　 　 d ＝ yx － yx ／ x － x 　 　 测量 系统 的 直流 增益 就是 G 。 　 　 多点 法是 使用 多于 两个 输入 值点 来 确定 测量 系统 的 数学模型 ， 一般 是 在 系统 测量范围 内 均匀 选取 m 个 输入 值点 xii ＝ ， … ， m ， 获得 相应 的 测量 值 yii ＝ ， … ， m ； 然后 ， 使用 特定 的 数学 处理 方法 ， 如 最小 二 乘法 、 平均 选点 法等 最终 确定 系统 的 数学模型 线性方程 参数 G 和 d 。 则 测量 系统 的 直流 增益 就是 G 。 　 　 三点 法 实际上 是 两点 法 的 一个 特例 ， 它 主要 被 用于 可 测量 正负 信号 的 线性 测量 系统 、 且 正负 量限 的 误差 差别 较大 情况 。 将 其 输入 至正 向 测量范围 和 输入 至 负向 测量范围 分别 用 上述 两点 法来 评价 ， 可 获得 稍 有 区别 的 两个 增益 。 　 　 线性 度 的 评价 ， 基于 不同 方法 获得 的 数学模型 含义 会 略有不同 。 通常 有端 基 直线 法 获得 的 端基 线性 度 ； 最小 二 乘法 基于 上述 多点 法 确定 数学模型 获得 的 独立 线性 度 ； 平均 选点 法 获得 的 独立 线性 度 和 理想 直线 法 获得 的 绝对 线性 度 等 。 与 直流 增益 的 评价 法 略有不同 的 是 ， 每种 线性 度 的 评价 都 要 使用 多个 输入 值点 来 进行 评价 才 可 最终 获得 ， 唯一 有所 相似 的 是 要 首先 确定 其 数学模型 参数 。 　 　 端基 直线 法 类似 于 上述 直流 增益 评价 中 的 两点 法 ， 在 一组 由小到大 排列 的 输入 值 x ， … ， xm 及其 测量 值 y ， … ， ym 中 ， 使用 两个 端点 值 x 与 xm 及其 测量 值 y 和 ym 来 确定 被 评价 系统 的 数学模型 参数 G 和 d ， 则 G ＝ y － ym ／ x － xm 　 　 d ＝ ymx － yxm ／ x － xm 　 　 由该 模型 参数 G 和 d 以及 方程式 所 确定 的 测量 系统 的 回归 特性 曲线 y ＝ Gx ＋ d 从 y ， … ， ym 中 找出 与 回归 特性 曲线 对应点 之差 的 最大值 △ ymax ： △ ymax ＝ max ｜ yi － Gxi － d ｜ i ＝ ， … ， m 　 　 则 测量 系统 的 线性 度 L 为 L ＝ △ ymax ／ Yr 其中 Yr 为 其 量程 。 最小 二 乘法 是 将 输入 值组 x ， … ， xm 及其 测量 值组 y ， … ， ym 按 残差 平方和 最小 的 含义 进行 处理 而 确定 被 评价 系统 的 数学模型 参数 G 和 d ， 则 ： 　 　 　 　 其中 ： 　 　 　 　 　 　 有 了 模型 参数 G 和 d ， 可 经过 与 “ 端基 直线 法 ” 相同 的 过程 ， 通过 公式 、 获得 线性 度 L 。 　 　 平均 选点 法是 将 一组 由小到大 排列 的 输入 值 x ， … ， xm 及其 测量 值 y ， … ， ym 分成 两 部分 ： x ， … ， xk 及 y ， … ， yk 和 xk ＋ ， … ， xm 及 yk ＋ ， … ， ym ， 分别 求出 x ， … ， xk 及 y ， … ， yk 的 平均值 xp 和 yp ， 求出 xk ＋ ， … ， xm 及 yk ＋ ， … ， ym 的 平均值 xpm 和 ypm ， 使用 两个 输入 平均值 xp 与 xpm 及其 测量 值 平均值 yp 和 ypm 来 确定 被 评价 系统 的 数学模型 参数 G 和 d ， 则 G ＝ yp － ypm ／ xp － xpmd ＝ ypm ． xp － yp ． xpm ／ xp － xpm 　 　 同理 ， 使用 模型 参数 G 和 d ， 可 经过 与 “ 端基 直线 法 ” 相同 的 过程 ， 通过 公式 、 获得 线性 度 L 。 　 　 理想 直线 法 ， 是 将 测量 系统 的 模型 参数 G 和 d 按 理想 值 代入 方程 ， 然后 经过 与 “ 端基 直线 法 ” 相同 的 过程 获得 线性 度 L 。 　 　 以上 几种 方法 在 实际 中均 获得 了 广泛 的 应用 。 但是 ， 这 里面 有着 未 予以 特别 指明 然而 客观存在 的 前提条件 ， 它们 一般 是 下述 几种 情况 之一 ： ① 、 被 评价 的 测量 系统 是 没有 量化 误差 的 模拟式 测量 设备 。 ② 、 与 随机误差 或者 非线性 误差 相比 ， 量化 误差 非常 小 ， 以致 可以 忽略 这种 情况 在 微弱 信号 的 测量 中是 常见 的 ； ③ 、 与 被 评价 的 误差 指标 相比 ， 量化 误差 或 其 所 造成 的 影响 可以 忽略 。 　 　 上述 几个 前提 下 的 评价 方法 的 共同 特点 ， 是 直接 应用 到 数据 采集 系统 的 直流 增益 和 线性 度 评价 中 ， 被 评价 指标 结果 波动性 、 离散性 均 较大 ， 尚 不能 称其为 精确 评价 方法 。 因为 它们 的 局限性 相当 明显 ： 当 量化 误差 远大于 随机噪声 或 与其 在 同一 量级 时 常见于 大 信号 测量 情况 ， 评价 结果 将 同时 受 随机误差 和 量化 误差 的 影响 而 呈现 波动性 和 离散性 ， 影响 直流 增益 和 线性 度 的 评价 。 这一 问题 若 不 解决 ， 将 无法 实现 直流 增益 和 线性 度 的 精确 评价 。 　 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 方法 　 　 数据 采集 系统 直流 增益 和 线性 度 精确 评价 的 基本 思想 ， 是 使用 “ 特定 选点 法 ” 消除 输入 点 变化 后 量化 误差 带来 的 波动性 。 同时 假设 在 每 一个 量化 台阶 内 ， 量化 前 的 输入 和 输出 是 完全 的 线性关系 局部 线性化 。 本 方法 的 工作 方式 是 全码 评价 。 其 过程 如下 ： 　 　 如图所示 ， 通过 改变 数据 采集 系统 的 输入 x ， 进行 一维 搜索 ， 找出 使 量化 码 在 第 i 个 台阶 和 第 i ＋ 个 台阶 间 跳变 ， 且 二者 出现 频率 各 占 ％ 的 输入 信号 值 ui ＋ ， 若 数据 采集 系统 的 A ／ D 转换 位数 为 B ， 找出 其 全部 B － 个 跳变 点 的 输入 值 uii ＝ ， … ， B － 。 该 B － 个 跳变 点 所 包含 的 B － 个 量化 阶梯 中 点 分别 为 ： xi ＝ ui ＋ ui ＋ ／ 且 xi 所 对应 的 输出 为 yii ＝ ， … ， B － 。 图 　 　 利用 输入 xi 和 输出 yi 的 一一对应 关系 ， 使用 最小 二 乘法 或 平均 选点 法等 其它 方法 按 公式 和 求出 被 评价 数据 采集 系统 的 静态 数学模型 参数 G 和 d ， 获得 其 直流 增益 G ； 按 公式 和 计算 获得 其 线性 度 L 。 　 　 这是 一种 非常 好 的 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 方法 ， 但是 其 工作量 很大 ， 尤其 是 随着 数据 采集 系统 的 A ／ D 转换 位数 B 的 增加 ， 其 工作量 呈 指数 上升 趋势 ， 尽管 和 直方图 统计 分析法 评价 数据 采集 系统 的 线性 度 比 起来 ， 其 数据量 和 工作量 已 “ 非常少 ” 了 ， 还是 不宜 用来 进行 人工 直接 测量 评价 ， 一般 较 适合 于 使用 程控 高 分辨力 直流 信号源 组建 一个 数据 采集 系统 的 评价 系统 ， 进行 自动 测量 和 评价 的 场合 ， 并 可 最终 给出 良好 的 结果 。 这时 的 评价 结果 将 具有 良好 的 复现 性 和 精确度 ， 量化 误差 可能 带来 的 波动 和 不确定性 从 理论 上 已 被 消除 。 　 　 对于 实际 中 暂时 没有 实现 自动 测量 条件 的 场合 ， 数据 采集 系统 直流 增益 和 线性 度 的 人工 直接 测量 评价 ， 可以 从 上述 精确 按码 评价 中 抽取 出 部分 测试点 来 进行 ， 也 能 达到 排除 量化 误差 带来 的 影响 ， 实现 参数 精密 测量 的 目的 。 　 　 这种 方法 以及 上述 精确 评价 法均 需要 寻找 量化 跳变 点 ui ， 这是 一较 复杂 的 工作 ， 且 需要 使用 高 分辨力 的 直流 信号源 方可 进行 。 　 　 为了 避免 上述情况 出现 ， 实际 中 建议 采用 的 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 方法 ， 不必 寻找 跳变 点 ， 需要 且 仅 需要 满足 下述 两 条件 ： ① 、 特定 选点 法 ； ② 、 任意 两个 输入 值之差 均 为 其 量化 误差 的 整数倍 。 由 这 两个 原则 确定 的 数据 采集 系统 输入 值 及其 输出 值 ， 经 使用 最小 二 乘法 或 其它 方法 处理 ， 得到 数据 采集 系统 的 静态 数学模型 ， 从而 实现 其 直流 增益 和 线性 度 的 精确 评价 。 　 　 这是 一种 改良 的 精确 评价 方法 ， 其 基本 思想 是 通过 特定 选点 ， 使得 每 一个 测量 值 yii ＝ ， … ， m 中所 含量 化 误差 均 相等 ， 在 确定 系统 模型 的 直线 回归 过程 中 ， 量化 误差 将 不 对 直流 增益 和 线性 度 评价 构成 影响 ， 从而 避免 了 量化 误差 的 影响 。 其 主导 原则 是 对 理想 的 测量 系统 ， 其 直流 增益 及 线性 度 的 评价 结果 是 理想 的 ， 这时 评价 过程 及 方法 不 带来 任何 不良影响 。 　 仿真 试验 结果 　 　 不失 一般性 ， 本组 仿真 试验 均 是 在 输入 值点 xi 将 量程 分成 m 等 分 的 等 间隔 情况 下 完成 的 ， 额定 增益 为 ， 增益 评价 误差 、 线性 度 评价 误差 的 变化 情况 仿真 详见 表 ～ 表 。 表 　 值数 m 第一点 输入 x ／ mV 增益 G 增益 误差 △ Gr 线性 度 L － － E － E － － E ＋ E ＋ － － E － E ＋ － E － E － － － E － E － － E ＋ E ＋ － － E － E － － E ＋ E － － － E － E － － E ＋ E ＋ － E － E － － E － E － － E ＋ E ＋ － － E － E － － － E － E － － E ＋ E ＋ 量程 ： － ～ mV 　 　 A ／ D 位数 ： 　 　 额定 偏置 do ： mV 输入 值 个数 m 变化 表值数 m 第一点 输入 x ／ mV 额定 偏置 domV 增益 G 增益 误差 △ Gr 线性 度 L － － E － E － － E － E － － － E － E － － E － E － － E － E － － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E － E － － － E － E － － E － E － － － E － E － － － E － E － 量程 ： － ～ mV 　 　 A ／ D 位数 ： 　 　 额定 增益 ： 　 　 额定 直流 偏置 do 变化 表值数 m 第一点 输入 x ／ mV 增益 G 增益 误差 △ Gr 线性 度 L － － E － E － － E － E － － － E － E － － E － E － － － E － E － － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － － E － E － － － E － E － － E － E － － － E － － － E － E － 量程 ： － ～ mV 　 　 A ／ D 位数 ： 　 　 额定 偏置 do ： mV 　 　 直流 输入 值 xi 变化 单向 平移 表值数 mAD 位数 第一点 输入 x ／ mV 增益 G 增益 误差 △ Gr 线性 度 L － － E － E － － E － E － － － E － E － － E － E － － － E － E － － E － E － － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － E ＋ E ＋ － － E － E － － － E － E － － E － E － － E － E － － － E － E － － － E － E － 量程 ： － ～ mV 　 　 额定 偏置 do ： mV 　 　 额定 增益 ： 　 　 额定 A ／ D 位数 变化 　 　 由表 可见 ， 当 m 变化 时 ， 增益 评价 误差 在 ± － B 内 变化 。 线性 度 评价 误差 在 ± － B 内 变化 。 　 　 上述 变化 均 无 明显 规律性 ， 在 理想 数据 仿真 情况 下 ， 这些 变化 无疑 是 主要 由 量化 误差 造成 的 。 　 　 当 输入 值 xii ＝ ， … ， m 间 的 差值 为 量化 误差 LSB 的 整数倍 时如 ， m ＝ j ， j ＝ ， ， … ， B － ， 则 每个 输入 值点 xi 经 测量 采集 后 量化 误差 均 相等 ， 经过 直线 拟合 处理 后 ， 该 量化 误差 部分 将 不 对 增益 及 线性 度 评价 产生 贡献 。 可以 根据 这个 特性 ， 用该 方法 对 直流 增益 和 线性 度 进行 高 准确度 评价 。 　 　 由表 可见 ， m ≠ j 时 ， 随着 直流 偏置 do 的 变化 ， 增益 评价 误差 与 线性 度 评价 误差 均 在 ± LSB 范围 内 呈 周期性 变化 。 　 　 m ＝ j 时 ， 直流 偏置 do 的 变化 对 增益 评价 误差 与 线性 度 评价 误差 均 无 贡献 。 　 　 由表 可见 ， m ≠ j 时 ， 随着 直流 输入 xj 的 平移 变化 ， 增益 评价 误差 与 线性 度 评价 误差 均 在 ± ／ B 范围 内 呈 周期性 变化 。 　 　 m ＝ j 时 ， 直流 输入 xj 的 平移 变化 对 增益 评价 误差 与 线性 度 评价 误差 均 无 贡献 。 　 　 由表 可见 ， A ／ D 位数 不 同时 ， 表至表 的 趋势 及 结论 仍 存在 。 　 　 在 数据 采集 系统 HY 和 HPA 上 的 评价 试验 完全 验证 了 仿真 结论 ， 限于 篇幅 ， 数据 从略 。 　 　 由此 不难 得出 如下 结论 ： 通过 选取 输入 值间 的 间距 为 量化 误差 的 整数倍 ， 可以 获得 高 可靠 的 增益 评价 结果 、 线性 度 评价 结果 。 　 结论 　 　 本文 主要 介绍 和 推荐 了 两种 数据 采集 系统 直流 增益 和 线性 度 的 精确 评价 方法 ： ① 、 需要 搜索 量化 跳变 点 的 “ 按码 精确 评价 法 ” ； ② 、 不 需要 搜索 量化 跳变 点 的 “ 定 间距 为 量化 误差 整数倍 精确 评价 法 ” 。 　 　 通过 上述 仿真 实验 及 试验 验证 可见 ， 本文 所述 的 评价 方法 ， 对 该类 指标 的 评价 全面 彻底 、 精确 可靠 ， 明确 实用 、 切实可行 。 上述 两种 方法 的 共同 特点 是 ： 对于 被 评价 指标 而言 ， 不 存在 任何 方法 和 原理 附加 误差 ； 所有 误差 均是由 被 评价 设备 造成 。 这 在 指标 鉴定 中 ， 尤其 是 进出口 商检 中 ， 是 非常 必要 的 。 因而 ， 在 数据 采集 系统 静态 特性 评价 中 ， 以及 其它 具有 量化 特点 的 数字化 测量 中 ， 尤其 是 涉及 自动化 测量 和 性能 评价 中 ， 有着 良好 的 应用 前景 。 作者简介 ： 梁志国 　 　 岁 　 男 　 高级 工程师 作者 单位 ： 北京 长城 计量 测试 技术 研究所 ， 北京市 ， 参考文献 　 　 王述 杭 数据 采集 系统 鉴定 规范 草案 北京 测控 专业 委员会 　 　 黄俊钦 测试 误差 分析 与 数学模型 北京 国防工业 出版社 　 　 地面 计算机 测控 系统 输入输出 子系统 性能 鉴定 要求 和 方法 中华人民共和国 航空航天工业部 航空工业 标准 HB 　 　 GB 仪器仪表 基本 术语 　 　 JJG 数据 采集 系统 校 分辨率 规范 中华人民共和国 国家 计量 技术规范 　 　 梁志国 等 线性 模拟量 数据 采集 系统 准确度 的 一种 评价 方法 航空 计测 技术 ～ 　 　 IEEEStdIEEEStandardforDigitingWaveformRecorders 收稿