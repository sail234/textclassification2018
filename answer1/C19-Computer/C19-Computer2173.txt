计算机 应用 研究 APPLICATIONRESEARCHOFCOMPUTERS 　 Vol 　 No 　 P 面向对象 的 通信软件 设计 工具 ObjecTime 胡亮 　 程文 青 摘要 以 一种 新型 的 面向对象 的 通信软件 开发工具 桹 bjecTime 为 对象 ， 介绍 了 通信软件 设计 中 的 面向对象 的 概念 以及 ObjecTime 的 开发 环境 和 开发 过程 。 关键词 ObjecTime 面向对象 通信软件 　 　 随着 通信 事业 的 发展 ， 通信软件 的 更新 与 升级 速度 越来越快 ， 许多 的 通信软件 有待 开发 。 运用 传统 的 方法 开发 实时 的 通信软件 往往 需要 上百 个人 年 ， 而 设计 的 软件 既 不利于 维护 ， 也 不利于 复用 和 升级 。 通信软件 的 开发 迫切 地 需要 一种 新 的 方法 和 新 的 工具 。 自 面向对象 的 程序设计 出现 后 ， 整个 软件 设计业 都 发生 了 深刻 的 变化 。 本文 介绍 的 ObjecTime 就是 基于 实时 面向对象 方法 ROOM ： RealtimeObjectorientedModeling 的 通信软件 CASE 工具 。 ObjecTime 中 的 面向对象 的 概念 对象 　 　 在 面向对象 的 系统 中 对象 是 基本 的 运行 的 实体 它 既 包括 数据 属性 也 包括 作用 与 数据 的 操作 行为 。 在 ObjecTime 中 ， 有 三种 不同 的 对象 ， 一是 执行者 Actor ， 通信 系统 中 的 任何 实体 都 可以 抽象 为 执行者 。 执行者 有 它 的 结构 和 行为 。 结构 可以 层层 嵌套 ， 从而 形成 一个 十分复杂 的 系统 。 在 通信软件 中 ， 用来 表示 行为 的 最 常用 的 形式 是 有限 状态 自动机 。 ObjecTime 运用 图形化 、 层次化 的 由 HAREL 状态图 演化 过来 的 有限 状态 自动机 来 支持 面向对象 的 概念 ， 并 使 实时 软件 的 开发 更加 方便 、 更加 有效 。 第二种 对象 是 协议 类 对象 ， 它 用来 描述 执行者 的 端口 可以 发送 和 接收 的 消息 类型 。 三是 数据 类 ， 它 和 其它 面向对象 的 语言 中 的 数据 类 一样 ， 有 数据格式 定义 和 对于 数据 的 操作 。 数据 类 既 可以 是 ObjecTime 中 已有 的 类型 ， 也 可以 是 重新 定义 的 类型 ， 在 必要 时 ， 还 可以 引入 在 C 开发 环境 中 定义 的 外部 数据类型 。 消息 　 　 执行者 之间 进行 通信 的 一种 构造 叫做 消息 。 当 一个 消息 发送给 某个 执行者 时 ， 包含 要求 接收 执行者 去 执行 某些 活动 的 消息 。 接收 到 消息 的 执行者 经过 解释 ， 然后 予以 响应 。 这种 通信 机制 叫做 消息传递 。 发送 消息 的 执行者 不 需要 知道 接收 消息 的 执行者 如何 对 请求 予以 响应 。 消息 中 包含 有 数据 和 消息 的 优先级 。 数据 是 数据 类 的 实例 。 继承性 　 　 继承性 是 父类 和 子类 之间 共享 数据 和 方法 的 机制 。 这 是 类 之间 的 一种 关系 ， 在 定义 和 实现 一个 类 的 时候 ， 可以 在 一个 已经 存在 的 类 的 基础 上来 进行 ， 把 这个 已经 存在 的 类 所 定义 的 内容 作为 自己 的 内容 ， 并 加入 若干 新 的 内容 。 在 ObjecTime 中 ， 三种 对象 定义 的 类 都 可以 通过 继承 达到 复用 。 　 　 继承性 是 面向对象 程序设计 语言 不同于 其它 语言 的 最 主要 的 特点 ， 是 其它 语言 如 面向 过程 的 语言所 没有 的 。 多态 　 　 在 收到 消息 时 ， 执行者 要 予以 响应 。 不同 的 执行者 收到 同一 消息 可 产生 完全 不同 的 结果 ， 这一 现象 叫做 多态 。 在 使用 多态 的 时候 ， 用户 可以 发送 一个 通用 的 消息 ， 而 实现 细节 则 由 接收 执行者 自行决定 ， 这样 ， 同一 消息 就 可以 调用 不同 的 方法 。 　 　 多态 的 实现 受到 继承性 的 支持 ， 利用 类 的 继承 的 层次 关系 ， 把 具有 通用 功能 的 消息 存放 在 高层次 ， 不同 的 实现 这一 功能 的 行为 放在 较 低层次 ， 在 较 低层次 上 生成 的 对象 能够 给 通用 消息 以 不同 的 响应 。 动态 联编 　 　 联编 是 把 一个 过程 调用 和 响应 调用 而 需要 执行 的 码 加以 结合 的 过程 ， 在 一般 的 程序设计 语言 中 ， 联编 是 在 编译 时候 进行 的 ， 叫做 静态 联编 。 动态 联编 则 是 在 运行 时 进行 的 ， 因此 ， 一个 给定 的 过程 调用 和 码 的 结合 ， 直到 调用 发生 时才 进行 编译 的 。 由于 动态 联编 是 在 编译 以后 才 进行 的 ， 所以 也 叫 “ 滞后 联编 ” 。 ObjecTime 的 开发 环境 　 　 如图所示 ， ObjecTime 将 从 设计 分析 、 编辑 代码 到 编译 连接 及 仿真 的 所有 工具 都 集成 在 了 ObjecTime 工具 集中 。 图 模型 管理 　 　 多用户 的 开发 环境 支持 一个 ObjecTime 开发 小组 的 合作开发 。 所有 的 执行者 类 、 协议 类 和 数据 类 都 可以 存储 于 类库 中 或者 是 作为 个人 文件 存储 于 文件 中 。 类库 提供 了 一种 保存 类 的 正式 方法 ， 它 可以 保证 类 的 正确性 和 合法 地 取用 和 修改 ， 保证 不同 开发者 所 使用 的 类 具有 一致性 。 模型 编辑 　 　 ObjecTime 提供 了 许多 各种 编辑 模型 的 编辑器 ， 包括 图形化 的 和 非 图形化 的 。 编辑文档 的 工具 可以 把 文档 和 它 直接 说明 的 对象 联系 在 一起 。 所有 的 图形化 的 和 非 图形化 的 文档 都 可以 转换成 标准 文档 格式 ， 如 Word 文档 。 交叉 引用 管理 　 　 ObjecTime 提供 了 交叉 引用 的 管理 。 无论是 代码 还是 图形化 的 模型 ， 都 可以 通过 这个 工具 找到 引用 过 它 的 实体 。 模型 编译 　 　 ObjecTime 提供 了 模型 编译 工具 ， 它 可以 把 在 ObjecTime 中 创建 的 ROOM 模型 转换 为 高级 语言 的 原代码 ， 然后 调用 高级 语言 的 编译器 把 它 转换 为 可 执行 的 程序 。 本文 的 系统 平台 是 WindowsNT ， 使用 的 高级 语言 的 编译器 是 VisualC 的 编译器 。 模型 检验 　 　 ObjecTime 提供 了 模型 检验 工具 。 它 可以 检验 出 不 正确 的 执行者 类 ， 如 执行者 的 发送 端口 发送 的 消息 和 对方 接收 的 消息 类型 不 匹配 等 错误 ， 使 开发者 能 及时发现 错误 加以 修改 。 ObjecTime 还 提供 了 一个 强大 的 仿真 环境 ， 通过 仿真 ， 可以 使 开发者 进一步 检验 软件 的 功能 是否 合符 要求 ， 同时 也 可以 使 开发者 对 软件 在 目标 平台 的 运行 情况 有 一定 的 了解 。 一个 简单 系统 的 建模 过程 　 　 为了 介绍 开发 过程 ， 我们 以 大家 所 熟悉 的 电话 系统 为例 ， 构造 一个 十分 简单 的 系统 。 作为 一个 电话 系统 ， 首先 要 建立 一个 电话机 的 模型 。 在 ObjecTime 中 它 就是 一个 执行者 。 它 的 结构 很 简单 ， 它 的 内部 不 包含 任何 其它 的 执行者 。 它 只有 一个 端口 ， 它 是 电话线 接口 的 模型 。 但是 ， 电话机 的 行为 很 复杂 ， 如图所示 ， 我们 运用 了 层次化 的 状态机 来 描述 电话机 的 行为 。 图中 的 圆角 矩形 代表 状态 ， 箭头 线 代表 状态 转换 。 建立 好 电话机 的 模型 后 ， 可以 通过 继承 ， 在 电话机 的 初始化 的 过程 中 加入 一些 呼叫 的 代码 ， 形成 用于 作为 主叫 的 电话机 。 在 一个 作为 系统 的 执行者 中 加入 两个 电话机 ， 其中 一个 是 主叫 子类 的 实例 ， 并 把 他们 的 端口 连接起来 形成 一个 消息 通道 。 这样 一个 简单 的 系统 就 可以 在 ObjecTime 环境 中 编译 并 在 仿真 环境中运行 了 。 仿真 环境 运用 图形化 的 监测 窗口 ， 它们 可以 十分 逼真 地 动态 地 显示 模型 的 运行 结果 。 这些 窗口 主要 包括 消息 窗口 ， 行为 窗口 ， 结构 窗口 ， 变量 窗口 。 运用 这些 窗口 ， 可以 同时 进行 白盒 测试 和 黑盒 测试 。 如 ， 只 打开 消息 窗口 ， 即可 知道 当 一个 消息 输入 时 执行者 发出 什么样 的 消息 。 这时 ， 我们 把 整个 执行者 连同 它 的 结构 和 行为 都 作为 黑盒子 看待 ； 如果 我们 打开 结构 窗口 和 行为 窗口 ， 我们 可以 看到 结构 的 动态变化 和 有限 状态 自动机 的 状态 转换 。 这时 ， 执行者 对 我们 而言 是 一个 透明 的 实体 。 在 进一步 地 完善 过程 ， 还 可以 加入 交换机 的 模型 。 实际上 ， 在 ObjecTime 中 可以 开发 十分复杂 的 通信软件 。 由于 ObjecTime 有 强大 的 图形化 的 开发 和 仿真 环境 ， 运用 它 来 开发 通信软件 ， 可以 大大 节省 人力 ， 它 的 出现 是 通信软件 设计 的 一个 里程碑 。 图 胡亮 （ 华中理工大学 电信 系 武汉 ） 程文 青 （ 华中理工大学 电信 系 武汉 ） 参考文献 ， TutorialGuideObjecTimeLimited ， TolsetGuideObjecTimeLimited ， CGuideObjecTimeLimited ， 蔡希尧 陈平 面向对象 技术 西安 ： 西安电子科技大学 出版社 收稿 日期 ： 年月日