计算机 研究 与 发展 JOURNALOFCOMPUTERRESEARCHANDDEVELOPMENT 　 Vol 　 No 　 P 基于 属性 等价 的 多 数据源 互操作 模式 合并 许学标 　 刘 宏亮 　 王轶彤 　 顾宁 　 施 伯乐 摘 　 要 ： 在 涉及 多个 异构 数据源 的 互操作 处理 中 ， 跨 数据源 模式 合并 是 提供 形式 一致 、 概念 统一 的 数据 查询 操纵 界面 和 应用 程序接口 的 主要 途径 长期以来 ， 对此 很少 有 完善 的 指导性 理论 文中 从 模式 构成 的 最小 单位 — — 属性 特性 着手 ， 在 对象 模型 的 基础 上 ， 先自 底向上 地 定义 不同 种类 的 属性 等价 和 类 等价 的 概念 ， 然后 自顶向下 地 给出 了 利用 等价 类 、 等价 属性 进行 合并 的 基本 方法 ， 从而 为 创建 跨 数据源 的 一致 化 对象 视图 模式 探索 了 新途径 关键词 ： 现实 世界 状态 ， 多 数据源 互操作 ， 属性 类 等价 ， 模式 合并 分类号 ： TPSCHEMAMERGINGFORMULTIPLEDATASOURCESINTEROPERATIONBASEDONATTRIBUTEEQUIVALENCEXUXueBiaoDepartmentofComputerScienceFudanUniversityShanghaiLIUHongLiangDepartmentofComputerScienceFudanUniversityShanghaiWANGYiTongDepartmentofComputerScienceFudanUniversityShanghaiGUNingandSHIBoLeDepartmentofComputerScienceFudanUniversityShanghaiAbstract ： IntheinteroperationprocessingconcerningmultipleheterogeneousdatasourcesschemamergingspanningthemisoneeffectiveaspectinprovidingboththedataqueryingmanipulationandtheapplicationprograminterfacesinaconsistentunifiedstyleUntilnowtherehasbeennoperfectdirectivetheoryrelevantyetInthispaperonthefoundationofobjectdatamodeltheauthorstackletheproblembysettingforthfromthefeaturesofattributetheminimalunitinschemaconstructionThedifferentattributetypeequivalenciesaredefinedfirstinabottomupwayandthenthebasicschemamergingmethodologiesbasedonthemarepresentedinatopdownwaywhichexploresanewapproachtocreatingaconsistentobjectviewschemaovermultipledatasourcesKeywords ： realworldstateinteroperationofmultipledatasourcesattributetypeequivalenceschemamerging ▲ 　 引言 　 　 计算机 、 网络 和 多媒体技术 的 发展 ， 特别 是 InternetIntranet 的 日新月异 和 数据库 的 广泛应用 ， 使 基于 多种 异构 数据源 如 文件系统 、 遗产 数据库 、 RDBOODBORDB 、 空间 和 历史 等 多媒体数据库 上 的 互操作 需求 越来越 多 其 基本 目标 之一 是 为 用户 提供 形式 一致 、 概念 统一 的 集成 数据 查询 操纵 界面 及 应用 程序接口 API ， 这 就 要求 支撑 的 互操作 平台 能 提供 跨 数据源 的 模式 合并 ， 从而 对 不同 数据源 中含 相同 内容 的 异构 实体 进行 合并 过去 ， 模式 合并 属 数据库 设计 问题 ， 常 根据 设计者 经验 确定 ， 很少 有 成熟 的 理论指导 ， 这为 模式 合并 的 实现 及其 特性 的 进一步 研究 带来 困难 而 在 实际 应用 中 ， 遗产 数据源 的 模式 合并 和 数据库 设计 情形 仍 有 相当 差距 ， 如 模式 合并 时 出现 的 命名 、 单位 、 结构 和 抽象层次 等 多种 冲突 ， 就 无法 全盘 照搬 模式 设计 的 经验 研究 表明 ， 在 众多 互 操作系统 中 ， 模式 合并 的 基本 构架 如 属性 等价 、 关联 等价 和 类 等价 等 可 最终 归于 属性 等价 ［ ～ ］ 本文 根据 多 数据源 模式 合并 的 这 一 特点 ， 基于 公共对象 模型 ， 从 定义 对象 属性 的 等价 着手 ， 研究 了 不同 数据源 成员 对象 虚 模式 特性 间 的 相互 关系 ， 并 给出 了 相应 的 合并 方式 　 公共对象 模型 简介 　 　 跨 数据源 模式 合并 要求 下层 的 多个 异构 数据源 经 转换 后能 共同 遵循 某一 公共 的 数据模型 考虑 到 对象 模型 具有 语义 丰富 、 方法 功能强大 、 映射 方便 及 无缝 集成性 好 等 优点 ， 这里 采用 与 ODMG ［ ］ 和 OMGCORBA 互操作 对象 模型 ［ ］ 相 兼容 的 公共对象 模型 commonobjectmodel ， COM ［ ］ 在 此仅 对 与 模式 合并 相关 的 基本概念 加以 说明 　 　 COM 最 基本 的 原语 是 对象 和 文字 ， 每个 对象 有 唯一 的 对象 标识 oid ， 并 通过 特性 和 行为 表示 其 状态 和 操作 文字 与 对象 相 并列 ， 它 只有 值 ， 没有 oid 　 　 对象 状态 通过 它 所 携带 的 一组 特性 值来 定义 这些 特性 可以 是 对象 自身 属性 ， 也 可以 是 不同 对象 间 的 关联 对象 取值 可 随着 时间 而 变化 对象 行为 通过 可 在 对象 上 执行 或 由 对象 执行 的 一组 操作方法 来 定义 对象 和 文字 按照 类型 方式 进行 组织 类型 分为 文字 类型 和 对象 类型 文字 类型 实例 是 蕴涵 存在 的 ， 而 不是 由 应用程序 显式 生成 的 ； 对象 类型 是 通过 用户 定义 的 ， 其实 例是 应用程序 生成 的 现实 世界 的 特定 实体 类型 成员 在 状态 范围 上 有 相同 的 属性 、 关联 和 方法 COM 中 的 对象 类 是 指 具有 相同 属性 和 关联 的 实体 集 ， 对象 类型 通过 定义 可用 层次 表示 的 超子 类 进行 继承 和 共享 如果 对象 类型 A 是 对象 类型 B 的 子类 ， 则 A 类型 除 继承 B 类型 的 所有 特性 和 方法 外 ， 还 可 有 区别 于 B 的 属性 、 关联 和 方法 本文 主要 对 类型 及其 上 的 属性 、 关联 等 的 等价 进行 定义 ， 以便 能 根据 不同 的 分类 准则 采用 不同 的 模式 合并 算法 　 多 数据源 上 的 对象 属性 、 关联 、 类型 间 的 等价 　 　 属性 是 构造 模式 的 最小 单元 为了 实现 多 数据源 转换 后 的 对象 类型 模式 向 统一 对象 模式 的 合并 ， 本文 从 对象 属性 的 基本 特征描述 着手 ， 定义 强弱 属性 等价 和 类型 等价 的 概念 这里 ， 对象 类指 的 是 各 数据源 经 转换 处理 后 合法 的 “ 虚 ” 对象 类 ， 而 属性 、 关联 和 方法 指 的 则 是 “ 虚 ” 对象 类上 的 属性 、 关联 和 方法 　 属性 特征 、 值集 和 基本 等价 特性 　 　 下面 给出 为 属性 等价 而 定义 的 属性 特征描述 和 属性 值集 概念 　 　 定义 属性 特征描述 ： 对于 对象 类 C ， 它 的 某 一 属性 a 的 特征描述 有 部分 构成 ， 分别 为 ： 　 　 属性 类型 域 ： 对象 类 C 的 各 实例 中 属性 a 允许 取值 的 集合 ， 记为 DOMa ； 　 　 允许 的 操作 集在 属性 a 的 类型 域 中 允许 操作 的 方法 集合 记为 OPa ； 　 　 语义 说明 属性 a 取值 的 语义 解释 和 含义 对于 数值 属性 ， 则 是 指 测量 所用 的 单位 ， 记为 SCALEa ； 　 　 语义 完整性 约束 ： 指 的 是 属性 a 涉及 的 与 其它 属性 间 的 静态 约束 以及 属性 变化 时所 必须 遵循 的 动态 完整性 约束 表达式 的 集合 ， 记为 SICa ； 　 　 安全性 约束 ： 指 的 是 对 属性 值 使用 存取 权限 的 约束 说明 ， 记为 SECa 　 　 取值 个数 范围 限制 ： 是 指 允许 在 对象 类 实例 中 表示 的 属性 a 值 的 最 多 和 最少 个数 ， 我们 用 一对 整数 UBaLBa 表示 　 　 唯一 标志 ： 是 指能 唯一 标定 对象 类 实例 的 属性 的 集合 记为 KEYa 　 　 这里 的 属性 类型 域 DOM 可以 是 整数 、 字符串 、 日期 等 文字 类型 ， 也 可以 是 库 中 定义 的 抽象 对象 类型 ADT 以及 由 set ， bag ， list ， array 等 汇集 构造 子 生成 的 新 类型 ； 允许 的 操作 集 OP 除 包含 在 类型定义 中 涉及 的 特定 属性 的 方法 外 ， 还 包括 允许 在 该 属性 上 使用 的 公共 聚类 函数 如 sum ， average ， count ， max ， min 等 语义 说明 SCALE 指 的 是 属性 值 所 使用 的 度量衡 含义 ， 例如 身高 属性 可以 用米 来 度量 ， 也 可以 用 厘米 来 度量 ， 二者 虽然 值 不同 ， 但 它们 之间 存在 着 可逆 的 对应 关系 ， 这 在 属性 等价 时 可 使用 映射函数 表达 ； 但 有些 属性 的 度量 不 存在 可逆 的 对应 关系 ， 如 学生 成绩 有些 科目 是 用 百分制 表示 的 ， 而 有些 是 用 等级 如优 、 良 、 中 和 及格 等 来 表示 的 ， 从 前者 到 后者 的 函数 映射 是 有 意义 的 ， 而 从 后者 到 前者 则 是 不 可逆 的 ， 因此 无法 定义 一一 关系 　 　 语义 完整性 约束 SIC 包括 属性 间 的 函数 依赖 、 存在 依赖 以及 唯一性 、 非空 等 与 其它 类型 或 属性 间 的 静态 关系 ， 以及 对象 状态 改变 时 在 属性 上 的 约束 ， 如 雇员 对象 不能 加在 已 删除 的 部门 中等 动态 依赖 关系 集合 安全性 约束 SEC 是 为 自治 和 安全 考虑 而 给出 的 控制 约束 如 不 可见 、 可 查询 和 可 更新 等 ， 例如 一般 用户 只能 查看 学生 成绩 ， 而 不能 修改 它 因此 ， 可 把 SECa 看作 是 涉及 到 属性 a 的 安全 约束 表达式 的 集合 属性 的 取值 个数 范围 通过 上 下限 表示 取值 表示 属性 a 可为 空值 ， 而 大于 的 上限 表示 属性 a 可 取值 的 个数 唯一 标志 KEYa 相当于 公共对象 模型 中 的 类型 特性 KEY ， 它 通过 oid 及 一 或 多个 属性 描述 用作 KEY 的 属性 将 用于 类 等价 的 判定 　 　 定义 属性 值集 在 t 时刻 对象 类 C 中 属性 a 的 值集 VALUEat ， 指 的 是 在 t 时刻 C 上 所有 实例 中 属性 a 的 取值 集合 ； 全部 数据库 时刻 点上 VALUEat 的 并 集 称为 类 C 的 数据库 状态 下 的 属性 a 的 值集 ， 记为 VALUESa ， 即 　 　 定义 基本 等价 特性 令 ai 为 对象 类 A 的 属性 bi 为 对象 类 B 的 属性 ， 设 Di 为 DOMai 的 最大 非 空子 集 ， Ri 为 DOMbi 的 最大 非 空子 集 ， 可定义 一个 函数 fiDi → Ri 及其 逆函数 fiRi → Di ， 称 下面 点为 需 满足 的 基本 等价 特性 ： 　 　 fi 是 同构 和 可逆 的 ， 即 在 Ri 和 Di 间 存在 一一对应 关系 ； 　 　 对 每 一 OPai 中 的 允许 操作 g ， 在 OPbi 中 必须 有 一个 对应 的 允许 操作 g ′ ， 使得 figg ′ fi ， 即 应用 g 在 DOMai 的 某 一值 x 后 再 应用 操作 fi 所得 的 结果 等于 先 在 x 上 应用 fi ， 然后 在 fix 上 应用 g ′ 所得 结果 ； 　 　 在 fi 和 f － i 映射 下 保持 所有 相关 的 语义 完整性 令 f … fn 是 与 属性 a … an 相关联 的 映射函数 则 在 SICai 中 涉及 的 属性 为 a … an 的 约束 必须 可以 通过 把 ai 用 fiai 替换 后 所 得到 的 SICbi 中 的 约束 蕴涵 ， 反之亦然 ； 　 　 所有 的 安全 约束 在 fi 和 fi 映射 下 互为 保持 ， 即 SECaiSECbi ； 　 　 fi 映射函数 保持 唯一 标识 　 各类 属性 等价 的 概念 　 　 下面 根据 等价 合并 后 的 新 属性 是否 允许 更新 区分 定义 属性 强 等价 和 属性 弱 等价 　 　 定义 属性 强 等价 设在 数据库 的 所有 状态 下 有 对象 类 A 的 属性 a 和 对象 类 B 的 属性 b 遵循 定义 中 的 基本 等价 特性 存在 一 映射 fD → R 满足 ： 　 　 如果 DVALUESaRVALUESb 则 称 属性 a 和 b 是 Ⅰ 型 强 等价 　 　 如果 DVALUESaRVALUESb 或 RVALUESbDVALUESa 则 称 属性 a 和 b 为 Ⅱ 型 强 等价 包含 强 等价 ； 　 　 如果 RVALUESbDVALUESa 则 称 属性 a 和 b 为 Ⅲ 型 强 等价 重叠 强 等价 在 上述 种 情形 下 ， 属性 a 和 b 均 是 属性 强 等价 ， 记 为 　 　 定理 在 定义 中 给出 的 种强 等价 中 ， 属性 a 和 b 合并 后 是 可 更新 的 　 　 证明 根据 定义 和 定义 ， 映射函数 f 定义 了 D 和 R 值 之间 可逆 的 一一对应 关系 这样 ， 在 整个 数据库 的 每 一 时刻 的 状态 下 ， 映射函数 f 可以 把 在 D 中 的 任何 值 转换成 R 中 的 对应 值 ， 反之亦然 如果 合并 属性 是 用 D 中 的 值 表示 ， 则 可以 将 D 中 的 值 转换成 R 中 的 值 ， 反之亦然 如果 合并 属性 是 用 其它 集合 的 值来 表示 ， 则 定义 保证 该 集合 一定 和 R ， D 之间 分别 存在 一一对应 约束 ， 从而 使 更新 能够 找到 映射 的 值 　 　 当 插入 包含 属性 a 的 一个 对象 A 时 ， 则 可以 从 a 属性 值域 D 中 指定 值 ； 如果 属性 a 在 数据库 中是 直接 用 D 中值 表示 ， 就 可以 把 这些 值 直接 存储 到 数据库 中 如果 属性 a 在 数据库 中是 使用 R 中 的 值 表示 ， 则 可以 把 a 的 值 转换成 R 中 等价 的 值 ， 存储 到 数据库 中 同样 可 对 二者 合并 后 的 属性 进行 删除 和 修改 操作 　 　 从而 ， 属性 强 等价 允许 用户 对 D 和 R 中 的 值 进行 更新 证毕 　 　 定义 属性 弱 等价 令 a 为 对象 类 A 的 属性 b 为类 B 的 属性 ； 若令 D 为 DOMa 的 最大 非 空子 集 ， R 为 DOMb 的 最大 非 空子 集 ， D 和 R 使得 存在 一个 函数 fD → Rf 可 用作 表示 定义 a 和 b 的 基本 等价 特性 的 条件 如果 f 满足 如下 特性 ： 　 　 f 在 R 和 D 间 存在 着 映射 对应 关系 但 不 要求 f 可逆 ； 　 　 对 每 一个 在 OPa 中 的 允许 操作 g ， 在 OPb 中 必须 有 一个 对应 的 允许 操作 g ′ ， 使得 fgg ′ f ， 即 应用 g 在 DOMa 的 某 一值 x 后 再 应用 操作 f 所得 的 结果 等于 先 在 x 上 应用 f ， 然后 在 fx 上 应用 g ′ 所得 结果 ； 　 　 令 f … fn 为 和 属性 a … an 相连 的 映射函数 ， 在 SICa 中 涉及 的 属性 为 a … an 的 约束 可以 在 a 用 fiaii … n 替换 后 所 得到 的 SICb 中 的 约束 后 保持 　 　 所有 安全 约束 在 f 映射 下 单向 保持 ； 　 　 f 映射函数 能够 保持 唯一 标识 　 　 这时 称 属性 a 和 b 是 弱 等价 的 ， 记为 a ≡ wab 　 　 两个 属性 a 和 b ， 无论是 属性 强 等价 还是 属性 弱 等价 ， 都 可以 合并 形成 新 属性 c ， 差别 在于 ： 如果 a 和 b 是 强 等价 的 ， 则 c 的 值 是 可以 更新 的 ； 如果 a 和 b 只是 弱 等价 而 非强 等价 ， 则 c 值 不能 更新 此外 ， 当 映射函数 的 两个 域 为 空时 ， 虽然 两个 属性 值 之间 无法 定义 映射函数 ， 但 若 它们 所 承担 的 角色 相同 ， 则 仍 可以 进行 合并 ， 这是 区别 于 强弱 等价 的 属性 不 相交 等价 具体 地 ： 　 　 定义 属性 不 相交 等价 令 a 为 对象 类 A 的 一 属性 b 为 对象 类 B 的 一 属性 ； 令 D 为 DOMa 的 最大 非 空子 集 ， R 为 DOMb 的 最大 非 空子 集 ， 如果 ： 　 　 D 和 R 是 不 相交 的 ， 即 D ∩ R φ ， 因此 不 存在 属性 强 、 弱 等价关系 ； 　 　 a 和 b 承担 角色 相同 ， 即 它们 满足 定义 中 的 、 、 、 、 特性 则 称 属性 a 和 b 是 不 相交 等价 的 ， 记为 a ≡ dab 　 　 定义 属性 等价 给定 两个 属性 a ， b ， 不管 它们 是 强 等价 、 弱 等价 ， 还是 不 相交 等价 ， 我们 统称 属性 a ， b 是 等价 的 ， 记为 a ≡ ab 　 现实 世界 状态 和 对象 类 的 等价 　 　 在 属性 等价 基础 上 ， 可定义 对象 关联 的 强弱 等价 等 概念 ［ ］ 下面 讨论 用 对象 类 的 标识 属性 等价 特性 来 定义 对象 类 等价 的 方法 由于 在 多 数据源 对应 的 成员 对象 库 的 外延 已经 无法 表示 在 不同 数据源 上 相同 的 概念 ， 在 此 引入 现实 世界 状态 的 概念 如下 ： 　 　 定义 现实 世界 状态 RWSRWS 是 一个 和 数据库 外延 相似 的 概念 ， 它 的 含义 是 指 在 多个 数据源 之上 能 唯一 确定 现实 世界 中 对象 和 类 的 状态 标识 集 　 　 记 两个 对象 类 A 和 B 的 RWS 分别 为 RWSA 和 RWSB 即 如果 在 现实 世界 中 ， A 和 B 代表 的 是 给定 时刻 相同 现实 世界 的 实例 集合 时 ， 虽然 在 不同 数据源 中 两个 类 的 外延 及其 表示 可能 不 相等 ， 但 仍会 有 RWSARWSB 　 　 根据 RWS 定义 对象 类 的 不同 等价 概念 ， 接近 于 实际 集成 时 的 互操作 需求 在 现实 世界 中 的 对象 类 ， 即使 在 异构 数据源 模式 转换 时 属于 不同 成员 对象 类 ， 甚至 描述 不同 ， 但 如果 它们 被 确认 是 类型 等价 的 ， 则 可以 通过 等价 桥梁 使 合并 模式 划归 到 同一个 类型 ， 或 使 它们 保持 一种 继承 关系 对象 类强 等价 的 具体 定义 为 ： 　 　 定义 对象 类强 等价 令 对象 类 A 的 键 为 k ， 属性 关联 为 a … am ， 对象 类 B 的 键 为 k ， 属性 及 关联 为 b … bn ， RWSA 和 RWSB 分别 是 在 给定 时刻 A 和 B 的 现实 世界 实例 集 ， Tk 和 Tk 为 A 和 B 在 某 一 时刻 全部 实例 的 集合 若令 DOMk 和 DOMk 分别 为类 A 和 类 B 在 所有 时刻 对象 实例 的 并 在 DOMk 和 DOMk 的 每 一时间 点 定义 一个 映射函数 f ： D → R ， D 为 在 Tk 中 包含 的 最大 非 空子 集 ， R 为 在 Tk 中 包含 的 最大 非 空子 集 ， 则 使用 f 定义 对象 类 A 和 B 之间 的 类 等价 如下 ： 　 　 如果 k 和 k 中 的 所有 属性 都 是 对应 强 等价 ， 则 称 RWSA 和 RWSB 是 Ⅰ 型 强 等价 ； 　 　 如果 k 集合 中 的 所有 属性 和 k 中 的 对应 属性 强 等价 ， 或强 包含 k 中 的 对应 属性 ， 则 称 RWSA 和 RWSB 为 Ⅱ 型 强 等价 ； 　 　 如果 k 和 k 中 的 属性 至少 有 一对 是 不 相交 等价 ， 且 都 不是 强 重叠 等价 的 ， 则 称 RWSA 和 RWSB 是 Ⅲ 型 强 等价 ； 　 　 如果 k 和 k 中 的 属性 有 一对 是 重叠 强 等价 的 ， 则 称 RWSA 和 RWSB 是 Ⅳ 型 强 等价 　 　 总之 ， ～ 是 对象 类强 等价 的 种 类型 ， 可以 统一 记为 A ≡ scB 　 　 类似 地 ， 可定义 对象 类弱 等价 、 对象 类 不 相交 等价 和 对象 类 等价 等 概念 ［ ］ 　 属性 等价 定义 的 应用 　 　 利用 上述 的 属性 等价 ， 通过 建立 映射函数 ， 可 方便 地 处理 如下 多 数据源 互操作 模式 集成 出现 的 异构 问题 ： 　 　 命名 冲突 对于 相应 属性 具有 不同 名字 或 不 对应 属性 具有 相同 名字 的 问题 ， 可 通过 使用 属性 强弱 、 不 相关 等价 的 定义 ， 来 进行 标识 和 合并 ， 使 名字 相同 的 非 对应 属性 通过 映射 识别 并 对 其中 的 一 或 多个 属性 重命名 来 解决 ； 　 　 语义上 的 差异 长度 、 重量 、 货币 等 具有 不同 的 度量衡 ， 它们 之间 存在 着 倍数 关系 ， 其 转换 即 为 强 等价 的 特例 例如 若 属性 a 用 长度 单位 “ 米 ” 表示 ， 其 等价 属性 b 用 “ 公里 ” 表示 ， 则 有 函数 f ： bfaa × 和 逆函数 fafbb × 这样 ， 通过 使用 定义 的 映射函数 表达式 可 消除 等价 属性 在 语义上 的 差异 ； 　 　 属性 抽象 标准 上 的 差异 抽象 标准 上 的 差异 出现 在 等价 属性 间 存在 包含 关系 的 情形 ， 例如 有 两个 属性 ， 含义 分别 表示 电话号码 和 家庭 电话号码 它们 在 语义 关系 上 就 存在 着 一种 包含 关系 通过 包含 属性 等价 ， 可以 将 其 进行 等价 合并 ； 　 　 对象 标识 上 的 差异 现实 世界 中 的 同一 实体 在 不同 数据源 中会 有 不同 的 表示 虽然 单一 对象 库中 的 同一 对象 实体 可 通过 语义 约束 来 保持 其 唯一性 ， 但 若 处于 不同 数据库 中 ， 则 由于 表示 和 实现 上 的 差异 ， 将会 出现 很多 既 非 对象 、 又 非 关系 的 实体 其 标识 的 建立 也 大多 是 根据 映射函数 来 确定 的 这样 多种类型 对象 标识 很难 将 标识 的 唯一性 和 对象 oid 相 统一 即使 不同 数据源 上 的 两个 对象 在 现实 世界 中 表示 同一 实体 ， 且 它们 在 公共 属性 上 取值 相同 ， 若 不 在 对应 标识 值间 建立 映射 关系 ， 也 很 难 将 其 合并 建立 属性 等价 和 对象 等价 准则 ， 可较 好地解决 这 类 表达 上 的 差异 ； 　 　 类型 表示 上 的 差异 由于 从 需求 、 设计 、 实现 到 数据库 的 转换 等 环节 可能 出现 差异 ， 同一 实体 在 不同 数据库 中 可能 使用 完全 不同 的 类型 表示 只有 通过 对象 类 等价 ， 才能 抹平 这些 差异 ， 使多 数据源 间 的 模式 合并 顺利进行 　 对象 类 属性 合并 的 方法 　 等价 对象 类 的 合并 　 　 按照 前面 种 对象 类 等价 的 定义 ， 可 分别 给出 对应 的 对象 类 的 集成 方法 由于 属性 不 相交 等价 主要 通过 设计 人员 指定 对应 关系 ， 这里 暂 不 考虑 这种 情形 其它 等价 属性 的 合并 处理 具体 如下 参见 图 图 　 对象 类 合并 基本 方法 示意图 　 　 对于 ， 如果 RWSARWSB 可 将 对象 类 A 和 对象 类 B 合并 成 一个 单独 的 虚 对象 类 AB ′ AB ′ 的 键 为 k 或 k 并且 有 RWSAB ′ RWSA ∪ RWSBRWSARWSB ； 　 　 对于 ， 即 对象 类 包含 等价 情形 ， 设 RWSARWSB ， 则 可 将 A 在 合并 模式 中 对应 于 新虚类 A ′ ， 把 B 对应 于 新虚类 B ′ ， 并 使 B ′ 成为 A ′ 的 子类 ， 且 有 RWSA ′ RWSARWSB ′ RWSB 　 　 对于 RWSA 和 RWSB 为 重叠 等价 情形 这时 ， 除 需 生成 对应 的 虚类 A ′ 和 B ′ 外 ， 还要 生成 一个 新 的 虚 对象 类 AB ′ 把 A ′ 和 B ′ 作为 它 的 子 类型 这时 要求 有 ： RWSA ′ RWSA ， RWSB ′ RWSBRWSAB ′ RWSA ∪ RWSB 　 　 按 上述 方法 ， 可 将 任何 满足 定义 要求 的 两 等价 类 加以 合并 　 等价 属性 的 合并 　 　 在 确定 对象 类 等价 后 ， 需要 进行 对象 类中 属性 关联 的 合并 下面 考虑 两 等价 类中 的 一对 等价 属性 的 合并 处理 方法 按照 上述 对象 类 的 等价 定义 ， 设欲 合并 的 两 对象 类 分别 为 A 和 B ， a 和 b 是 它们 中 的 某 一 对应 的 等价 属性 ， 需要 根据 对象 类 和 属性 等价 的 不同 分类 确定 新 属性 在 合并 对象 类中 的 位置 　 　 对于 Ⅰ 型 等价 的 两 属性 ， 不管 所属 的 对象 类 是 按照 何种 等价 方式 集成 ， 都 需使 合并 的 新 属性 成为 超类 上 的 一个 属性 ， 且 类型 域 等于 用户 定义 的 映射函数 的 值域 　 　 对于 Ⅱ 型 即 包含 等价 的 两个 属性 ， 则 要 根据 它们 所在 的 两个 类 是 按照 包含 方式 还是 重叠 方式 进行 等价 合并 来 区分 对待 ① 如果 两 属性 所在 的 对象 类 是 按照 包含 方式 合并 ， 设有 RWSARWSB ， 而 在 新 产生 的 对象 类 的 合并 中 ， 可 把 A 对应 于类 A ′ ， 把 B 对应 于类 B ′ ， 并 使 B ′ 成为 A ′ 的 子类 ； 设 a 属性 包含 b 属性 ， 则 可 在 A ′ 上 指定 a 的 映象 属性 a ′ ， 在 B ′ 上 指定 b 的 映象 属性 b ′ ， 并 把 b ′ 看 作为 a ′ 的 一个 子 类型 ， 属性 a ′ ， b ′ 的 域 分别 可 由 用户 定义 的 映射函数 的 值域 确定 ； ② 如果 两 属性 所在 的 对象 类 按照 重叠 方式 合并 ， 这时 ， 除要 指定 对应 类 A ′ 和 B ′ 上 的 两 属性 a ′ 和 b ′ 外 还要 在 新 建立 的 A 类 和 B 的 公共 超类 AB ′ 上 增加 一个 属性 c ′ a ′ 和 b ′ 可 看作 是 属性 c ′ 的 子 类型 ， c ′ 可 看作 是 属性 a ′ 和 b ′ 的 公共 特性 　 　 （ ） 对于 仅 出现 在 两个 类 是 重叠 时 的 Ⅲ 型 等价 的 两 属性 ， 处理 类似 于 ， 即将 两 属性 a 和 b 分别 指定 为 对应 类 A ′ 和 B ′ 的 一个 属性 a ′ 和 b ′ ， 并 在 两个 类 的 超类 AB ′ 上 增加 新 属性 c ′ 其 含义 类似 于 　 结语 　 　 互操作 中 的 跨 数据源 模式 合并 涉及 从 设计 到 应用 的 众多 方面 ， 是 一个 相对 复杂 的 问题 ［ ～ ］ 本文 在 公共对象 模型 基础 上 先后 用 自 底向上 和 自顶向下 方法 给出 了 不同 类 的 属性 对象 类型 等价 概念 和 相应 的 类 属性 合并 方法 ， 这一 研究 对于 跨 数据源 互操作 的 一致 存取 具有 重要 意义 进一步 工作 包括 利用 知识 表示 设计 基于 属性 等价 的 模式 合并 工具 ， 实现 多 数据源 互操作 对象 类 模式 的 辅助 生成 和 异构 自治 环境 下 不同 数据源 间 动静 依赖 的 对象 类 表达 等 ■ 基金项目 ： 本 课题 得到 国家 “ 八 六三 ” 计划 、 国家 “ 九五 ” 科技攻关 和 上海市科委 科技 发展 基 　 　 　 　 　 　 金 的 资助 作者简介 ： 许学标 ， 男 ， 年生 ， 博士 ， 主要 研究 方向 为 OODB 、 KDB 、 多 数据源 集成 和 互操作 　 　 　 　 　 刘 宏亮 ， 男 ， 年生 ， 博士生 ， 主要 研究 方向 为 DOOD 和 数据仓库 　 　 　 　 　 王轶彤 ， 女 ， 年生 ， 博士生 ， 主要 研究 方向 为 数据库 和 半 结构化 数据处理 　 　 　 　 　 顾宁 ， 男 ， 年生 ， 博士生 ， 副教授 ， 主要 研究 方向 为 CSCW 、 OODB 、 工程 数据库 　 　 　 　 　 　 等 　 　 　 　 　 施 伯乐 ， 男 ， 年生 ， 复旦大学 首席 教授 ， 博士生 导师 ， 主要 研究 方向 为 数据 　 　 　 　 　 　 库 、 知识库 和 数据仓库 等 作者 单位 ： 许学标 复旦大学 计算机科学 系 　 上海 　 　 　 　 　 　 刘 宏亮 复旦大学 计算机科学 系 　 上海 　 　 　 　 　 　 王轶彤 复旦大学 计算机科学 系 　 上海 　 　 　 　 　 　 顾宁 复旦大学 计算机科学 系 　 上海 　 　 　 　 　 　 施 伯乐 复旦大学 计算机科学 系 　 上海 　 参考文献 ： ［ ］ BatiniCetalAcomparativeanalysisofmethodologiesfordatabaseschemaintegrationACMComputingSurveys ， ： ～ ［ ］ LarsonJetalAtheoryofattributeequivalenceInDatabaseswithApplicationonSchemaIntegrationIEEETOSE ～ ［ ］ 许学标 支持 多 数据源 互操作 的 广义 对象 视图 的 研究 博士论文 复旦大学 ， 上海 ， 　 　 　 XuXuebiaoResearchongeneralizedobjectviewforsupportinginteroperationofmultipledatasourcesinChineseFudanUniversityShanghai ［ ］ OMGThecommonobjectrequestbrokerArchitectureandspecificationrevisionObjectManagementGrouphttprubyomgorgindexhtml ［ ］ CattellRGGTheObjectDatabaseStandardODMGReleaseSanMateoCaliforniaMorganKaufmannPublishers 收稿 日期 ： 修稿 日期 ：