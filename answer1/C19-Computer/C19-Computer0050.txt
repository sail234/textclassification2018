计算机 工程 COMPUTERENGINEERING 年 第卷 第期 VolNo 基于 二维 模型 的 瞄准 点 跟踪 定位 李晓昆 摘要 为 解决 目标 跟踪 中 的 瞄准 点 准确 定位 的 问题 ， 提出 了 一种 基于 二维 模型 的 瞄准 点 跟踪 定位 算法 。 无论 目标 做 怎样 的 平移 ， 旋转 及 尺度 变化 ， 也 无论 瞄准 点 是 表面 点 还是 内部 点 ， 此 算法 都 能 确定 瞄准 点 在 目标 中 的 准确 位置 。 关键词 计算机 视觉 图像识别 目标 跟踪 二维 模型 线性组合 TracingthePositionofAimPointBasedonDModesLiXiaokunDepartmentofcomputerScience ， ShanxiInstituteofFinanceandEconomicsXi ’ anAbstract ： Tosolvetheproblemofthepostionofaimpointinobjecttracing ， anewalgorithmbasedonDmodelsisgiveninthispaperNometterhowthetracedobjectmovesrotatesorchangesisscaieandnomatterwhethertheaimpointisasurfacepointoraninsidepoingofthetracedobjectthealgoritmcancorretlyandpreciselycalculatethepositionoftheaimpointKeywords ： ComputervisionImagerecognitionObjecttracingDmodelLinearcombination 　 　 目标 跟踪 就是 在 序列 图象 中 不断 地 对 目标 进行 匹配 识别 。 到 目前为止 ， 仍然 没有 一种 最佳 的 匹配 算法 。 一般 在 跟踪目标 时 ， 尤其 是 在 有 军事 目的 的 跟踪 时 ， 不光 是 跟踪目标 物 ， 而是 锁定目标 物中 的 某 一点 ， 此 瞄准 点 往往 是 打击 的 要点 或 最 关心 的 部位 。 目标 是 三维 运动 物体 ， 其所摄 的 二维 外形 随着 其 运动 的 方向 变化 而 不同 ， 目标 上 的 瞄准 点 在 其 所 摄 外形 中 的 位置 也 随 外形 的 变化 而 漂移 ； 有时 随着 目标 方向 角度 的 变化 ， 在 所 摄 图象 里 瞄准 点 被 遮蔽 成 目标 的 内点 ； 有时 由于 背景 或 其他 因素 造成 瞄准 点 被 外界 遮挡 ， 因此 即使 跟踪 到 了 目标 ， 准确 地 跟踪 瞄准 点 的 位置 也 是 非常 困难 的 。 本文 提出 了 一种 基于 二维 模型 的 瞄准 点 跟踪 定位 算法 ， 只要 跟踪 到 了 目标 ， 通过 本文 所 提出 的 算法 就 能 准确 计算 出其 瞄准 点 的 位置 ， 而 不用 关心 瞄准 点 是否 漂移 或 被 遮挡 。 　 算法 原理 　 　 一个三维 物体 能 用 几个 该 物体 的 二维 正投影 图象 的 线性组合 来 表达 ， 其 线性组合 方式 被 称为 线性组合 表示法 ， 在 序列 图象 的 目标 跟踪 中 ， 通过 已知 目标 模型 的 特征 点 ， 并 在 所 摄 图象 中 找到 与 之 相对 应 的 点 ， 由此 可求 出 线性组合 系数 ， 此时 目标 中 的 任何 其它 一点 都 能 通过 此 线性组合 系数 来 准确 地 定位 ， 即使 瞄准 点因 目标 的 角度 变化 而 被 隐藏 ， 或 瞄准 点 本来 就是 目标 的 内部 点 ， 利用 此 方法 都 能 准确 地 确定 其 位置 。 　 基本 理论 　 　 本文 算法 建立 在 刚体 运动 、 刚体 变换 及 有关 定理 的 基础 之上 。 　 　 · 刚体 运动 ： 若 一个 物体 在 空间 运动 中其 形状 和 大小 不变 ， 即 物体 中 的 任何 两点 的 距离 保持 不变 ， 则 此 物体 被 称为 刚体 ， 它 的 运动 被 称为 刚体 运动 。 · 刚体 变换 公式 ： 假如 已 确定 了 一个 直角坐标 系 Q 中 ， 坐标系 中 的 任意 一点 P 的 初始 位置 是 xyz ， 在 刚体 运动 T 下 P 的 终止 坐标 是 x ， y ， z 。 则 xyz 与 x ， y ， z 所 存在 的 关系 就是 刚体 运动 变换 公式 ， 如 公式 所示 。 　 　 aij 是 可以 确定 的 组合 系数 ， xyz 是 P 在 空间 中 的 平移 量 。 公式 是 刚体 运动 T 的 变换 公式 ， T 是 行列式 等于 的 正交变换 。 正交变换 总 可以 看成 直角坐标 变换 ， 直角坐标 变换 和 在 直角坐标 系下 的 刚体 运动 可以 用 一种 代数 形式 描述 。 直角坐标 和 直角坐标 系下 的 运动 之所以 可以 用 同种 代数 形式 正交变换 描述 ， 还 可以 从 另 一个 角度 说明 ： 运动 总是 相对 的 ， 在 固定 于 坐标系 的 观察者 看来 ， 空间 一切 点 都 在 作 刚体 运动 ， 而 在 运动 中 的 观察者 看来 ， 则 坐标系 在 作 刚体 运动 。 在 一个 右手 直角坐标 系中 ， σ Oeee ， 其中 任意 矢量 vXeYeZe 的 象 v 为 vXeYeZe 有 如下 各式 成立 ： XaXaYaZYaXaYaZZaXaYaZ 　 　 若 viXieYieZiei 是 任意 矢量 而 viXieYieZie 是 它们 的 象 ， 它们 的 矢量 长度 不变 ， 数值 积 不变 ， 混合 积 不变 ， 即 有 下式 成立 ： vvvvvvvvvvvv 用 分量 表示 ， 即 是 ： 　 　 · 有 以下 两个 重要 定理 成立 ： 　 　 定理 在 直角坐标 系中 ， 每 一个 刚体 运动 可以 用 一个 行列式 等于 的 正交变换 表达 ； 反之 ， 每 一个 行列式 等于 的 正交变换 可以 认为 是 一个 刚体 运动 。 　 　 定理 若 a 、 b 、 c 为 空间 个 不共面 的 矢量 ， 则 空间 任意 一个 矢量 r 可以 用 a 、 b 、 c 的 线性组合 来 表示 。 　 　 有关 证明 参见 文献 。 　 二维 模型 的 线性组合 描述 三维 目标 　 　 三维 目标 在 空间 中 的 旋转 、 平移 和 尺度 变换 ， 其 所有 可能 的 成象 都 可以 简单 地 表示 为 该 目标 其它 一些 图象 的 线性组合 。 这些 线性组合 项 的 系数 一般 要 满足 某些 函数 约束 。 下面 的 内容 着重 探讨 目标 图象 的 三维 刚性 变换 和 尺度 变化 。 　 目标 在 三维空间 的 线性变换 　 　 P ， P ， P 是 对 三维 目标 O 在 个 特定 方向 所 进行 变换 矩阵 分别 为 × 的 R 、 S 、 T 线性变换 后 所 得到 的 幅 二维 图象 。 设 r 、 r 为 R 的 第一 和 第二 行向量 ， 即 PxyrOrO ， s 、 s 为 S 的 第一 和 第二 行向量 ， 即 PxysOsO ， t 、 t 为 T 的 第一 和 第二 行向量 即 PxytOtO 。 设是 对 同一 目标 O 作用 一个 随意 的 × 矩阵 U 后 得到 的 第四幅 二维 图象 ， u 、 u 为 U 的 第一 和 第二 行向量 uOuO 　 　 定理 如果 集合 rst 和 rst 是 线性 无关 的 ， 那么 存在 着 系数 aaa 和 bbb 并 有 ： 　 　 可以 看出 ， 目标 经过 一个 任意 三维空间 的 线性 变化 所 得到 的 图象 可由个 模型 图象 的 线性组合 来 表示 。 　 目标 在 三维空间 的 旋转 　 　 从 理论 上 看 旋转 是 线性 变化 的 一个 非线性 子集 ， 目标 在 旋转 后 的 图象 可由个 模型 图象 的 线性组合 来 表示 ， 只是 组合 系数 应 满足 一些 约束条件 ， 这些 约束条件 是 该 系数 的 二阶 多项式 。 在 刚性 变换 中 ， 只要 知道 幅 图象 中 的 组 对应点 即可 确定 线性组合 的 系数 。 通过 解 一个 线性方程组 ， 即可 求 出 旋转 矩阵 。 通常 选取 目标 的 特征 点时 ， 特征 点 个数 一般 大于 。 　 目标 在 三维空间 的 刚性 变化 和 尺度 变换 　 　 如果 目标 在 空间 进行 平移 和 尺度 变换 ， 则 其 仍然 可由该 目标 的 二维 图象 的 线性组合 来 表示 。 变化 过程 如节 中 所示 ， 只是 第四幅 图象 增加 了 因子 为 w 的 尺度 变换 ， 并且 平移 一个 向量 gxgy ， 即 　 　 定理 如果 rst 和 rst 是 线性 无关 的 ， 则 存在 系数 aaaa 和 bbbb 并 有 ： 　 　 ab 是 目标 在 空间 的 平移 分量 。 在 选取 目标 的 模型 图象 时 ， 尽可能 从 目标 的 各个 视角 方向 来 选取 。 　 　 当 目标 具有 光滑 边缘 时 ， 目标 在 三维空间 旋转 时会 产生 计算 上 的 误差 。 文献 对此 提出 了 一个 预测 该 目标 在 三维空间 旋转 后 情况 的 算法 。 目标 用幅 图象 的 线性组合 形式 来 表示 。 其中 幅 图象 用于 表示 三维空间 的 旋转 ， 另 一幅 附加 的 图象 表示 平移 。 　 线性组合 系数 　 　 目标 在 空间 变化 的 可能 图象 可 由 几幅 模型 图象 的 线性组合 形式 来 表示 。 模型 是 一组 L 个 二维 图象 的 集合 SSL ， 设是 目标 在 运动 中所摄 的 一幅 二维 图象 ， 存在 系数 abaLbL ， 有 bSlybLSLybL 。 在 目标 中选 一组 特征 点 并 将 其 在 模型 图象 和 P 图象 上 的 相应 位置 找到 ， 再 通过 解 方程组 可 得到 此 组系 数值 。 由 公式 可知 为 解此 方程组 一般 目标 用个 特征 点 即可 。 对于 光滑 轮廓 目标 则 需要 个 特征 点 。 　 　 组合 系数 的 求解 过程 ： 对 一般 目标 来说 用个 模型 图象 就 能 组合 出其 在 空间 中 的 变化 图象 。 在 跟踪 之前 一般 已 确定 了 模型 图象 并 确定 了 个 特征 点 在 模型 图象 中 的 坐标 位置 ， 共个 坐标值 。 在 跟踪 中 ， 摄入 一幅 图象 ， 用 识别 算法 确定 特征 点 在 P 中 的 位置 ， 特征 点 一般 都 选择 在 摄入 图象 中 容易 识别 的 点 。 设 X 为 特征 点 在 模型 图象 上 的 X 坐标 矩阵 ， 设 Y 为 特征 点 在 模型 图象 上 的 Y 坐标 矩阵 ， xij 代表 第 j 个 模型 图象 上 第 i 个 特征 点 的 X 坐标 ， px 是 特征 点 在 P 图象 中 的 X 坐标 向量 ， aaaaaT 是 组合 系数 的 第一 维系 数值 。 根据 公式 有 线性方程组 ： Xapx 如 存在 一个 确定 的 解 ， 组合 系数 为 ： aXpx 同理 有 ： YbpybYpy 　 　 b 是 组合 系数 的 第二 维系 数值 ， py 是 特征 点 在 P 图象 中 的 Y 坐标 向量 。 　 　 为了 减少 噪声 的 干扰 ， 要 挑选 适当 的 模型 图象 使 计算 具有 较 好 的 稳定性 并且 在 模型 图象 中 挑选 多于 个 特征 点解 超定 方程组 ， 则 有 ： aXpxX 称为 X 的 伪 逆 ， 如 X 是 列满 秩 的 ， 则 有 XXTXXTaXTXXTpx 同理 可以 求 出 　 bYTYYTpy 一旦 求出 a 、 b 系数 矩阵 ， 则 模型 图象 中 任意 一点 在 P 图象 中 的 相对 应 位置 都 可以 通过 代入 公式 求得 ， 将 模型 中 瞄准 点 的 位置 代入 方程 即可 得到 瞄准 点 在 P 图象 中 的 准确 位置 ， 从而 完成 瞄准 点 在 跟踪 图象 中 的 准确 定位 。 　 线性组合 法 用于 瞄准 点 的 跟踪 定位 　 　 由 上 可知 ， 只要 计算 出 某 一 时刻 所 摄入 的 跟踪 图象 的 组合 系数 abab 后 ， 将 瞄准 点 在 个 模型 图象 中 的 位置 这个 信息 是 事先 知道 的 xyxyxy 代入 公式 ， 即可 确定 该 瞄准 点 在 跟踪 图象 中 的 相应 位置 。 下面 就 给出 一个 简单 的 例子 ， 图中 的 号 点 就是 瞄准 点 ， 至 号 是 特征 点 ， a 、 b 、 c 是 一组 四面体 模型 图象 ， d 是 跟踪 图象 ， 为了 计算 方便 此 四面体 在 空间 中 平移 量 为 ， 即 ab 。 图 例子 表 特征 点及 瞄准 点 号 的 坐标 序号 abcdxyxyxyxy 　 　 通过 已知 的 至 号 特征 点 的 坐标 ， 便 可以 求 出 线性组合 系数 为 ： ab 　 　 将 该 系数 和 模型 中 的 号 点 在 模型 图象 中 的 坐标 代入 公式 ， 求得 跟踪 图象 中号 点 坐标 为 ： Px ， Py 　 　 为了 有效 地 克服 噪声 ， 实际 算法 中 采用 解超定 方程组 来求 组合 系数 ， 即用 号 点 的 坐标 来 求解 方程组 。 算法 的 实际 处理过程 是 当 一幅 图象 摄入 时 ， 首先 提取 其中 目标 的 边缘 ， 确定 模型 中 的 特征 点 在 此 目标 中 的 位置 ， 从而 计算 出 组合 系数 ， 再 通过 系数 矩阵 和 模型 中 的 瞄准 点 的 位置 之积算出 瞄准 点 在 摄入 图象 中 的 准确 位置 。 特征 点选 目标 上 很 容易 确定 的 点 ， 这些 点 的 位置 在 摄入 图象 中 也 是 比较 容易 确定 的 。 　 结论 　 　 本文 采用 线性组合 法来 确定 瞄准 点 的 位置 ， 无论 瞄准 点 是 目标 的 内点 还是 表面 点 ， 此 算法 都 能 对 在 三维空间 运动 的 物体 进行 高精度 的 瞄准 点 跟踪 定位 ， 非常 适用 于 特殊 场合 的 移动 目标 定点 跟踪 ， 从而 使此 算法 具有 很 重要 的 现实意义 。 作者简介 ： 李晓昆 男 ， 岁 ， 讲师 ， 现 从事 计算机 视觉 、 多媒体技术 等 方面 的 研究 工作 作者 单位 ： 陕西 财经学院 计算机科学 系 西安 参考文献 　 南开大学 数学系 空间 解析几何 引论 北京 ： 人民教育出版社 ， 　 BasriR ， UllmanSTheAlignmentofObjectwithSmoothSurfaceProcndICCVConf ， ： 　 HuangTS ， LeeCHMotionandStructurefromOrthographicProjectionsIEEETrans ， PattAnalMachineIntell ， 收稿 日期 ：