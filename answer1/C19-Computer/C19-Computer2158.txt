计算机 应用 研究 APPLICATIONRESERCHOFCOMPUTERSVol 　 No 　 P 无线 寻呼 系统 的 设计 与 实现 王继宏 　 阚志刚 摘要 结合 寻呼 系统 的 特点 ， 对 寻呼 系统 的 总体设计 和 功能模块 进行 详细 的 论述 ， 同时 阐明 了 无线 寻呼 的 基本 过程 ， 并 对 保证 寻呼 系统 的 高效性 、 提高 寻呼 系统可靠性 、 稳定性 所 采取 的 软硬件 实现 方案 进行 了 全面 地 研究 。 关键词 无线 寻呼 发射机 CS 模式 引言 　 　 无线通讯 是 重要 的 通讯 方式 之一 ， 它 的 优点 在于 覆盖面广 ， 移动性 好 ， 适用 于 短信息 收发 ， BP机 、 手机 等 都 是 短信息 无线通讯 系统 的 典型 实例 。 　 　 寻呼 系统 通常 是 大型 的 系统 ， 既 包括 发射机 、 基站 、 计算机网络 等 物理 硬件 ， 还 包括 相应 的 寻呼 软件 。 无线 寻呼 软件 是 在 充分利用 相关 硬件 的 基础 上 开发 的 具有 多种 功能 的 软件系统 。 寻呼 软件 的 基本功能 有 客户 信息 的 发送 、 操作员 、 客户资料 管理 、 客户 信息 统计 、 公共信息 发布 、 定时 信息 发布 等 ， 加上 其它 的 附加 功能 ， 整个 寻呼 软件系统 由 多个 相互 关联 的 模块 组成 。 在 寻呼 软件 的 开发 中 ， 根据 网络 的 特性 ， 需要 时刻 关心 信息 发送 的 高效性 、 可靠性 以及 网络 的 稳定性 等 。 在 架构 寻呼 系统 的 硬件 时 ， 要 充分考虑 网络 走线 的 科学性 和 合理性 ， 在 选择 服务器时 要 充分考虑 系统 的 可靠性 ， 在 软件 的 结构设计 上 ， 采用 适当 的 结构 保证 信息 发送 的 高速性 等 。 传统 的 寻呼 系统 因为 各种 原因 ， 一般 是 基于 Novell 网 和 DOS 系统 下 ， 华讯 寻呼 系统 采用 了 WindowsNT 操作系统 ， 实现 了 图形界面 ， 新 系统 更加 稳定 ， 在 数据备份 、 易 操作性 等 方面 具有 更大 的 优点 。 本文 将 就 这 几个 方面 进行 详细 地 论述 。 系统结构 与 功能 　 　 寻呼 系统 面向 大量 的 用户 ， 寻呼 系统 的 高效性 、 可靠性 是 硬件 配置 、 软件 实现 的 首要 目标 ， 在 开发 过程 中要 牢记 这 一点 。 根据 我们 开发 华讯 无线 寻呼 软件 的 经验 ， 我们 从 系统结构 以及 软件 的 功能 方面 进行 详细 阐述 。 系统结构 　 　 根据 寻呼 系统 通讯 量 集中 在 客户 信息 的 发送 和 查询 上 ， 我们 采用 客户 信息 服务 与 操作员 管理 、 公共信息 发布 分离 的 结构 ， 其 原因 在于 公共信息 的 发布 不像 寻呼 信息 那样 频繁 ， 占用 网络通讯 量 较 多 ， 但是 ， 公共信息 的 发布 可以 利用 夜晚 等 较为 空闲 的 时间 进行 。 同样 的 ， 对 操作员 资料 的 管理 以及 用户 资料 等 的 管理 也 不 需要 天天 进行 ， 只是 在 资料 发生变化 或 在 月底 、 年底 统计 时才 对系统 的 资料 进行 维护 。 因此 采用 的 系统结构 如图 。 图 　 基本 的 寻呼 系统结构 示意图 　 　 话务员 端 由 ～ 台 或 奔腾 的 无盘 工作站 组成 。 无盘 工作站 运行 UCDOS 操作系统 ， 这样 既 可以 降低成本 ， 也 可以 有效 防止 由于 话务员 对系统 的 不 了解 而 导致系统 崩馈 ， 无盘 工作站 与 NT 服务器 相连 ， 磁盘阵列 服务器 用于 双机 热 备份 ， 防止 在 不 可知 的 情况 下 ， 服务器 的 失败 使 整个 寻呼 系统 瘫痪 ， 影响 寻呼 服务 。 高级 操作员 使用 的 机器 控制台 为 奔腾 以上 ， 这些 计算机 通过 另 一条 网络 线路 与 服务器 相连 。 不 占用 寻呼 信息 所用 的 网络 。 寻呼 信息 的 发送 是 通过 处理机 完成 的 ， 采用 单独 的 寻呼 处理机 与 服务器 相连 ， 通过 对 服务器 上 数据库 的 读取 ， 检测 各种 发射 信息库 中 是否 有 待发 数据 ， 如果 有 待发 数据 ， 就 将 信息 传送 给 专门 的 编码 设备 ， 编码器 将 寻呼 信息 进行 编码 后 发送 出去 。 系统 功能 　 　 整个 寻呼 系统 不仅 包括 客户 信息 的 发送 还 包括 寻呼台 的 管理 功能 ， 按照 系统 架构 的 体系 ， 可以 分为 三 大部分 ： 客户 信息 的 发送 ， 这部分 主要 在 前台 话务员 端 实现 。 关于 寻呼台 的 资料 管理 ， 包括 用户 资料 的 管理 、 员工 资料 的 管理 、 公用信息 发布 、 群呼 管理 、 费用 管理 以及 销售 管理 、 财务管理 、 市场 管理 等 辅助性 功能 ， 同时 为了 进行 双向 通讯 ， 另有 广域 无线 寻呼 系统 接口 与 双向 无线 寻呼 系统 接口 ， 以供 双向 寻呼 使用 。 包括 后台 运行 的 处理机 功能 。 这三 大部分 相辅相成 共同 组成 无线 寻呼 系统 。 所有 这些 功能 都 是 通过 数据库 的 表 发生 联系 。 在 下 一部分 数据库 的 设计 中 ， 将 详细 介绍 数据库 是 如何 将 这些 模块 联系 起来 的 。 下面 具体 介绍 各 模块 的 功能 。 华讯 寻呼 软件 主要 包括 下面 几个 模块 其它 辅助 模块 略 。 　 　 ① 话务员 操作 模块 　 　 寻呼 功能 是 无线 寻呼 系统 中 最 基本 的 功能 ， 根据 用户 号 实现 及时 呼 、 信息 查询 。 系统 还 设有 优先 呼 、 紧急 呼 、 重复 呼等 。 值得注意 的 是 ， 为了 保证 寻呼 的 效率 ， 将 客户 留言 的 管理 、 复台 操作 、 机主 留言 等 功能 放在 管理员 管理 模块 中 实现 。 　 　 ② 寻呼 处理机 　 　 寻呼 处理机 的 任务 非常 重要 ， 即将 寻呼 信息 进行 编码 后 发送 出去 ， 根据 发射 的 信息 记录 把 结果 追加 到 统计 资料库 中 去 。 寻呼 处理机 主要 进行 信息 编码 和 信息 发送 。 　 　 ③ 定 时机 　 　 定 时机 处理 与 时间 相关 ， 它 在 后台 运行 ， 不 需要 人工干预 ， 所有 的 操作 都 是 由 事先 编制 的 程序 完成 的 。 它 包括 定时 呼 处理 、 整点 处理 、 检查 停机 用户 、 备份 数据库 和 催 交费 处理 等 五个 部分 。 　 　 ④ 公共信息 发布 　 　 公共信息 是 一种 特殊 的 信息 ， 它 是 由 管理员 进行 操作 的 。 　 　 公共信息 的 特点 是 ： 　 　 。 公共信息 发布 一般 是 一次性 的 发送给 一群 用户 ， 甚至 是 所有 用户 。 　 　 。 公共信息 的 长度 比较 长 。 　 　 。 公共信息 的 类型 比较 固定 、 信息 比较 相似 ， 具有 一定 的 独立性 。 　 　 因此 ， 在 进行 公共信息 发布 时 ， 采用 独立 的 公共信息 数据库 ， 对 数据库 的 内容 进行 更新 ， 在 特定 的 时间 ， 由定 时机 读取 数据库 ， 从而 自动 实现 信息 的 发送 。 　 　 ⑤ 管理员 管理 模块 　 　 管理员 管理 模块 是 无线 寻呼 软件 的 重要 组成部分 。 主要 有 客户 和 员工 的 资料 管理 、 群呼 管理 以及 对 整个 无线 寻呼 系统 的 管理 功能 。 管理员 模块 采用 相同 功能 不同 界面 的 方式 ， 即 根据 不同 管理员 的 级别 ， 显示 不同 的 功能 界面 ， 操作员 只能 实现 显示 界面 中 的 功能 ， 没有 某项 操作 权限 的 操作员 将 看不到 相应 的 操作 。 操作员 的 级别 包括 操作员 级 、 高级 操作员 领班 员级 、 管理员 分为 资料 管理员 和 值班 台长 两个 级别 级 和 高级 管理员 级 。 他们 分别 可 实现 下列 功能 中 的 部分 功能 。 　 　 ◆ 用户 资料 的 建立 、 增 、 删 、 改 、 单项 查询 、 自由组合 查询 、 各种 统计 功能 。 　 　 ◆ 操作员 资料 的 建立 、 增 、 删 、 改 、 寻呼 信息 差错 检查 、 操作员 每日 话务量 查询 。 　 　 ◆ 机主 留言 的 建立 、 删除 、 修改 。 　 　 ◆ 群呼 管理 。 　 　 ◆ 催 交费 、 开户 、 欠费 、 停机 用户 查询 与 统计 。 寻呼 系统 的 实现 方案 数据库 选择 与 设计 　 　 原则上 说 ， 数据库 的 选择 有 多种 方案 ， 可以 采用 Oracle ， SQLServer 以及 其它 数据库 ， 如 Sybase 等 。 考虑 到 寻呼 信息量 较大 的 特点 ， 以及 投入 成本 、 数据库 维护 的 易 操作性 、 数据库 的 可扩展性 、 可 升级 性 等 方面 ， 系统 采用 了 SQLServer 。 SQLServer 在 数据库 的 安全性 等 方面 有着 突出 的 特点 ， 至于 Oracle 更是 一种 性能 优良 、 功能强大 的 数据库 管理系统 ， 之所以 没有 选用 Oracle 的 原因 仅限于 成本 投入 的 考虑 ， 在 需要 个 左右 前端 工作站 的 情况 下 ， 购买 SQLServer 比 Oracle 经济 ， 另外 对于 Oracle 强大 功能 的 使用 需要 配置 素质 较 高 的 数据库管理员 ， 相对 于 Oracle 来说 ， SQLServer 的 管理 相对 简单 些 ， SQLServer 与 WindowsNT 在 安全性 等 方面 集成 得 比较 紧密 。 在 开发 过程 中 ， 我们 注意 到 SQLServer 在 完整性 方面 比 Oracle 等 数据库 略有 不足 ， 但是 这 不 影响 系统 功能 的 实现 。 　 　 正如 前面 所 提到 的 ， 数据库 连接 着 各个 功能模块 。 寻呼 软件 主要 有下 列表 ： 　 　 ◆ 用户 资料 表 Userinfo ： 用户 资料 表 用于 存放 登记 用户 的 有关 资料 ， 包括 客户 号码 、 客户 密码 、 呼机 类型 、 呼机 地址 、 起始 时间 、 终止 时间 、 呼机 频点 、 操作员 号码 等 项 。 　 　 ◆ 发射 信息 表 Transmit ： 用于 存放 待 发射 寻呼 信息 。 　 　 ◆ 信息 查询 表 Infoqury ： 信息 查询 表里 存储 在 一段时间 内 发射 的 寻呼 信息 。 　 　 ◆ 定时 信息 表 Timing ： 定时 信息 表 用于 记录 用户 按 时间 发射 的 寻呼 信息 。 　 　 ◆ 话务员 资料 表 Operator ： 类似 于 用户 资料 表 ， 用于 记录 操作员 的 有关 信息 。 　 　 ◆ 统计 信息 表 Statinfo ： 统计 信息 表中 包含 一段时间 根据 统计 信息 的 不同 分为 以日 、 周 、 月 、 年 的 统计 信息 。 　 　 ◆ 组 资料 表 Groupinfo ： 类似 于 用户 资料 表 ， 存放 着 组 的 有关 信息 。 　 　 ◆ 组待 发射 信息库 Grouptran ： 对组 验证 后 将 发射 信息 写入 本表 。 　 　 ◆ 公共信息 表 Publicinfo ： 保存 待 发射 的 公共信息 。 　 　 在 话务员 端 ， 当 话务员 接到 用户 的 电话 ， 在 输入 用户 的 呼机 号码 ， 系统 调用 用户 资料 表 ， 并 在 屏幕 上 显示 有关 信息 。 根据 这些 信息 ， 话务员 验证 用户 的 有效性 ， 身份 状态 验证 成功 后 ， 将 寻呼 信息 写入 发射 信息 表 ， 处理机 检测 到 发射 信息 表中 的 信息 ， 将 该 信息 送到 编码器 上 编码 后 发射 出去 ， 同时 将 发射 信息 写入 信息 查询 表 。 在 数据库 端 ， 书写 触发器 对 信息 查询 表 的 记录 进行 计算 ， 将 结果 写入 统计 信息 表 ， 以供 管理员 模块 使用 。 　 　 在 控制台 端 ， 组呼 的 过程 与 个人 寻呼 过程 相似 ， 管理员 对组 资料 表读 ， 对 组待 发射 信息库 写 ， 处理机 读组待 发射 信息库 并 将 信息 编码 后 发射 出去 。 公共信息 的 发射 相对 简单 ， 处理机 直接 读取 公共信息 表中 的 内容 ， 将 这些 信息 编码 排队 后 发射 。 资料 管理 与 发射 没有 关系 ， 如 用户 、 操作员 资料 的 管理 是 对 用户 资料 表 进行 读 、 写 ， 以供 话务员 使用 ， 需要 进行 统计 时 ， 管理员 读取 统计 信息 表中 的 记录 ， 对 操作员 寻呼 信息 进行 差错 检查 时 只 需 对 信息 查询 表 读取 。 所以 资料 管理 是 个 相对 独立 的 过程 。 网络操作系统 　 　 在 NT 无盘 工作站 通过 Hub 与 服务器 相连 ， 控制台 运行 WindowsWindows ， 服务器 采用 WindowsNTServer 。 开发工具 　 　 根据 不同 的 软件 模块 采用 不同 的 开发工具 。 定 时机 模块 和 话务员 寻呼 模块 采用 VCl 以上 ， 充分利用 使用 VC 开发 的 程序 具有 运行 速度 快 的 特点 ； 管理员 模块 和 公共信息 模块 采用 PowerBuilder 以上 。 信息 发送 的 流程图 　 　 寻呼 服务 是 寻呼 系统 的 基本 的 核心 功能 。 　 　 下面 ， 重点 描述 寻呼 过程 ， 图是 寻呼 流程图 。 根据 流程图 可以 进行 编码 实现 。 开发 体会 与 关键技术 　 　 整个 系统 的 开发 必须 结合 无线 寻呼 的 特点 ， 在 开发 前 必须 经过 细致 、 全面 的 调研 ， 合理 地 设计 数据库 结构 ， 对 数据库 中 各个 表 的 作用 以及 各个 表 的 结构 有 充分 的 理解 ， 开发 过程 表明 底层 数据库 的 微小 改动 常常 为 开发 工作 带来 意想不到 的 困难 与 麻烦 ； 在 网络 的 架构 方面 ， 网络 布线 、 网络设备 的 选购 都 影响 着 系统 的 效率 ； 在 实现 现有 系统 的 同时 ， 还 需要 充分考虑 系统 的 扩展 能力 ， 例如 在 单向 寻呼 系统 基础 上 实现 系统 的 双向 寻呼 功能 ， 并且 考虑 到 随着 社会 经济 的 发展 和 人们 活动 范围 的 扩大 ， 人们 越来越 不 满足 单 区域 的 寻呼 通信 ， 而是 希望 随时随地 都 能 享受 到 与 本地 一样 的 通信 服务 即 广域 无线 寻呼 。 所谓 广域 无线 寻呼 系统 联网 指 的 是 在 不同 地区 的 寻呼 控制中心 通过 某种 方式 连接起来 ， 进行 相互间 的 信息 传递 和 交换 ， 使得 这些 系统 中 的 寻呼机 用户 能够 在 联网 的 每个 区域 内 享受 寻呼 服务 。 为了 满足 广域 无线 寻呼 的 要求 ， 在 数据库 设计 中 加入 了 广域 无线 寻呼 所 需要 的 字 段 ， 如 连网 标记 、 频点 等 。 为 实现 通播 呼 、 分区 选呼 、 漫游 呼 、 跟踪 呼 和 异地 呼等 功能 提供 了 可能 。 在 系统安全 方面 集成 了 NT 、 SQLServer 的 安全性 ， 并 通过 操作员 的 权限 设置 分配 相应 功能 。 为了 保证 实时性 ， 处理机 软件 在 后台 运行 ， 数据库 的 触发器 使得 有关 的 数据库 可以 实时 更新 。 结论 　 　 本文 对 短信息 寻呼 系统 的 设计 与 实现 进行 了 详细 的 论述 ， 并 指出 在 实现 过程 中 需要 注意 的 事项 以及 采用 的 关键技术 。 从 网络 架构 、 软件 实现 等 方面 论述 了 如何 保证 寻呼 系统 的 高效性 、 可靠性 、 实时性 、 并发 性 。 系统 运行 表明 基于 图形界面 和 NTServer 下 的 系统 比 原有 的 基于 DOS 和 Novell 的 寻呼 系统 在 自动 备份 、 安全性 、 效率 性 、 易 操作性 等 方面 具有 更大 的 优点 。 本 项目 由 国家 星火计划 资助 王继宏 （ 北京航空航天大学 计算机科学 与 工程系 北京 ） 阚志刚 （ 北京航空航天大学 计算机科学 与 工程系 北京 ） 参考文献 ， FrankDerfler 著 严春莹 等 译 网络 技术 实用 指南 北京 ： 电子 工业 出版社 ， 吴洁明 PowerBuilder 应用 与 开发 北京 ： 清华大学出版社 ， Soukup 著 姜鸿英 等 译 SQLServer 技术 内幕 北京 ： 清华大学出版社 ， Kruglinski 著 王国 印译 VisualC 技术 内幕 北京 ： 清华大学出版社 ， Microsoft 著 网络 数据库系统 管理 MicrosoftSQLServer 北京 ： 科学出版社 收稿 日期 ： 年月日