计算机 应用 研究 APPLICATIONRESERCHOFCOMPUTERSVol 　 No 　 P ， 基于 Agent 的 网上 市场 体系 崔翔 　 陈跃 新 摘要 电子商务 领域 是 目前 计算机 应用 发展 的 热点 之一 ， 而 将 分布 智能 技术 应用 于 电子商务 又 是 人工智能 理论 走向 实际 应用 的 重要 方面 ， 分析 了 基于 Agent 的 网上 市场 所 应 具有 的 体系结构 及 运行机制 ， 给出 了 网上 市场 的 一般 模型 VAGMAVirtualAgentMarketplaceArchitecture 。 关键词 电子商务 Agent 代理 交易 　 引言 　 　 随着 Internet 和 WWW 技术 的 发展 ， 越来越 多 的 网上 商务 过程 开始 采用 Agent 技术 。 软件 Agent 可以 由人 所 控制 ， 也 可以 代理人 在 网上 自主 地 完成 电子 商品 或 物理 商品 的 交易过程 。 　 　 目前 ， 已经 有 许多 基于 Agent 技术 的 在线 商店 在 WWW 上 运行 ， 如 Andersen 建立 的 BargainFinder 和 由 MariaGini 建立 的 FireFly ， 这 两个 系统 均 是 用来 帮助 用户 在线 选购 CD 和 磁带 的 。 BargainFinderhttpbfcstarascom 系统 实际上 是 一个 数据检索 Agent ， 它 根据 用户 所 给出 的 信息 在 若干 网上商店 中 找到 用户 所 需 的 最 便宜 的 商品 ； FireFlyhttpwwwagentinccom 的 能力 强于 BargainFinder ， 它 除了 完成 对 商品 数据 的 检索 功能 以外 ， 还 试图 在 与 用户 的 交互 过程 中 了解 用户 的 喜好 和 偏爱 ， 并 给 于 用户 相应 的 购物 指导 。 　 　 虽然 上面 两个 基于 Agent 的 在线 商店 确实 完成 了 商品 的 买卖 过程 ， 但 它们 所 完成 的 工作 和 更 广泛 意义 上 的 电子商务 还有 很大 差距 。 主要 表现 在 ： 这 两个 系统 没有 体现 和 映射 出 商品 市场 的 一般 结构 ； 其次 ， 这 两个 系统 没有 体现 出 Agent 之间 的 协作 和 代理 交易过程 。 　 　 Kasbah 是 一个 基于 Web 的 交易系统 ， 在 该 系统 中 ， 用户 可以 创建 Agent 以 代理 自己 进行 商品 的 买卖 。 该 系统 采用 黑板 机制 ， Agent 将 自己 的 要求 提交 到 黑板 上 而后 等待 响应 。 该 系统 虽然 提供 了 代理 用户 完成 交易 的 功能 ， 但 同时 它 也 有 许多 局限性 ： Kasbah 中 的 Agent 使用 局限 的 消息 协议 ， 从而 使 Agent 之间 不能 完成 协商 ； Kasbah 只 运行 在 服务器端 ， 从而 大大 限制 了 系统 的 灵活性 ； 通过 将 所有 的 Agent 在 服务器端 建立 映象 ， Kasbah 系统 的 设计者 回避 了 Agent 之间 交互 时 通信 的 安全性 问题 ， 但 同时 限制 了 Kasbah 不 可能 允许 大量 的 甚至 是 嵌套 的 Agent 同时 运行 。 　 　 我们 认为 ， 在 一个 网上 市场 中 应该 包括 在 Internet 上 完成 交易过程 的 所有 必要 部件 ， 它 应该 支持 Agent 之间 的 交互 与 协作 ， 并 允许 由 用户 控制 或 Agent 代理 的 交易 的 完成 。 在 本文 中将 主要 讨论 以下 几个 问题 。 　 　 。 基于 Agent 的 网上 市场 应该 具有 什么样 的 结构 ？ 　 　 。 基于 Agent 的 网上 市场 应该 具有 哪些 部件 以及 如何 运行 ？ 　 　 。 基于 Agent 的 网上 市场 应该 采用 什么样 的 运行机制 ？ 　 　 为了 更好 地 说明 以上 问题 ， 我们 提出 了 一个 网上 市场 的 模型 ， 名为 VAGMAVirtualAgentMarketplaceArchitecture 。 通过 对 该 模型 的 分析 和 应用 ， 希望 对 网上 电子商务 的 发展 提供 一些 借鉴 和 参考 。 　 基于 Agent 的 网上 市场 的 基础设施 　 　 基于 Agent 的 网上 市场 应该 表现 出 一些 和 现实 世界 中 市场 相同 的 特性 Amihudl 。 例如 ， 该 市场 应该 具有 完成 货币 功能 的 银行 Panurashl ， 具有 可靠 和 安全 的 通信 机制 Bhimani ， 具有 使 货币 和 商品 安全 交易 的 传输 机制 ， 具有 对 买方 、 卖方 的 意愿 进行 宣传 的 广告 机制 ， 甚至 应该 具有 行政部门 和 法律 部门 对 市场 的 控制 和 监督机制 。 　 银行 　 　 为了 使 网上 市场 真正 成为 一个 市场 ， 它 至少 应该 具有 提供 货币 职能 和 金融服务 的 银行 部件 。 银行 Agent 和 Agent 之间 的 交互 应该 具有 开放 的 统一 的 接口 ， 该 接口 可以 使 传统 的 银行 参与 到 网上 市场 的 运行 中来 。 Pannrach 认为 ， 建立 开放 的 统一 的 银行 接口标准 具有 以下 优点 。 　 　 。 客户 可以 在 提供 服务 的 各个 银行 中 进行 选择 ， 从而 导致 银行 之间 的 竞争 并 促使 其 优胜劣汰 ； 　 　 。 对 银行 的 管理 是 统一 的 ， 从而 使 管理 措施 能够 得到 更加 明确 和 高效 地 执行 ； 　 　 。 客户 可以 更加 方便 、 高效 地 参与 银行 的 业务 。 　 通信 设施 　 　 在 系统核心 必须 有 必要 的 设施 以 支持 高效 地 、 可靠 地 通信 。 通信 设施 应该 具有 统一 的 开放 的 接口 ， 任何 开发者 都 可以 开发 符合 该 标准 的 插件 并 参与 到 系统 的 运行 中来 。 在 设计 通信 设施 时 应该 注意 以下 约束 。 　 　 。 各个 Agent 应 能够 读取 公共 黑板 以 取得 全局 信息 ； 　 　 。 各个 Agent 通信 应 采用 统一 的 语言 ， 在 语言 中 至少 应该 包括 发出 和 响应 请求 的 原语 。 　 　 如果 Agent 参与 一个 组织 的 工作 ， 在 同一 组织 中 的 Agent 可以 有 自己 的 工作 语言 。 　 广告 机制 　 　 在 现实 的 市场经济 中 ， 广告 是 不可或缺 的 重要 的 经济 手段 ， 因此 ， 在 进行 网上 商务 营销 时 ， 也 应该 有 必要 的 机制 与 之 对应 。 实现 广告 功能 的 一种 可能 方式 是 在 系统 中 设置 一个 或 多个 广告 Agent ， 广告 Agent 维护 本地 广告 信息 数据库 并 响应 其它 Agent 的 咨询 请求 。 另 一种 实现 广告 功能 的 方式 是 由 AKeller 提出 的 使用 快捷 Agent 的 方法 ， 该 Agent 拥有 自己 的 知识库 并 作为 一名 代理 者 为 其 客户 向 其它 广告 Agent 或 数据库 查询 有关 信息 。 　 网上 市场 的 运行机制 　 　 本文 的 目标 是 要 提出 一个 能够 高效快捷 地 完成 商品 的 买卖 、 银行业务 、 货币 转移 、 广告 等 多种 商务 功能 的 基于 Agent 的 网上 市场 的 模型 。 在 前面 我们 已经 提出 了 在 网上 市场 中所应 具有 的 必要 的 经济 部件 ， 在 这 一部分 中将 详细 阐述 货品 买卖 过程 中 的 营销 策略 和 方式 等 问题 。 　 基本 交易方式 　 　 目前 ， 已经 有 许多 基于 Agent 电子商务 交易方式 的 研究成果 ， 归结 起来 可 分为 以下 两类 ： 由 客户 参与 的 直接 交易方式 和 由 Agent 代理 的 交易方式 。 　 　 直接 交易方式 的 最大 优点 是 买卖双方 可以 对 价格 进行 充分 地 协商 。 在 这种 交易方式 下 ， 卖方 可以 直接 或 间接 通过 广告 Agent 向 潜在 买方 们 发出 广告 ， 买卖双方 通过 议价 达成 最后 交易 。 在 本文 开始 所 提到 几个 在线 商店 便是 直接 交易方式 的 典型 例子 。 在 直接 交易方式 中 ， Agent 需要 具有 高效 的 规则 系统 以 协助 用户 获取 市场 的 行情 及 帮助 用户 完成 协商 过程 ， Agent 的 工作 方式 如图所示 。 图 　 Agent 直接 交易方式 　 　 直接 交易方式 对 任何 一个 基于 Agent 的 网上 市场 都 是 必要 的 ， 但 在 有些 情况 下该 方式 并 不能 满足 实际 需要 ， 诸如 ： 买方 和 卖方 在 分布 的 系统 中 彼此 很难 找到 对方 ； 用户 希望 保持 匿名 身份 而 不愿 直接参与 交易过程 ； 用户 需要 定时 地 进入 市场 并 希望 Agent 代表 自己 的 利益 完成 例行 的 交易 工作 。 这时 ， 就要 引入 另 一种 交易方式 ， 即 Agent 代理 交易方式 。 在 Agent 代理 交易方式 中 ， 代理 Agent 需要 主动 地 参与 市场 ， 从 市场 中 寻找 最优 的 交易 方案 ， 代理 Agent 的 一般 工作 方式 如图所示 。 图 　 Agent 代理 交易方式 　 代理 Agent 的 交易 策略 　 　 交易 策略 是 指 整个 交易系统 的 运行 方式 及 各个 交易 Agent 的 行为 方式 ， 设计 有效 的 策略 很大 程度 上 依赖于 Agent 之间 的 交互方式 。 参与 交易 的 Agent 买方 和 卖方 为 某 一件 商品 投标 并 按照 各自 的 策略 相互 协商 ， 直到 达成 双方 均 为 满意 的 均衡 价格 fairprice 。 各个 Agent 的 策略 决定 着 各个 Agent 在 不同 情况 下 所 采取 的 行为 。 　 　 设计 Agent 交易规则 和 策略 的 核心 问题 在于 ： 在 许多 情况 下 ， Agent 并 没有 足够 的 信息 来 知道 其它 Agent 所卖 商品 的 真实 价值 。 这时 ， Agent 不仅 应该 使用 有效 的 策略 设法 取得 其它 Agent 的 私有 信息 以 了解 商品 的 真实 价值 ， 而且 还要 采用 动态 的 策略 保护 自己 的 私有 信息 和 利益 。 例如 ， 一个 Agenti 至少 知道 自己 关于 商品 I 的 保留 价格 reservationprice 。 保留 价格 是 指 卖方 Agent 愿出 价格 的 最小值 表示 为 或 买方 Agent 所愿出 价格 的 最大值 表示 为 VbiI 。 如果 Agenti 为 卖方 Agent 且 它 得到 买方 Agentj 的 保留 价格 v ， 则 i 可以 在 VbjI 的 价格 上 或 略 高 一些 向 j 发出 takeitorleaveit 的 消息 ； 反之 ， 如果 买方 Agentj 得到 VSiI ， 类似 的 情况 也 可以 发生 。 　 　 在 有些 情况 下 ， Agent 可以 通过 隐瞒 自己 的 保留 价格 为 自己 取得 利益 。 比如 ， 卖方 Agentj 可以 出价 远高于 自己 的 保留 价格 VSjI ， 通常 情况 下 ， 买方 Agenti 会 给出 一个 位于 当前 出价 和 VbiI 之间 的 折中 价格 。 在 市场 运行 中 ， 由于 同一 商品 可能 有 多个 买方 和 卖方 ， 虚伪 的 出价 将会 使 交易 变得 复杂化 。 　 　 Sun 和 Weld 通过 对 若干种 交易 策略 的 研究 和 比较 ， 发现 复杂度 高 、 具有 适应性 的 策略 其 效果 要 远 好 于 简单 还价 策略 。 在 不同 的 场景 和 目标 条件 下 ， Sun 和 Weld 提倡 使用 不同 的 策略 。 比如 一种 可用 的 策略 是 英式 拍卖 策略 ， 在 这种 策略 下 ， 一个 卖者 可由低 向 高 提升 价格 直至 只 剩 一个 买者 ； 与 此对应 ， 买者 可由高 向 低 降落 价格 直至 只 剩 一个 卖者 。 在 分布 环境 中 使用 这种 策略 将会 导致 反复 的 、 冗余 的 通信 。 　 　 另 一种 可以 采用 的 策略 是 投标 交易 策略 。 在 这种 策略 下 ， 每 一个 买方 Agent 向 卖方 Agent 对 商品 给出 投标 价格 ， 最高 的 出价 者 将 会 得到 该 商品 ， 对于 卖方 竞卖 的 情况 恰恰相反 。 采用 这种 策略 的 最大 好处 是 交易 将 会 撘 徊 綌 完成 ， 从而 避免 了 复杂 的 、 冗余 的 通信 。 　 　 与 以上 两种 策略 类似 的 还有 其它 的 一些 策略 ， 它们 均 具有 以下 不足之处 的 一种 或 几种 。 　 　 。 需要 复杂 地 、 反复 地 通信 ， 而 通信 在 分布 系统 中 恰恰 是 最 耗时 和 昂贵 的 ； 　 　 。 需要 严格 地 保护 Agent 的 私有 信息 和 保留 价格 以 维护 Agent 的 利益 ； 　 　 。 需要 动态 地 推理 其它 Agent 的 意愿 以 取得 商品 的 真实 价值 。 　 　 为了 有效 地 避免 上述 不足 ， 在 Agent 代理 交易过程 中 最 适用 的 策略 是 Vickvey 策略 Vickvey 。 使用 该 策略 可以 鼓励 在 交易过程 中 买方 Agent 和 卖方 Agent 都 按照 自己 的 真实 意愿 出价 和 竞价 ， 从而 避免 投机 ， 使 交易过程 更加 诚实 地 完成 。 　 Vickvey 策略 　 　 Vickvey 策略 同 上述 的 投标 交易 策略 类似 ， 不同之处 在于 Vickvey 策略 最后 的 成交 价格 取 若干 卖者 中次 低 或 若干 买者 中次 高 的 价格 。 例如 ， 假设 卖方 Agenti 想要 卖出 商品 I ， 买方 Agentj 和 k 分别 以 保留 价格 VbjI 和 VbkI 竞价 ， 最终 商品 I 会以 两个 价格 中次 高 的 价格 卖 给 出价 最高 的 买者 。 即 如果 VbjIVbkI ， 则 Agentj 最终 将 以 的 价格 得到 该 商品 。 在 若干 卖者 竞卖 同一 商品 的 情况 下 ， 则 竞价 最低 的 卖者 将会 以 其次 低 的 价格 卖出 商品 。 　 　 在 Vickvey 策略 下 ， 各个 Agent 都 具有 诚实 交易 的 趋势 。 比如 ， 在 有 若干 卖者 竞卖 的 情况 下 ， 卖方 Agenti 不会 竞价 低于 VSiI ， 因为 如果 存在 其它 卖方 Agent 出价 仅仅 略高于 i 的 竞价 而 低于 VSiI ， 则 i 将会 只能 以 低于 的 价格 卖出 商品 ； 而 卖方 Agenti 也 不会 竞价 高于 VSiI ， 因为 这 将 增加 其 失去 交易 机会 的 可能性 因为 其它 卖方 Agent 有 可能 竞价 低于 VSiI 。 与 此 相对 应 ， 具有 若干 买者 竞买 的 情况 也 是 类似 的 。 　 VAGMA 的 结构 　 　 VAGMA 是 我们 为了 模拟 基于 Agent 电子商务 过程 而 提出 的 网上 市场 的 模型 。 在 VAGMA 中 包含 若干个 交易 Agent 、 一个 广告 Agent 和 一个 银行 Agent 。 其中 ， 交易 Agent 完成 市场 中 所有 商品 的 买卖 过程 ； 广告 Agent 负责 维护 广告 信息 数据库 并 提供 广告 服务 ； 银行 Agent 提供 基本 的 金融服务 诸如 帐户 转帐 、 信用卡 结算 和 电子货币 结算 等 。 所有 Agent 在 功能 上 是 独立 的 并 可以 相互 通信 。 为了 简化 系统结构 和 便于 观察 Agent 之间 的 通信 情况 ， 我们 设计 了 中继 服务器 与 路由 Agent 之间 的 通信 ， 这 并 不 影响 系统模拟 的 本质 。 VAGMA 的 系统结构 如图所示 。 在下文 中将 分别 介绍 VAGMA 各个 子 部件 的 功能 和 设计 思想 。 图 　 VAGMA 的 结构 　 广告 Agent 　 　 广告 Agent 管理 维护 广告 信息 数据库 并 响应 其它 Agent 的 查询 请求 。 在 当前 的 设计 中 ， 广告 Agent 只是 作为 一个 数据库 搜索引擎 进行 工作 。 在 将来 的 设计 实现 中 ， 希望 进一步 扩展 广告 Agent 的 功能 及 数目 以 支持 分类广告 管理 。 　 银行 Agent 　 　 有关 银行 Agent 的 设计 参考 了 DigiCash 公司 的 电子货币 系统 。 在 一个 Agent 需要 钱款 时 ， 它 可 向 银行 Agent 申请 被 称为 撝 睌 的 回执 ， Agent 收到 该 支票 以后 ， 可以 用 它 作为 货币 来 支付 其它 Agent ， 而 其它 Agent 可以 再次 使用 该 支票 完成 支付 功能 ， 也 可以 申请 银行 Agent 结算 该 支票 并 完成 资金 在 银行帐户 中 的 转移 。 　 交易 Agent 　 　 一个 交易 Agent 具有 钱 夹 、 货单 、 广告 管理 和 交涉 四个 子 部件 ， 其 结构图 如图所示 。 图 　 交易 Agent 的 结构 　 　 钱 夹 部件 负责管理 有关 银行帐户 、 支票 、 套 接字 等 信息 并 完成 其上 的 相应 操作 ， 它 提供 了 Agent 完成 银行 相关 任务 的 用户 接口 ， 钱 夹 部件 同时 负责 Agent 之间 的 货币 支付 工作 。 　 　 货单 部件 用于 管理 有关 该 交易 Agent 所有 的 存货 的 清单 ， 并 将 其 保存 到 数据库 中 。 货品 可以 通过 人工 加入 或 Agent 购买 加入 到 货品 清单 中 。 如果 需要 卖出 一件 商品 ， 货单 部件 则 将 该 商品 的 有关 信息 传递 给 广告 部件 和 协商 部件 。 　 　 广告 部件 提供 交易 Agent 和 广告 Agent 之间 交互 的 接口 ， 交易 Agent 可以 通过 该 部件 向 广告 Agent 增加 广告 信息 或 跟踪 广告 信息 的 变化 。 　 　 交涉 部件 负责 搜索 商品 、 协调 两个 Agent 之间 的 交互 过程 在 人工 交易方式 下 或 自动 的 完成 交易过程 在 代理 交易方式 下 。 在 人工 交易方式 下 ， 交涉 部件 可以 接收 用户 查询 广告 的 请求 并 将 由 广告 Agent 传回 的 结果 过滤 后 呈现 给 用户 ， 也 可以 协调 用户 同 其它 交易 Agent 的 协商 过程 直到 交易 的 最终 完成 ； 在 代理 交易方式 下 ， 交涉 部件 按照 Vickvey 策略 自动 地 完成 交易过程 。 　 总结 　 　 在 本文 中 ， 我们 提出 了 虚拟 网上 市场 的 框架结构 ， 并 详细 讨论 了 网上 市场 所 应 具有 的 功能 部件 以及 网上 市场 的 运行机制 ， 最终 给出 了 一个 网上 市场 的 模型 VAGMA 。 目前 ， VAGMA 还 处于 设计阶段 ， 我们 将 进一步 完善 它 的 设计 并 最终 使 它 在 WWW 上 运行 起来 。 在 进一步 设计 和 实现 VAGMA 的 过程 中 ， 我们 还 需要 解决 以下 问题 ： 细化 和 定义 Agent 之间 的 消息 API ， 一种 可能 的 方法 是 定义 标准 的 ACLAgentCommunicationLanguage ； 进一步 研究 和 测试 Vickvey 策略 ； 扩充 广告 Agent 的 功能 和 数目 以 支持 分类广告 业务 。 崔翔 （ 国防科技大学 计算机 学院 长沙 ） 陈跃 新 （ 国防科技大学 计算机 学院 长沙 ） 参考文献 ， NRJenningsPFaratinADEPTManagingBusinessProcessesUsingIntelligentAgent ， NRJenningsPFaratinAgentBasedBusinessProcessManagement ， NRJenningsPFaratinUsingIntelligentAgenttoManageBusinessProcess ， MaksimTsvetovatyyMariaGiniMAGMAAnAgentBasedVirtualMarketforElectronicCommerceAppliedArtificialIntelligence ～ ， NRJenningsControllingCooperativeProblemSolvinginIndustrialMultiAgentSystemsusingJointIntentionsAppliedArtificialIntelligence ， NRJenningsJMCorevaUsingARCHONtodeveloprealworldDAIapplicationsforelectricitytransportationmanagementandparticleacceleratorcontrol ， DCockburnNRJenningsARCHONADAISystemforIndustrialApplications ｖ RoualdSchrootenWalterVanDeVeldeSoftwareAgentFoundationforDynamicInterativeElectronicCatalogsAppliedArtificialIntelligence ～ 收稿 日期 ： 年月日