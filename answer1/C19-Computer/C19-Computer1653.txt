软件 学报 JournalofSoftwareVolNoP 一个 新 的 无 向 图画 图 算法 黄 竞伟 　 康立山 　 陈毓屏 摘 　 要 　 将 一般 无向 图 的 画图 问题 转化 为 函数 优化 问题 用 遗传算法 求 目标 函数 的 最优 解 的 近似值 从而 得到 无向 图 自动 画图 算法 的 一个 一般 框架 新 方法 的 特点 是 不同 的 画图 算法 的 框架 都 一样 所 不同 的 只是 反映 无向 图画 图 问题 的 美观 标准 的 目标 函数 其 优点 在于 算法 统一 、 方法 简单 、 容易 实现 、 便于 修改 并且 易于 并行 化 可以 直接 用来 画非 连通 图 关键词 　 无向 图画 图 美观 准则 算法 遗传算法 中图法 分类号 　 TPANewGraphDrawingAlgorithmforUndirectedGraphsHUANGJingwei 　 KANGLishan 　 CHENYupingStateKeyLaboratoryofSoftwareEngineering 　 WuhanUniversity 　 Wuhan 　 Abstract 　 InthispapertheauthorstransformtheproblemofundirectedgraphdrawingtotheproblemoffunctionoptimizationthenusegeneticalgorithmstofindapproximateoptimalsolutionsoftheobjectivefunctionandthusobtainageneralstructureofundirectedgraphdrawingalgorithmsThecharactersofthenewmethodarethestructuresofthedifferentgraphdrawingalgorithmsarethesamethedifferenceexistsonlyintheobjectivefunctionswhichreflectaestheticcriteriaTheadvantagesofthemethodareunifiedalgorithmssimplicityeasymodificationandparallelismanditcanbeusedtodrawnonconnectedgraphsdirectlyKeywords 　 Undirectedgraphgraphdrawingaestheticcriteriaalgorithmgeneticalgorithm 　 　 图是 一种 应用 非常 广泛 的 数据结构 它 可以 用来 表示 各种 复杂 的 系统 模型 其中 顶点 表示 系统 中 的 元素 边 表示 元素 之间 的 关系 将 图 整齐 、 美观 地画 出来 对于 理解 和 分析模型 都 十分 重要 通常 表示 复杂 系统 模型 的 图 的 顶点 数和边 数 都 相当 大 以致于 用 人工 方法 将 图 整齐 、 美观 地画 出来 几乎 是 不 可能 的 因而 如何 用 计算机 自动 地 将 图 整齐 、 美观 地画 出来 便 成为 一个 十分 重要 的 课题 除此之外 画图 graphdrawing 在 电路 布线 、 网络管理 、 软件工程 、 图形学 、 程序 可视化 、 计算机辅助 教学 等 领域 中 都 有着 众多 的 应用 近年来 画图 受到 了 越来越 多 的 关注 形成 了 计算机科学 领域 中 的 一个 新 的 研究 方向 　 　 自年 以来 国际 上 已 举办 了 七届 每年 一次 画图 学术 研讨会 文献 ［ ］ 是 一篇 有关 画图 的 综述 性 文章 通常 对 各种 不同 类型 的 图 有 不同 的 画图 算法 譬如 有 画树 、 平面图 、 有向图 、 无向 图 的 算法 而 在 每 一类 图中 又 根据 图 的 特性 和 美观 准则 的 不同 而 有 不同 的 算法 对于 无向 图画 图 算法 所 使用 的 方法 有 弹性 模型 方法 ［ ］ 和力 导引 方法 （ forcedirectedmethod ） ［ ］ 近年来 也 有人 开始 应用 遗传算法 来 研究 有向图 画图 算法 ［ ］ 在 本文 中 我们 研究 基于 遗传算法 的 一般 无向 图 的 画图 问题 一般 无向 图画 图 算法 较 少见 在 文献 ［ ］ 中 TKamada 与 SKawai 将 一个 无向 连通 图 看作 是 一个 顶点 为 钢环 、 边为 弹簧 的 动态 系统 而 画图 过程 则 是 一个 逐步 减少 整个 系统 总 能量 的 过程 在 文献 ［ ］ 中 TMJFruchterman 和 EMReingold 将 一个 无向 连通 图 看作 是 一个 力学系统 算法 的 最终 目的 是 要 使 力学系统 达到 平衡 在 以前 的 研究 中 不同 的 无 向 图画 图 算法 有 不同 的 算法 框架 所用 的 知识 也 有所不同 但 一般 根据 应用 的 不同 、 个人 美学 观点 的 不同 有时 需要 对 美观 准则 作出 修改 以 适应 不同 的 需要 而 以前 的 画图 算法 由于 美观 准则 嵌入 算法 之中 故 难以 修改 因而 我们 需要 一种 易于 修改 的 画图 算法 以 适应 不同 的 需要 在 本文 中 我们 将 一般 无向 图 的 画图 问题 看成 是 一个 函数 优化 问题 然后 用 遗传算法 ［ ］ 来求 目标 函数 的 最优 解 的 近似值 从而 得到 无向 图 自动 画图 算法 的 一个 一般 框架 不同 的 画图 算法 的 算法 框架 都 一样 所 不同 的 只是 反映 无向 图画 图 问题 的 美学 标准 的 目标 函数 其 优点 在于 算法 统一 、 方法 简单 、 便于 修改 并且 易于 并行 实现 而且 以前 的 无 向 图画 图 算法 都 是 用来 画 连通 图 的 对于 画非 连通 图则 采用 分别 画 每 一个 连通分支 然后 将 不同 的 连通分支 拼接 起来 的 方法 而 我们 的 算法 则 可以 直接 用来 画非 连通 图 　 画图 问题 　 　 一个 图 GVE 是 一个 顶点 与 边 的 集合 对 其中 V 为 顶点 的 集合 E 为边 的 集合 图 G 的 一种 画法 θ 是 将 G 的 每个 顶点 v ∈ V 映射 到 平面 上 的 一个点 Pv 并 将 G 的 每 条边 uv 映射 成 平面 上 的 一条 端点 分别 为 Pu 和 Pv 的 简单 约 当 曲线 若 G 的 每 条边 都 被 映射 成 一条 直线 段 我们 称 画法 θ 是 一个 直线 画法 若 G 的 每 条边 都 被 映射 成 一条 折线 称 画法 θ 是 一个 折线 画法 若 G 的 每 条边 都 被 映射 成 一条 平行 、 垂直线 段 链称 画法 θ 是 一个 正交 画法 若 G 的 任 两条 边 的 映像 都 不 相交 称 画法 θ 是 一个 平面 画法 　 　 在 本文 中 我们 研究 无向 图 的 直线 画法 这样 画图 算法 的 目的 是 将 图画 到 某个 有限 区域 中 譬如 显 视屏 上 而 算法 的 主要 任务 是 在 一定 的 美观 准则 下 对 图 中 的 每 一个 顶点 v 指定 一对 坐标 xvyv 一旦 每个 顶点 都 被 指定 一对 坐标 后 则 将 图画 出来 就是 一件 很 容易 的 事情 了 这 只 需 在 有 边 相连 的 顶点 之间 画出 一条 直线 段 即可 对于 画 一般 的 无 向 图 根据 应用 和 观点 的 不同 有 不同 的 美观 准则 但 人们 仍 普遍 接受 以下 美观 准则 ： 　 　 尽可能 将 顶点 均匀 地 分布 在 有限 区域 中 　 　 尽可能 避免 边 的 交叉 　 　 尽可能 使 边长 一致 　 　 反映 图 的 内在 对称性 　 　 在 我们 的 算法 中 只有 准则 、 得到 了 明显 的 体现 但 算法 的 结果 也 基本 满足 准则 我们 注意 到 准则 在 有些 情况 下 并非 必需 例如 对 立方体 图 我们 有 两种 画法 如图 和 图 所示 虽然 图中 的 画法 没有 边 的 交叉 但图 比图 看起来 要 好 一些 Fig 　 Drawingwithoutcrossingedges 图 　 无 交叉 边 的 画法 Fig 　 Drawingwithcrossingedges 图 　 有 交叉 边 的 画法 　 无向 图画 图 问题 的 遗传算法 　 　 遗传算法 是 近年来 发展 迅速 的 一种 随机 搜索算法 它 的 一个 重要 应用领域 是 函数 优化 用 遗传算法 求解 画图 问题 的 方法 是 将 画图 问题 转化 为 函数 优化 问题 如何 设计 目标 函数 使 之 能够 反映 无向 图画 图 问题 的 美观 标准 是 用 遗传算法 求解 画图 问题 的 关键 下面 我们 首先 讨论 如何 设计 目标 函数 　 　 对 目标 函数 的 设计 基于 下面 两点 观察 　 　 任何 两个 顶点 不应 靠 得 太近 　 　 有 边 相连 的 顶点 应 相互 靠近 　 　 我们 用 下面 的 函数 作为 目标 函数 　 其中 Pi 为 顶点 Vi 在 平面 上 的 映像 pipj 表示 pi 与 pj 之间 的 距离 为 两点 间 的 理想 边长 n 为 图 G 的 顶点 个数 S 为 有限 区域 的 面积 k 为 由 实验所 得 的 参数 若 条件 不 满足 则 使式 中 的 第个 和 式 增加 若 条件 不 满足 则 使式 中 的 第个 和 式 增加 因而 画图 问题 转化 为 求式 的 最小值 点 　 　 若用 xvyv 分别 表示 顶点 v 在 平面 上 的 映像 Pv 的 x 坐标 和 y 坐标 则 因为 我们 希望 将 图画 到 有限 区域 a ≤ x ≤ bc ≤ y ≤ d 中 因而 我们 的 目的 是 求解 以下 带 约束条件 的 目标 函数 最小值 问题 　 其中 a ≤ xvi ≤ bc ≤ yvi ≤ din 　 　 用 遗传算法 求解 式 的 思想 是 首先 用 称为 染色体 的 一种 简单 数据结构 对式 可能 的 解 xyxyxnyn 进行 编码 然后 将 一组 遗传 算子 作用 于 一个 解 的 编码 群体 即 染色体 的 群体 上 使 其 能够 保持 一些 关键 信息 通过 不断 演化 最后 得到 式 的 最小值 点 或 近似 最小值 点 　 　 设计 一个 遗传算法 的 基本 步骤 由 编码 、 设计 适应度 函数 、 制定 选择 策略 、 选择 控制参数 、 设计 遗传 算子 以及 给出 终止 准则 个 部分 组成 下面 分别 对 这个 步骤 进行 讨论 　 　 编码 　 　 与 传统 的 遗传算法 不同 对式 中 每个 可能 的 解 xyxyxnyn 我们 用 一个 长度 为 n 的 实数 串 xyxyxnyn 来 表示 这样 做 的 一个 主要 好处 是 可以 避免 解码 过程 减少 算法 时间 　 　 设计 适应度 函数 　 　 因为 本 问题 是 求 最小值 点故 我们 可以 选择 一个 常数 Cmax ≥ fxyxyxnyn 直接 从 fxyxyxnyn 来 设计 适应度 函数 FxyxyxnynCmaxfxyxyxnyn 　 　 选择 策略 　 　 为了 防止 早熟 发生 我们 首先 用 Sigma 比例变换 技术 对 个体 的 适应 值 进行 变换 即 对 个体 i 的 适应 值 fi 首先 用 公式 将 fi 变换 到 ExpVali 其中 ft 为 第 t 代 群体 平均 适应 值 而 σ t 表示 第 t 代 群体 的 标准 方差 然后 对 ExpVali 应用 基于 适应 值 比例 的 选择 策略 但 保留 适应 值 最高 的 染色体 　 　 控制参数 　 　 在 我们 的 算法 中取 NPcPm 它们 分别 表示 群体 的 大小 、 杂交 概率 与 变异 概率 最大 演化 代数 T 一般 为 图 的 顶点 数 与 边数 的 函数 在 实际 应用 中 可 根据 图 的 顶点 数 与 边数 的 大小 取 不同 的 值 　 　 遗传 算子 设计 　 　 对于 杂交 算子 我们 采用 单点 杂交 即 若 所 选择 的 两个 父体 为 A （ aaanB （ bbbn 选择 杂交 位置 为 则 所 得到 的 两个 新 个体 分别 为 A ′ aaabbn 　 B ′ bbbaan 　 　 对于 变异 算子 我们 采用 如下 的 非 一致 变异 算子 ： 设父 体为 A （ aaakan 第 k 个 分量 被 选出 来 进行 变异 假设 第 k 个 分量 为 y 坐标 其 取值 范围 为 ［ cd ］ 则 变异 后 所 得到 的 新 个体 为 A ′ （ aaak ′ an 其中 这里 Random 产生 或 的 一个 随机 整数 而 Δ tyyrtT 其中 r 为 ［ ］ 之间 的 一个 随机数 t 为 当前 演化 代数 T 为 最大 演化 代数 显然 Δ ty 的 值域 为 ［ y ］ 且 当 t 趋于 T 时 Δ ty 趋于 这 表明 在 演化 初期 变异 算子 在 较大 的 范围 内 搜索 而 在 演化 后期 变异 算子 起到 一种 局部 微调 的 作用 　 　 终止 准则 　 　 采用 算法 运行 若干代 后 终止 算法 基于 遗传算法 的 无 向 图 的 通用 画图 算法 框架 描述 如下 　 　 　 　 其中 DrawGraphGXY 过程 画出 顶点 的 x 坐标 为 Xxxxn 顶点 的 y 坐标 为 Yyyyn 的 图 G 　 实验 结果 　 　 我们 已用 Delphi 编程 实现 上述 算法 对于 一些 简单 无向 图 的 画法 我们 得到 了 与 文献 ［ ］ 类似 的 结果 但 对于 一些 较 复杂 的 无 向 图 由于 文献 ［ ］ 中 的 算法 对于 图 的 某些 初始状态 容易 陷入 局部 最小 的 近似值 因而 会 得到 较差 的 画法 而 我们 的 算法 的 稳定性 较 好 实验 表明 画法 的 最终 结果 不 依赖于 图 的 初始状态 而且 我们 的 算法 不仅 可以 用来 画 连通 图 也 可以 直接 用来 画非 连通 图 只 需 将 不同 的 连通分支 画到 不同 的 区域 中 即可 图是 用 我们 的 算法 所画 出 的 若干 图例 Fig 　 Experimentresults 图 　 实验 结果 　 结束语 　 　 本文 用 遗传算法 求解 画图 问题 在 遗传算法 的 基础 上 我们 得到 了 一个 通用 无向 图画 图 算法 框架 不同 的 无 向 图画 图 算法 的 框架 都 一样 所 不同 的 只是 所 设计 的 反映 无向 图画 图 问题 美学 标准 的 目标 函数 例如 若 我们 在 上面 的 算法 中 用 文献 ［ ］ 中 的 能量 函数 代替 目标 函数 则 可 得到 与 文献 ［ ］ 类似 的 结果 因而 在 基于 遗传算法 的 通用 无向 图画 图 算法 框架 的 基础 上无向 图画 图 算法 的 主要 任务 就是 设计 出 能够 反映 各种 美观 标准 的 目标 函数 根据 不同 的 应用 以及 不同 的 美观 标准 如何 自动 生成 满足要求 的 目标 函数 是 我们 今后 进一步 的 研究 的 方向 本文 研究 得到 国家自然科学基金 No 、 国家 稿 科技 项目 基金 ZT 和 湖北省 科技 项目 基金 NoP 资助 黄 竞伟 武汉大学 软件工程 国家 重点 实验室 　 武汉 　 康立山 武汉大学 软件工程 国家 重点 实验室 　 武汉 　 陈毓屏 武汉大学 软件工程 国家 重点 实验室 　 武汉 　 Emailjwhuangpublicwhhbcn 参考文献 ． BattistaGDEadesPTamassiaRetalAlgorithmsfordrawinggraphsanannotatedbibliographyComputationalGeometryTheoryandApplications ～ ． KamadaTKawaiSAnalgorithmfordrawinggeneralundirectedgraphInformationLetters ～ ． FruchtermanTMJReingoldEMGraphdrawingbyforcedirectedplacementSoftwarePracticeandExperience ～ ． KosakCMarksJShieberSAutomatingthelayoutofnetworkdiagramswithspecifiedvisualorganizationIEEETransactionsonSystemManandCybernetics ～ ． MichalewiczZGeneticAlgorithmsDataStructuresEvolutionProgramsrdeditionNewYorkSpringerVerlag 收稿 修稿