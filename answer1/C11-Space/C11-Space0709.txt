航空 工艺技术 AERONAUTICALMANUFACTURINGTECHNOLOGY 年 　 第期 　 No 空间 自由 曲面 五 坐标 数控 加工 无 干涉 刀位 轨迹 生成 算法 InterferenceFreeToolPathGenerationAlgorithmforAxisNCMachiningSpatialFreeFormedSurface 李立杰 　 王 　 珉 　 　 ［ 摘要 ］ 　 提出 了 一种 空间 自由 曲面 五 坐标 数控 加工 无 干涉 刀位 轨迹 生成 算法 ， 有效 地 解决 了 多 坐标 数控 加工 中 存在 的 干涉 问题 。 　 　 关键词 ： 数控 加工 　 刀位 轨迹 　 干涉 　 　 ［ ABSTRACT ］ 　 ThispaperpresentsaninterferencefreetoolpathgenerationalgorithmforaxisfreeformedsurfacemachiningthisalgorithmresolvestheproblemsofinterferenceduringtheNCmachiningeffectively 　 　 KeywordsNCmachining 　 Toolpath 　 Interference 　 　 随着 航空航天 、 船舶 和 汽车 工业 的 发展 ， 越来越 多 的 复杂 曲面 零件 需用 多 坐标 数控机床 进行 加工 。 特别 是 采用 平头 端 铣刀 进行 五 坐标 数控 加工 时 ， 由于 平头 端 铣刀 在 刀头 各处 的 切削速度 相等 ， 其 切削 效率 要 比球头 刀 高 。 另外 ， 平头 端 铣刀 磨损 修复 后 尺寸 不变 ， 而球头 刀 磨损 后 很 难 修复 成 与 原来 相同 的 尺寸 ， 因此 ， 平头 端 铣刀 在 加工 质量 上 较 球头 刀 有 很大 改善 ， 并且 由于 增加 了 两个 旋转 自由度 ， 其 加工 柔性 更好 ， 在 工业 中 的 应用 也 日益 广泛 。 但是 ， 五 坐标 数控 加工 也 存在 着 严重 的 缺陷 ， 即 加工过程 中 极易 产生 干涉 ， 而 如何 解决 五 坐标 数控 加工 中 的 干涉 已 成为 生产 中 亟待解决 的 问题 。 刀具 与 被 加工 表面 间 的 干涉 分为 曲率 干涉 和 瓶颈 干涉 两种 。 当 被 加工 表面 的 曲率 半径 小于 刀具 半径 时 ， 刀具 和 被 加工 表面 间 就 会 发生 曲率 干涉 。 有时 尽管 被 加工 表面 的 曲率 半径 大于 刀具 半径 ， 但 仍 有 可能 发生 刀具 过切 被 加工 表面 的 现象 ， 此时 的 干涉 称为 瓶颈 干涉 ， 如图所示 。 在 空间 自由 曲面 五 坐标 数控 加工 中 ， 如何 确定 各类 刀具 的 无 干涉 刀位 轨迹 ， 至今 仍 是 一个 难题 。 特别 是非 球头 刀 ， 由于 形状 各异 ， 且 不 具备 球头 刀 的 法矢 自适应性 ， 因而 与 球头 刀 相比 ， 其 在 生成 数控 加工 刀 轨及 进行 干涉 检查 时 更 困难 。 图 　 刀具 与 被 加工 表面 间 的 干涉 Fig 　 Interferenceoftoolwithsurfacetobemachined 　 　 本文 针对 空间 自由 曲面 五 坐标 数控 加工 中 存在 的 干涉 问题 ， 提出 了 一种 平头 端 铣刀 无 干涉 刀位 轨迹 的 生成 算法 。 　 刀具 坐标系 和 局部 坐标系 及 刀具 有效 半径 的 定义 　 　 刀具 坐标系 XtYtZt ： 刀具 坐标系 定义 在 刀具 上 ， 以 刀具 底面 中心点 为 原点 Ot ， 原点 与 CC 点 刀具 与 被 加工 表面 的 切 触点 的 连线 为 Xt 方向 ， Yt 为 刀具 轴线 方向 ， Zt 与 XtYt 成 右手 系 ， 如图所示 。 图 　 刀具 坐标系 和 局部 坐标系 Fig 　 Toolcoordinatesystemandlocalcoordinatesystem 　 　 局部 坐标系 XLYLZL 局部 坐标系 以 CC 点为 原点 OL ， 以 瞬时 切削 方向 为 XL 方向 ， YL 为 被 加工 表面 在 CC 点 的 法向 ， ZL 与 XL ， YL 成 右手 系 ， 如图所示 。 　 　 刀具 有效 半径 ： 平头 端 铣刀 底部 轮廓 在 YLZL 平面 上 的 投影 为 一 椭圆 ， 它 随着 走刀 方向 的 变化 而 变化 ， 如图所示 。 在 此 平面 内 ， 可以 用 半径 为 Re 的 圆弧 来 近似 代替 CC 点 附近 的 刀具 轮廓 ， 称此 圆弧 半径 Re 为 平头 端 铣刀 的 有效 半径 ， 经 推导 得 　 　 　 　 　 　 … … … … 式 中 ， r 为 刀具 半径 ， α 为 刀具 倾角 ， ksin α sin α 。 当 α ° 时 ， k 对 α 的 变化 非常 敏感 ， α 的 微小 改变 可 引起 k 的 急剧 变化 。 图 　 平头 端 铣刀 的 有效 半径 Fig 　 Effectiveradiusofbuttendmillingtool 　 CC 轨迹 的 确定 　 　 所有 CC 点 的 集合 构成 了 CC 轨迹 。 文献 ［ ］ 中 提出 了 种 CC 轨迹 产生 方法 ， 分别 为 利用 u 参数 线 、 v 参数 线 和 uv 线 作为 CC 轨迹 。 尽管 这些 方法 比较简单 且 在 某种 情况 下能 满足 加工 要求 ， 但是 对于 一些 空间 自由 曲面 ， 由于 其 参数 空间 中 的 直线 在 实际 的 笛卡儿 空间 中 并 不是 直线 ， 即 在 参数 空间 中 的 等 行距 ， 在 笛卡儿 空间 中 并不一定 是 等 行距 的 ， 因此 采用 这些 方法 产生 的 CC 轨迹 的 行距 必须 仔细 设定 ， 才能 保证 被 加工 表面 的 残留 高度 符合要求 。 　 　 为 消除 以上 缺陷 ， 采用 一组 垂直于 某一 轴线 的 平行 平面 去 截 被 加工 表面 ， 其交线 即 为 CC 轨迹 ， 各 平行 平面 间 的 距离 为 行距 。 这样 就 使得 CC 轨迹 在 笛卡儿 空间 中为 等 行距 ， 且 为 平面曲线 。 如前所述 ， 平头 端 铣刀 在 切削 被 加工 表面 时 ， 在 CC 点 相当于 以 半径 为 有效 半径 的 球头 刀 进行 切削 ， 当 刀具 沿 CC 轨迹 移动 时 ， 相邻 两 CC 轨迹 间会 产生 残留 高度 ， 如图所示 。 残留 高度 与 行距 间 的 关系 如下 ： 式 中 ， ρ 为 CC 点 在 主法 矢 方向 的 曲率 半径 ； c 为 残留 高度 ； d 为 刀 轨间 的 行距 。 图 　 残留 高度 与 行距 间 的 关系 Fig 　 Relationshipbetweenscallopandcuttocutdistance 　 刀位 轨迹 的 确定 　 　 在 五轴 数控 加工 中 ， 通常 以 平头 端 铣刀 底部 中心点 为 刀 位点 CL 点 ， 同时 ， 在 切削 过程 中 平头 端 铣刀 向 切削 方向 倾斜 一定 角度 α ， 则 初始 刀 位点 数据 相对 于 局部 坐标系 为 　 　 　 　 　 式 中 ， r 为 平头 端 铣刀 半径 ； α 为 刀具 初始 倾角 。 　 　 在 切削 加工 中 ， 为了 避免 干涉 ， 刀具 倾角 α 又 时常 需要 变更 Δ α 角度 增加 为 ， 减少 为 ， 同时 偏转 β 角度 ， 各 角度 的 旋转 轴线 和 方向 如图所示 ， 则 调整 后 的 刀位 在 局部 坐标系 中为 　 　 　 　 干涉 的 消除 　 曲率 干涉 的 消除 　 　 在 五 坐标 数控 加工 中 ， 刀具 的 实际 切削 形态 随着 刀位 的 改变 而 改变 。 为了 避免 干涉 ， 刀具 有效 切削 形状 应 与 被 加工 表面 在 CC 点 附近 的 局部 形状 相适应 ， 因此 ， 当 选择 决定 刀位 的 α 和 β 角度 时 ， 应使 Re ρ c ρ c 为 被 加工 表面 CC 点 在 YLZL 平面 的 曲率 半径 。 由式 可知 ， Re 与 α 的 选择 有关 ， 已知 ρ c 与 r ， 即可 求出 无 干涉 时 的 α 。 　 　 由 Re ρ c 得 解此 不等式 ， α 取 其中 一 合适 值 。 　 瓶颈 干涉 的 消除 　 　 在 五 坐标 数控 加工 中 ， 当 Re ρ c 时 ， 尽管 无 曲率 干涉 ， 但是 刀具 的 侧缘 和 后缘 仍 有 可能 过切 被 加工 表面 ， 发生 瓶颈 干涉 。 在 图 中 ， 以 CC 点为 圆心 ， 在 平行 于 ZtXt 的 平面 内以 r ε ε 为 半径 作圆 ， 把 位于 此圆 内且 与 刀具 底部 在 此 平面 内 的 投影 重合 点 从 局部 坐标 转换成 刀具 坐标 ， 其 转换 公式 为 　 　 　 　 　 图 　 刀具 角度 调整 Fig 　 Toolangleadjustment 　 　 为了 简化 计算 ， 我们 只 需 对 可能 干涉 点 进行 转化 ， 对 干涉 点 进行 刀位 修正 。 干涉 点 的 确定 方法 如下 ： 　 　 当 XL 且 ≤ r 时 ， 此点 为 可能 干涉 点 ， 需 进行 转化 计算 ； 　 　 当 ≤ r ， 且 Yt 时 ， 此点 为 干涉 点 。 　 　 当 Yt 时 ， 刀具 与 被 加工 表面 发生 干涉 ， 为了 消除 干涉 ， 必须 改变 α 或 β 角度 一般 只 需 变更 α 即可 ， 最后 使 Yt ≤ ， 即 　 　 　 XLcos β sin α YLcos α ZLsin β sin α ≤ … 　 　 一般 预先 设定 β ＝ β ， 则 式 可 整理 为 　 　 　 XLcos β sin α YLcos α ZLsin β sin α ≤ … 解式 可得 其中 ， ≤ α ≤ π 。 　 　 为了 避免 干涉 ， 刀具 所 选 α 角度 必须 大于 α min ， 并且 定义 PK 是 干涉 点 Pi 中 比值 ｜ YT ， Pi ｜ ／ ｜ PCC ， Pi ｜ 达到 最大值 的 点 ， 则 α K ＝ α Δ α 　 　 为了 在 所有 干涉 点 都 消除 瓶颈 干涉 ， 刀具 需 倾斜 的 角度 α 规定 如下 ： α min ＝ Max ［ α ， α K ］ 　 　 平头 端 铣刀 五 坐标 数控 加工 无 干涉 刀轨 生成 过程 如图所示 。 图 　 无 干涉 刀位 轨迹 生成 过程 Fig 　 Generationofinterferencefreetoolpath 　 　 本 算法 较 好地解决 了 空间 自由 曲面 平头 端 铣刀 五 坐标 数控 加工 中 的 曲率 干涉 和 瓶颈 干涉 问题 ， 能够 较 方便 地 产生 无 干涉 刀位 轨迹 ， 可 用于 航空 行业 用 高速 铣床 、 片 铣刀 加工 曲面 蜂窝 零件 的 刀位 计算 。 该 算法 已 在 工作站 上 开发 的 CNC 系统 中 实现 。 作者 单位 南京航空航天大学 参考文献 　 　 　 LeeYSChangTCTwophaseapproachtoglobaltoolinterferenceavoidanceinaxismachiningComputAidedDes ～ 　 　 　 VeeramaniDSelectionofanoptimalsetofcuttingtoolsizesforDpocketmachiningComputAidedDes ～ 　 　 　 LiSJerardRBaxismachiningofsculpturedsurfaceswithaflatendcutterComputAidedDes ～ 责编 　 宇 　 迪 　