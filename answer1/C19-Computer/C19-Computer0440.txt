自动化 学报 ACTAAUTOMATICASINICA 　 Vol 　 No 　 P 计算机 视觉 中 摄像机 定标 综述 邱 茂林 　 马 颂德 　 李毅 摘要 回顾 了 摄影 测量学 和 计算机 视觉 中 的 各种 摄像机 定标 方法 ， 对 各种 方法 进行 了 分析 、 比较 、 并 讨论 了 摄像机 定标 方法 应用 于 计算机 视觉 中 的 特点 关键词 计算机 视觉 ， 摄像机 定标 ， 摄影 测量学 ， 立体 视觉 ， 三维重建 OVERVIEWOFCAMERACALIBRATIONFORCOMPUTERVISIONQIUMaolinBeijingOpenLabofCognitiveSciencesUniversityofSciencesandTechnologyofChinaBeijingMASongdeLIYiNationalLabofPatternRecognitionInstituteofAutomationChineseAcademyofSciencesBeijingAbstractInthispaperthecameracalibrationmethodsinphotogrammertryandcomputervisionarereviewedcategorizedandcomparedwithFeaturesoftheapplicationofcameracalibrationmethodsincomputervisionarediscussedKeywordsComputervisioncameracalibrationphotogrammertrystereovisionDreconstruction 引言 　 　 计算机 视觉 的 基本 任务 之一 是从 摄像机 获取 的 图像 信息 出发 计算 三维空间 中 物体 的 几何 信息 ， 并 由此 重建 和 识别 物体 ， 而 空间 物体 表面 某点 的 三维 几何 位置 与其 在 图像 中 对应点 之间 的 相互 关系 是 由 摄像机 成像 的 几何 模型 决定 的 ， 这些 几何 模型 参数 就是 摄像机 参数 在 大多数 条件 下 这些 参数 必须 通过 实验 与 计算 才能 得到 ， 这个 过程 被 称为 是 摄像机 定标 由于 在 摄影 测量学 方面 也 存在 着 同样 的 问题 ， 早年 在 这个 方向 已经 取得 了 很多 研究成果 对于 计算机 视觉 而言 ， 考虑 到 摄像机 定标 在 理论 和 实践 中 的 重要 价值 ， 学术界 在 最近 余年 来 进行 了 广泛 的 研究 ， 基于 不同 的 出发点 和 思路 取得 了 一系列 成果 ， 对于 不同 的 问题 背景 它们 都 有 其 各自 的 应用 价值 我们 认为 ， 对 现有 的 各种 方法 进行 总结 、 比较 和 分类 ， 以 揭示 它们 之间 的 相互 关系 ， 是 一项 有 意义 的 工作 　 　 摄像机 定标 技术 早就 应用 于 摄影 测量学 ［ ～ ］ 摄影 测量学 中 所 使用 的 方法 是 数学 解析 分析 的 方法 ， 在 定标 过程 中 通常 要 利用 数学方法 对 从 数字图像 中 获得 的 数据 进行 处理 通过 数学 处理 手段 ， 摄像机 定标 提供 了 专业 测量 摄像机 与非 量测 摄像机 的 联系 而 所谓 的 非量 测 摄像机 是 指 这样 一类 摄像机 ， 其 内部 参数 完全 未知 、 部分 未知 或者 原则上 不 稳定 摄像机 的 内部 参数 指 的 是 摄像机 成像 的 基本参数 ， 如主点 图像 中心 、 焦距 、 径向 镜头 畸变 、 偏轴 镜头 畸变 以及 其它 系统误差 参数 　 　 对于 计算机 视觉 研究 而言 ， 在 利用计算机 技术 实现 对 三维 景物 的 描述 、 识别 和 理解 这一 任务 时 ， CCD 摄像机 是 对 物理 世界 进行 三维重建 的 一种 基本 测量 工具 ， 这时 摄像机 定标 被 认为 是 实现 三维 欧氏 空间 立体 视觉 的 基本 而 又 关键 的 一步 总体 来说 ， 其 计算方法 与 摄影 测量学 中 所 使用 基本相同 ［ ］ 这些 问题 在 计算机 视觉 中 得到 了 进一步 研究 ， 这 是因为 计算机 视觉 中 的 问题 与 摄影 测量学 中 的 问题 相比 ， 有着 显著 不同 的 特点 ： 　 　 计算机 视觉 系统 中 使用 CCD 摄像机 作为 价格低廉 的 非量 测 摄像机 摄像机 参数 未知 或者 不 稳定 ， 从而 导致 成像 过程 不 稳定 ， 并且 CCD 摄像机 数字化 图像 分辨率 低 ， 存在 量化 误差 ， 存在 较大 的 非线性 镜头 畸变 　 　 计算机 视觉 中 所 测量 的 一般 为 近景 ， 为了 使 系统 小巧 ， 两 摄像机 之间 的 基线 长度 不 可能 很长 ， 从而 使得 系统 计算误差 较大 　 　 在 计算机 视觉 中 ， 进行 三维重建 需要 大 数量 的 图像 点 ， 有时 要求 实时 地 处理 数据 并 给出 结果 　 　 此外 ， 不同 的 应用 背景 也 对 定标 技术 提出 了 不同 的 要求 在 立体 计算机 视觉 中 ， 如果 系统 的 任务 是 物体 识别 ， 则 物体 相对 于 某 一个 参考 坐标系 的 绝对 定位 显得 并 不 特别 重要 ， 更 重要 的 是 物体 特征 点间 相对 位置 的 精度 举例来说 ， 在 一个 基于 CAD 的 物体 识别系统 中 ， 所 研究 的 物体 上 的 特征 的 相对 位置 必须 具有 足够 高 的 精度 ， 才能 进行 有效 的 匹配 和 识别 如果 系统 的 任务 是 物体 的 定位 ， 相对 于 某 一个 参考 坐标系 的 绝对 定位精度 就 特别 重要 例如 ， 在 一个 自主 车辆 导航系统 中 自主 式 移动机器人 必须 准确 地 知道 其 自身 的 位置 、 工作 空间 中 障碍物 的 位置 、 以及 障碍物 的 运动 情况 ， 才能 有效 地 、 安全 地 进行 导航 CCD 摄像机 的 上述 特点 和 应用 问题 的 要求 使得 定标 技术 、 精度 和 实时性 等 问题 的 研究 显得 特别 重要 ， 同时 也 导致 了 研究成果 的 多样性 　 　 摄像机 参数 总是 相对 于 某种 几何 成像 模型 的 ， 这个 模型 是 对 光学 成像 过程 的 简化 ， 比如 最 常用 的 针孔 模型 ， 它 是 摄像机 定标 研究 的 基本 模型 然而 很多 情况 下 这种 线性 模型 不能 准确 描述 摄像机 成像 的 几何 关系 ， 如 在 近距 、 广角 时 的 情形 ， 因此 还 需要 考虑 线性 或 非线性 的 畸变 补偿 后 ， 才能 更 合理 地 看作 针孔 模型 成像 过程 利用 校正 后 的 模型 进行 三维重建 才能 得到 更 高 的 精度 因此 成像 模型 和 畸变 补偿 成为 计算机 视觉 中 摄像机 定标 研究 的 重点 　 　 上述 这些 内容 构成 了 传统 摄像机 定标 研究 的 主要 问题 其 基本 方法 是 ， 在 一定 的 摄像机 模型 下 ， 基于 特定 的 实验 条件 如 形状 、 尺寸 已知 的 定标 参照物 ， 经过 对 其 图像 进行 处理 ， 利用 一系列 数学 变换 和 计算方法 ， 求取 摄像机 模型 的 内部 参数 和 外部 参数 ， 大致 有 基于 单帧 图像 的 基本 方法 和 基于 多 帧 已知 对应 关系 的 立体 视觉 方法 　 　 另 一种 重要 的 应用 背景 是 ， 在 很多 情况 下 ， 由于 存在 经常性 调整 摄像机 的 要求 ， 而且 设置 已知 的 定标 参照物 也 不 现实 ， 这时 就 需要 一种 不 依赖 定标 参照物 的 所谓 摄像机 自 定标 方法 ， 成为 目前 摄像机 定标 研究 的 重点 总的来看 ， 现有 的 摄像机 定标 技术 大体 可以 归结为 两类 ： 传统 的 摄像机 定标 方法 和 摄像机 自 定标 方法 传统 的 摄像机 定标 方法 　 　 从 计算 思路 的 角度 上 看 ， 传统 的 摄像机 定标 方法 可以 分成 四类 ， 即 利用 最优化 算法 的 定标 方法 ， 利用 摄像机 变换 矩阵 的 定标 方法 ， 进一步 考虑 畸变 补偿 的 两步 法 和 采用 更为 合理 的 摄像机 成像 模型 的 双 平面 定标 方法 文 ［ ］ 中 按照 求解 算法 的 特点 将 它 分为 直接 非线性 最小化 方法 迭代法 、 闭式 求解 方法 和 两步 法 ， 也 不失为 一种 好 的 划分 方法 利用 最优化 算法 的 摄像机 定标 方法 　 　 这 一类 摄像机 定标 方法 的 优点 是 ， 可以 假设 摄像机 的 光学 成像 模型 非常复杂 ， 包括 成像 过程 中 各种因素 然而 由此 带来 的 问题 是 ： 　 　 摄像机 定 标的 结果 取决于 摄像机 的 初始 给定 值 ， 如果 初始值 给 得 不 恰当 ， 很难 通过 优化 程序 得到 正确 的 定标 结果 　 　 优化 程序 非常 费时 ， 无法 实时 地 得到 定标 结果 　 　 摄影 测量学 中 的 传统 方法 　 　 文 ［ ］ 的 定标 方法 是 这 一类 定标 技术 的 典型 代表 他 考虑 了 摄像机 成像 过程 中 的 各种因素 ， 精心设计 了 摄像机 成像 模型 对于 每 一幅 图像 ， 利用 了 至少 个 参数 来 描述 其 与 三维 物体 空间 的 约束 关系 ， 计算 量 非常 大 由于 引进 的 参数 比较 多 ， 并 使用 了 特殊 的 专业 量测 像 机其 所 摄取 的 照片 的 分辨率 比 普通 的 固态 成像 感光 阵列 高倍 以上 ， 在 图像 投射 和 三维重建 时 取得 了 很 高 的 精度 　 　 对于 Faig ［ ］ 所 使用 的 方法 ， 我们 还要 提及 注意 的 一点 是 ， 他 利用 的 约束条件 是 针孔 摄像机 模型 的 共面 约束条件 他 所 使用 的 方法 实际上 是 一种 自 定标 方法 我们 要 指出 这 一点 的 原因 是 ， 摄像机 自 定标 技术 的 讨论 也 是 本文 的 一个 重要 内容 直接 线性变换 方法 DLT 　 　 直接 线性变换 方法 是 AbdelAziz 和 Karara 首先 于 年 提出 的 ［ ］ 通过 求解 线性方程 的 手段 就 可以 求得 摄像机 模型 的 参数 ， 这是 直接 线性变换 方法 的 吸引力 之 所在 然而 这种 方法 完全 没有 考虑 摄像机 过程 中 的 非线性 畸变 问题 ， 为了 提高 定标 精度 ， 非线性 最优化 算法 仍 不可避免 正如 Karara 自己 所 指出 的 那样 ， 当 我们 首先 提出 直接 线性变换 方法 时 ， 我们 给出 了 一组 基本 的 线性 约束方程 ， 用来 表示 摄像机 坐标系 与 三维 物体 空间 坐标系 之间 的 线性变换 关系 ， 没有 考虑 成像 时 任何 的 非线性 补偿 问题 并 将 相应 的 参数 引入 约束方程 然而 到 后来 ， 直接 线性变换 方法 改进 扩充 到 能 包括 这些 非线性 因素 ， 并 使用 非线性 的 手段 求解 时 ， 直接 线性变换 方法 这个 术语 却 没有 改变 这 段 说明 指出 了 直接 线性变换 方法 具有 两种 含义 ， 一种 含义 是 直接 通过 求解 一组 线性方程 得到 摄像机 的 有关 参数 ； 另 一种 含义 是 求解 的 过程 不 排除 使用 非线性 优化 算法 　 　 直接 线性变换 方法 是 对 摄影 测量学 中 的 传统 方法 的 一种 简化 尽管 从 得到 的 直接 线性变换 矩阵 可以 求取 摄像机 的 内部 参数 和 外部 参数 ， 但 也 可以 不必 这样 做 与 摄影 测量学 中 的 传统 方法 相比 ， 更 符合 计算机 视觉 中 应用 问题 的 要求 和 所 使用 的 CCD 摄像机 的 特点 ， 成为 连接 摄影 测量学 的 计算机 视觉 之间 的 桥梁 两个 领域 都 可以 使用 直接 线性变换 方法 对 摄像 进行 标定 直接 线性变换 方法 所 使用 的 模型 是 其中 是 三维 物体 空间 中 控制点 的 坐标 ， （ uv ） 是 图像 上 对应 于 三维 控制点 的 图像 点 的 坐标 ， lij 是 直接 线性变换 方法 的 待定 参数 　 　 不失 一般性 ， 我们 可以 令 l ＝ 如果 知道 NN ＞ 个 标准 参照物 的 控制点 的 坐标 及其 对应 的 图像 上 的 坐标 uv ， 个 参数 就 可以 用 线性 最小 二乘 算法 计算 　 　 当 不 考虑 摄像机 成像 过程 镜头 的 非线性 畸变 时 ， 直接 线性变换 方法 可以 划分 为 我们 下面 将要 讨论 的 一类 定标 方法 当 考虑 非线性 畸变 时 ， 直接 线性变换 方法 中 图像 点 与 三维空间 中 控制点 的 对应 关系 则 是 在 这里 ， 是 标准 参照物 上 的 控制点 坐标 ， 且 （ uivi ） 是 标准 参照物 上 控制点 对应 的 实际 图像 坐标 这些 图像 点 利用 数字图像处理 技术 获得 是 校正 后 的 图像 点 坐标 是 在 图像 点 （ uivi ） 处 的 镜头 畸变 校正 　 　 由此 我们 可以 看出 ， 在 直接 线性变换 方法 中 ， 非线性 畸变 因素 的 引入 是 非常 方便 的 　 Dainis 和 Juberts 在 文 ［ ］ 中 给出 了 利用 直接 线性变换 方法 进行 摄像机 定 标的 结果 ， 他们 的 系统 是 为了 准确 的 测量 机器人 的 运动 轨迹 该 系统 能够 实时 地 测量 出 机器人 的 运动 轨迹 ， 但 并 不 要求 定标 算法 对系统 的 标定 是 实时 的 利用 透视 变换 矩阵 的 摄像机 定标 方法 　 　 从 摄影 测量学 中 的 传统 方法 可以 看出 ， 刻划 三维空间 坐标系 与 二维 图像 坐标系 关系 的 方程 一般说来 是 摄像机 内部 参数 和 外部 参数 的 非线性 方程 如果 忽略 摄像机 镜头 的 非线性 畸变 并且 把 透视 变换 矩阵 中 的 元素 作为 未知数 ， 给定 一组 三维 控制点 和 对应 的 图像 点 ， 就 可以 利用 线性 方法 求解 透视 变换 矩阵 中 的 各个 元素 　 　 严格来说 ， 基于 摄像机 针孔 模型 的 透视 变换 矩阵 方法 与 直接 线性变换 方法 没有 本质 的 区别 ， 而且 透视 变换 矩阵 与 直接 线性变换 矩阵 之间 只 相差 一个 比例 因子 基于 两者 都 可以 计算 摄像机 的 内部 参数 和 外部 参数 　 　 这 一类 定标 方法 的 优点 是 不 需 利用 最优化 方法 来 求解 摄像机 的 参数 从而 运算 速度 快 ， 能够 实现 摄像机 参数 的 实时 的 计算 缺点 是 ： 　 　 定标 过程 中 不 考虑 摄像机 镜头 的 非线性 畸变 ， 定标 精度 受到 影响 ； 　 　 线性方程 中 未知 参数 的 个数 大于 要求 解 的 独立 的 摄像机 模型 参数 的 个数 ， 线性方程 中 未知数 不是 相互 独立 的 这种 过分 参数 化 的 缺点 是 ， 在 图像 含有 噪音 的 情况 下 ， 解得 线性方程 中 的 未知数 也许 能 很 好 的 符合 这 一组 线性方程 ， 但 由此 分解 得到 的 参数值 却 未必 与 实际 情况 很 好 地 符合 　 　 利用 透视 变换 矩阵 的 摄像机 定标 方法 被 广泛应用 于 实际 的 系统 ， 并 取得 了 满意 的 结果 ［ ～ ］ 　 Ganapathy 在 文 ［ ］ 中 首先 给出 了 一个 由 透视 变换 矩阵 求解 摄像机 内部 参数 和 外部 参数 的 方法 ， 并 对 分解 过程 作 了 详细 的 分析 两步 法 　 　 摄影 测量学 中 的 传统 方法 要 使用 最优化 算法 求解 未知 参数 ， 求解 的 结果 常常 取决于 给定 的 初始值 如果 初始值 给定 不 合适 ， 就 很 难 得到 正确 的 结果 直接 线性变换 方法 或者 透视 变换 矩阵 方法 可以 利用 线性 方法 求解 摄像机 参数 ， 其 缺点 是 没有 考虑 镜头 的 非线性 畸变 、 精度 不高 如果 先 利用 直接 线性变换 方法 或者 透视 变换 矩阵 方法 求解 摄像机 参数 ， 再 以 求得 的 参数 为 初始值 ， 考虑 畸变 因素 ， 并 利用 最优化 算法 进一步提高 定标 精度 ， 这 就 形成 了 所谓 的 两步 法 ［ ， ］ 　 Tsai ［ ］ 在 他 的 论文 中 所 使用 的 是 典型 的 两步 法在 他 的 方法 中 ， CCD 阵列 中 感光 元 的 横向 间距 和 纵向 间距 被 认为 是 已知 ， 其 数值 是 靠 摄像机 厂家 提供 的 他 所 假设 的 摄像机 内部 和 外部 参数 分别 是 ： 　 　 f 等效 焦距 ； 　 　 kk 镜头 畸变 参数 ； 　 　 ｓ x 非 确定性 标度因子 ， 它 是 有 摄像机 横向扫描 与 采样 定时 误差 引起 的 ； 　 　 （ CxCy ） 图像 中心 或主点 ； 　 　 　 t 三维空间 坐标系 与 摄像机 坐标系 之间 的 旋转 矩阵 和 平移 向量 　 Tsai 的 两步 法 基于 以下几点 观察 ， 参照 图 图 平行 性 约束 　 　 假设 摄像机 镜头 的 畸变 是 径向 的 ， 无论 畸变 如何 变化 ， 从 图像 中心点 Oi 到 图像 点 （ xdyd ） 的 向量 的 方向 保持 不变 ， 且 与 平行 如图所示 ， Poz 是 光轴 上 的 一点 ， 其 Z 坐标 与 物点 在 摄像机 坐标系 下 的 坐标值 相同 ； 　 　 等效 焦距 f 对 xd 和 yd 产生 同样 的 影响 ， 所以 f 的 大小 不 影响 向量 的 方向 ； 　 　 当 世界 坐标系 沿着 x 和 y 轴 放置 和 平移 ， 使得 在 每 一点 有 然后 坐标系 沿着 z 方向 平移 时 ， 对 x ｕ 和 y ｕ 的 影响 相同 ， 从而 向量 的 方向 保持 不变 ； 　 　 在 每 一点 处 向量 的 约束条件 与 径向 畸变 表达式 的 系数 、 等效 焦距 、 三维空间 平移 向量 t 的 z 分量 无关 这一 约束条件 对于 确定 三维空间 的 旋转 矩阵 R 、 从 三维 世界 坐标系 到 摄像机 坐标系 平移 向量 的 x 和 y 分量 、 非 确定性 标度因子 sx 是 充分 的 　 　 Tsai 说明 了 上面 的 平行 约束条件 对 参数 的确 是 很 有利 的 它 不仅 对 唯一 的 确定 外部 参数 和 内部 参数 中 的 标度因子 sx 是 充分 的 ， 而且 对 这些 参数 的 求解 归结为 求解 具有 五至 七个 参数 的 线性方程 　 　 Tsai 的 方法 只 考虑 了 径向 畸变 ， 没有 考虑 切向 畸变 在 文 ［ ］ 中 同时 考虑 了 切 向 畸变 ， 并 给出 了 相应 的 算法 ， 是 对 两步 发 的 重要 发展 ， 此外 ， 他 的 工作 还 提出 了 定标 精度 的 分析方法 双 平面 定标 方法 　 　 研究 人员 在 传统 摄像机 定标 研究 的 另 一 方向 也 作 了 深入 的 探讨 这 就是 寻找 更 合理 的 摄像机 模型 ， 使 之 更 全面 、 更 有效 地 表示 CCD 摄像机 实际 成像 过程 Martins 等 首先 提出 了 双 平面 模型 （ twoplanemodel ） ［ ］ 马 颂德 和 魏国 庆 ［ ］ 在 利用 双 平面 模型 标定 摄像机 参数 方面 做 了 大量 的 研究 工作 ［ ～ ］ 　 　 这种 方法 的 优点 是 利用 线性 方法 就 可以 解 有关 参数 ； 缺点 是 要求 解 大量 的 未知 参数 ， 存在 过分 参数 化 的 倾向 　 　 双 平面 模型 与 针孔 模型 的 基本 区别 在于 ， 双 平面 模型 不像 针孔 模型 那样 要求 所有 投射 到面 像 平面 上 的 光线 必须 经过 光 心 给定 成像 平面 上 的 任意 一个 图像 点 ， 便 能够 计算 出 两个 定标 平面 上 的 相应 点 ， 从而 确定 了 投射 到 成像 平面 上 产生 该 图像 点 的 光线 双 平面 模型 示于 图中图 双 平面 模型 　 　 对 每 一个 定标 平面 ， 利用 一组 定 标点 建立 彼此 独立 的 插值 公式 虽然 插值 公式 是 可逆 的 ， 但 其 逆 过程 需要 一个 搜索算法 ， 所以 所 建立 的 模型 一般 只 用于 从 图像 到 定标 平面 的 映射 过程 在 文 ［ ］ 中 ， 提出 了 三种 插值 方法 ： 线性插值 、 二次 插值 和 线性 样条 插值 　 　 线性 近似 时 ， 定标 平面 上 相应 点 坐标 表示 成 图像 点 坐标 的 线性组合 计算公式 为 piAi ｘ L 　 i 这里 LuvT 是 图像 点 的 齐次 坐标 ； 是 第 i 个 定标 平面 上 的 相应 点 ； Ai 是 一个 × 的 回归 参数 矩阵 　 　 要 确定 所有 的 参数值 ， 对于 每 一个 平面 应该 知道 至少 三点 当 已知 N （ N ＞ ） 个定 标点 时 ， Ai 可以 利用 最小 二乘 技术 求解 ， 求解 公式 为 其中 P 和 L 是 × N 阶 矩阵 ， 其 第 j 列 分别 是 向量 p ｉ 和 L ｉ 所 对应 的 第 j 个定 标点 　 　 在 一般 情况 下 ， Ai 总共 有个 特定 参数 当 两个 定标 平面 平行 于 XY 平面 时 ， 两个 回归 参数 矩阵 的 第三行 具有 （ ， Zi ） 的 形式 ， 故此 未知 数目 减至 个 　 　 利用 两次 插值 对 两个 定标 平面 进行 二阶 近似 ， 是 第 i 个 定标 平面 上 的 相应 点 ； Ai 是 一个 × 的 回归 参数 矩阵 　 　 要 确定 所有 的 参数值 ， 对于 每 一个 平面 应该 至少 知道 点当 已知 N （ N ＞ ） 个定 标点 时 ， Ai 同样 可以 利用 最小 二乘 技术 求解 　 　 与 第一种 情况 相似 ， 在 一般 情况 下 ， 总共 有个 待定 参数 当 两个 定标 平面 平行 于 XY 平面 时 ， 两个 回归 参数 矩阵 的 未知 参数 数目 可以 减少 个 　 　 使用 线性 样条 插值 近似 两个 定标 平面 时 ， 定 标点 越 多 ， 近似 结果 就 越 准确 对于 每 一个 线性 样条 平面 近似 时 至少 需要 三个 点 每 三个 相邻 的 最近 点 定义 一个 插值 平面 对 每 一个 近似 插值 平面 的 求解 与 第一种 情况 相似 　 　 马 颂德 和 魏国 庆 在 他们 的 文章 中 ［ ， ］ ， 通过 对 成像 过程 的 分析 ， 并 考虑 了 镜头 畸变 因素 ， 提出 了 利用 下 式 作为 从 图像 到 两个 定标 平面 的 回归 模型 并 进行 实验 验证 ， 该 方法 的 优点 是 全部 非线性 模型 参数 可以 用 线性 方法 求解 　 （ ） 摄像机 自 定标 方法 　 　 在 小孔 模型 下 ， 摄像机 自 定标 可以 在 三个 层次 上 进行 在 对外 参数 一无所知 的 条件 下 ， 即 对 空间结构 不 作 任何 假设 ， 摄像机 的 运动 也 不能 量化 描述 ， 这时 的 定标 只能 给出 投影 矩阵 M ， 而 不能 从中 分解 出 摄像机 内外 参数 ， 这是 射影 意义 下 的 定标 如果 假设 成像 深度 足够 大 ， 即 满足 平行投影 条件 ， 这是 可以 进行 仿射 意义 下 的 定标 ， 其 结果 是 由 无穷远 点 引入 的 同形 （ Homography ） 矩阵 如果 能 精确 得到 摄像机 运动 的 外 参数 ， 投影 矩阵 的 分解 就 可能 是 唯一 的 ， 这时 可以 得到 摄像机 内 参数 ， 这 是 最 理想 的 自 定标 关于 这个 问题 的 详细 论述 请参阅 文 ［ ］ ， 本 节 我们 讲述 目前 自 定标 研究 的 几种 主要 结果 利用 本质 矩阵 和 基本 矩阵 的 摄像机 定标 方法 　 　 假设 摄像机 的 光学 成像 模型 为 针孔 模型 ， 基本 矩阵 所 定义 的 是 基于 两幅 图像 上点 的 对应 关系 的 基本 几何 约束 关系 这个 基本 的 几何 约束 关系 表示 如下 ： 　 　 　 其中 ETR 称为 本质 矩阵 ， R 是 旋转 矩阵 ， T 是 由 平移 向量 元素 构成 的 斜 对称 矩阵 ， 它们 描述 了 两个 摄像机 坐标系 之间 的 位置 关系 本质 矩阵 是 由 LonguetHiggins 教授 首先 引入 的 ［ ］ 　 　 因为 本质 矩阵 只 包含 摄像机 外部 参数信息 ， 即 两个 摄像机 坐标系 之间 相对运动 关系 ， 所以 根据 本质 矩阵 能够 求得 摄像机 的 外部 参数 这 就是 所谓 的 通过 点 对应 求 运动 的 Motionfrompointmatches 问题 　 　 ODFaugeras 和 SMaybank 在 文 ［ ］ 中 详细 地 分析 了 Motionfrompointmatches 问题 的 解 的 性质 ， 证明 了 该 问题 的 多 解性 他们 通过 代数 几何 和 传统 射影 几何 两种 途径 给出 了 此 问题 解 的 性质 的 证明 记 本质 矩阵 为 E ， 则 矩阵 E 满足 下列 关系 ： 　 　 由 上式 得到 九个 三次 多项式 方程 这 九个 多项式 方程 是 线性 独立 的 ， 它们 定义 了 矩阵 E 的 一个 代数 流形 M 在 给定 对 对应点 时 ， M 的 维数 是 ， 度数 是 ， E 的 解 的 最大 个数 是 在 给定 足够 多 对 对应点 时 ， E 的 解 的 最大 个数 是 　 　 假设 摄像机 的 内部 参数 是 fx ， fyuv ， 图像 点 P 和 P 的 齐次 坐标 分别 是 则 方程 的 向量 m 和 m 可以 表示 成 　 ， 这里 把 方程式 和 代入 方程 ， 则 有 　 其中 　 就是 基本 矩阵 　 　 可见 ， 基本 矩阵 不仅 包含 了 摄像机 的 外部 参数信息 ， 而且 也 包含 了 摄像机 的 内部 参数信息 求得 基本 矩阵 后 ， 由此 可以 进一步 求解 内部 参数 或者 外部 参数 或者 两者 另外 ， 基于 基本 矩阵 也 可以 求取 外极线 变换 的 参数 ［ ～ ］ 利用 绝对 二次曲线 和 外极线 变换 性质 的 摄像机 定标 方法 　 　 文献 ［ ， ］ 对 利用 绝对 二次曲线 和 外极线 变换 性质 的 摄像机 定标 方法 进行 了 研究 ， 其 主要 思想 如下 ： 　 Kruppa 方程 ［ ］ 将 外极线 变换 与 绝对 二次曲线 Ω 的 图像 ω 联系 起来 ω 仍然 是 摄像机 成像 平面 上 的 二次曲线 ， 其 确定 了 摄像机 的 内部 参数 Kruppa 方程 提供 了 从 外极线 变换 求取 摄像机 的 内部 参数 的 途径 ， 而 这些 外极线 变换 与 摄像机 的 运动 相 联系 为了 确定 绝对 二次曲线 Ω 的 图像 ω ， 摄像机 必须 至少 运动 三次 、 求得 三个 外极线 变换 　 　 绝对 二次曲线 是 无穷远 平面 上 的 一个 特殊 的 二次曲线 ， 其 与 空间 的 欧氏 性质 紧密 相关 在 射影 空间 P 的 笛卡尔 坐标系 下 ， 绝对 二次曲线 Ω 的 方程 是 　 　 绝对 二次曲线 Ω 在 刚体 运动 下 不变 的 性质 ， 使得 其 图像 ω 与 摄像机 的 方位 无关 它 只 决定 于 摄像机 的 内部 参数 矩阵 A 　 　 摄像机 从 位置 a 移动 到 位置 bk 是 连接 a 处到 b 处 摄像机 光心 的 连线 ， P 和 P ′ 是 与 此次 运动 相联 的 外 极点 实际上 ， 外 极点 P 和 k 在 第一个 成像 平面 上 的 投影 ； 外 极点 P ′ 是 k 在 第二个 平面 上 的 投影 Π 是 过 k 的 任一 平面 ， 其 在 第一个 成像 平面 和 第二个 成像 平面 上 的 投影 分别 为 l 和 l ′ 外极线 变换 定义 了 一个 从 经过 P 的 直线 到 经过 P ′ 的 直线 的 一个 同形 homography ， 且 满足 上面 定义 的 l 和 l ′ 的 对应 关系 符号 表示 同形 对应 ， 例如 　 　 由于 摄像机 成像 平面 上 的 Ω 的 图像 ω 与 摄像机 的 位置 无关 ， 如果 平面 Π 与 绝对 二次曲线 Ω 相切 ， 则 Π 在 两个 成像 平面 上 的 投影 和 ′ 都 与 ω 相切 由此 进一步 我们 可以 得到 ， 经过 P 与 ω 相切 的 两条 切线 通过 外极线 变换 和 经过 P ′ 与 ω 相切 的 两条线 对应 与 ω 相切 的 外极线 相对 应 这个 条件 给出 了 两个 约束 关系 ， 它们 将 外极线 变换 与 图像 ω 联系 起来 Kruppa 方程 是 这 两个 束 关系 的 代数 形式 描述 　 　 在 第一个 像 平面 上 使用 射影 坐标 利用 外极线 与 定 直线 y 相交 的 关系 可以 把 相应 的 外极线 参数 化设 〈 py 〉 为 过点 P 和 y 的 一条 外极线 ， 任意 一点 X 落 在 〈 py 〉 上当 且 仅 当 p × yX 又 设 D 是 二次曲线 ω 的 对偶 二次曲线 ， 根据 D 的 定义 ， 〈 py 〉 与 ω 相切 当且 仅 当 它 落 在 这条 二次曲线 上 ， 即 p × yTDp × y 其中 D 的 定义 为 　 上 式 一共 含个 参数 ， 由 ω 确定 D 时 存在 一个 比例 因子 如果 把 这个 标度因子 也 考虑 在内 ， D 有个 自由度 令 y 并 将 式 代入 式 ， 有 　 其中 　 同样 ， 根据 摄像机 第二个 成像 平面 上 的 外极线 〈 p ′ y ′ 〉 与 图像 ω 相切 约束 关系 可以 得到 一个 与 式 类似 的 约束 关系 ： 　 其中 系数 的 计算 关系式 也 与 式 相 类似 　 　 外极线 变换 规定 了 一个 从 直线 y 到 直线 y ′ 的 一个双 线性变换 N 如果 y 且 y ′ y ， y ， T ， 则 成立 ， 当且 仅 当 y ′ Ny 令 τ y ／ y ， τ ′ y ′ ／ y ′ ， 则 双 线性变换 N 可 表示 为 　 已知 两个 外 极点 pp ′ 关于 利用 对应点 求取 外 极点 的 问题 请参阅 文献 ［ ～ ］ 和 一组 对应点 利用 　 并 对 方程 应用 最小 二乘 技术 ， 即可 求得 参数 abcd 　 　 已知 参数 abcd 之后 ， 由 方程 ， 和 可得 下面 的 关系 ： 　 　 　 方程 中 的 每 一个 方程 是 τ 的 二次方程 ， 两个 方程 只 相差 一个 比例 因子 ， 具有 相同 的 根 两个 方程 的 系数 之 比 对应 相等 ， 我们 得到 Kruppa 方程 如下 ： 　 　 　 由 摄像机 的 每 一次 运动 ， 我们 可以 得到 如式 的 两个 约束 关系 从而 三次 摄像机 运动 给出 六个 约束 关系 利用 这 六个 约束 关系 即可 求得 对偶曲线 DD 与 摄像机 内部 参数 矩阵 的 关系 是 DAAT 利用 主动 系统控制 摄像机 做 特定 运动 的 自 定标 方法 　 　 马 颂德 提出 了 利用 主动 视觉 系统控制 摄像机 做 两组 互 垂直 的 运动 ， 进行 手眼 定 标的 方法 ［ ， ］ 　 　 通常 ， 用于 手眼 定 标的 基本 约束 关系 是 　 　 这里 R 和 t 是 摄像机 坐标系 相对 于 机械手 末端 关节 附体 坐标系 的 旋转 矩阵 和 平移 向量 ； Rc 和 tc 是 用 摄像机 坐标 表示 的 摄像机 或者 机械手 的 运动 ； Rp 和 tp 是 用 机械手 末端 关节 附体 坐标 表示 的 机械手 运动 　 　 如果 机械手 只 做 平移 运动 ， 即 RcRpE ， 则 式 可以 写成 　 如果 摄像机 只 做 平移 运动 ， 由 连结 运动 前后 两幅 图像 上 的 对应点 得到 的 向量 相交 于 一点 ， 该点 称为 FocusofExpansionFOE 并且 ， 连接 摄像机 光心 O 与 FOE 的 连线 平行 于 摄像机 运动 的 方向 已知 摄像机 内部 参数 求 旋转 矩阵 R 　 　 摄像机 在 三个 不共面 方向 上 做 平移 运动 ， 都 是 规一化 向量 FFF 分别 是 三幅 图像 上 相应 的 FOE 故有 OFOFOF 分别 平行 于设 Fii 的 图像 坐标 是 UiVii ， 则 有 　 设 Fii 的 规一化 向量 是 tcii ， 则 可以 通过 下 式 求得 求取 摄像机 内部 参数 　 　 求取 摄像机 内部 参数 时 ， 要求 机械手 控制 摄像机 在 三个 相互 垂直 的 方向 上 做 平移 运动 所以 有 OFiTOFjiji ≠ j ， 利用 式 将 此式 展开 得到 　 　 　 把 分别 减去 ， ， 并且 令 可以 得到 下列 两个 xyz 的 线性方程 ： 　 　 要 解得 xyz 机械手 需 控制 摄像机 做 另一组 相互 正交 的 运动 ， 从而 得到 另外 两个 与 式 和 式 类似 的 线性方程 摄像机 内部 参数 能够 进一步 由 xyz 计算 得到 　 　 计算 平移 向量 t 　 　 如果 摄像机 的 运动 不是 纯粹 的 平移 ， 可以 利用 式 求解 平移 向量 t 在 式 中 ， R ， Rptp 已知 ， 若能 解得 tc ， 问题 就 得以 解决 求解 tc 的 步骤 如下 ： 　 　 摄像机 处于 位置 A 时 ， 其 坐标系 原点 为 O ， 重建 任意 三维 物点 P 作为 一种 重建 P 的 简单 情况 ， 由于 摄像机 坐标系 相对 于 机械手 末端 关节 附体 坐标系 的 旋转 矩阵 R 已知 ， 可以 控制 摄像机 沿 摄像机 坐标系 的 X 方向 移动 ， 两 摄像机 坐标系 的 基线 长度 可 从 主动 视觉 平台 的 控制器 中 读取 从而 向量 OP 可以 计算 得到 求得 OP 后 将 摄像机 归位 到 A 　 　 移动 摄像机 到 位置 B ， 设其 坐标系 原点 为 O ， 移动 参数 Rp 和 tp 可 从 主动 视觉 平台 的 控制器 中 读取 　 　 与 步骤 一 类似 ， 求取 向量 OP 　 　 利用 下式 解得 tc ： 利用 多幅 图像 之间 的 直线 对应 关系 的 摄像机 定标 方法 　 　 最近 Hartley 提出 了 一种 张量 ， 这个 张量 在 三个 视点 的 景物 分析 中所起 的 作用 与 基本 矩阵 在 两个 视点 的 景物 分析 中所起 的 作用 相似 ， 并 研究 了 利用 多幅 图像 中 线段 的 对应 关系 进行 摄像机 自 定 标的 方法 ［ ， ］ 在 文 ［ ］ 中 利用 N 幅 图像 中 的 直线 特征 进行 摄像机 定标 和 重建 的 方法 也 得到 了 研究 此外 ， Shashua 在 文 ［ ～ ］ 中 讨论 了 通过 三幅 图像 对 投影 矩阵 进行 约束 ， 并 首次 提出 了 三线 伪 张量 TrilinearTensor 形式 对 这种 约束 进行 描述 的 方法 ， 进而 可以 实现 摄像机 的 自 定标 在 此 提及 这些 近期 的 研究 工作 是因为 这些 都 是 我们 值得注意 的 研究 动态 总结 　 　 如 前面 所 指出 的 ， 传统 的 摄像机 定标 是 利用 一个 标准 参照物 与其 图像 的 对应 约束 关系 ， 来 确定 摄像机 模型 的 参数 为了 提高 计算精度 ， 同时 还 需 确定 非线性 畸变 校正 模型 的 参数 当前 ， 对 传统 摄像机 定标 技术 的 研究 集中 在 如何 有效 地 、 合理 地 确定 非线性 畸变 校正 模型 的 参数 　 　 自 定标 技术 不同于 传统 的 摄像机 定标 技术 正如 我们 提到 的 ， 传统 的 摄像机 定标 技术 必须 利用 一个 标准 参照物 以 获得 准确 的 三 维度 信息 而 摄像机 的 自 定标 技术 ， 并不需要 知道 准确 的 三维 度量 信息 ， 试图 利用 从 图像 序列 中 得到 的 约束 关系 来 计算 摄像机 模型 的 参数 这 就 使 在线 地 、 实时 地 校准 摄像机 模型 参数 成为 可能 然而 由此 也 产生 了 不少 问题 一个 相当 棘手 的 问题 是 ， 有些 摄像机 自 定标 所 得到 的 解 既 不是 唯一 的 ， 也 不是 稳定 的 更 准确 的 说 ， 由 约束 关系 所 得到 的 解 在 一般 情况 下 是 多解 的 ； 同时 ， 在 图像 中 含有 噪音 ， 即使 噪音 很小 的 情况 下 ， 解得 的 值 也 与 实际 值有 很大 的 差别 因此 ， 如何 在 噪音 的 情况 下 提高 解 的 稳定性 ， 一直 是 自 定标 领域 的 研究 人员 试图 解决 的 问题 　 　 正如 计算机 视觉 中 的 许多 问题 一样 ， 摄像机 自 定标 问题 的 求解 可以 归结为 求解 一组 非线性 多项式 方程组 问题 解决 这 类 问题 的 最 常用 的 方法 是 各种 优化 算法 然而 优化 算法 本身 既 不能 保证 找到 全局 最优 解 ， 又 不能 说明 解 的 性质 故此 在 计算机 视觉 中 对 求解 非线性 问题 方法 的 研究 ， 以及 利用 这 方法 来 探讨 非线性 问题 的 性质 也 是 一个 很 重要 的 方面 邱 茂林 年生 ， 年 进入 中科院 自动化 所 模式识别 实验室 ， 攻读 计算机 视觉 和 计算机 图形学 方向 的 博士学位 年 在 中国科技大学 北京 认知科学 开放 研究 实验室 从事 认知科学 方面 的 研究 目前 在 以色列 希伯莱 大学 从事 计算机 视觉 方面 的 研究 马 颂德 年生 ， 年 毕业 于 清华大学 ， 年 获 法国 国家 博士学位 ， 现为 中国科学院 自动化 所 所长 ， 博士生 导师 ， IEEE 高级 会员 长期 从事 计算机 视觉 、 模式识别 和 图像处理 等 方面 的 工作 李毅 年生 ， 年 进入 中国科学院 自动化 所 模式识别 实验室 ， 攻读 计算机 视觉 和 计算机 图形学 方向 的 博士学位 目前 的 研究 兴趣 是 图像处理 、 基于 模型 的 运动 分析 和 目标 识别 邱 茂林 中国科技大学 北京 认知科学 开放 研究 实验室 北京 马 颂德 中国科学院自动化研究所 模式识别 国家 重点 实验室 北京 李毅 中国科学院自动化研究所 模式识别 国家 重点 实验室 北京 参考文献 ， AbdelAzizYIKararaHMDirectlineartransformationintoobjectspacecoordinatesincloserangephotogrammetryInProcSympCloseRange 　 Photogrammetry ～ ， BrownDCDecenteringDistortionofLensesPhotogrammetricEngRemoteSensing ～ ， WongKWMathematicalfoundationanddigitalanalysisincloserangephotogrammetryInProcthCongressoftheIntSocietyforPhotogrammetry ～ ， TsaiRYAnefficientandaccuratecameracalibrationtechniqueforDmachinevisionInProcCVPR ～ ， FaigWCalibrationofcloserangephotogrammetricsystemsmathematicalformulationphotogrammetricengRemotesensing ： ～ ， DainisAJubertsMAccurateremotemeasurementofrobottrajectorymotionInProcIntConferenceonRoboticsandAutomation ～ ， YakimovskyYCunninghamRAsystemforextractingthreedimensionalmeasurementsfromastereopairofTVcamerasComputerGraphicsandImageProcessing ： ～ ， HallELTioMBKMcPhersonCASadjadiFACurvedsurfacemeasurmentandrecognitionforrobotvisionInProcIEEEWorkshoponIndustrialApplicationofMachineVision ， ItohAMOzawaSDistancemeasuringmethodsusingonlysimplevisionconstructedformovingrobotsInProcICPR ～ ， LuhJYKlaasenJAAthreedimensionalvisionbyoffshelfsystemwithmulticamerasIEEETransPAMI ， ， GanapathySDecompositionoftransformationmatricesforrobotvisionInProcIntConferenceonRoboticsandAutomation ～ ， WengJCohenPHerniouMCameracalibrationwithdistortionmodelsandaccuracyevaluationIEEETransPAMI ， ： ～ ， MartinsHABirkJRKelleyRBCameramodelsbasednodatafromtwocalibrationplanesComputerGraphicsandImagingProcessing ， ： ～ ， WeiGMaSTwoplanecalibrationaunifiedmodelInProcCVPR ～ ， WeiGMaSCompletetwoplanecameracalibrationandexperimentalcomparisonsInProcICCV ～ ， WeiGMaSImplicitandexplicitcameracalibrationtheoryandexperimentsIEEETransPAMI ， ， FaugerasODStratificationofthreedimensionalvisionprojectiveaffineandmetricrepresentationsJOptSocAmA ， ： ～ ， LonguetHigginsHCAcomputeralgorithmforreconstructingascenefromtwoprojectionsNature ， ： ～ ， FaugerasODMaybankSMotionfrompointmatchesmultiplicityofsolutionsIntlJComputerVision ， ： ～ ， MaybankSJFaugerasODAtheoryofselfcalibrationofamovingcameraIntlJComputerVision ， ： ～ ， LuongQTDericheRFaugerasODOndeterminingthefundamentalmatrixanalysisofdifferentmethodsandexperimentalresultsINRIAResearchReportNo ， MaSWeiGAselfcalibrationtechniqueforactivevisionsystemInProcACCV ～ ， MaSAselfcalibrationtechniqueforactivevisionsystemIEEETransRoboticsandAutomation ， ： ～ ， FaugerasODMourrainBOnthegeometryandalgebraofthepointandlinecorrespondencesbetweennimagesInProcICCV ’ ～ ， HartleyRIALinearmethodforreconstructionfromlinesandpointsInProcICCV ～ ， HeydenAreconstructionfromimagesequencesbymeansofrelativedepthsInProcICCV ～ ， ShashuaATrilinearfunctionsforvisualrecognitionInProcECCV ～ ， ShashuaAWermanMOnthetrilineartensorofthreeperspectiveviewsanditsunderlyinggeometryInProcICCV ， ShashuaAAlgebraicfunctionforrecognitionIEEETransPAMI ， ： ～ 收稿 日期 收修稿 日期