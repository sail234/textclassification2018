自动化 学报 ACTAAUTOMATICASINICA 年 　 第卷 　 第期 　 Vol 　 No 　 点发 序列 问题 的 控制策略 邢科义 　 李俊民 　 许祥 秦 　 胡保生 　 　 摘 　 要 　 在 离散 事件 系统 的 Petri 网 模型 下 ， 讨论 是否 存在 控制策略 使得 仅 有 希望 的 序列 使能 ， 而 又 保持 事件 的 并发 性 的 问题 证明 了 存在 这种 策略 的 必要 充分条件 是 给定 的 目标 序列 集是 可控 的 在 目标 序列 集 不 可控 而 所 考虑 的 序列 集都 是 Petri 网点 发 序列 集时 ， 提出 了 综合 给定 序列 集 的 极大 可控 子 序列 集 生成器 的 方法 　 　 关键词 　 点发 序列 问题 ， Petri 网 ， 控制策略 THECONTROLSTRATEGYFORTHEFIRINGSEQUENCEPROBLEMXINGKEYILIJUNMINXUXIANGQINDepartmentofAppliedMathematicsXIDIANUniversityXi ′ anHUBAOSHENGSystemsEngineeringInstituteXi ′ anJiaotongUniversityXi ′ anAbstractInthispaperweusePetrinetstomodeladiscreteeventsystemanddiscusswhetherornotthereexistsacontrolstrategybywhichonlythespecifiedtargetfiringsequencescanbeenabledItisprovedthatanecessaryandsufficientconditionfortheexistenceofsuchstrategyisthatthesetofthespecifiedtargetfiringsequencesarecontrollableForthecasewherethefiringsequencesetsinvolvedarePetrinetfiringsequencesetswepresentamethodforsynthesizingacontrolstrategybywhichtheclosedloopsystemcangeneratethesupremalcontrollablesubsetofagivenfiringsequencesetKeywordsFiringsequenceproblemPetrinetcontrolstrategy 　 引 　 言 　 　 在 离散 事件 系统控制 理论 中 ， Ramadge 和 Wonham ［ ］ 在 自动机 语言 下 研究 了 各种 控制 问题 ， 讨论 了 监督控制 ， 即使 闭环 系统 沿 目标语言 演化 的 动态 控制器 的 存在 性 ， 给出 了 监控器 的 综合 方法 但 事件 的 并发 性是 不能 用 自动机 语言 来 描述 的 ， 从而 被 排除 在 他们 研究 的 情形 之外 　 　 Petri 网 P 网是 模拟 分析 并发 事件 系统 的 有力 工具 ， 它 能 清楚 地 描述 事件 的 相关性 和 独立性 ， 以及 事件 的 并发 性 Ichikawa 和 Ushio ［ ， ］ 仅 在 一些 特殊 情况 下 讨论 了 基于 P 网 的 控制 问题 本文 在 一般 的 P 网中 讨论 点发 序列 问题 ， 在 系统 行为 和 希望 行为 都 是 P 网 序列 集时 ， 给出 了 问题 的 控制策略 存在 的 必要 充分条件 ， 以及 综合 方法 提出 了 接受 极大 可控 子 序列 集 的 受控系统 的 构造方法 　 Petri 网点 发 序列 集 ， 控制策略 　 　 本文 讨论 P 网 NPTIOm ［ ］ 中 几个 变迁 可以 同时 点发 数次 的 情形 ， 即 在 标识 m 下点 发 的 变迁 全体 是 一个 变迁 袋用 T ∞ 表示 T 上 的 所有 变迁 袋 的 集合 b ∈ T ∞ 称为 在 m 下 是 状态 使能 的 ， 如果 对 所有 p ∈ P ， 有 pt ≤ mp ， 其中 uv 在 m 下 ， 状态 使能 的 变迁 袋 b 的 点 发使 系统 由 m 变为 状态 m ′ ， m ′ pmptppt 记作 m 〔 b ＞ m ′ 用 RNm 记 N 的 可 由 m 到达 的 标识 之集 T ∞ 表示 所有 变迁 袋 序列 之集 记号 m 〔 b ＞ m ′ 自然 地 可 扩展 到 T ∞ 上 从 m 可 依次 点发 的 变迁 袋 序列 之集 就是 N 生成 的 点发 序列 集 LN σ ∈ T ∞ ｜ m 〔 σ ＞ 有 定义 　 　 变迁 集可 分为 可控 变迁 集 Tc 和 不 可控 变迁 集 TuTTc ∪ Tu 本文 考虑 形式 为 V ： RN ， m → 的 控制策略 V 把 m 映射 为 可控 变迁 袋 的 集合 Vm 变迁 袋 b 称为 在 标识 m 和 策略 V 下 控制 使能 ， 如果 当 bbu ∪ bcbu ∈ c ∈ 时 ， bc ∈ Vm 在 闭环 系统 VN 中 ， 只有 状态 和 控制 同时 使能 的 变迁 袋 可以 点发 记号 m 〔 σ V ＞ m ′ 表示 m 〔 σ ＞ m ′ 在 VN 中 的 扩展 在 闭环 系统 中 ， V 可以 看作 是从 T ∞ 到 的 映射 ， 即当 m 〔 σ V ＞ m 时 ， V σ Vm ， 否则 V σ 无 定义 VN 生成 的 点发 序列 集为 LVN σ ∈ T ∞ ｜ m 〔 σ V ＞ 有 定义 　 　 P 网 的 一条 不 可控 路 是 P 网图 中 的 一条 有 向 路 ， 其上 所有 变迁 都 是 不 可控 的 若 一条 路 除端 节点 外是 不 可控 的 ， 则 称 其 为 内部 不 可控 路 　 点发 序列 问题 及其 控制策略 　 　 本文 所 考虑 的 系统 行为 L 和 目标 行为 K 都 是 P 网点 发 序列 集 ， 即 有 P 网 NL 和 NK ， 使得 LLNLKLNK 　 　 定义 设 控制系统 的 模型 为 P 网 NPTIOm ， 希望 行为 是 序列 集 KLN ， 点发 序列 问题 就是 综合 控制策略 V ， 使得 闭环 结构 VN 具有 行为 K ， 即 KVNK 的 前缀 闭包 进一步 地称 N 可 控制 到 K 　 　 定义 设 KLN ， 称 K 关于 LN 可控 ， 如果 对 任意 的 σ ∈ K 及 bc ∈ ， 若 σ bc ∈ K ， 则 对 任意 的 bu ∈ ， 有 σ bc ∪ bu ∩ LN 　 　 定理 给定 受控 P 网 N ， 设 KLN 是 P 网点 发 序列 集 ， 则 N 可 控制 到 K 的 充分 必要条件 是 K 关于 LN 是 可控 的 　 　 证明 必要性 设 存在 策略 V ， 使得 LVNK 设 σ ∈ Kbc ∈ σ bc ∈ Km 〔 σ V ＞ m 于是 σ bc ∈ LVNbc ∈ Vm 且 在 m 下 bc 状态 使能 设 bu ∈ ， 若 σ bc ∪ bu ∈ LN ， 则 bu ∪ bc 是 在 m 下 状态 使能 ， 从而 σ bu ∪ bc ∈ LVNK 故 K 关于 LN 是 可控 的 　 　 充分性 定义 策略 V 在 σ ∈ K 时 ， V σ bc ∈ ｜ σ bc ∈ K ， 否则 V σ 无 定义 首先 证明 KLVN 由于 空列 既 在 K 中 又 在 LVN 中 ， 故只 需证 对 每个 σ ∈ K ∩ LVN ， 若 σ b ∈ K 则 σ b ∈ LVN 即可 设 σ ∈ K ∩ LVN σ b ∈ Km 〔 σ V ＞ m ， bbc ∪ bu ， 则 σ bc ∈ K ， 故 bc ∈ V σ Vm 是 控制 使能 的 ， 又 σ b ∈ KLN 于是 σ b ∈ LVN 　 　 再证 LVNK 设 σ ∈ LVN ∩ Kbbu ∪ bcbc ∈ ， bu ∈ σ b ∈ LVN ， 则 bc ∈ V σ ， 由 V 的 定义 ， σ bc ∈ K 又 σ b ∈ LVNLN 及 K 关于 LN 可控 ， 则 σ b σ bu ∪ bc ∈ K 于是 KLVN 　 　 定义 P 网 NKPKTIKOKmK 和 NLPLTILOLmL 的 同步 合成 网 NKNLPK ∪ PLTIK ∪ ILOK ∪ OLm 其中 当 p ∈ PK 时 ， mpmKp ， 当 p ∈ PL 时 ， mpmLp 若 LNKLNL 则 LNLNK 故 以后 设 NNK 且 NL 是 NK 的 子网 于是 N 的 标识 m 可 写成 mmLmKL ， mL 是 NL 的 标识 ， mKL 是 m 在 PPL 上 的 限制 　 　 当 K 关于 L 不 可控 时 ， 希望 在 K 中 找 一个 极大 子 序列 集 K ， 使得 K 关于 LNL 可控 若 KKK 都 是 关于 L 可控 ， 则 K ∪ K 也 可控 ， 故 极大 可控 子 序列 集 唯一 存在 ， 记作 SupCK 我们 希望 综合 N 的 一个 控制策略 V ， 使得 LVNSupCK 　 　 考虑 条件 ： 对 p ∈ PPL 及 标识 m ∈ RNm ， 其中 记号 AN 和 AN 分别 表示 P 网 N 中 AP ∪ T 的 所有 输入 元素 与 输出 元素 之集 　 　 若有 p ∈ PL 及 m ∈ RNm 使得 FC 成立 ， 则 K 是 不 可控 的 因此 对 每个 p ∈ PPL ， 要 禁止 使 FC 成立 的 标识 m 　 　 设 Tct … tn ， 定义 bc ∈ 的 特征向量 为 Ψ bca … an ， 其中 ai 是 bc 中 包含 的 ti 的 个数 　 　 令 这里 ， 把 RC 中 的 m 用 m ′ 代替 ， 则 得 RC ′ ， RNmbcm ′ ｜ m 〔 b σ ＞ m ′ bbc σ ∈ 　 　 若有 p ∈ PPL 及 m 使得 fpm Ψ bc ＞ ， 则 有 m ′ m ′ Lm ′ KL ∈ RNmbc 使得 FC 成立 故设 fpm Ψ φ ≤ 对 所有 p ∈ P ＼ PL 成立 　 　 令 mTcbc ∈ ｜ m 〔 bc ＞ 有 定义 　 　 Bmbc ∈ mTc ｜ b ′ cbcbu ∈ ， 　 　 若 mL 〔 b ′ c ∪ bu ＞ 有 定义 ， 则 m 〔 b ′ c ∪ bu ＞ 有 定义 　 　 定义 控制策略 mbc ∈ Bm ｜ p ∈ P ＼ PLfpm Ψ bc ≤ 　 　 定理 设 K 和 L 分别 是 P 网 N 和 NL 的 点发 序列 集 ， KL ， NL 是 N 的 子网 ， 控制策略 如 上 定义 ， 则 LN 是 关于 L 可控 的 ， 而且 SupCKLN 　 　 证明 　 设 σ ∈ LN ∩ Lm 〔 σ ＞ mmLmKLbbu ∪ bcbu ∈ bc ∈ ， 若 σ bc ∈ LN ， σ b ∈ LNL ， 则 bc 在 m 下 控制 使能 ， bc ∈ Bm ， 故对 b ′ u ∈ 若 bc ∪ b ′ u 在 mL 下 状态 使能 ， 则 在 m 下 也 状态 使能 ， σ b ∈ LN 即 LN 关于 L 是 可控 的 　 　 设 σ ∈ LN σ LN σ bb … 则 存在 l ∈ Z 使得 σ ′ b … bl ∈ LN ， 而 σ ′ blLN ， 设 m 〔 σ ′ ＞ m ， blbc ∪ bu ， bc ∈ bu ∈ ， 则 bcm 于是 必有 bcBm 或 存在 p ∈ P ＼ PL ， 使得 fpm Ψ bc ＞ ， 之一 成立 　 　 若 成立 ， 则 存在 b ′ cbc 及 bu ∈ ， 使得 b ′ c ∪ bu 在 mL 下 而 不 在 m 下 状态 使能 ， 于是 σ ′ b ′ c ∪ bu ∈ LNL ， 而 σ ′ b ′ c ∪ buK 又 b ′ cbc ∈ mTc σ ′ b ′ c ∈ K ， 故 σ 不 可能 在 任何 关于 L 可控 的 子 序列 集中 　 　 若 成立 ， 则 存在 p ∈ P ＼ PL ， b ′ cbc 和 δ ≤ ， 使得 m 〔 b ′ c δ ＞ m ′ m ′ p ＜ 设 ltminpit ｜ pi ∈ tNLt ∈ pN ∩ Tu ， 使得 以上 不等式 成立 ， 令 ｜ t ∈ pN 则 在 m ′ L 下 状态 使能 ， 但 在 m ′ 下 不是 状态 使能 故 σ ′ b ′ c δ ∈ L ＼ K 又 δ ∈ σ ′ b ′ c ∈ K ， 则 σ ′ b ′ c 和 σ ′ bc 都 不 在 K 的 关于 L 可控 的 子 序列 集中 　 　 总上 所述 ， LN 是 极大 的 而且 NSupCK 　 　 由 定理 可知 ， 综合 及 SupCK 的 关键 是 确定 fpm Ψ bc 　 　 对 p ∈ P ＼ PL ， 定义 PN 的 控制 子网 为 PpTpIpOp ， 其中 Pp 是 由 P 的 所有 的 到 pN 有 不 可控 路 的 位置 组成 ， TpPpNIpI ∩ Pp × TpOpO ∩ Tp ∩ Pp 　 　 设 b ′ cbc ， 令 gpm Ψ b ′ cmaxm ′ p ｜ m 〔 b ′ c ＞ mm ′ ∈ RNm φ ， 则 fpm Ψ bc 所以 以下 只要 给出 gpm λ 即可 ， 其中 λ λ t λ t … ， λ tn ∈ Zn 　 　 因仅 是 m ′ 的 函数 ， 故记作 Xpm ′ 设从 m 到 m ′ 的 过程 中 ， t 点发 λ t 次令 lpimpi λ t ， 则 m ′ pilpi λ t 为 简单 设 t ∈ Tn ｜ tN φ φ 　 　 情形 Ⅰ 　 中 没有 不 可控 圈 此时 gpm λ 的 综合 过程 如下 ： 　 　 算法 A 　 令 XpXpm ′ 其中 m ′ pilpi λ t 　 　 t ∈ pN ｜ 从 t 到 pN 没有 长度 大于 的 不 可控 路 　 　 S Φ TpN ＼ PpN ∩ TuN ， 　 　 对 i … 重复 以下 三步 ， 直到 算法 结束 　 　 a 以 λ tminpt ｜ p ∈ tNt ∈ ∩ Tu 代入 Xpi 得 X ′ pi ， 令 　 　 　 从 N 到 ∩ Tu 的 所有 不 可控 路 的 弧全 在 中 ， 　 　 　 　 b 在 以下 条件 下取 的 极大值 ， 并记 极大值 为 　 　 是 整数 　 　 得 Xpi 令 　 　 　 it ∈ ｜ 从 t 到 ∩ Tu 的 所有 内部 不 可控 路 的 弧全 在 Si 中 ， 　 　 Tii 　 　 如果 Φ 则 令 gpm λ Xpi ， 算法 结束 　 　 因 没有 不 可控 圈 ， 则 在 有限 步内 算法 结束 　 　 情形 Ⅱ 中有 不 可控 圈 此时 在 每个 不 可控 圈上 取一 变迁 ， 用 D 记 这些 变迁 之集 如有 必要 ， 用 pt ′ p ′ t 代替 弧 pt 或用 tp ′ t ′ p 代替 tp ， 使得 D ∩ N Φ ， 视 增加 的 变迁 t ′ 为 不 可控 的 ， 而 D 中 的 变迁 为 可控 的 此时 可 利用 算法 A ， 但 在 a 中 ， 要 用 代替 ， 其中 ， ≤ λ t ≤ minpt ｜ p ∈ tNt ∈ ∩ D 当 Xpi 是 m 和 λ t ， t ∈ Tc ， 的 函数 时 ， 算法 结束 　 结论 　 　 本文 讨论 了 点发 序列 问题 的 控制策略 存在 的 必要 充分条件 提出 了 综合 这 类 策略 的 一个 新 方法 给出 了 能 生成 给定 P 网点 发 序列 集 的 极大 可控 子 序列 集 的 受控系统 的 构造方法 本文 所 采用 的 方法 避开 了 生成 和 分析 状态 空间 ， 仅以 P 网 的 结构 为 基础 ， 这是 对文 ［ ］ 的 状态 空间 法 的 很大 改进 ， 并 解决 了 其 未能 解决 的 问题 　 国家自然科学基金 和 西安交通大学 机械制造 系统工程 国家 重点 实验室 基金 资助 项目 作者 单位 邢科义 　 李俊民 　 许祥 秦 　 西安电子科技大学 应用 数学系 　 西安 　 　 　 　 　 　 胡保生 　 西安交通大学 系统工程 研究所 　 西安 　 参考文献 RamadgePJWonhamWMSupervisorycontrolofaclassofdiscreteeventprocessesSIAMJControlandOptimizationIchikawaAetalReachabilityandcontrolofdiscreteeventsystemsrepresentedbyconflictfreePetrinetsProcIntSympCircuitsSystKyotoJapanUshioTOncontrollabilityofcontrolledPetrinetsControltheoryandadvancedtechnologyPetersonJLPetrinettheoryandthemodelingofsystemsEnglewoodCliffsNJPrenticeHall 收稿 日期 　