微型机 与 应用 MICROCOMPUTERITSAPPLICATIONS 　 Vol 　 No 　 PNovellNetWare ． 网络 组建 中 的 一些 问题 黄穗 摘要 ： 在 组建 NetWare ． 网络 中 ， 网络管理 和 工作站 设置 方面 的 新 特点 ， 分析 存在 的 问题 及其 处理 方法 。 关键词 ： 开放 数据链 路 接口 　 Novell 可 加载 模块 　 NetWare ． 　 　 Novell 网络 曾经 以其 在 文件 与 打印服务 方面 的 出色 表现 赢得 过 众多 的 网络 用户 ， 成为 DOS 工作站 时代 的 主流 网络操作系统 。 但 随着 工作站 平台 从 DOS 向 Windows ／ 的 转变 以及 Internet 应用 的 迅速 普及 ， 不论是 NetWareXX 还是 XX 在 支持 图形化 操作 以及 开拓 Internet 应用 方面 都 呈现出 一些 不足 。 为此 ， Novell 公司 在 年 月 推出 了 NetWare ， 它 保持 了 原有 的 文件 与 打印服务 的 优势 ， 在 图形化 操作 以及 基于 TCP ／ IP 的 网络服务 方面 进行 了 较大 的 改进 。 下面 从 实际 应用 的 角度 分析 NetWare 的 一些 新 特点 及其 对 组网 的 影响 。 管理 问题 　 　 在 NetWareXX 以前 ， 网络管理 可以 分别 在 DOS 、 WinX 以及 Win ／ 环境 下 进行 。 在 DOS 下 的 工具 是 SYSCON （ XX ） 和 NETADMIN （ XX ） ； 在 WinX 下 是 NWADMNX ； 在 Win ／ 下 是 NWADMIN 。 但 NetWare 本身 不再 提供 DOS 或 WinX 下 的 管理工具 ， 而是 新 增加 了 基于 服务器 和 基于 浏览器 的 管理工具 ， 更新 了 Win ／ ／ NT 下 的 管理工具 。 也就是说 ， 除非 是从 原来 的 XX 或 XX 升级 至 ， 否则 将 无法 在 DOS 或 WinX 下 进行 网络管理 。 如果 坚持 要 在 DOS 或 WinX 下 进行 管理工作 ， 可以 找台 正常 运行 的 NetWareXX 服务器 ， 将 其中 SYS ： PUBLIC 下 与 NETADMIN 相关 的 文件 或 与 NWADMNX 相关 的 文件 复制到 NetWare 服务器 SYS 卷 一个 独立 的 目录 中 （ 不要 覆盖 下 SYS ： PUBLIC 目录 中 的 文件 ） 。 不能 运行 时 系统 会 提示 缺少 哪些 文件 ， 从 NetWareXX 服务器 上 找到 补 上 即可 。 　 　 服务器 上 的 管理工具 是 ConsoleOne ， 这是 一个 基于 Java 虚拟机 的 图形化 管理工具 ， 解决 了 以往 服务器 运行 时 除了 监视 外无事 可 做 的 情况 。 可以 在 图形化 的 操作界面 下 进行 创建 NDS 的 Organization 、 OrganizationUnit 、 Group 和 User 对象 、 管理 这些 对象 的 部分 属性 以及 对 服务器 的 卷 、 目录 和 文件 进行 管理 的 工作 。 但 ConsoleOne 还 存在 以下 问题 ： 由于 Java 虚拟机 的 运行 效率 问题 ， 它 不仅 占用 内存 多 （ 要 占用 MB ） ， 而且 运行 速度慢 （ CPU 在 MHz 以上 才 不 明显 ） 。 对组 和 用户 的 访问 权限 控制 、 目录 与 文件 的 共享 等 操作 都 不能 完成 。 它 对于 服务器 卷 、 目录 和 文件 的 浏览 和 管理 并 不 像 对 NDS 对象 那样 要 先 进行 用户 的 认证 才 允许 操作 ， 安全性 不设防 。 由于 系统 安装 后 ConsoleOne 是 设成 自动 加载 的 ， 为 解决 上述 问题 ， 可用 控制台 命令 nwconfig 修改 autoexecncf 文件 ， 将 其中 加载 ConsoleOne 的 命令 startxncf 去掉 ， 需要 时 再 用 控制台 命令 startx 加载 。 　 　 通过 Windows ／ ／ NT 的 Novell 客户 软件 进行 系统管理 是 NetWare 最 重要 的 管理 方式 ， 除了 像 文件共享 这样 的 少数 任务 还要 在 MS － DOS 下用 flag 进行 管理 以外 ， 绝大多数 管理 任务 都 可以 完成 。 但是 ， Novell 的 客户 软件 与 Windows ／ ／ NT 的 NetWare 客户程序 互不 兼容 ， 不能 共存 。 靠 Windows ／ ／ NT 本身 的 NetWare 客户程序 虽然 能够 访问 NetWare 服务器 上 的 文件 ， 但 不能 进行 网络管理 ， 也 不能 进行 Novell 的 NDS 操作 。 因此 ， 必须 选择 台 Windows ／ ／ NT 安装 Novell 提供 的 专用 客户程序 使 其 成为 Novell 工作站 ， 再 通过 该 工作站 的 管理 请求 程序 （ Requester ） 远程 运行 位于 NetWare 服务器 上 的 管理工具 。 管理工具 （ NovellNetWareAdministrator ） 是 位于 ： SYS ： PUBLIC ＼ WIN ＼ 的 NWA － DMN 程序 ， 相当于 更新 以前 forWindows 版本 中 的 NWADMIN 程序 。 　 　 基于 Web 浏览器 的 管理 方式 是 Novell 最新 开发 的 一种 基于 Internet 网络 的 管理 方案 ， 但 目前 的 版本 功能 还 不及 ConsoleOne ， 只能 进行 有限 的 创建 、 管理 NDS 对象 的 操作 ， 对 浏览器 和 服务器 还有 一些 特殊 的 要求 。 工作站 问题 　 　 NetWare 支持 DOS 、 Windows ／ ／ NT 工作站 。 对于 DOS 工作站 ， 仍然 可以 用 IPX ／ NETX 方式 和 位 ODI （ 加载 VLM ） 方式 上网 。 用 IPX ／ NETX 方式 上网 将 不能 获得 Novell 的 NDS 服务 ， 性能 大打折扣 ； 位 ODI 方式 中 如果 不 加载 NDS 模块 （ 在 Netcfg 文件 中 设置 加载 NDSVLM ） 其 效果 与 IPX ／ NETX 方式 相近 （ 除 ODI 方式 支持 不同 帧 以外 ） ， 而且 这种 上网 方式 都 还 存在 一个 共同 的 问题 ， 那 就是 不论 用 什么 用户 上网 ， 其 映射 的 网络 盘 都 一样 （ 只 映射 SYS ： 、 SYS ： PUBLIC ： 和 SYS ： SYSTEM 个盘 ） ， 也就是说 用户 的 注册 脚本 失效 。 只有 用位 带 NDS 模块 的 ODI 方式 上网 或者 位 ODI 方式 上网 ， 才能 避免出现 上述 问题 ， 享受 Novell 的 NDS 访问 权利 与 服务 。 位 ODI 方式 以 NetWareI ／ OSubsystem （ NIOSEXE ） 为 引导 程序 ， 通过 加载 网络连接 、 网卡 驱动 和 网络协议 的 可 安装 模块 （ NLM ） 实现 连网 和 多重 网络协议 支持 ， 其中 NBICNLM 、 LSLCNLM 、 CMSMNLM 、 ETHERISMNLM 、 TRANNTANLM 和 CLIENTNLM 是 必须 加载 的 模块 ， IPXNLM 是 支持 IPX 协议 用 的 ， TCPIPNLM 是 支持 TCP ／ IP 协议 的 ， 而 SPX ＿ SKTSNLM 是 WinsockforSPX ／ IPX 模块 ， 这些 协议 模块 可 根据 DOS 工作站 连网 后 的 应用 需要 加以 选用 。 以位 ODI 方式 启动 的 工作站 ， 连网 和 协议 都 不 占用 基本 内存 ， 在 扩展 内存 中 也 占用 很少 （ 只 加载 IPX 协议 时仅 为 KB ） ， 充分体现 出其 连网 的 效率 与 灵活性 。 此外 ， 位 连网 方式 突破 了 个 工作站 最大 连接数 的 限制 （ NETX 的 ， VLM 的 ） ， 连接数 仅受 内存大小 的 限制 ， 变 静态 连接 为 动态 连接 ， 为 应用程序 提供 了 更 大 的 扩展 空间 。 但是 ， 要 采用 位 ODI 方式 上网 ， 网络 卡 必须 支持 位 NDIS 工作 方式 并 具备 相应 的 驱动程序 （ lan ） 。 另外 ， 目前 的 位 可 加载 模块 不 支持 无盘 启动 ， 即使 在 工作站 内存 上 开设 个 虚拟盘 将 启动 文件 全部 复制 进去 也 不能 启动 ， 加载 至 ClientNLM 模块 时即 死机 。 　 　 对于 Windows ／ ／ NT 工作站 ， 首先 要 安装 客户端 软件 NovellClientforWindows ／ ／ NT 。 由于 Windows ／ ／ NT 本身 的 NetWare 网络 客户 、 IPX ／ SPX 兼容 协议 、 文件 及 打印机 共享 程序 与 Novell 工作站 的 要求 不 完全 兼容 ， 系统 的 拨号网络 、 DCOM 、 MFCDLL 以及 部分 内置 音频 ／ 视频 驱动程序 也 可能 与 Novell 工作站 程序 不 兼容 ， 所以 ， 如果 冒然 安装 Novell 客户 软件 ， 很 可能 会 造成 系统 网络 功能 失效 ， 严重 时 还 会 导致 不能 启动 。 为此 ， 应 采用 最新版 的 客户 软件 ， 目前 的 Win ／ 版本 是 ＋ SP ， NT 的 版本 是 ， 可以 从 Novell 公司 的 网址 下载 。 从 客户 软件 的 安装 过程 可以 看到 ， 安装 时 首先 是 将 现有 的 不 兼容 协议 删除 ， 然后 再 安装 Novell 自己 的 工作站 程序 。 因此 ， 如果 只有 早期 的 客户 软件 ， 也 可以 手工 先 删除 会 造成 冲突 的 NetWare 协议 和 驱动程序 。 一旦 安装 后 不能 正常 启动 ， 可以 用 安全 模式 进入 ， 将 安装 客户 软件 时 加进去 的 网络协议 （ 尤其 是 位 支持 协议 ） 去掉 。 必要 时 可 将 网卡 去掉 ， 以 彻底清除 造成 冲突 的 协议 或 驱动程序 。 Novell 客户 软件 除了 带来 对 NetWare 服务器 访问 和 管理 的 功能 外 ， 也 会 对系统 产生 一些 其它 的 影响 ， 首先 是 启动 登录 ， 每次 系统启动 时 都 会 要求 与 NetWare 的 服务器 连接 和 登录 。 其实 安装 完 客户 软件 后 就 有 一个 专用 的 登录 程序 NetWareLogin ， 用 它 可以 随时 与 网络 上 的 NetWare 服务器 连接 和 登录 。 如果 要 去掉 启动 时 自动 登录 ， 可以 按 以下 方法 修改 系统 的 注册表 ： 找到 注册表 项 HKEY ＿ LOCAL ＿ MACHINE ＼ SOFTWARE ＼ Microsoft ＼ Windows ＼ CurrentVersion ＼ Network ＼ RealModeNet ， 在 它 下面 创建 新项 AutoLogon ， 类型 选 Binary ， 值设 为 （ 如设 为 则 为 自动 登录 ） 。 但 这样 修改 后 会 产生 一个 副作用 ， 即 从 网络邻居 上 只能 看到 NetWare 服务器 ， 不能 看到 其它 Windows ／ ／ NT 的 主机 ， 而 其它 主机 却 能 看到 Novell 工作站 。 其次 是 对 应用程序 的 影响 ， 这些 影响 集中体现 在 客户端 的 参数设置 上 ， 比如 对 加锁 文件 的 处理 、 数据包 间隔 的 设置 、 对 各个 网络 时限 的 设置 等等 。 这些 参数 和 设置 的 默认值 在 客户 程序安装 完后 就 自动 生效 ， 需要 根据 应用 和 网络 环境 的 实际 情况 进行 优化 和 设置 ， 否则 就 可能 会 出现 应用 程序运行 性能 的 下降 。 具体 设置 路线 是 ： 进入 控制面板 → 网络 → NovellNetWareClient → 属性 → AdvancedSettings ， 共有 多个 设置 项目 。 系统升级 　 　 如 前面 所述 ， 无论是 工作站 程序 还是 服务器程序 都 有 其 适用范围 和 缺陷 ， 服务器 的 补丁 程序 （ ServicePack ） 也 越来越 大 ， SP 是 MB ， SPA 是 MB 。 值得注意 的 是 各种 程序 的 匹配 性 ， 工作站 程序 除了 注重 改进 对 本地 操作系统 的 适应性 以外 ， 对 服务器程序 也 提出 了 相应 的 要求 ， 比如 ， 利用 Internet 浏览器 对 服务器进行 网络管理 ， 不仅 要求 浏览器 要 安装 相应 版本 的 Java 虚拟机 ， 还 要求 服务器 安装 最新版 的 补丁 程序 。 服务器 升级 的 步骤 是 ： 　 将 补丁 程序 自 解压 程序包 从 工作站 复制到 SYS 卷 的 目录 下 ， 如 SYS ： UPDATES ， 运行 、 解开 程序包 ； 　 让 所有 工作站 断开 与 服务器 的 连接 ， 停止 其它 应用程序 Java 虚拟机 、 Web 服务器 等 ； 　 在 控制台 打入 NWCONFIG 不能 在 ConsoleOne 中 做 ； 　 按 ProductOptions － ＞ InstallaProductNotListed － ＞ F 键 － ＞ 输入 SYS ： UPDATES ＼ NWSPXX 开始 安装 nwspxx 是 补丁 程序 解开 时 自动 生成 的 目录名 。 　 　 其间 可以 选择 是否 备份 原来 的 系统文件 。 还有 一部分 补丁 要 手工 进行 复制 ， 即 解开 程序包 中 MISC 目录 下 的 程序 ， 如 WAN 、 Trivoli 、 GroupWise 、 CDTower ， 如果 安装 了 相应 的 软件 则 要 用 新 的 文件 覆盖 SYS 卷下 原来 的 文件 。 参考文献 ， KellyJ ， LindbergP 著 ． NovellNetWare 网络管理员 手册 ． 北京 ： 电子 工业 出版社 ， ， 肖薇 ， 陈剑辉 ， 裴植 ． 探索 NetWare 的 奥秘 — 基础 篇 ． 北京 ： 人民邮电出版社 ， 收稿 日期 ： － －