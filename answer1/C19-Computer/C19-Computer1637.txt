软件 学报 JournalofSoftwareVolNoP 分布式 多媒体数据库 系统 巩志国 　 周龙骧 　 董 淑珍 摘 　 要 　 着重 分析 分布式 多媒体数据库 系统 的 特有 问题 包括 实时性 、 时空 同步 以及 服务质量 的 描述 与 实现 等 给出 了 解决 这些 问题 的 策略 和 方法 研究 了 各种 不同 的 实现 途径 — — 远程 调用 、 中间件 和 Agent 构造 的 方式 指出 了 这些 实现 方法 的 优点 及其 不足 关键词 　 分布式 多媒体数据库 系统 实时性 同步 服务质量 中间件 Agent 中图法 分类号 　 TPDistributedMultimediaDatabaseSystemsGONGZhiguoObjectTechnologyCenter 　 InstituteofSoftware 　 TheChineseAcademyofSciences 　 Beijing 　 ZHOULongxiangInstituteofMathematics 　 TheChineseAcademyofSciences 　 Beijing 　 DONGShuzhenDepartmentofComputerScience 　 HebeiNormalUniversity 　 Shijiazhuang 　 Abstract 　 InthispaperthetypicalproblemsindistributedmultimediadatabasesystemssuchasrealtimerequirementssynchronizationQoSspecificationsareanalyzedPoliciesandmethodstosolvetheseproblemsareprovidedAndvariousimplementationparadigmsfordistributedsystemssuchasRPCremoteprocesscallmiddlewareAgentareinvestigatedKeywords 　 DistributedmultimediadatabasesystemrealtimesynchronizationQoSqualityofservicemiddlewareagent 　 　 如果 数据库 分布 在 多个 计算机 的 辅助存储器 上 把 驻留 计算机 及 辅助存储器 的 地方 称为 一个 结点 node 或 一个 站点 site 各 结点 间用 链路 连接 构成 计算机网络 这些 物理 上 分布 在 计算机网络 结点 上 的 多个 数据库 如果 在 逻辑 上能 把 它们 作为 一个 统一 的 数据库 来 看待 时 我们 就 称此 数据库 为 分布式 数据库 换句话说 分布式 数据库 是 一组 结构化 数据 的 集合 它们 在 逻辑 上 属于 同一 系统 而 在 物理 上 分布 在 计算机网络 的 不同 结点 上 其 网络 环境 可以 是 局域网 也 可以 是 广域网 分布式 数据库 除了 具有 集中式 数据库 所 具有 的 特点 之外 还有 其 固有 的 特点 如 自治 与 共享 、 可 控制 的 冗余 、 事务 的 分布 执行 等等 这些 基本 问题 到 年代 中期 已经 研究 清楚 并且 许多 原形 系统 如 SDDPORELADADDMSIRIUSDELTAMULTIBASER 以及 DistributedINGRES 和 CPOREL 也 已经 开发 成功 ［ ］ 多媒体 数据 的 纳入 首先 使 集中式 的 数据库系统 发展 成 能够 管理 多媒体 数据类型 的 集中式 多媒体数据库 管理系统 而 传统 的 分布式 数据库系统 也 就 发展 成 分布式 多媒体数据库 管理系统 但是 这种 发展 不仅仅 是 数据类型 的 扩充 因为 多媒体 数据 与 传统 数据 的 管理 要求 有着 本质 的 不同 所以 ， 我们 必须 认真 考虑 由于 多媒体 数据类型 的 纳入 所 带来 的 新 问题 Adjeroh 和 Nwosu ［ ］ 以及 Pazandak 和 Srivastava ［ ］ 分别 研究 了 集中式 多媒体数据库 系统 的 若干 问题 在 此 我们 不拟 重复 而 着重 考察 分布式 环境 下 所 产生 的 新 问题 本文 第节 着重 研究 和 讨论 多媒体 的 实时性 、 同步 特性 以及 服务质量 特性 对 分布式 多媒体数据库 系统 的 设计所 造成 的 影响 第节 分析 分布式 多媒体数据库 系统 的 基本 结构 特点 第节 研究 不同 的 实现 技术 最后 总结 全文 　 分布式 多媒体数据库 系统 的 新 特色 　 　 传统 的 分布式 数据库系统 提倡 有 一定 的 数据 冗余 以 减少 数据通信 的 代价 增加 局部 数据库 的 自治 性 但是 多媒体 数据 的 尺寸 庞大 冗余 存储 这样 的 数据 会 造成 严重 的 资源 浪费 因此 这种 冗余 方式 在 一般 情况 下 对于 分布式 多媒体数据库 系统 已 不再 大力 加以 提倡 传统 分布式 数据库系统 的 其他 特点 仍 适用 于 多媒体 的 情况 除此之外 分布式 多媒体数据库 系统 还 增加 了 一些 新 的 特点 　 实时性 　 　 多媒体 数据 的 展示 具有 实时性 即 数据 按 一定 的 速率 （ 帧 数 s 样值数 s ） 进行 展示 传统 的 分布式 数据库系统 总是 将 查询 的 结果 一并 传送 到 用户 所在 结点 对于 具有 实时性 的 多媒体 数据 已 不再 适合 其 原因 有 两 方面 （ ） 用户 的 等待时间 过长 具有 时序 属性 的 多媒体 对象 的 尺寸 巨大 将 整个 数据 对象 一次性 地 传送 到 用户 所在 结点 会 花费 很长 的 时间 （ ） 用户 所在 结点 的 存储容量 有限 用于 存储 连续 媒体 的 结点 计算机 一般 都 要 采用 磁盘阵列 甚至 三级 存储 方式 以 满足 连续 媒体 大 数据量 的 需求 但 网络系统 中 不 可能 每个 结点 都 具有 这样 的 存储容量 因此 数据 的 提供 结点 和 消耗 结点 之间 是 实时 提供 和 实时 消耗 的 关系 这种 要求 对 传统 的 网络通信 协议 提出 了 新 的 挑战 　 　 传统 的 通信协议 TCPIPEthernetX 已 不能 满足 数据 的 实时 传输 的 需求 连续 媒体 需要 高速 、 等 时 传输 而 对于 传输 时所 产生 的 误码 并 不 特别 敏感 传统 数据 对 传输 的 正确性 要求 较 高 但 对 传输 时 的 延时 与 抖动 并 不 敏感 传统 的 通信协议 提供 的 是 无误 的 、 点到点 的 通信 这种 方式 不 能够 有效 地 支持 等 时 的 Isochronous 、 多点 对 多点 的 通信 由此可见 传统 的 通信协议 已 不再 能 满足 远程 电视会议 teleconferencing 以及 协同工作 cooperativework 等 的 应用 需要 适合 于 分布式 多媒体数据库 系统 的 通信协议 应该 满足 如下 要求 ［ ］ 　 　 能够 根据 用户 对 服务质量 qualityofservice 的 描述 均衡 协调 传输速度 、 等 时 要求 以及 错误 恢复 各 要素 之间 的 关系 ； 　 　 支持 网络 中 两种 连接 类型 的 共存 即 实时性 的 连接 和 非 实时性 的 连接 ； 　 　 支持 多点 对 多点 的 通信 ； 　 　 通信协议 实现 的 负荷 要 小 以便 有 更 多 的 时间 用于 对 数据 的 传输 　 　 针对 这种 需求 现在 已经 开发 出 了 一些 通信协议 如 XTPTPHeidebergTransportSystemTenetST Ⅱ RSVP 等 ［ ］ 另外 将 当前 Internet 的 单点 对 单点 、 尽力 型 besteffort 通信协议 修改 成 适合 于 多媒体 传输 的 通信协议 也 是 一种 趋势 Internet 通信 的 核心 为 IP 协议 所以 许多 研究 着眼于 对原 IP 协议 层 的 改进 另 一种 研究 趋势 是 将 ATM 网络通信 协议 定义 成 两种 类型 （ ） 实时 保证 的 、 延时 限制 的 、 等速 传输 协议 （ ） 尽力 型 的 、 速度 可变 的 协议 ［ ］ 　 同步 特性 　 　 对于 传统 的 分布式 数据库系统 ， 其 查询 结果 的 输出 一般 只 考虑 各 片段 的 联结 运算 对于 多媒体 数据 而言 不但 要 考虑 内容 上 的 合成 而且 还要 考虑 各 多媒体 对象 在 时序 以及 空间 上 的 合成 我们 需要 在 同步 的 描述 和 同步 的 实现 这 两个 层次 上 考虑 多媒体 对象 的 同步 集成 　 同步 的 描述 　 　 采用 什么样 的 方法 去 描述 多媒体 对象 之间 的 同步 集成 关系 是 一件 值得 考虑 的 问题 这方面 的 研究成果 比较 多 其中 典型 的 有 时间 Petri 网 ［ ～ ］ 、 时空 算子 方式 ［ ］ 、 文档 方式 ［ ］ 、 面向对象 模型 方式 ［ ］ 、 链接 方式 ［ ］ 等 　 　 由于 时间 Petri 网对 并行 、 并发 及 串行 的 表示 非常 有力 从而 被 人们 普遍 采用 ． 这种 方法 的 特点 是 直观 对于 时间 同步 具有 很 好 的 表达能力 ． 但 这种 方法 一般 要求 事先 确定 出 媒体 对象 的 展示 时间 ． 这 一点 过于 苛刻 因为 由于 用户 的 交互 及 系统 负荷 的 变化 都 可能 动态 影响 展示 时间 ． 用户 容许 有 一定 的 抖动 jitter 和 延时 latency ． 　 　 算子 方式 是 用 符号 表示 ， 由 Allen ［ ］ 所 定义 的 种 时序 关系 进而 多媒体 对象 之间 的 时序 同步 可以 用 这些 算符 与 对象 的 有效 表达式 来 表示 ． 这种 模型 较为 抽象 实现 起来 较为 困难 而且 很难 体现 多媒体 集成 的 动态 特性 　 　 文档 模型 集 多媒体 文档 的 逻辑 结构 、 空间布局 结构 和 展示 结构 于 一体 突破 了 传统 文档 模型 仅 包含 逻辑 结构 和 布局 结构 的 局限 通过 展示 结构 刻画 多媒体 数据 的 展示 集成 ． 但 这种 模型 对 用户 的 交互 支持 不足 　 　 面向对象 模型 是 利用 对象 的 属性 来 描述 多媒体 对象 之间 的 时空 关系 链接 方式 则 是 利用 链 的 概念 来 刻画 多媒体 数据 之间 的 时序 关系 它们 都 没有 提供 对 用户 交互 的 支持 由于 同步 描述 模型 所 存在 的 上述 各种 问题 所以 我们 设计 了 Agent 同步 集成 模型 ［ ］ 以 保证 多媒体 同步 描述 的 力度 和 灵活性 Agent 模型 是 一种 动态 模型 它 不但 支持 多媒体 对象 之间 的 内容 集成 、 时序 集成 以及 空间 集成 而且 还 支持 用户 的 交互 有关 Agent 同步 集成 模型 的 详细 论述 见 文献 ［ ］ 　 空间 同步 的 实现 　 　 在 分布式 环境 中 实现 多媒体 对象 之间 的 空间 集成 时 必须 考虑 网络通信 的 代价 典型 的 空间 合成 包括 覆盖 overlay 、 交搭 overlap 、 毗邻 abut 、 裁剪 crop 、 放缩 scale 、 字型 格式 变换 textformat 等 这些 空间 合成 运算 是 在 用户 所在 的 结点 进行 还是 在 邻近 数据 所在 的 结点 进行 对 网络 的 通信 负荷 会 有 很大 的 影响 例如 两个 图像 A 和 B 它们 均 存储 在 同一个 结点 上 用户 可能 需要 先 分别 对 A 和 B 进行 Crop 操作 然后 再 对 得到 的 结果 进行 二元 运算 Overlay （ 如图所示 ） 即 用户 所 需要 的 最后 结果 为 COverlayCropACropB 显然 此时 如果 将 合成 后 的 结果 传送 到 用户 所在 结点 要 比 分别 将 A 和 B 传送 到 用户 结点 后 再 进行 合成 所 造成 的 通信 代价 低得 多 另外 即使 A 和 B 不 在 同一 结点 我们 如果 能够 选择 邻近 A 和 B 的 结点 首先 进行 空间 合成 往往 也 会 增加 整体 的 效率 因此 在 分布式 网络 环境 下 系统 应 权衡 通信 及 合成 点 的 选择 对 整体 性能 的 影响 Fig 　 Thespacecombinationaloperation 图 　 空间 合成 运算 　 时序 同步 的 实现 　 　 多媒体 时序 同步 既 是 分布式 多媒体数据库 系统 的 关键 又 是 其 实现 的 难点 称其为 关键 是因为 时序 同步 是 多媒体 数据 之间 的 本质 关系 其 功能 的 强弱 直接 影响 到 系统对 多媒体 需求 的 支持 程度 ； 称其为 难点 是因为 在 分布 环境 下 实现 这一 技术 非常 困难 这 也 是 当前 多媒体技术 研究 中 的 一个 热点 ［ ～ ］ 　 　 多媒体 同步 分为 内 同步 intramediasynchronization 和 外 同步 intermediasynchronization 内 同步 是 指 连续 媒体 内部 帧 之间 的 时序 同步 外 同步 则 指 的 是 不同 媒体 之间 的 时序 同步 在 分布式 环境 下 影响 多媒体 同步 实现 的 主要 因素 包括 　 　 存储设备 读取 延迟 　 　 网络 延迟 　 　 传输 过程 中 的 抖动 　 　 Client 端 以及 Server 端 内存 的 大小 　 　 多媒体 对象 的 尺寸 等 　 　 用户 对 多媒体 展示 的 需求 通过 脚本 描述 scenario 来 刻画 计算机系统 将 这种 描述 转换 为 相应 的 展示 调度 方案 presentationschedule 以及 相应 的 存取 调度 方案 retrievalschedule 如图所示 存取 调度 方案 描述 了 每 一 参与 展示 媒体 的 读取 速率 以及 各 媒体 存取 操作 的 时序 关系 因为 每一 媒体 的 大小 、 所在 存储设备 的 性能 以及 网络 的 带宽 等 因素 可能 会 有 不同 所以 这些 媒体 数据 从 存储 服务器 到 客户端 的 传输 时间 可能 会 有 偏差 为了 满足 展示 时 的 时序 要求 系统 需要 产生 相应 的 存取 方案 由此可见 媒体 的 存取 调度 顺序 与 展示 调度 顺序 可能 会 有所不同 FigThesynchronizedcontrolindistributedenvironment 图 　 分布式 环境 下 的 同步控制 　 　 在 分布式 环境 下端 到 端的 延迟 非常 随机 每一 媒体 对象 都 需要 较长 的 响应 时间 为了 平滑 服务器 的 计算速度 、 网络 传输速度 和 媒体 播放 速度 之间 的 波动 在 服务器端 以及 客户端 需要 有 足够 的 内存 缓冲区 文献 ［ ］ 详细分析 了 不同 媒体 类型 对 内存 的 占用 情况 　 　 用户 的 交互 操作 interaction 是 多媒体系统 的 重要 功能 需求 之一 而 用户 交互 又 会 对 多媒体 的 展示 调度 方案 和 存取 调度 方案 产生 很大 影响 在 分布式 环境 下 基于 交互 interactionbased 的 同步 包括 以下 两个 方面 的 问题 　 　 再 同步 的 确定 也就是说 当 交互 操作 产生 时 如何 调整 展示 调度 顺序 外 同步 媒体 的 播放 速度 内 同步 　 　 位置 的 确定 即 在 客户端 与 服务器端 缓冲区 中 媒体 块 之间 的 对应 关系 如何 再 定位 　 　 用户 的 交互 操作 具有 随机性 和 多样性 随机性 是 指 用户 的 交互 可能 发生 在 任何 时间 点上 多样性 是 指 存在 多种 交互 操作 包括 常规 操作 、 随机 操作 、 变速 操作 和 回放 操作系统 应该 能够 根据 各种 交互 操作 产生 相应 的 再 同步 和 再 定位 策略 　 　 常规 操作 包括 播放 play 、 停放 stop 、 暂停 pause 以及 恢复 播放 resume 这类 操作 不 改变 展示 调度 的 顺序 和 展示 的 速度 再 同步 以及 展示 调度 与 存取 调度 之间 的 协调 比较简单 　 　 随机 操作 包括 向前 跳转 jumpforward 、 向 后 跳转 jumpbackward 和 链接 跳转 hyperjump 这类 操作 虽然 不 改变 媒体 的 播放 速度 但 媒体 之间 的 调度 顺序 往往 会 有所 改变 再者 客户端 与 服务器端 的 缓冲 数据 块 之间 需要 重新 协调 定位 　 　 变速 操作 包括 加速 speedup 和 减速 slowdown 这类 操作 需要 改变 媒体 的 播放 速度 但 调度 顺序 不变 　 　 回放 操作 包括 正常 回放 reverse 、 快速 回放 fastreverse 和 慢速 回放 slowreverse 再 同步 后 的 调度 顺序 可能 恰好 与 原 调度 顺序 相反 正常 回放 不 改变 播放 速度 而 快速 回放 和 慢速 回放 都 要 改变 播放 速度 　 服务质量 　 　 即使 网络 的 频带 再 宽 、 计算机 的 内存 再大 、 内存 调度 算法 再 优秀 系统 的 资源 也 是 有限 的 不 可能 满足 无限 多用户 的 需求 另一方面 各个 用户 针对 自己 的 具体 应用 并不一定 需要 系统 必须 严格 按 存储 数据 的 缺省 分辨率 、 播放 速率 和 展示 尺寸 提供 为了 能够 得到 系统 的 服务 用户 一般 容许 有 一定 的 质量 降低 这 与 用户 对 传统 数据 的 需求 有 很大 差别 例如 字符 数值串 所 反映 的 含义 会 因为 串中 某 一码 的 丢失 或 错误 而 不能 被 理解 但 对于 视频 、 声频 、 图像 等 多媒体 数据 即使 其 分辨率 降低 、 部分 码 丢失 用户 一般 也 能 理解 其 展示 的 含义 所以 为了 尽量 多地 增加 用户数量 充分 满足 不同 用户 的 需求 系统 应 提供 服务质量 QoS 的 描述 接口 　 服务质量 的 基本概念 　 　 传统 的 查询 接口 语言 （ 如 SQL ） 只 需要 用户 给出 要 什么 what 而 由 系统 负责 如何 how 去 查询 所 需 数据 为了 支持 多媒体 数据系统 应 允许 用户 描述 “ 需要 什么 ” 、 “ 何时 展示 ” 、 “ 在 屏幕 的 什么 位置 展示 ” 、 “ 按 什么 质量 传输数据 ” Gibbs 利用 同 多媒体 数据 封装 在 一起 的 属性 来 刻画 多媒体 数据 的 服务质量 ［ ］ 但是 这种 方式 给出 的 只是 多媒体 数据 的 表示 质量 而 不是 展示 质量 这 是因为 在 多媒体 数据 实际 展示 时 不 一定 会 按原 表示 的 质量 传送 给 用户 由此可见 对 QoS 的 描述 必须 考虑 到 用户 展示 设备 的 状况 和 用户 对 展示 的 特殊 需求 Staehli 和 Walpole 等 人 ［ ］ 通过 引入 “ 内容 ” content 、 “ 视 ” view 、 “ 质量 描述 ” qualityspecifications 等 概念 来 刻画 QoS “ 内容 ” 描述 了 多媒体 对象 的 逻辑 输出 值 实际上 就是指 数据表示 中 的 缺省 显示 尺寸 、 分辨率 、 播放 速率 等 “ 视 ” 描述 了 在 某一时间 区间 内 从 “ 内容 ” 到 物理 显示 区域 的 映射 “ 质量 描述 ” 反映 的 是从 “ 内容 ” 到 “ 视 ” 的 实际 展示 与 理想 展示 之间 匹配 程度 的 阈值 如果 超过 阈值 就 不能 满足用户 的 QoS 需求 我们 则 采用 Agent 模型 作为 多媒体 对象 展示 集成 的 描述 方法 在 Agent 中 用户 可 描述 实际 的 展示 尺寸 、 分辨率 、 播放 速率 等 参数 只 需 在 我们 的 Agent 模型 中 增加 服务质量 的 阈值 参数 就 可以 实现 用户 对 QoS 描述 的 完整 需求 　 服务质量 的 实现 　 　 多媒体 对象 的 展示 特性 可 由 一个 多维 向量 PPPPn 来 刻画 其中 每个 分量 代表 某 一个 基本 的 展示 特性 （ 如 展示 尺寸 、 分辨率 、 展示 速率 等 ） 用户 对 服务质量 的 描述 可 抽象地 表示 为 QoSQQQn 其中 QiQminiQidealiQmaxi 这里 Qi 描述 了 用户 对 基本 展示 特性 Pi 的 质量 要求 其中 Qideali 是 用户 对 Pi 要求 的 理想 参数 Qmini 和 Qmaxi 分别 表示 Pi 的 下限 和 上限 我们 用 RRRRm 表示 系统 为 用户 的 展示 请求 而 分配 的 系统资源 其中 Ri 描述 了 某 一 基本 的 资源分配 情况 （ 如 CPU 占用 时间 、 内存大小 、 网络带宽 等 ） 在 执行 时 系统 应 将 向量 QoS 映射 为 资源分配 向量 R 最为 常用 和 最为 简单 的 映射 方法 是 在 展示 请求 开始 时 通过 用户 和 系统 之间 的 协商 negotiation 来 确定 系统对 展示 请求 的 资源分配 一旦 资源分配 成功 在 整个 展示 过程 中 ， 系统 将 保持 为 用户 所 分配 的 这些 资源 在 局域网络 环境 下 这种 方式 比较简单 较易 实现 但 在 大型 网络 甚至 Internet 环境 下 系统 很难 一直 保持 所 分配 给 用户 的 系统资源 其 主要 原因 有 以下 几个 方面 　 　 许多 网络 — — 如 当前 的 Internet 网 — — 属于 尽力 型 bestefforttype 这 使得 资源 的 保持 非常 困难 甚至 根本 不能 达到 　 　 分布式 多媒体数据库 系统 可能 包含 若干个 数据库 服务器 它们 所 采用 的 通信协议 与 处理 系统 很 不 相同 如果 用户 结点 与 数据 资源 结点 同 属于 一个 局域网 段时 资源 的 保持 就 较易 做到 而 如果 用户 在 远程 甚至 通过 Modem 访问 数据 资源 时 静态 的 资源 保持 就 很 难 做到 　 　 在 大型 网络 环境 下 经常出现 临时性 的 网络通信 拥塞 使 数据传输 的 延迟 以及 传输 出错率 急剧 上升 为了 保证 用户 的 QoS 需求 系统 和 用户 必须 重新 协商 ， 以 再次 决定 资源 的 分配 这 显然 增加 了 系统 的 复杂性 　 　 学术界 以及 商业界 极力 倡导 利用 移动 设备 作为 网络 终端 这些 终端设备 通常 是 利用 无线通信 方式 与 主干网 连接 在 无线通信 技术 （ 红外线 通信 、 区域性 电磁波 通信 、 卫星通信 等 ） 所 提供 的 通信 服务 中 ， 其 数据 的 传输 延迟 和 出错率 较 高 这 也 给 静态 资源 的 保持 带来 很大 的 困难 　 　 鉴于 以上 静态 QoS 资源管理 的 不足 JanGecsei ［ ］ 讨论 了 动态 QoS 资源管理 的 方法 adaptation 其 基本 的 工作 原理 为 在 分布式系统 中 设置 一个 控制器 controller 该 控制器 感知 多媒体 对象 传输 和 展示 状态 的 变化 一旦 这些 参数 超出 了 用户 的 QoS 需求 控制器 则 触发 一系列 动作 action 以 重新 优化 资源 的 分配 （ 如图所示 ） 根据 这一 基本原理 我们 作 如下 具体 设计 （ 如图所示 ） （ ） 在 用户 结点 和 数据 资源 结点 分别 设置 一个 多媒体 展示 状态 监视器 QoSmonitoragent 和 资源 优化 器 resourceoptimizeragent ； （ ） 状态 监视器 一旦 检测 到 当前 的 展示 状态 已 超出 用户 的 QoS 所 容许 的 范围 即刻 将 QoS 参数 的 变化 以 短消息 的 方式 传递 到 资源 优化 器 ； （ ） 资源 优化 器 重新 产生 对 用户 资源 的 分配 参数 然后 ， 资源 管理子系统 按照 这些 新 的 资源 需求 参数 向 用户 提供 多媒体 数据 以 满足用户 的 QoS 需求 Fig 　 Themadeofdynamicresourcemanagement 图 　 动态 资源管理 方式 Fig 　 TheimplementationstructureofadynamicQoSresourcemangement 图 　 一种 动 磁性 QoS 资源管理 的 实现 结构 　 　 这种 动态 的 QoS 资源管理 模式 具有 以下 优点 　 　 分布式系统 较 健壮 系统 不会 因为 QoS 请求 不 被 满足 而 重新 进行 初始 对话 　 　 对 用户 的 透明性 好 在 展示 过程 中 系统 自动 调整 资源 的 分配 而 无需 用户 的 干涉 　 　 资源 的 利用率 高 在 运行 过程 中 系统 动态 优化 每个 用户 所 占用 的 资源 充分 挖掘 资源 的 可 利用 潜力 　 体系结构 　 　 分布式 多媒体数据库 系统 的 体系结构 如图所示 各种 不同 的 局部 多媒体数据库 经过 全局 模式 层 得到 统一 全局 模式 管理 完成 数据 的 一致性 维护 、 进行 必要 的 模式 变换 以及 对 全局 事务 的 并发 控制 使 数据 的 结构 、 物理 存储 、 分布 性 等 对外 透明 向上 提供 一个 统一 的 多媒体 操作 接口 接口 具有 对 多媒体 同步 和 QoS 描述 的 功能 以及 多媒体 基于 内容 查询 等 功能 以 支持 各种类型 的 多媒体 应用 如 视频点播 、 电子 购物 、 多媒体教学 、 群件 系统 、 多媒体 浏览 与 查询 等 Fig 　 ThearchitectureoftheDistributedMultimediaDBMS 图 　 分布式 多媒体数据库 的 体系 　 客户服务器 结构 　 　 上面 我们 已经 给出 了 分布式 多媒体数据库 系统 MDDBMS 的 主要 特点 在 理想 的 、 具有 完全 透明性 的 MDDBMS 中 计算机网络 上 的 各个 结点 是 对称 的 、 平等 的 不 存在 任何 中心 某些 结点 的 崩溃 不会 影响 整个 系统 的 运行 但是 ， 这种 完全 的 透明性 实现 起来 极为 困难 性能 很 不 理想 尚 不 存在 一个 这种 意义 下 的 商业化 系统 当前 走红 的 则 是 客户服务器 结构 的 系统 从 数据库 管理系统 的 角度看 这种 结构 是 一种 集中式 的 DBMS 由 传统 集中式 的 数据库 管理系统 演变 到 客户服务器 结构 的 系统 是 一种 平滑 的 适化 过程 ［ ］ 其 结构 如图 a 所示 的 两层 结构 这种 结构 上 的 划分 充分利用 了 用户 端的 计算机 （ 一般 是 微机 ） 的 处理 能力 减轻 了 服务器 的 负荷 另外 为 使 具有 相同 应用逻辑 的 各 不同 用户 共享 应用 事务 的 处理 系统 进一步 将 应用逻辑 管理 功能 与 数据表示 功能 相 分离 是 一种 改进 结构 这种 三层 结构 首先 使 各 不同 应用 共享 DBMS 而 具有 相同 应用逻辑 的 不同 用户 又 可 共享 应用 事务 的 管理 其 结构 如图 b 所示 Fig 　 ClientServerstructure 图 　 ClientServer 结构 　 　 由于 多媒体 数据 的 复杂性 多媒体数据库 一般 采用 面向对象 的 机制 将 多媒体 数据 、 展示 属性 、 操作方法 封装 在 一起 以 降低 用户 使用 多媒体 数据 的 复杂性 传统 上 面向对象 数据库 的 客户机 与 服务器之间 的 数据交换 方式 主要 有 以下 几种 ［ ］ （ ） 结果 交换 客户 发出请求 request 而 服务器 根据 客户 的 请求 只 将 数据 的 处理结果 传递 给 客户端 其 特点 是 降低 了 通信 负荷 但 同时 也 增加 了 服务器 的 处理 负担 （ ） 对象 交换 服务器 根据 客户 的 请求 将 整个 对象 传递 给 用户端 即使 用户 只 需要 对象 的 一小部分 这种 方式 与 第种 情况 相比 减轻 了 服务器 的 负担 但 增加 了 通信 负担 以及 客户端 的 处理 负荷 （ ） 页面 交换 在 这种 方式 下 服务器 传送 的 是 客户 所 需 对象 所在 的 页面 显然 这种 方式 使 服务器 的 处理 负荷 最小 而 通信 及 客户机 的 负荷 最大 　 　 对于 多媒体数据库 来讲 首先 第种 和 第种 交换 方式 均 不 可取 因为 （ ） 多媒体 对象 的 数据量 巨大 而 客户机 一般 采用 微机 或 工作站 其 存储 的 容量 有限 若 将 整个 多媒体 对象 或 对象 所在 的 页面 整个 缓冲 在 客户端 会 有 很大 困难 ； （ ） 通信 的 负荷 过 大使 用户 等待时间 过长 ； （ ） 客户机 对于 多媒体 对象 之间 的 实时 同步 合成 的 处理 能力 有限 对于 第种 交换 方式 也 必须 先由 服务器 完成 对象 之间 的 时空 同步 处理 以流 的 方式 增量 均速 地 传递 给 客户机 亦 即 服务器 向 客户机 的 数据 提交 为 Push 方式 而 不是 Pull 方式 一般来讲 客户机 与 服务器之间 的 通信 被 逻辑 地 划分 为 上行 频带 （ 客户机 到 服务器 ） 和 下行 频带 （ 服务器 到 客户机 ） 两种 方式 　 　 上行 频带 用于 传递 用户 的 请求 命令 要求 有 很 高 的 可靠性 而 对 实时性 的 要求 不高 下行 频带 则 用于 多媒体 数据 的 传送 对于 实时性 有 严格 的 要求 而 对于 数据 的 正确性 要求 不高 　 分布式 多媒体数据库 的 实现 途径 　 　 我们 在 前文 从 概念 上 分析 了 分布式 多媒体数据库 系统 的 基本 特点 和 结构 实现 时则 可以 利用 不同 的 技术手段 　 远程 调用 范型 　 　 远程 调用 RPC 是 进程 调用 最 自然 、 最 直接 的 扩充 是 实现 ClientServer 结构 时 最 原始 的 方法 一般 在 客户端 含有 适于 各种 开发 语言 的 接口定义 以及 相应 的 编译器 远程 调用 语句 经过 编译器 翻译成 对 服务器 的 调用 码由 通信 机制 传送 给 服务器 再 由 服务器端 将 这些 调用 码 翻译成 局部 的 进程 调用 以 完成 远程 服务 远程 调用 的 实现 还 包括 一个 实时 runtime 库 用于 实现 网络通信 OSFDCEopensoftwarefoundationsdistributedcomputingenvironment 成为 这种 调用 方式 的 一种 标准 利用 这种 方式 实现 多媒体数据库 的 ClientServer 结构 时 必须 对 传统 的 OSFDCE 定义 标准 进行 必要 的 扩充 （ ） 增加 对 连续 媒体 VideoAudio 操作 的 调用 定义 传统 的 RPC 调用 方式 一般 只 适合 于 短消息 的 通信 控制 而 连续 媒体 的 操作 则 要求 批量 数据 的 均匀 的 、 长时间 无 干扰 的 通信 控制 （ ） 增加 对 多媒体 同步 描述 的 功能 多媒体 数据 之间 的 时序 同步 是 本质性 的 需求 接口 中应 包含 对 同步 描述 的 定义 （ ） QoS 定义 功能 RPC 接口标准 应该 能够 处理 用户 对 服务质量 的 定义 以便 尽可能 多地 增加 用户数 　 　 远程 调用 方式 虽然 使 Client 端 与 Server 端 能够 具有 较 好 的 耦合 性 运行 的 效率 也 比较 高 但 存在 一些 不足 （ ） 开发 的 效率 较 低 企业 可能 有 多个 数据库 服务器 用户 必须 了解 它们 所 提供 的 不同 接口 、 数据 的 分布 情况 以 协调 对 各个 服务器 的 调用 （ ） 软件 的 复用 性差 企业 的 各个 数据库 服务器 可能 是 在 不同 时期 建立 的 当 应用 中 需要 利用 各 服务器 中 的 数据 共同完成 某项 任务 时 用户 不得不 在 RPC 接口 层上 重新 编辑 应用程序 这样 就 极大 地 浪费 了 人力 和 物力 为了 提高 分布式系统 构造 的 灵活性 和 软件 的 可 复用 性 屏蔽掉 各 厂家 数据库 服务器 接口 的 不 统一 一种 新 的 技术 — — 中间件 middleware — — 应运而生 　 中间件 技术 　 　 从 广义 上 讲 中间件 的 作用 是 为了 屏蔽 不同 操作系统 接口 的 差异 及 分布 性为 用户 提供 一个 统一 的 应用 开发 接口 ［ ］ 在 本文 中是 指 为了 屏蔽 各 数据库 接口 的 不同 及 数据 的 分布 性而 提供 的 一个 统一 的 接口 软件 层 可以 通过 这个 软件 层 透明 地 访问 异构 的 多媒体数据库 系统 中间件 在 系统 中 的 位置 如图所示 虽然 中间件 尚无 严格 的 定义 但 它 的 主要 特点 是 比较 一致 的 ， 即 跨越 多个 应用 运行 于 各个 不同 的 数据库 之上 具有 分布 特性 支持 标准 的 接口 和 协议 Fig 　 ThePositionofthemiddlewareinsystem 图 　 中间件 在 系统 中 的 位置 　 　 ODBC 是 当前 被 广泛 采用 的 中间件 技术 不同 的 数据库 厂家 OracleSybaseInformixDB 等 都 提供 了 支持 这种 标准 的 驱动器 不同 模式 的 数据库系统 接口 在 ODBC 中 得到 统一 用户 只 需 根据 ODBC 所 提供 的 标准接口 透明 地 访问 各 数据库 服务器 当前 ODBC 所 提供 的 接口 是 一种 标准 的 SQL 语言 由于 多媒体数据库 访问 的 特殊 需求 需对 ODBC 进行 扩充 　 　 分布式 面向对象 范型 是 另一类 中间件 技术 这一 范型 标准 充分利用 面向对象 模型 的 优点 屏蔽掉 由于 对象 所在 平台 的 不同 、 位置 的 不同 以及 对象 迁移 所 造成 的 问题 为 用户 提供 一个 一致 的 、 分布 透明 的 面向对象 接口 因为 多媒体数据库 一般 倾向 于 采用 面向对象 的 范性 实现 所以 这种 接口方式 对于 多媒体数据库 的 分布式 构造 较为 平滑 这一 范型 的 工业 标准 较 多 如 Microsoft 公司 的 COMcomponentobjectmodel 、 IBM 公司 的 SOMsystemobjectmodel 、 国际标准 组织 OMGcommonmanagementgroup 的 Corba 等 这类 中间件 标准 同样 需要 增加 多媒体 数据 访问 特性 实时性 、 同步性 、 QoS 的 支持 才能 真正 适合 分布式 多媒体数据库 的 构造 　 　 另外 还有 一种 虽然 还 没有 标准化 但 理论 上 却 非常 完美 的 技术 即 利用 Agent 模型 构造 分布式系统 ［ ］ Agent 技术 是 分布式 人工智能 领域 中 发展 起来 的 一种 新型 计算 模型 具有 智能化 程度 高 、 分布式系统 构造 灵活 、 软件 的 复用 性强 等 优点 Agent 能够 感知 外界 发生 的 消息 根据 自己 所 具有 的 知识 自动 作出反应 利用 这一 技术 实现 分布式 多媒体数据库 系统 时应 考虑 （ ） 如何 将 已有 的 计算 实体 （ 多媒体 对象 、 元组 、 一般 的 数据文件 等 ） 构造 成 Agent ； （ ） 如何 实现 Agent 之间 的 通信 　 　 改造 原 计算 实体 的 方法 一般 有种 即 Transducer 变换 、 Wrapper 包装 和 Rewrite 重写 如图所示 对 外界 来讲 ， Transducer 具有 Agent 的 功能 当 它 感知 到 外界 的 消息 后 会 根据 自身 内部 的 机制 将 外部 消息 分解 、 转换 为 对 原 计算 实体 的 调用 这种 方式 对 分布式 多媒体数据库 系统 的 实现 较 容易 因为 它 充分利用 了 多媒体 对象 所 提供 的 操作 接口 无需 破坏 对象 的 封装 性 Wrapper 方式 是 直接 访问 原 数据 对象 的 数据结构 并 有 可能 修改 数据 的 结构 以向外 提供 Agent 的 接口 这种 方法 从 运行 效率 上 讲 要 比 第种 方式 高 但 改造 的 工作量 相对 增加 了 Rewrite 方式 是 重写 原 计算 实体 完全 用 Agent 的 方式 构造 其 计算 结构 所以 这种 方法 最 彻底 运行 效率 最高 但 改造 代价 要 比前 两种 都 要 大 改造 后 的 分布式 多媒体数据库 系统 如图所示 Fig 　 Thereconstructionmodeoftraditionalcomputingcomponent 图 　 传统 计算 实体 的 改造 方式 Fig 　 Thedistributedagentconstruction 图 　 分布式 的 Agent 构造 结构 　 　 Agent 之间 的 通信 实际上 是 通过 Faciliator 完成 的 Faciliator 概念 来自 对 Mediator 的 推广 与 发展 ［ ］ Agent 之间 的 通信 实际上 首先 是 与 同一 结点 上 的 Faciliator 通信 Faciliator 负责 将 消息 分解 然后 发 往 不同 结点 上 的 Faciliator 再 由 本地 的 Faciliator 传送 给 相应 的 Agent 　 　 我们 采用 Transducer 方式 将 多媒体 展示 集成 描述 用 Agent 来 刻画 ［ ］ 虽然 我们 的 Agent 模型 还 谈不上 什么 国际标准 但 这种 方法 对 多媒体 对象 的 操作 描述 非常 有力 充分利用 了 多媒体 对象 的 消息 接口 维护 了 对象 的 封装 性 多媒体 对象 的 存储 位置 、 定义语言 对外 透明 支持 多媒体 对象 的 时空 同步 定义 及 QoS 描述 进一步 地 这种 模型 利用 多媒体 对象 的 展示 状态 来 控制 多媒体 对象 的 同步 关系 以 动态 适应 网络 与 系统 负荷 的 变化 　 　 总之 中间件 技术 是 实现 分布式 环境 的 有效 方法 它 利用 中间件 屏蔽掉 各 数据库 服务器 接口 的 不同 向上 提供 统一 的 、 分布 透明 的 开发 接口 ODBC 适合 于 关系数据库 服务器 的 分布式 构造 面向对象 范型 的 中间件 适合 于 面向对象 数据库 的 集成 而 Agent 更 适合 于 多媒体数据库 的 分布式 建立 　 结束语 　 　 网络 环境 下 的 多媒体 应用 系统 已有 许多 如 视频点播 、 电子 购物 、 远程 电视会议 等 但 这些 都 是 非常 专门化 的 、 局部性 的 应用 各 应用 系统 之间 一般 是 毫无关系 的 随着 信息 领域 内 技术 的 发展 人们 希望 能够 在 较大 范围 乃至 全球 范围 内 真正 并且 逻辑 上 一致 地 共享 各种 资源 这 就 要求 我们 必须 从 分布式 数据库系统 的 高度 来 看待 这一 问题 以便 真正 管理 好 类型 繁多 的 多媒体 数据 资源 目前 对 分布式 多媒体数据库 系统 的 研究 尚 不多见 其 主要 原因 是 这 一 问题 的 困难性 我们 通过 与 传统 的 分布式 数据库系统 的 比较 分析 了 分布式 多媒体数据库 系统 的 固有 特点 及其 结构 研究 了 各种 实现 途径 的 优劣 由于 篇幅 所 限 对于 分布式 多媒体数据库 系统 与 集中式 多媒体数据库 系统 之间 的 共有 问题 我们 在 此 没有 进行 讨论 可 参见 相应 的 文献 本文 研究 得到 国家 高科技 项目 基金 （ No ） 、 国家科技部 重点项目 基金 和 部委级 基金 （ NoA ） 资助 巩志国 中国科学院 软件 研究所 对象 技术 中心 　 北京 　 周龙骧 中国科学院 数学 研究所 　 北京 　 董 淑珍 河北师范大学 计算机科学 系 　 石家庄 　 Emaillxzhoumathmathaccn 参考文献 ． ZhouLongxiangChaiXingwuHierarchicalarchitectureofdistributedmultimediadatabasesystemsChineseJournalofComputers ～ 周龙骧 柴兴 无 分布式 多媒体数据库 系统 的 分层 体系结构 计算机 学报 ～ ． AdjerohDANwosuKCMultimediadatabasemanagementrequirementsandissuesIEEEMultimedia ～ ． PazandakPSrivastavaJEvaluatingobjectDBMSsformultimediaIEEEMultimedia ～ ． MuhlhauserMGecseiJServicesframeworksandparadigmsfordistributedmultimediaapplicationsIEEEMultimedia ． SteinmetzRNahrstedtKMultimediaComputingCommunicationsApplicationsUpperSaddleRiverNJPrenticeHallInc ． LittleTDCGhafoorASynchronizationandstoragemodelsformultimediaobjectsIEEEJournalonSelectedAreainCommunications ～ ． DiazMSenacPTimestreamPetrinetsamodelformultimediastreamssynchronizationInChuaTasengTosiyasuLKuniiedsTheInternationalConferenceonMultimediaModelingMMMSingaporeWorldScientificPress ～ ． AlSalqanYYChangCKTemporalrelationsandsynchronizationagentsIEEEMultimedia ～ ． SchlossGAWynblattMJProvidingdefinitionandtemporalstructureformultimediadataACMMultimediaSystems ～ ． KhalfallahHKarmouchAAnarchitectureandadatamodelforintegratedmultimediadocumentsandpresentationalapplicationsACMMultimediaSystems ～ ． KarmouchAEmeryJAplaybackschedulemodelformultimediadocumentIEEEMultimedia ～ ． IinoMDayYFGhafoorAAnobjectorientedmodelforspatialtemporalsynchronizationofmultimediainformationInProceedingsoftheInternationalConferenceonMultimediaComputingandSystemWashingtonDCIEEEPress ～ ． ISOHypermediatimebasedstructurelanguageHyTimeISOInternationalStandardOrganization ． ISOMultimediaandhypermediainformationcodingexpertgroupISOIECJTCSCWGMHEGWorkingDraft “ WD ” Version ． AllenJFMaintainingknowledgeabouttemporalintervalsCommunicationsoftheACM ～ ． GongZhiguoZhouLongxiangAnagentmodelforintegrationofmultimediaobjectpresentationJournalofSoftware ～ 巩志国 周龙骧 多媒体 对象 的 Agent 展示 集成 模型 软件 学报 ～ ． LiaoWLiVOKSynchronizationofdistributedmultimediasystemswithuserinteractionsMultimediaSystems ～ ． HuangCMChenJSetalMINGIadistributedinteractivemultimediadocumentdevelopmentmechanismMultimediaSystems ～ ． CandanKSPrabhakaranBSubrahmanianVSetalRetrievalschedulesbasedonresourceavailabilityandflexiblepresentationspecificationsMultimediaSystems ～ ． GibbsSBreitenederCTsichritzisDDatamodelingoftimebasedmediaInProceedingsoftheACMSIGMODInternationalConferenceonManagementofDataNewYorkACMPress ～ ． StaehliRWalpoleJMaierDAqualityofservicespecificationformultimediapresentationsMultimediaSystems ～ ． JanGecseiAdaptationindistributedmultimediasystemsIEEEMultimedia ～ ． CheDunrenZhouLizhuWangLingchiThearchitectureofobjectorienteddatabasesystemsJournalofSoftware ～ 车敦仁周 立柱 王令 赤 面向对象 数据库系统 的 体系结构 软件 学报 ～ ． BernsteinPAMiddlewareamodelfordistributedsystemservicesCommunicationsoftheACM ～ ． GeneserethMRKetchetSPSoftwareagentCommunicationsoftheACM ～ 收稿 修稿