软件 学报 JOURNALOFSOFTWARE 年 第期 No 刻画 基于 模型 的 中心 诊断 欧阳 丹彤 　 姜云飞 　 　 摘要 　 虽然 对 基于 模型 的 诊断 存在 一系列 不同 的 逻辑 定义 但 所幸 的 是 存在 一个 统一 的 抽象 定义 它 概括 了 以往 的 不同 定义 在 该 定义 基础 上 提出 了 基于 模型 的 中心 诊断 的 概念 通过 刻画 基于 模型 的 中心 诊断 过程 论证 了 基于 模型 的 中心 诊断 与 本原 蕴含 蕴含 式 的 直接 关系 从而 将 其 理论 结果 与 ATMSassumptionbasedtruthmaintenancesystem 这类 算法 联系 起来 进一步 指出 对 基于 一致性 中心 诊断 的 刻画 仅仅 是 文中 所 给出 的 刻画 的 一个 特殊 情形 　 　 关键词 　 基于 模型 的 诊断 基于 模型 的 中心 诊断 本原 蕴含 蕴含 式 　 　 中图法 分类号 　 TPCharacterizingKernelModelbasedDiagnosisOUYANGDantong 　 JIANGYunfei 　 　 Abstract 　 AlthoughthereisaspectrumofdifferentlogicaldefinitionsofmodelbaseddiagnosisfortunatelythereexistsaunifiedabstractdefinitionwhichgeneralizesthedefinitionsproposedinthepastBasedonthisdefinitiontheconceptofkernelmodelbaseddiagnosisisproposedThenbycharacterizingtheprocessofkernelmodelbaseddiagnosisthedirectrelationshipbetweenitandtheprimeimplicantsimplicatesisalsodemonstratedThereforethetheoreticalresultsinthispapercanbelinkedwithalgorithmssuchastheATMSassumptionbasedtruthmaintenancesystemFurthermoreitispointedoutthatthecharacterizationofkernelconsistencybaseddiagnosisisonlyaspecialcaseofthecharacterizationinthispaper 　 　 Keywords 　 Modelbaseddiagnosiskernelmodelbaseddiagnosisprimeimplicantimplicate 　 　 使用 传统 的 专家系统 方法 建造 起来 的 诊断系统 依赖于 具体 的 设备 而且 如何 从 专家 那里 获取 必要 的 诊断 知识 是 维护 和 发展 这些 系统 的 瓶颈 基于 模型 的 诊断 是 一项 新 的 AI 技术 它 可以 克服 传统 方法 的 缺点 　 　 基于 模型 的 诊断 可以 看成 是 在 已知 上下文 中 对 观察 集 产生 “ 解释 ” （ Explanations 的 过程 但是 在 已有 文献 中 至少 存在 两个 不同 的 关于 “ 解释 ” 的 逻辑 概念 一种 是 解释 的 弱 概念 在 这种 情形 下称 一 诊断 解释 一 观察 m 若 它 与 m 相一致 参见 文献 ［ ～ ］ 另 一种 是 解释 的 强 概念 在 这种 情形 下称 一 诊断 解释 一 观察 m 若 它 逻辑 推出 m 参见 文献 ［ ］ 显然 逻辑 推出 比 一致性 要求 强得 多 那么 给出 一个 观察 集应 选择 哪些 观察 必须 被 诊断 逻辑 推出 呢 ？ 这是 一个 引起争议 的 地方 对 需要 被 逻辑 推出 的 观察 子集 的 不同 选择 产生 了 基于 模型 诊断 的 不同 逻辑 定义 比如 文献 ［ ］ 认为 所有 的 观察 必须 被 诊断 逻辑 推出 ； 而 文献 ［ ］ 则 认为 一 诊断 只 与 所有 观察 相一致 即可 不 要求 任何 观察 被 诊断 逻辑 推出 　 　 ConsoleL 和 TorassoP ［ ］ 分析 了 已有 文献 中 出现 的 基于 模型 诊断 的 不同 逻辑 定义 提出 了 一个 统一 的 定义 本文 即 在 该 定义 下 进一步 给出 了 能够 刻画 基于 模型 诊断 空间 的 基于 模型 的 中心 诊断 的 概念 并 对 它 的 诊断 过程 进行 了 刻画 该 刻画 论证 了 基于 模型 的 中心 诊断 与 本原 蕴含 蕴含 式 的 直接 关系 从而 可 使用 ATMS ［ ］ assumptionbasedtruthmaintenancesystem 算法 来 计算 因而 将 我们 的 理论 结果 与 实现 联系 起来 　 基于 模型 的 诊断 问题 　 　 定义 基于 模型 的 诊断 问题 DP 是 一个 三元组 〈 〈 SDCOMPS 〉 CXTOBS 〉 其中 SD 为 系统 描述 是 一阶 语句 的 集合 COMPS 为 系统 组成 部件 是 一个 有限 的 常量 集 CXT 为 表示 上下文 数据 的 基 原子 集合 OBS 为 待 解释 的 观察 集 的 基 原子 集合 　 　 CXT 或 OBS 中 每 一 原子 fa 的 含义 为 ： 关于 参数 f 的 观察 值为 a 　 　 定义 已知 一 诊断 问题 DP ＝ 〈 〈 SDCOMPS 〉 CXTOBS 〉 相应 于 DP 的 溯 因 问题 AP 是 一个 三元组 〈 〈 SDCOMPS 〉 CXT 〈 Ψ ＋ Ψ － 〉 〉 其中 Ψ ＋ OBS Ψ － ＝ ～ fx ｜ fy ∈ OBS 对于 f 的 每 一非 y 的 允许值 x 　 　 一元 谓词 AB 意味着 “ abnormal ” （ 反常 ） 当 部件 c ∈ COMPS 反常 时 ABc 为 真 　 　 定义 已知 两个 部件 集 CpCn 定义 DCpCn 如下 ［ ABc ］ ∧ ［ ～ ABc ］ 　 　 定义 已知 一 诊断 问题 DP 以及 相应 于 DP 的 溯 因 问题 AP 如 定义 称 D Δ COMPS － Δ 为 关于 DP 的 一个 基于 模型 的 诊断 当且 仅 当 　 　 （ ） D Δ COMPS － Δ 逻辑 推出 Ψ ＋ 即 对 每 一 m ∈ Ψ ＋ 都 有 SD ∪ CXT ∪ D Δ COMPS － Δ m 　 　 （ ） D Δ COMPS － Δ 与 Ψ － 一致 即 SD ∪ CXT ∪ D Δ COMPS － Δ ∪ Ψ － 可 满足 　 　 原则上 Ψ ＋ 可为 OBS 的 任一 子集 若 OBS 形如 OOn Ψ ＋ OBS 且 形如 OOr 下面 用 ～ OBS 表示 ～ O ∨ ∨ ～ On ～ Ψ ＋ 表示 ～ O ∨ ∨ ～ Or 　 　 由 定义 不难 得到 如下 定理 　 　 定理 已知 DP 和 AP 如上 若 存在 关于 DP 的 基于 模型 的 诊断 则 SD ∪ CXT ∪ OBS 是 可 满足 的 且 SD ∪ CXT ∪ ～ OBS 也 是 可 满足 的 特别 地 SD ∪ CXT ∪ ～ Ψ ＋ 也 是 可 满足 的 　 刻画 基于 模型 的 中心 诊断 　 基于 模型 的 中心 诊断 　 　 定义 称 一些 文字 的 合取 式 C 覆盖 另 一些 文字 的 合取 式 D 当且 仅 当 C 的 每 一个 文字 都 出现 在 D 中 　 　 定义 已知 DP 和 AP 如上 关于 DP 的 基于 模型 的 部分 诊断 为 一 可 满足 的 D Δ Δ 使得 对 每 一 被 D Δ Δ 覆盖 的 可 满足 的 D Δ ′ Δ ′ 都 有 （ ） SD ∪ CXT ∪ Ψ － ∪ D Δ ′ Δ ′ 一致 （ ） 若 Ψ ＋ ≠ φ 则 SD ∪ CXT ∪ D Δ ′ Δ ′ Ψ （ 注意 SD ∪ CXT ∪ D Δ ′ Δ ′ ） ∪ Ψ － 一致 等价 于 SD ∪ CXT ∪ D Δ ′ Δ ′ ） ∪ OBS 可 满足 ） 　 　 基于 一致性 部分 诊断 与 部分 溯 因 诊断 是 该 定义 的 两种 特殊 情形 前者 相当于 在 该 框架 中取 Ψ ＋ ＝ φ 后者 相当于 在 该 框架 中取 Ψ ＋ ＝ OBS 由该 定义 可 直接 得到 如下 引理 　 　 引理 已知 DP 如上 关于 DP 的 每 一个 基于 模型 的 部分 诊断 都 是 关于 DP 的 基于 一致性 的 部分 诊断 反过来 不 成立 　 　 定义 基于 模型 的 中心 诊断 是 具有 如下 性质 的 基于 模型 的 部分 诊断 即能 覆盖 它 的 唯一 的 基于 模型 的 部分 诊断 就是 它 本身 　 　 不难 得出 如下 结论 D Δ COMPS － Δ 为 一 基于 模型 的 诊断 当且 仅 当 存在 一个 基于 模型 的 中心 诊断 来 覆盖 它 也就是说 使用 基于 模型 的 中心 诊断 可以 刻画 基于 模型 的 诊断 空间 那么 如何 计算 基于 模型 的 中心 诊断 呢 在此之前 先 回顾 一下 与 本文 相关 的 一些 工作 　 　 定义 AB 文字 为 ABc 或 ～ ABcc ∈ COMPSAB 子句 为 AB 文字 的 析取 式 　 　 定义 关于 〈 〈 SDCOMPS 〉 CXTOBS 〉 的 一个 冲突 是从 SD ∪ CXT ∪ OBS 出发 推出 的 一个 AB 子句 称一 冲突 为 最小 的 当且 仅 当该 冲突 的 任一 真子 子句 都 不是 一 冲突 　 　 定义 设 Σ 是 命题 公式 的 集合 称 一 可 满足 的 基 文字 合取 式 ∏ 即 不 含 互补 对 的 文字 的 合取 式 是 Σ 的 一个 蕴含 Implicant 当且 仅 当 ∏ 能 推出 Σ 中 的 每 一个 语句 称 ∏ 是 Σ 的 一个 本原 蕴含 PrimeImplicant 当且 仅 当能 覆盖 ∏ 的 唯一 的 Σ 的 蕴含 是 ∏ 本身 　 　 定义 设 Σ 是 命题 公式 的 集合 称基 文字 的 析取 式 C 为 Σ 的 蕴含 式 Implicate 当且 仅 当 Σ 能 推出 C 称 C 为 Σ 的 本原 蕴含 式 PrimeImplicate 当且 仅 当 不 存在 C 的 真子 子句 C ′ 使得 C ′ 为 Σ 的 蕴含 式 　 　 定理 ［ ］ 刻画 基于 一致性 的 中心 诊断 关于 〈 〈 SDCOMPS 〉 CXTOBS 〉 的 基于 一致性 的 中心 诊断 是 SD ∪ CXT ∪ OBS 的 所有 最小 冲突 的 本原 蕴含 　 刻画 基于 模型 的 中心 诊断 　 　 引理 ［ ］ 　 关于 DP 的 基于 一致性 部分 诊断 是 关于 DP 的 所有 最小 冲突 的 蕴含 　 　 下面 我们 用 ∏ 表示 SD ∪ CXT ∪ OBS 的 所有 形如 AB 子句 形式 的 本原 蕴含 式 的 合取 式 形如 ～ D Δ i Δ j ∧ ∧ ～ D Δ im Δ jm 对 其中 每一 ～ D Δ ip Δ jp 都 有 SD ∪ CXT ∪ OBS ～ D Δ ip Δ jp 用 Ω 表示 关于 SD ∪ CXT ∪ ～ Ψ ＋ 的 所有 形如 AB 子句 形式 的 本原 蕴含 式 的 合取 式 形如 ～ D Δ l Δ k ∧ ∧ ～ D Δ ln Δ kn 对 其中 每一 ～ D Δ lq Δ kq 都 有 SD ∪ CXT ∪ ～ Ψ ＋ ～ D Δ lq Δ kq 特别 地若 Ψ ＋ ＝ φ 则 令 Ω ＝ false 　 　 定理 （ 刻画 基于 模型 的 中心 诊断 ） 已知 DP 及 AP 如上 设 ∏ 为 SD ∪ CXT ∪ OBS 的 所有 AB 子句 形式 的 本原 蕴含 式 即 关于 DP 的 所有 最小 冲突 的 合取 式 Ω 为 SD ∪ CXT ∪ ～ Ψ ＋ 的 所有 AB 子句 形式 的 本原 蕴含 式 的 合取 式 则 D Δ Δ 为 关于 DP 的 一个 基于 模型 的 中心 诊断 当且 仅 当 D Δ Δ 为 ∏ ∧ ～ Ω 的 一个 本原 蕴含 　 　 证明 必要性 设 D Δ Δ 是 关于 DP 的 一个 基于 模型 的 中心 诊断 首先 证明 D Δ Δ ∏ ∧ ～ Ω 由 引理 知 D Δ Δ 也 是 关于 DP 的 基于 一致性 部分 诊断 因此 由 引理 D Δ Δ ∏ 现在 证明 D Δ Δ ～ Ω 用 反证法 若不然 则 对 ～ Ω 中 的 任意 一个 D Δ lp Δ kp 都 有 D Δ Δ D Δ lp Δ kp 又 由 D Δ Δ 是 基于 模型 的 中心 诊断 知 D Δ Δ 亦 为 基于 模型 的 部分 诊断 故由 定义 知 SD ∪ CXT ∪ D Δ Δ Ψ ＋ 即 SD ∪ CXT ∪ ～ Ψ ＋ ～ D Δ Δ 这就是说 ～ D Δ Δ 为 SD ∪ CXT ∪ ～ Ψ ＋ 的 一个 蕴含 式 因此 Ω 中 一定 存在 某一 本原 蕴含 式 ～ Ｄ Δ lq Δ kq 使得 ～ D Δ lq Δ kq 为 ～ D Δ Δ 子 析取 式 亦 即 ～ Ω 中 存在 某一 D Δ lq Δ kq 使得 D Δ lq Δ kq 为 D Δ Δ 的 子 合取 式 当然 就 有 D Δ Δ D Δ lq Δ kq 这样 就 与 上面 的 对于 ～ Ω 中 任意 一个 D Δ lp Δ kp 都 有 D Δ Δ D Δ lp Δ kp 产生 了 矛盾 故原 假设 D Δ Δ ～ Ω 不 对 即 D Δ Δ ～ Ω 综上 有 D Δ Δ ∏ ∧ ～ Ω 现在 假设 存在 一个 D Δ ′ Δ ′ 它 覆盖 D Δ Δ 且 是 ∏ ∧ ～ Ω 的 蕴含 则 D Δ ′ Δ ′ ∏ ∧ ～ Ω 由 D Δ ′ Δ ′ ∏ 及 引理 知 D Δ ′ Δ ′ 是 关于 DP 的 基于 一致性 部分 诊断 由 定义 知 SD ∪ CXT ∪ D Δ ′ Δ ′ ∪ OBS 是 可 满足 的 因为 SD ∪ CXT ∪ ～ Ψ ＋ Ω 因此 SD ∪ CXT ∪ ～ Ω Ψ ＋ 又 由 D Δ ′ Δ ′ ～ Ω 故有 SD ∪ CXT ∪ D Δ ′ Δ ′ Ψ ＋ 因而 由 定义 知 D Δ ′ Δ ′ 是 基于 模型 的 部分 诊断 又 因为 它 覆盖 了 基于 模型 的 中心 诊断 D Δ Δ 所以 D Δ ′ Δ ′ 就是 D Δ Δ 这就是说 D Δ Δ 是 ∏ ∧ ～ Ω 的 本原 蕴含 　 　 充分性 假设 D Δ Δ 是 ∏ ∧ ～ Ω 的 一个 本原 蕴含 由 上面 证明 知它 一定 是 基于 模型 的 部分 诊断 设 存在 一个 D Δ ′ Δ ′ 它 覆盖 了 D Δ Δ 且 是 基于 模型 的 部分 诊断 那么 由 必要性 部分 证明 知 D Δ ′ Δ ′ 一定 是 ∏ ∧ ～ Ω 的 蕴含 又 因为 它 覆盖 了 ∏ ∧ ～ Ω 的 本原 蕴含 所以 D Δ ′ Δ ′ 就是 D Δ Δ 这就是说 D Δ Δ 是 基于 模型 的 中心 诊断 　 　 　 　 　 　 　 □ 　 　 可以 看出 该 定理 有 如下 优点 （ ） 将求 基于 模型 的 中心 诊断 的 过程 清晰 地 分为 与 领域 有关 的 冲突 识别 及 与 领域 无关 的 候选 产生 两大 步骤 （ ） 当 Ψ ＋ 取作 φ 时 可 直接 得到 文献 ［ ］ 中 对 基于 一致性 中心 诊断 的 刻画 这就是说 它 仅仅 是 该 定理 的 一个 特殊 情形 直观 上 看 基于 模型 的 中心 诊断 是 在 基于 一致性 中心 诊断 上 附加 了 最小 数目 的 AB 文字 保证 了 它 不仅 与 OBS 一致 而且 能 逻辑 推出 Ψ ＋ 这样 在 实际 应用 中 我们 可以 首先 从 ∏ 计算 出 限制 弱 的 基于 一致性 中心 诊断 空间 然后 通过 逐步 增加 需 被 逻辑 推出 的 观察 数目 （ 扩大 Ψ ＋ ） 逐步 在 该 诊断 上 附加 最小 数目 的 AB 文字 以便 找出 真正 有用 的 解 （ ） 尤其 重要 的 是 我们 证明 了 基于 模型 的 中心 诊断 与 本原 蕴含 和 本原 蕴含 式 的 直接 关系 从而 将 我们 的 理论 结果 与 ATMS 类 算法 联系 起来 　 实 　 例 　 　 考虑 汽车 发动机 的 一个 部件 油杯 的 简化 行为 模型 设该 部件 有 两种 行为 方式 correct 及 holed （ 相应 于 ～ AB （ oilcup ） 及 AB （ oilcup ） ） 它 的 模型 SD 包括 如下 公式 ： 　 　 　 　 　 　 　 　 　 　 　 　 　 holedoilcup → oilbelowcarpresent 　 　 　 　 　 　 　 　 　 　 　 　 　 holedoilcup → oillevellow 　 　 　 　 　 　 　 　 　 　 　 　 　 correctoilcup → oillevelnormal 　 　 　 　 　 　 　 　 　 　 　 　 　 oillevellow ∧ engineon → enginetemperaturehigh 　 　 　 　 　 　 　 　 　 　 　 　 　 oillevelnormal ∧ engineon → enginetemperaturenormal 　 　 下面 考察 如下 诊断 问题 DP 〈 〈 SDCOMPS 〉 CXTOBS 〉 其中 COMPSoilcupOBSoilbelowcarpresentCXTengineon 设 与 DP 相应 的 溯 因 问题 AP 〈 〈 SDCOMPS 〉 CXT 〈 Ψ ＋ Ψ － 〉 〉 其中 Ψ － ～ oilbelowcarabsent 　 　 若该 模型 是 完备 的 （ 完备 是 指 每 一 观察 的 所有 原因 都 在 SD 中 ） 则 取 Ψ ＋ oilbelowcarpresent 应用 定理 第步 ： 求 出 ∏ 为 holedoilcup ∨ correctoilcup Ω 为 ～ holedoilcup 第步 ： 求 出 ∏ ∧ ～ Ω 的 本原 蕴含 为 holedoilcup 因此 基于 模型 的 中心 诊断 为 holedoilcup 这一解 是 合理 的 因为 在 oilbelowcarpresent 的 原因 的 完备 模型 中 holedoilcup 是 oilbelowcarpresent 的 唯一 原因 　 　 若该 模型 是 不 完备 的 即 holedoilcup 不是 oilbelowcarpresent 的 唯一 原因 还有 与 部件 oilcup 状态 不 相关 的 额外 原因 可能 导致 oilbelowcarpresent 这时 只 给出 唯一 诊断 holedoilcup 就 不合理 了 因此 这时 若取 Ψ ＋ ＝ φ 以 削弱 限制 则 可 从 ∏ 求 出 两个 中心 诊断 correctoilcup 及 holedoilcup 这 显然 是 合理 的 　 结 　 论 　 　 本文 提出 了 一个 能够 刻画 基于 模型 诊断 空间 的 基于 模型 的 中心 诊断 的 概念 并 对 基于 模型 的 中心 诊断 过程 进行 了 刻画 我们 将 该 诊断 过程 清晰 地 分为 与 领域 有关 的 冲突 识别 及 与 领域 无关 的 候选 产生 这 两大 步骤 并 论证 了 基于 模型 的 中心 诊断 与 本原 蕴含 蕴含 式 的 直接 关系 从而 将 我们 的 理论 结果 与 实现 联系 起来 本文 研究 得到 国家自然科学基金 和 国家教委 博士点 基金 资助 作者 介绍 ： 欧阳 丹彤 女年生 博士生 讲师 主要 研究 领域 为 基于 模型 的 诊断 定理 机器 证明 　 　 　 　 　 姜云飞 年生 教授 博士生 导师 主要 研究 领域 为 自动 推理 基于 模型 的 诊断 及 规划 本文 通讯联系 人 ： 欧阳 丹彤 长春 吉林大学 计算机科学 系 本文 收到 原稿 收到 修改稿 作者 单位 ： 欧阳 丹彤 　 吉林大学 计算机科学 系 　 长春 　 　 　 　 　 　 姜云飞 　 中山大学 计算机软件 所 　 广州 　 Emailjutaomailinterflowcomcn 参考文献 　 ［ ］ DavisRDiagnosticreasoningbasedonstructureandbehaviorArtificialIntelligence ～ 　 ［ ］ GeneserethMRTheuseofdesigndescriptionsinautomateddiagnosisArti ］ icialIntelligence ～ 　 ［ ］ ReterRAtheoryofdiagnosisfromfirstprinciplesArtificialIntelligence ～ 　 ［ ］ deKleerJWilliamsBCDiagnosingmultiplefaultsArtificialIntelligence ～ 　 ［ ］ PooleDGoebelRAleliunasRTHEORISTalogicalreasoningsystemfordefaultsanddiagnosisInCerconeMCallaGMCedsTheKnowledgeFrontierNewYorkSpringerVerlag ～ 　 ［ ］ ConsoleLDuprDTTorassoPAtheoryofdiagnosisforincompletecausalmodelsInSridharanNSedProceedingsofthethInternationalJointConferenceonArtificialIntelligenceSanMateoCAMorganKaufmannPublishers ～ 　 ［ ］ PooleDNormalityandfaultsinlogicbaseddiagnosisInSridharanNSedProceedingsofthethInternationalJointConferenceonArtificialIntelligenceSanMateoCAMorganKaufmannPublishers ～ 　 ［ ］ deKleerJWilliamsBCDiagnosiswithbehavioralmodesInSridharanNSedProceedingsofthethInternationalJointConferenceonArtificialIntelligenceSanMateoCAMorganKaufmannPublishers ～ 　 ［ ］ StrussPDresslerOPhysicalnegation — — integratingfaultmodelsintothegenerldiagnosticengineInSridharanNSedProceedingsofthethInternationalJointConferenceonArtificialIntelligenceSanMateoCAMorganKaufmannPublishers ～ 　 ［ ］ ConsoleLTorassoPAspectrumoflogicaldefinitionsofmodelbaseddiagnosisComputationalIntelligence ～ 　 ［ ］ deKleerJAnassumptionbasedtmsArtificialIntelligence ～ 　 ［ ］ deKleerJMackworthAKReiterRCharacterizingdiagnosisandsystemsArtificialIntelligence ～ 本文 收到 原稿 收到 修改稿