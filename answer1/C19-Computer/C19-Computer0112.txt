计算机 工程 ComputerEngineering 年 　 第卷 　 第期 　 VolNo 一种 实用 的 汉语 基音 提取 方法 周江扬 　 柴佩琪 　 　 摘 　 要 ： 提出 一种 基于 语音 短时 自 相关 函数 的 基音 提取 实用 方法 ． 根据 汉语 语音 短时 能量 和 过 零率 相结合 来 精确定位 汉语 音节 的 韵母 基音 周期 起点 ， 进而 提取 基音 周期 ． 经过 大量 的 测试 ， 结果 与 手工 提取 的 精度 一致 ． 　 　 关键词 ： 基音 周期 ； 自 相关 ； 短时 能量 ； 短时 过零率 APracticalAlgorithmonPitchExtractofChineseSyllabeZhouJiangyangChaiPeiqiComputerEnginneringDeptofTongjiUnivShanghai 　 　 Abstract 　 InthispaperapracticalalgorithmispresentedWecangettheprecisebeginningpointofvoicedpartofChinesesyllableintermsofshorttimeaverageenergyandaveragezerocrossingrateofChinesesyllabeandextractthepitchperiodusingtraditionalshorttimeautocorrelationfunctionTheresultiscrediblethroughalargesumofvocabulary 　 　 Keywords 　 PitchperiodAutocorrelationShorttimeenergyShorttimeZerocrossingrate 　 问题 的 提出 　 　 在 汉语 文语 转换 系统 的 研究 中 ， 需要 建立 一个 比较 好 的 韵律 模型 。 所谓 韵律 模型 ， 就是 为 需 转换 的 文本 中 的 每个 字 、 词 、 短语 、 句 规划 目标 的 音高 、 音长 ， 字 之间 、 词 之间 的 停顿 模型 、 重音 模型 等 。 而 音高 音长 是 影响 汉语 自然 度 的 重要 因素 ， 是 主要 的 韵律 参数 ， 因此 确定 正确 的 音高 模型 是 汉语 文语 转换 系统 中 的 一个 极为重要 的 问题 。 由于 汉语 词汇 以双 音节 词 为主 ， 据统计 占 汉语 总 词汇量 的 以上 。 在 实时 拼接 中 主要 涉及 前后 音节 之间 如何 调节 ， 以 符合 它们 自然 的 发音 规律 ， 因此 研究 双 音节 词 的 音高 模型 是 有 意义 的 ， 吴宗济 给出 了 二 音节 的 基本 调型 。 在 实际 应用 中 ， 需用 将 这些 音高 模型 数字化 ， 而且 由于 语音 是 时变 的 ， 不同 人 的 声音 特征 是 不同 的 ， 在 收集 语音 音高 模型 数据 时 ， 一个 快速 且 可信 的 基音 提取 工具 是 十分必要 的 。 国内 使用 的 较 多 的 是 SFS 这种 分析 软件 ， 这种 工具 是 无法 拥有 的 。 本文 作者 在 进行 汉语 文语 转换 系统 的 研究 中 ， 开发 了 这种 分析 软件 。 作者 应用 传统 的 自 相关 函数 法 ， 结合 短时 能量 和 短时 过零率 进行 基音 提取 ， 并 对 此法 进行 了 改进 。 结果表明 本文 的 方法 具有 比较 高 的 精度 ， 与 手工 提取 精度 相当 。 　 汉语 基音 提取 方法 及其 实现 自动 提取 汉语 基音 　 　 汉语 基音 周期 起点 的 确定 　 　 汉语 音节 是 由声 、 韵母 组成 ， 在 自动 提取 基音 时 首先 要 解决 的 是 基音 周期 标记 的 起点 问题 。 汉语 的 声母 大多 是 清 辅音 ： b 、 d 、 g 、 p 、 t 、 k 、 z 、 zh 、 j 、 c 、 ch 、 q 、 f 、 s 、 sh 、 x 、 h ， 剩下 的 是 浊辅音 ： m 、 n 、 r 、 l 、 w 。 浊辅音 和 元音 相似 ， 它们 与 元音 结合 的 情况 如图所示 。 浊辅音 和 元音 之间 没有 明确 的 分界 ， 仅 根据 短时 能量 比较 难 区别 ， 这 就 给 确定 基音 周期 标记 的 起点 带来 了 困难 。 图 　 参谋 的 波形 　 　 从 清音 、 浊音 的 过 零率 的 分布 看 ， 清音 的 短时 平均 过零率 大于 浊音 的 短时 平均 过零率 ， 因此 ， 可以 借助于 短时 平均 过零率 来 进一步 判断 清音 和 浊音 的 分界点 。 本文 在 确定 浊音 段 起点 时 ， 分 粗分 、 细分 二级 定位 。 具体 算法 如图所示 。 本 算法 短时 窗取 矩形 窗 ， 窗长点 ， 帧 与 帧 之间 的 帧 移为 点 。 图 　 自动 确定 起点 算法 的 流程图 　 　 对于 大多数 清 辅音 ， 只要 粗分 即可 确定 起点 。 本文 中 ， 细分 时 n 取 。 　 　 通过 对 大量 词 的 短时 平均 能量 和 过 零率 的 研究 发现 ： 辅音 和 元音 的 边界 ， 主要 由 辅音 段 的 特性 决定 。 在 计算 短时 平均 能量 和 过 零率 时 ， 选 的 窗长 应 足够 小 。 对 一些 发音 短促 的 辅音 计算 所得 的 平均 过零率 是 不可 用来 作为 判断 依据 ， 如 ： b 、 d 、 g 这些 不 送气 的 塞音 ， 见图 ， 此时 可 考虑 用 短时 平均 能量 判断 。 通过 实验 ， 发现 对 p 、 k 这 两个 辅音 ， 大多数 情况 下 能量 区别 不 明显 ， 而过 零率 变化 明显 。 由于 辅音 发音 的 长短 对 平均 能量 和 过 零率 的 计算 直接 相关 ， 因此 ， 当 辅音 发音 短促 时 ， 会 出现 一些 误 判断 ， 但是 改进 后 的 算法 ， 通过 中 值 平滑 后 ， 是 可以 去除 这些 野点 的 。 图 　 baituo 的 平均 能量 和 过 零率 基于 自 相关 函数 的 基音 提取 算法 　 　 找出 基音 周期 起点 后 即可 进行 基音 周期 提取 。 具体 算法 如图 。 图 　 基音 提取 的 流程图 　 　 传统 的 方法 用 长度 固定 的 窗 对 语音 信号 进行 分帧 ， 然后 估计 每 一帧 的 基音 周期 。 由于 汉语 是 有 声调 变化 的 ， 它 的 基音 周期 改变 的 范围 比较 大 ， 再用 固定 的 窗长 去 计算 自关 函数 和 其他 短时 参数 ， 不足以 反映 语音 的 短时 特性 。 本文 采用 同步 改变 窗长 的 办法 ， 即取 前 一帧 估计 所 得到 周期 的 倍 作为 该 帧 的 窗长 ， 因为 在 相邻 的 语音 帧 之间 ， 基音 周期 改变 是 有限 。 　 　 另外 ， 在 求 相关 函数 峰值 时 ， 主要 确定 第一峰 值 的 位置 。 每 一帧 与 后续 第二 帧 之间 的 帧 移 Ts 也 不宜 取 固定 长度 。 本文 取前 一帧 估计 的 基音 周期 。 固定 长度 帧 移会 出现 如下 两种 情况 ： 当 实际 基音 周期 Tp 较 小时 ， 即 有 TsTp 时 ， 则 求下 一帧 相关 函数 时会 漏掉 一些 信息 ； 当 实际 基音 周期 Tp 较大 时 ， 即 有 TsTp 时 ， 又 会 重复 利用 前 一帧 的 信息 。 当 累计 误差 超过 一定 值时 ， 相关 函数 计算 值 不 可靠 。 半自动 提取 汉语 基音 　 　 由于 自动 提取 汉语 基音 周期 时 ， 难免会 出现 差错 ， 常常 需要 人工 修整 ， 本文 主要 针对 汉语 文语 转换 系统 ， 所以 不 注重 速度 和 计算 量 ， 因此 我们 在 提取 汉语 基音 周期 前 ， 先 得到 待 分析 语音 的 汉语 基音 周期 起点 ， 在 使用 本 软件 时 ， 人工 输入 第一 音节 辅音 开始 、 分界 处 、 第二 音节 辅音 开始 、 分界 处 的 坐标值 。 　 结果 与 讨论 　 　 对 汉语 音节 的 基音 周期 提取 算法 很多 ， 常用 的 有 ： 自 相关 法 、 平均 幅度 差 函数 法 、 倒谱法 等 ， 各种 算法 各有特点 ， 精度高 则 算法 实现 复杂 。 本文 采用 短时 能量 和 短时 过零率 的 二级 定位 找到 从 辅音 到 元音 的 切换 点 。 图为 使用 自动 提取 算法 的 结果 ， 图为 采用 半自动 算法 的 结果 。 为 便于 比较 ， 随机 选择 了 个 字 作为 例子 ， 对 算法 进行 进一步 的 比较 。 用 本文 给出 的 算法 提取 的 基音 周期 、 手工 提取 的 基音 周期 的 比较 见表 。 实验 所用 的 语料 由 一 女声 ， 通过 CREATIVE 声 卡采集 ， 采样 频率 为 HZ 。 本 算法 实现 简单 ， 而 实验 的 结果 却 十分 可信 ， 我们 已经 在 自己 的 文语 转换 系统 中 应用 。 图 　 “ 安静 ” 的 基音 周期 图 　 “ 参谋 ” 的 基音 周期表 　 本文 算法 与 手工 提取 的 基音 周期 的 比较 单位 ： 字节 字 手工 提取 的 基音 周期 自动 算法 提取 的 基音 周期 半自动 算法 提取 的 基音 周期 参谋 地所权 作者简介 ： 周江扬 ～ ， 男 ， 博士生 ， 主研 语音 信号处理 、 模式识别 、 智能 控制 作者 单位 ： 同济大学 计算机系 ， 上海 　 参考文献 初敏 高清晰度 高 自然 度 的 文语 转换 系统 的 研究 中科院 声学 所 吴宗济 普通话 语句 中 声调 变化 中国 语文 孔 江平 吕士楠 汉语 双 音节 词 声调 组合 模型 研究 NCMMSC 美 LR 拉宾 纳 RW 谢弗 语音 信号 数字 处理 北京 ： 科学出版社 徐学庆 俞铁城 音调 提取 的 新 方法 探索 NCMMSC 吴宗济 林茂灿 实验 语言学 教程 北京 ： 高等教育出版社 收稿 日期 ：