计算机 应用 研究 APPLICATIONRESEARCHOFCOMPUTERSVolNoP 一种 应用 于 多 专家 会诊 系统 的 调度 专家 算法 张立群 　 李杰 摘 　 要 ： 提出 了 一种 应用 于 多 专家 会诊 系统 的 调度 专家 算法 。 它 是 针对 在 微机 上 建造 的 用于 诊断 人体 肺病 的 多 专家 会诊 系统 MEMSPD 而 设计 的 。 关键词 ： 多 专家 会诊 系统 专家系统 调度 专家 黑板 结构 　 引言 　 　 知识库 机系统 是 智能机 研制 工作 中 的 一个 重要 组成部分 ， 而 多 专家系统 是 知识库 机系统 研究 领域 中 的 重要 课题 之一 。 联合 协作 多 专家系统 的 特点 是 ： 每一 专家系统 仅 有 一种 问题 求解 方法 ， 但 却 充分 了解 自身 的 局限性 以及 协作 专家 的 长处 ， 从而 知道 何时 和 怎样 传递 问题 。 有关 这样 的 系统 的 研究成果 将 说明 ： 一组 问题 求解 方法 将 怎样才能 互相 作用 ， 他们 相互之间 究竟 应当 知道 多少 ， 各 专家 才能 共享 知识 及 他们 如何 能 有效 地 进行 通讯 ， 这 正是 我们 要 研究 的 课题 。 为了 对 知识库 机系统 的 研制 提供 一个 有益 的 实验 工作 环境 ， 我们 与 医学专家 协作 ， 在 微机 上 联合 建造 了 用于 诊断 人体 肺病 的 多 专家 会诊 系统 MEMSPDMultipleExpertsMedicineSystemforPulmonaryDisease 。 　 　 MEMSPD 系统 提供 如下 主要 功能 ： ① 多 专家 会诊 ； ② 单一 专家 诊断 ； ③ 记录 多 专家 会诊 或 单一 专家 诊断 的 过程 信息 ； ④ 记录 系统 在 运行 多 专家 会诊 或 单一 专家 诊断 过程 中 的 跟踪 信息 ； ⑤ 查阅 任一 专家系统 的 结构 组成 ； ⑥ 查阅 病历 。 　 　 MEMSPD 系统 中 的 多 专家 会诊 采用 了 扩展 的 黑板 控制结构 ， 其 总体 结构 如图所示 。 　 调度 专家 算法 的 设计 思想 　 问题 状态 空间 　 　 诊断 就是 对 问题 的 求解 ， 问题 表示 方法 是 基于 静态 的 症状 数据库 。 　 　 与 患者 有关 的 医学 参数 很多 ， 其中 一部分 是 与 诊断 有关 的 症状 ， 症状 项目 的 选择 是 很 重要 的 ， 选择 的 项目 太多会 冲淡 对 病症 起 主要 影响 的 因素 。 选择 项目 太少 又 会 遗漏 一些 主要 因素 。 因此 ， 选择 症状 要 直接 依靠 专家 ， 由 专家 根据 自己 的 经验 给出 这些 症状 。 把 多个 相关 专家 给出 的 症状 进行 合并 就 构成 了 症状 数据库 的 全部 症状 。 综合 多个 专家 的 经验 将 症状 数据库 的 全部 症状 分为 三大类 ： 观察 症状 、 身体 症状 、 检查 症状 。 每 一大 类 又 可 分成 小类 。 对大类 中 的 症状 ， 根据 多个 专家 的 经验 ， 按 诊断 时 重要性 的 程度 大小 进行 排列 ， 每大类 中 的 症状 都 用 与 之 对应 的 整数型 的 症状 号 表示 ， ， … 。 MEMSPD 系统 的 症状 数据库 是 可以 在 系统 外 修改 并 扩充 。 把 它 作为 一 数据文件 存放 于 磁盘 上 。 　 　 患者 就诊 ， 建立 病人 卡片 后 ， MEMSPD 系统 从 磁盘 调入 症状 数据库 文件 ， 把 三大类 症状 逐类 逐屏 显示 于 问题 黑板 中 ， 经 人机接口 界面 ， 选择 患者 的 症状 ， 输入 该 症状 号 ， 这样 ， 就 形成 要求 解 的 问题 ， 问题 由 选择 的 三大类 症状 号 组成 ， 即 SSSiSSSjSSSt ， 其中 Spq 是 整数型 症状 号 。 　 算法 设计 的 策略 　 　 调度 专家 策略 表见 图中 的 调度 专家 策略 是 ： 哪位 专家 从 问题 黑板 上 患者 输入 的 病症 集中 所分 得 的 症状 数量 越 多 ， 则 此 专家 被 调度 的 优先 级数 就 越 高 。 系统 总控 见图 采取 的 是 基于 高 优先级 的 调度 专家 策略 。 　 设计 思想 　 　 调度 专家 算法 的 设计 思想 是 基于 集合论 中 覆盖 的 概念 ， 其 设计 思想 是 ： 相应 于 问题 状态 空间 ， 生成 一个 协作 求解 的 主 专家 集 ， 再 根据 每 一位 主 专家 在 问题 求解 中 的 当前状况 ， 动态 形成 一个 支持 该主 专家 的 辅助 专家 集 。 其 结构 如图 。 　 　 ① 建立 专家 网络 　 　 对 一 专家 ， 分析 提取 尽可能 的 专家 特征 ， 形成 一条 以 专家 名为 链首 的 专家 链 ， 如图所示 。 　 　 同样 的 方法 作用 于 多个 专家 ， 形成 多条 专家 链 ， 然后 ， 再 根据 专家 的 特点 ， 排列 专家 链 ， 将 他们 的 链首 连接起来 ， 就 形成 了 专家 网络 。 专家 网络 相对 MEMSPD 系统 来说 是 静态 的 ， 在 系统 外 ， 可 对 其 进行 修改 和 填充 专家 等 管理 操作 。 　 　 ② 分配 症状 　 　 对 问题 状态 空间 的 每 一 症状 ； 都 扫描 一遍 专家 网络 ， 若 某 专家 链 的 特征 中 包含 该 症状 ， 则 复制 该 症状 投递 给 此 专家 ， 然后 ， 继续 考察 下 一 专家 链 ， 直到 专家 网络 中 的 全部 专家 链 都 扫描 遍 为止 。 　 　 ③ 参与 会诊 的 相关 主 专家 集 的 形成 　 　 分配 症状 后 ， 能够 参与 问题 求解 的 专家 都 最大 限度 地分 得 了 症状 ， 这时 ， 扫描 一遍 专家 网络 ， 就 形成 初步 的 相关 专家 集 ， 然后 ， 在 其中 挑选 在 会诊 中 能够 起 主要 作用 的 多个 主 专家 。 由于 在 分配 症状 时 复制 症状 ， 所以 ， 在 初步 相关 专家 集中 ， 存在 这样 一种 情况 ： 专家 乙分 得 的 症状 集合 SiSiSin 是 专家 甲所分 得 的 症状 集合 SjSjSjn 的 子集 ， 因此 ， 专家 甲应 是 参与 会诊 的 主 专家 ， 而 专家 乙 只能 作为 帮助 专家 甲 的 辅助 专家 。 最后 ， 全面 考察 初步 相关 专家 集 ， 删除 其中 的 辅助 专家 ， 这样 就 形成 了 参与 会诊 的 相关 主 专家 集合 ， 其中 各主 专家 所分 得 的 症状 集合 两 两 之间 的 交集 一定 不 等于 某个 主 专家 所分 得 的 症状 集合 。 主 专家 在 执行 后 所得 结论 是 协作 的 产物 。 而 他们 在 执行 时 是 可 相互 独立 的 。 　 　 ④ 支持 主 专家 的 辅助 专家 集 的 动态 形成 　 　 相关 主 专家 集中 的 每 一主 专家 ， 在 执行 中 ， 若 请求 在 处理 Cii ， ， ， m 类 症状 上 提供 支持 ， 则 把 该 专家 所分 得 的 症状 集中 的 Ci 类 症状 分配 到 专家 网络 。 扫描 该 网络 ， 形成 支持 这个 主 专家 的 辅助 专家 集 。 主 专家 的 执行 可 多次 请求 提供 支持 。 　 算法 的 结构 及其 实现 　 专家 网络 的 数据结构 　 　 要 从 多个 专家 中 选择 专家 ， 就 需要 了解 每位 专家 的 特性 。 把 多个 专家 的 特性 综合 起来 ， 就 能 在 此基础 上 ， 根据 不同 的 问题 ， 来 动态 调度 不同 的 专家 去 求解 。 在 MEMSPD 系统 中 ， 问题 的 状态 空间 中 的 数据 是 症状 数据库 中 的 一部分 。 症状 数据库 中 的 症状 划分 为 三大类 ： 观察 症状 、 身体 症状 ， 检查 症状 。 所以 ， 提取 专家 的 特征 应 在 三大类 上 进行 。 　 　 多条 专家 链 相连 就 构成 了 专家 网络 。 在 连接 专家 链时 ， 比较 重要 且 具有 权威性 的 专家 应 尽可能 排 在 专家 网络 的 前面 部分 。 　 　 在 MEMSPD 系统 中 ， 专家 网络 的 建立 由 一个 子系统 通过 人机交互 建造 。 专家 网络 相对 系统 是 静态 的 ， 称为 静态 数据库 。 　 形成 相关 主 专家 集 　 　 ① 算法 中 用到 的 几个 主要 函数 的 功能 说明 　 　 a 函数 SHARESYMPS 　 　 该 函数 的 调用 形式 是 SHARESYMPSSLC ， 其中 ， 参数 SL 是 一张 表 ， C 是 正整数 。 　 　 该 函数 把 C 类 C ， ， 的 症状 SLSSSt 分配 到 专家 网络 ， Sii ， ， ， t 是 症状 号 ， 返回 一 结果 表 。 结果 表中 的 每个 元素 形式 是 ExpertnameSList ， SListSSSs 是 专家 Expertname 自 SL 所分 得 的 症状 集 ， 结果 表是 一 有序 表 ， 按 每个 元素 中 专家 所分 得 的 症状 数量 的 多少 递减 排序 。 　 　 b 函数 PRODYNA 　 　 该 函数 的 调用 形式 是 PRODYNAPSS ， 其中 PSS 是 表 SSSiSSSjSSSt 该 函数 对 问题 状态 空间 PSS 中 的 三类 症状 集 ， 分别 调用函数 SHARESYMPS 。 返回 结果 表 ， 结果 表 的 形式 见图 。 　 　 其中 ， 某类 分配 的 结果 表示 的 是 ： 对 某类 的 患者 症状 集 ， 生成 的 初步 相关 专家 集 。 　 　 c 函数 PROFOCUS 　 　 该 函数 的 调用 形式 是 PROFOCUSTA ， 其中 参数 TA 是 函数 SHARESYMPS 返回 的 结果 表 形式 。 　 　 在 函数 SHARESYMPS 返回 的 结果 表中 ， 某 元素 的 症状 集 可能 是 另 一 元素 症状 集 的 子集 ， 函数 PROFOCUS 的 功能 就是 消除 这种 包含 关系 ， 把 被 包含 的 元素 从表中 删除 。 　 　 d 函数 LOOKEFO 　 　 该 函数 的 调用 形式 是 LOOKEFOEXPERTS ， 其中 参数 EXPERTExpertnameSSSt ， S 是 函数 SHARESYMPS 返回 的 结果 表 形式 。 　 　 该 函数 在 S 表中 寻找 专家 名为 Expertname 的 元素 。 若 找到 ， 则 返回 该 元素 中 的 症状 集 ， 否则 返回 NIL 。 　 　 e 函数 SENDALLS 　 　 该 函数 的 调用 形式 是 SENDALLSEXPERTCLCL ， 其中 参数 EXPERTExpertnameSSSt ， CL 、 CL 是 函数 SHARESYMPS 返回 的 结果 表 形式 。 　 　 该 函数 返回 专家 Expertname 从 问题 状态 空间 所分 得 的 三类 症状 集 。 　 　 ② 过程 PROMAINES 生成 参加 求解 的 主 专家 集 　 　 在 MEMSPD 系统 中 ， 主 专家 集是 在 问题 空间 中 的 观察 症状 类上 产生 的 。 形成 的 主 专家 集 形式 是 ： ExpertnameSListSListSListExpertnameSListSListSListExpertnameSListSListSListExpertnamemSmListSmListSmList 　 　 SiListim 为主 专家 Expertnamei 自 问题 状态 空间 所分 得 的 观察 症状 集合 ， SiList 为主 专家 Expertnamei 自 问题 状态 空间 所分 得 的 身体 症状 集合 ， SiList 为主 专家 Expertnamei 自 问题 状态 空间 所分 得 的 检查 症状 集合 。 生成 的 主 专家 集是 一 有序 集合 ， 以 在 观察 症状 类上 所分 得 的 症状 的 数量 多少 来 排序 。 　 支持 主 专家 执行 的 辅助 专家 集 的 形成 　 　 各主 专家 在 执行 时 是 可以 相互 独立 的 。 一位 主 专家 执行 时 ， 若得 不出 必然 结论 ， 只有 可能 结论 ， 这时 就要 请求 协作 。 协作 专家 来自 两 方面 ： 一是 专家 结论 表见 图中 ， 能够 对 某种 可能 结论 继续 进行 求解 的 专家 ； 二是 主 专家 在 处理 Ci 类 i ， ， 症状 上 请求 提供 协作 。 这时 就 利用 专家 网络 来 形成 一个 辅助 专家 集来 支持 主 专家 。 若主 专家 得出 必然 结论 ， 则 不必 请求 协作 。 选择 辅助 专家 的 条件 是 ： 辅助 专家 在 Ci 类 症状 即主 专家 请求 协作 处理 的 那 一类 症状 上 所分 得 的 症状 集合 与 主 专家 在 Ci 类上 分得 的 症状 集合 的 交集 不为 空 。 　 　 过程 PROAIDES 形成 辅助 专家 集 。 　 　 形成 的 辅助 专家 集 形式 是 ： ExpertnameSListSListSListExpertnameSListSListSListExpertnameSListSListSListExpertnamenSnListSnListSnList 　 　 SijList 的 意义 同 Mainexpertset 中 的 相同 。 　 　 Aidexpertset 是 一 有序 集合 ， 以 各 辅助 专家 在 C 类 症状 上 ， 自主 专家 的 C 类 症状 集中 所得 症状 的 数量 多少 来 排列 的 。 　 调度 专家 算法 的 特点 及 分析 　 　 问题 的 可分解 性 ： 主 专家 集 和 辅助 专家 集中 的 每位 专家 ， 执行 时 并 不是 对 整个 问题 状态 空间 发生 作用 ， 而是 带 着 其 在 会诊 中所能 利用 的 全部 症状 被 调度 执行 。 专家 对 所 带 症状 的 利用 ， 与 对 整个 问题 状态 空间 的 利用 是 等价 的 。 实质 上 ， 起到 了 一种 把 问题 分解成 子 问题 并且 多个 专家 共享 状态 空间 的 作用 。 　 　 可 并行性 ： 主 专家 集中 的 专家 在 作为 主 专家 执行 时 ， 是 互相 独立 的 。 我们 称 他们 为 相关 的 主 专家 集 ， 是因为 他们 都 是 为 问题 状态 空间 求解 服务 ， 并且 在 辩论 阶段 ， 主 专家 们 执行 后 所得 的 结论 相互间 是 相关 的 。 正 因为 主 专家 们 的 执行 相互间 是 独立 的 ， 所以 ， 主 专家 们 的 执行 是 可以 并行 的 。 　 　 可扩展性 ： 虽然 算法 的 实现 是 对 三大类 症状 ， 但 算法 的 设计 思想 可 适应 于 多类 症状 。 若 对 症状 赋权 ， 则 加权 后 ， 专家 网络 中 每位 专家 带 有权 和 数量 的 属性 ， 使得 对 专家 的 调度 优先级 的 确定 可 增添 多种 考虑 因素 。 　 结束语 　 　 算法 的 提出 是 针对 以类 划分 为 基础 的 问题 状态 空间 的 ， 它 比较 适用 于 医学 领域 。 对 其它 领域 ， 凡是 以类 划分 的 形式 表示 问题 状态 空间 ， 也 能 适用 。 张立群 山东 工业 大学 济南 李杰 山东 工业 大学 济南 参考文献 HayesRothBABlackboardArchitectureforControlArtificialIntelligencel ～ GomezRChandrasekaranBKnowledgeOrganizationandDistributionforMedicalDiagnosisIEEETransactionsonSystemsManandCyberneticsSMCl 傅京孙 等 人工智能 及其 应用 北京 ： 清华大学出版社 收稿 日期 ： 年月日