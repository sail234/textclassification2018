信息 与 控制 InformationandControl 年 　 第卷 　 第期 　 Vol 　 No 　 模糊 Flowshop 问题 及其 遗传 优化 熊红云 　 　 　 　 　 何 　 钺 　 　 摘 　 要 　 研究 模糊 生产 环境 下 的 Flowshop 调度 问题 ． 针对实际 生产 中 加工 时间 的 不确定性 ， 应用 模糊 加工 时间 参数 替代 传统 的 清晰 参数 表示 方法 ， 引入 了 一种 新 的 模糊 数 比较 方法 — 面积 补偿法 ， 构造 了 一种 解 模糊 Flowshop 问题 的 有效 遗传算法 ． 最后 给出 计算 实例 及 仿真 结果 ． 　 　 关键词 　 模糊 数 ， 模糊 Flowshop 问题 ， 模糊 流程 时间 ， 遗传算法 FUZZYFLOWSHOPPROBLEMSANDITSGENETICOPTIMALXIONGHongyun 　 HEYueChangShaRailwayUniversityChangShaXianJiaoTongUniversityXianAbstract 　 ThispaperexaminesfuzzyflowshopschedulingproblemswithimprecisiondurationsInsteadofexactnumberfuzzynumbersareideallysuitedtorepresenttheseduartionsAnewcomparisonmethodforfuzzynumberisintroducedandageneticalgorithmisconstructedforfuzzyflowshopoptimizationIntheendthesimulatedresultsareshown 　 　 Keywords 　 fuzzynumbersflowshopschedulingproblemfuzzymakespangeneticalgorithm 　 模糊 Flowshop 调度 问题 　 　 自从 年 ， Johnson 第一次 系统地 提出 两台 机床 、 几种 零件 顺序 加工 的 Flowshop 调度 问题 以来 ， 由于 其 在 理论 分析 上 的 复杂化 ， 和 在 实际 生产 应用 中 的 普遍性 和 重要性 ， Flowshop 问题 一直 为 人们 研究 的 重要 课题 之一 ． 　 　 但 在 以前 的 研究 中 ， 假设 所有 的 时间 参数 （ 如 加工 时间 ） 都 是 精确 的 ， 对 加工 时间 弹性 可变 的 情况 还 很少 研究 ． 而 事实上 ， 由于 各种 随机因素 ， 如 机器 故障 、 工人 操作 的 熟练程度 、 因故 缺勤 、 环境参数 等 的 影响 ， 精确 的 加工 时间 是 很少 能 获得 的 ． 车间 的 管理者 或 决策者 能 提供 给 我们 的 也 只能 是 一个 大概 数据 以及 数据 的 可能 变化 范围 ， 如 工件 A 的 加工 时间 大约 为 ～ 分钟 ， 最大 不 超过 分钟 ， 最小 不 低于 分钟 ． 　 　 对于 这种 不 确定 的 情况 ， 传统 的 处理 方法 是 ： 　 　 将 非 精确 数 近似 用 一个 精确 数来 表示 ， 然后 用解 精确 问题 的 方法 求解 ， 这种 方法 存在 两个 缺点 ， 一是 模型 发生 了 变化 ， 问题 的 解 产生 偏差 ； 一是 获得 的 问题 解 形式 不 符合 传统 的 表达方式 、 不 直观 ． 以 一个 简单 的 两 机床 、 两 工件 的 模糊 Flowshop 问题 为例 ， 模糊 加工 数据 如表 ， 用 精确 方法 和 模糊 方法 获得 的 结果 如表 ． 　 　 表 　 工件 机床 模糊 清晰 加工 参数 JobOpFuzzyDurationTrFNCrispMachAAM 　 AMBBM 　 BM 　 表 　 工件 机床 调度 结果 　 Schedule 　 ObjCrispObjFuzzySAB 　 ABSBA 　 BA 　 　 　 从表中 结果 可见 ， 在 清晰 环境 下 ， 调度 S 的 流程 时间 为 ， 优于 S 的 ； 而 在 模糊 环境 下 ， S 的 去模糊 时间 为 ， 优于 S 的 ． 　 　 用 随机 概率分布 函数 来 表示 参数 的 分布 情况 ， 这种 处理 方法 要求 参数 的 历史数据 是 可知 的 ， 而 事实上 要 获得 这些 数据 是 很 困难 的 ， 并且 基于 随机 方法 的 优化 在 处理 上 也 很 困难 ． 　 　 近年来 ， 随着 模糊 技术 的 发展 ， 应用 模糊 数来 表示 和 处理 不 确定 参数 问题 获得 了 广泛 关注 ［ ］ ， 显示 了 其它 方法 无法比拟 的 优越性 和 应用 前景 ． 因此 我们 应用 模糊 数来 表示 不 确定 的 加工 时间 ， 研究 模糊 加工 环境 下 的 Flowshop 调度 问题 ． 　 　 在 模糊 Flowshop 问题 中 ， 对 一次 具体 的 排序 而言 ， 工件 的 加工 顺序 是 确定 的 ， 而 工件 的 完工 时间 ， 以及 总 的 流程 时间 makespan 是 模糊 的 ， 这 与 我们 在 实际 生产 中 的 表达方式 是 一致 的 ． 用 表示 模糊 数 a ， 设 n 个 工件 的 加工 顺序 为 S （ SS … Sn ） ， 其中 Si 为 加工 排位 第 i 的 工件 号 ． ik 表示 Si 在 Mk 上 的 模糊 加工 时间 ， ik 表示 工件 Si 在 机床 Mk 上 的 模糊 完工 时间 ， i … n ； k … m ． ik 可 按 以下 公式 计算 ： 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 中 和 mx 分别 表示 模糊 数 的 加法 和 取 最大值 操作 ． Flowshop 问题 的 目标 就是 使 总 的 完工 时间 最短 ， 即求 minnm ． 　 　 从中 可以 看出 ， 解 模糊 Flowshop 问题 的 关键 是 模糊 数 的 运算 与 比较 ． 在 以下 部分 ， 我们 先 简要 介绍 模糊 数 的 知识 ， 然后 介绍 模糊 数 的 一种 直观 比较 方法 — — 面积 补偿法 ． 由于 Flowshop 问题 是 NP 完备 的 ， 我们 用 遗传算法 的 方法 来解 模糊 Flowshop 问题 ． 最后 给出 数值 实例 及 结果 分析 ． 　 模糊 数及 基于 面积 补偿 的 比较 方法 　 　 模糊 数是 模糊集 的 一种 特殊 形式 ［ ］ ． 模糊 数 一般 采用 分段 直线 的 方法 来 表示 ， 最 常用 的 是 三角形 模糊 数 （ TFN ） 和 梯形 模糊 数 （ TrFN ． 对于 一个 梯形 模糊 数 TrFN ， 可 表达 为 abcd ， 括 符中 的 个数 分别 表示 梯形 的 个 顶点 ． TrFN 的 隶属 度 函数 表示 为 ： 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 模糊 数 的 比较 　 　 模糊 数 的 比较 是 模糊 优化 的 一个 关键问题 ． 很多 文献 研究 了 模糊 数 的 比较 方法 ， 提出 了 各种 比较 指标 ［ ］ ． 最 有名 的 指标 是 Dudois 和 Prade ［ ］ 提出 的 基于 概率论 的 四个 指标 （ possibilityofdominancepossibilityofstrictdominancenecessityofDominicaandnecessityofstrictdominance ） ． 由于 这些 指标 都 是 在 区间 内 进行 比较 ， 因此 不能 明确提出 一个 数比 另外 一个 数 大小 多少 ， 并且 这 几种 方法 还 存在 不 直观 ， 缺乏 一致性 的 缺点 ． 　 　 最近 ， Forremps 和 Roubens ［ ］ 提出 基于 面积 补偿 的 模糊 数 比较 方法 ， 面积 由 隶属 度 函数 确定 ． 这种 方法 可以 计算 两个 模糊 数 之间 的 距离 ， 并且 具有 直观 、 易于 理解 的 特点 ． 根据 DempsterShafer 理论 ［ ］ ， 模糊 数 可以 看作 某个 变量 的 概率分布 F ． 给定 模糊 数 ， 定义 两个 特殊 的 概率分布 ， 累积 概率分布 Fcumulativepossibilitydistribution 和 累积 必然 分布 Fcumulativenecessitydistribution ． 　 　 Fxsup μ rr ≤ x 　 x ∈ Fxinf μ rr ＞ xx ∈ F 和 F 分别 表示 模糊 数 的 概率分布 的 上 、 下界 ， x ∈ Fx ≥ Fx ≥ Fx ， 如图所示 ． 　 图 　 模糊 数 虚线 的 概率分布 　 　 模糊 数 的 面积 补偿 比较 方法 是 一种 基于 “ 模糊 数 平均值 ” 的 方法 ［ ］ ． 由于 模糊 数 定义 为 一个 基于 概率分布 的 集合 ， 模糊 数 平均值 可以 通过 模糊 数 的 概率分布 来 计算 ： 其中 A 是 和 累积 概率分布 F 相关 的 平均值 ， A 是 和 F 相关 的 平均值 ． 在 已知 模糊 数 的 平均值 的 概率分布 区间 AA 后 ， 一种 去模糊 的 方法 是 计算 平均值 区间 的 质心 ： AA ． 这种 方法 与 模糊 数 的 面积 补偿法 相一致 ． 　 　 设 模糊 数 、 ∈ F ， 考虑 、 的 α 水平 截集 ． 设 SL 表示 左边 部分 构成 的 面积 ； 同样 ， SR 表示 右边 部分 构成 的 面积 ． 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 各种 面积 表示 如图所示 ． 模糊 数 的 程度 表示 为 C ， 图 　 两 模糊 数 的 面积 补偿 比较 　 　 　 　 　 　 定义 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 则 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 根据 以上 推导 ， 可 得到 如下 定理 ． 　 　 定理 　 如果 ， 则 模糊 数 ． 　 　 由于 函数 gFR → R 的 线性 可加性 ， 有 ∈ FR ， 存在 ： 　 　 　 　 　 　 　 　 　 　 　 　 　 但 函数 gF → 的 线 行性 在 取 最大 操作 max 中 并 不 成立 ： 　 　 　 　 　 从 上式 中 可以 得出 一个 结论 ： 即 模糊 流程 时间 在 去模糊 后 总 大于 或 等于 清晰 的 流程 时间 ． 　 模糊 数 的 操作 与 近似 　 　 从 模糊 Flowshop 问题 的 数学模型 式 中 可以 看出 ， 目标 函数 的 优化 主要 涉及 模糊 数 的 比较 以及 模糊 数 的 求和 与 取大 操作 ． 在 以上 部分 介绍 了 基于 面积 补偿 的 模糊 数 比较 方法 ． 以下 讨论 模糊 数 的 求和 与 取大 操作 ． 　 　 由于 TrFN 采用 分段 的 线性 函数 表示 ， 两个 TrFN 的 和 仍 为 一个 TrFN ， 如 ， 则 ． 但 这种 线性 在 取大 操作 mx 中 不再 成立 ， 为了 简化 计算 ， 我们 用 近似 操作 mx 来 替代 取大 操作 max ， 仍 以 上面 的 数值 为例 ， 有 mxmax 的 值 见 图 ． 图 　 maxABmxAB 的 比较 　 模糊 Flowshop 问题 的 遗传 优化 实现 　 　 遗传算法 是 由 JohnHolland 于 年 首先 提出 的 一种 随机 优化 方法 ． 它 采用 达尔文 的 进化论 思想 ， 用 一群 代表 问题 的 解 的 字符串 （ 称为 基因 串 ） ， 经过 一系列 的 遗传操作 ， 如 选择 、 交叉 、 变异 等 ， 不断 进行 繁衍 和 进化 ， 最终 得出 最优 解 ． 近年来 ， GA 在 各种 优化 问题 的 求解 中 获得 了 成功 的 应用 ． 　 　 下面 构造 模糊 Flowshop 问题 的 遗传 搜索算法 ． 　 　 模糊 Flowshop 问题 的 染色体 编码 　 　 对 模糊 Flowshop 问题 ， 就 一次 具体 的 排序 而言 ， 工件 的 加工 顺序 是 确定 的 ， 因而 我们 采用 与 一般 Flowshop 问题 相同 的 编码 形式 ， 如 ， 各 基因 码 表示 加工 的 零件 号 ． 　 　 适应度 函数 的 选取 　 　 染色体 的 适应度 按下式 计算 ： ， 其中 J 为 目标 函数 ． 目标 函数 值 的 计算 ， 首先 根据 节中 提供 的 模糊 数 的 求和 与 取大 操作 ， 按式 计算 得到 一个 模糊 流程 时间 ， 然后 根据 式 计算 ， 得到 该 模糊 流程 时间 的 中心 值 ． 　 　 遗传操作 算子 　 　 a 交叉 算子 ， 交叉 的 一个 重要 原则 就是 避免 基因 的 重复 和 丢失 ． 对 序号 编码 ， 常用 的 交叉 方法 有 ： 部分 匹配 交叉 法 （ PMX ） 、 序号 交叉 法 （ OX ） 、 边 组合 交叉 法 （ ER ） 、 以及 线性 序号 交叉 法 （ LOX ） 等 ． 在 PMX 、 ER 等 算子 中 ， 可能 会 出现 基因 的 重复 和 丢失 ． 这里 我们 选用 LOX 算子 ， 设有 两个 位串 A ， B ． 随机 选择 两个 位置 r ， r ， 对应 的 基因 段 分别 为 和 ， 删除 染色体 A 中 的 基因 ， 得 基因 片段 ， 将 插入 到 该 基因 片段 r 位置 前得 A ， 同样 可以 得到 B ． 　 　 b 变异 算子 ， 变异 操作 采用 常规 变异 方法 ． 对于 位串 A ， 随机 选择 两个 基因 位置 ， 如 r ， r ， 将 r 与 r 的 基因 互换 ， 则 变异 后 的 位串 为 A ． 　 　 c 群体 更新 方式 ， 按 精英 策略 （ Elitist ） 更新 种群 ． 　 　 ） 算法 终止 准则 　 　 当 迭代 次数 大于 设定 的 最大 迭代 次数 时 ， 算法 停止 ． 　 实例 计算 与 仿真 结果 分析 　 　 为了 说明 算法 的 有效性 ， 我们 首先 对 文献 中 的 一个 工件 机床 的 数值 例子 进行 仿真 计算 （ 该 问题 的 具体 参数 见 文献 ） ， 对比 结果 列如表 ． 从表中 可见 本文 算法 获得 的 目标值 为 ， 优于 文中 的 启发 算法 的 结果 ． 而 事实上 ， 即 为 模糊 最优 调度 结果 ， 对应 的 模糊 流程 时间 为 ， 解释 为 ： 流程 时间 大约 需要 ～ 分钟 ， 最小 不 低于 分钟 ， 最大 不 大于 分钟 ． 可见 获得 的 结果 不仅 具有 很 好 的 柔性 ， 而且 具有 与 传统 相一致 的 表达方式 ． 表 　 仿真 结果 比较 　 排序 模糊 流程 时间 去模糊 结果 启发 算法 ［ ］ 本文 GA 　 　 为了 进一步 验证 算法 的 有效性 ， 我们 对 文献 ［ ］ 中 的 × × × 的 个 Flowshop 问题 的 加工 时间 模糊化 ， 然后 用 本文 方法 进行 求解 ． 加工 时间 的 模糊化 方法 为 ， 在 xx 间 随机 生成 两个 点 ， 作为 TrFN 的 ab 点 ， 为了 保证 生成 模糊 数 的 中心 仍为 x ， 取 cd 两点 满足 ： cxxa ， dxxb ． 对次 运算 的 结果 列如表 ， 从 实验 结果 可见 优化 结果 具有 很 好 的 适应性 和 鲁棒性 ． 表 　 模糊 结果 与 清晰 结果 对比 问题 规模 CrispFuzzyObjectOptMinMeanMax × × × × 　 　 结束语 　 　 本文 讨论 了 加工 时间 不 确定 情况 下 的 模糊 Flowshop 问题 ， 引入 了 一种 新 的 模糊 数 比较 方法 ， 提出 了 一种 基于 遗传算法 的 模糊 优化 方法 ， 获得 的 结果 不仅 具有 很 好 的 鲁棒习 ， 而且 具有 很 好 的 柔性 ， 为 模糊 环境 下 的 生产 计划 与 调度 提供 了 一种 新 的 方法 与 途径 ． 作者简介 ： 熊红云 ， 男 ， 岁 ， 博士 ． 研究 领域 为 生产 计划 与 调度 算法 优化 ． 　 　 　 　 　 何 　 钺 ， 男 ， 岁 ， 教授 ， 博士生 导师 ． 研究 领域 为 生产 过程 控制 ， CIM 系统 设计 与 　 　 　 　 　 　 　 　 　 开发 等 ． 作者 单位 ： 熊红云 ： 长沙 铁道 学院 　 长沙 　 　 　 　 　 　 何 　 钺 ： 西安交通大学 　 西安 　 参考文献 　 张 曾科 模糊数学 在 自动化 技术 中 的 应用 清华大学出版社 ， 　 McCahonCSLeeESFuzzyJobSequencingforFlowShopEuropeanJournalof 　 　 OperationalResearch ～ 　 FortempsPJobshopSchedulingwithImpreciseDurationsAFuzzyApproachIEEE 　 　 TransonFuzzySystems ～ 　 BortolanGandDeganiRAReviewofSomeMethodsforRankingFuzzySubsets 　 　 FuzzySetsandSystems ～ 　 DuboisDandPradeHTheMeanValueofaFuzzyNumberFuzzySetsandSystems 　 　 ～ 　 ForrempsPRoubensMRankingandDefuzzificationMethodsBasedAreaCom 　 　 pensationFuzzySetsandSystems ～ 　 GoldbergDGeneticAlgorithmsinSearchOptimizationandMachineLearning 　 　 AddisionWesleyReadingMA 　 田 　 澎 等同 顺序 Flowshop 排序 问题 的 模拟退火 求解 信息 与 控制 ～ 　 　 　