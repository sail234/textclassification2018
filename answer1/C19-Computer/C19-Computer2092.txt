计算机 工程 COMPUTERENGINEERING 年 第卷 第期 VolNo 同时 故障模拟 方法 改进 策略 王仲 　 康葳 摘要 ： 影响 同时 故障模拟 方法 效率 的 原因 ： 一是 对 扇 出重 汇聚 和 过 多 判定 ， 二是 故障 表 占用 窨 大 ， 对表 的 处理 时间 长 。 针对 上述 两点 ， 提出 了 基于 电路 结构 重组 以及 两级 模拟 的 策略 ， 以 提高 故障模拟 的 效率 。 针对 ISCAS 电路 的 实验 结果 也 表明 了 其 有效性 。 关键词 ： 时序电路 ； 故障模拟 ； 故障 表 AMethodforImprovingtheEfficiencyofConcurrentFaultSimulationWangZhongKangWeiElectronicDepartmentArmoredForeedEngineeringInstiuteBeijing 【 Abstract 】 TherearetworeasonsaffecttheefficiencyofconcurrentfaultsimulationoneisoverfullcomputationforthereconvergencegatetoidentifythetestabilityofthefaulttheotheristhatthefaultlisttakeupmemoryspacehighlyThispaperpresentsthemethodsofreconstructionofthecircuitandtwolevelsimulationofthecircuitandtwolevelsimulationforimprovingtheefficiencyofconcurrentfaultsimulationExperimentalforISCASbenchmarkcircuitsverifiesitseffecting 【 Keywords 】 SequentialcircuitFaultsimulationFaultlist 　 　 在 时序电路 测试 产生 系统 中 ， 无论是 采用 确定性 测试 产生 方法 还是 基于 模拟 的 测试 产生 方法 ， 故障 模拟器 是 必不可缺 的 。 故障 模拟器 效率 的 高低 也 直接 影响 到 整个 测试 产生 系统 效率 的 高低 。 在 基于 模拟 的 时序电路 测试 产生 系统 中 这 一点 尤为重要 。 　 　 故障 模拟器 是 利用 电路 的 初级输出 ， 对 一 给定 的 测试 矢量 序列 ， 在 初级 输入 施加 测试 矢量 之后 用来 识别 故障 对 电路 初级输出 的 影响 。 对 每 一 测试 矢量 ， 无故障 电路 和 故障 电路 分别 被 模拟 ， 如果 故障 电路 的 初级输出 值异于 无故障 电路 ， 那么 这个 故障 是 可测 的 。 同时 这个 故障 应从 故障 表中 丢弃 ， 只 让 故障 表中 未 被 检测 到 故障 继续 被 模拟 ， 这样 可以 减少 故障 表对 内存 的 需求 ， 提高 故障模拟 速度 。 常用 的 数字电路 故障模拟 方法 有种 即 平行 故障模拟 、 演绎 故障模拟 和 同时 故障模拟 。 　 　 平行 故障模拟 方法 容易 实现 ， 但 平行 模拟 方法 在 模拟 一个 故障 所 产生 的 测试 矢量 序列 过程 当中 ， 对 已 检测 到 的 故障 不能 丢弃 ， 因此 其所 占用 的 存储空间 也 不能 被 释放 ， 这 就要 影响 到 模拟器 的 效率 。 所以 在 时序电路 测试 产生 中 一般 不 单独 使用 该 方法 。 演绎 故障模拟 方法 可以 从 电路 的 正常 状态 演绎出 电路 中 每条 引线 上 的 可测 故障 。 演绎 故障模拟 方法 使用 了 故障 表 的 概念 ， 但 由于 演绎 故障模拟 的 故障 表是 建立 在 引线 上 ， 当 电路 规模 很大 时 ， 所 需 存储量 十分 巨大 ， 而且 集合 运算 对 较大 故障 表 的 运算 也 是 十分复杂 的 。 所以 单独 采用 演绎 故障模拟 策略 对 时序电路 进行 模拟 ， 其 效率 也 是 不 高 的 。 　 　 同时 故障模拟 方法 与 演绎 故障模拟 有 很多 相似之处 ， 它 也 采用 了 故障 表 的 概念 ， 但 它 的 故障 表是 建立 在 门上 的 。 同时 故障模拟 在 完成 真值 模拟 的 同时 也 完成 故障模拟 。 在 同时 故障模拟 中 ， 由于 可以 对 故障 表中 的 每个 故障 分别 处理 ， 因此 还 可以 通过 查表 的 方法 来 进一步 加快 计算速度 ， 这 在 演绎 故障模拟 中是 不 可能 实现 的 ， 所以 它 较 适合 时序电路 的 故障模拟 。 但 其 故障 表 占用 内存 较大 和 故障 效应 通过 扇 出重 汇聚 而 造成 的 判定 时间 过多 影响 了 其 计算速度 。 本文 针对 其 不足之处 做 了 较为 深入 的 研究 ， 提出 了 一些 改进 的 策略 。 　 故障 表 压缩 策略 　 　 同时 故障模拟 所 消耗 的 时间 可以 分为 两 部分 。 一是 真值 模拟 ， 其次 是 故障模拟 。 在 故障模拟 部分 又 可 细分 为 对 无扇 出 区域 的 计算 和 扇 出重 汇聚 区域 的 计算 。 真值 计算 和 无扇 出 区域 计算 的 复杂性 基本上 是 线性 的 ， 但 由于 扇 出重 汇聚 中 的 各 传播 路径 奇偶性 不 一致 ， 使 通过 该 区域 的 故障 效应 在 汇聚 点上 的 可观 性 往往 是 不定 的 ， 需要 进行 判定 ， 这是 比较 耗时 的 。 其次 由于 同时 模拟 方法 对 每个 功能块 都 建立 一个 故障 表 ， 故障 表所 占用 的 空间 越大 ， 对 故障 表 的 处理 也 越长 。 　 　 a 门级 的 电路 拓扑 结构图 　 　 　 　 　 b 新 功能块 所 构成 的 电路图 电路 无扇 出 重构 示意 　 　 通过 上述 分析 ， 我们 首先 设想 如果 电路 中 的 功能块 越 少 ， 故障 表所 占用 的 空间 越小 ， 对 故障 表 的 计算 时间 越 快 。 其次 如果 电路 中 的 扇 出重 汇聚 区域 越 少 ， 判定 扇 出源 的 可观 性 时间 就 越少 。 因此 我们 提出 了 电路 重构 的 解决 策略 。 　 　 电路 重构 的 原则 包括 以下 几个 方面 。 尽量 将 扇 出重 汇聚 区域 划分 到 一个 功能块 中 ； 为了 便于 故障模拟 计算 ， 新 功能块 的 输入 个数 不宜 过多 ， 以利于 模拟 过程 中 的 查表 计算 ； 触发器 只能 单独 做 功能块 使用 。 　 　 图为 一未 重构 的 电路 ， 在 图 a 中扇 出重 汇聚 的 区域 有 B 和 C 两 部分 在 图 a 用 虚 线圈 。 所 构造 的 新 电路 应由 ABC 个 新 功能块 组成 。 新 电路 的 拓扑 结构 如图 b 所示 ， 其中 ABC 个 功能块 分别 对应 于图 a 中 的 虚线 包围 块 。 　 　 a 重组 后 功能块 内部结构 　 　 　 　 b 功能块 内部 故障 表链 表 结构图 功能块 内部 故障 表示 意 　 　 按照 上述 法则 对 ISCAS 电路 进行 重构 后 的 结果表明 ， 重构 后 的 电路 所 含 功能块 数目 大大减少 ， 只有 重构 前 电路 功能块 总数 的 。 利用 新 的 电路 进行 故障模拟 可以 减少 同时 故障模拟 对 内存 的 过 多 需求 。 　 故障模拟 策略 　 　 对 重构 后 的 电路 ， 在 故障模拟 过程 中 ， 采取 对 功能块 节点 外部 引线 和 功能块 内部 引线 分别 处理 的 两级 模拟 策略 。 即 对外部 电路 采用 同时 故障模拟 的 策略 ， 对 功能块 内部 采用 单 路径 模拟 策略 。 功能块 外部 电路 的 故障 表同 文献 。 但 故障 表中 信息 按照 电路 引线 编号 顺序排列 ， 便于 故障 信息 的 查询 和 故障 快速 丢弃 ， 同时 可以 对 故障 表 使用 归并 计算技术 ， 使表 的 计算速度 进一步提高 。 　 　 对 功能块 内部 的 电路 故障 采用 单 路径 回退 策略 。 如果 功能块 内部 是 一扇 出重 汇聚 电路 ， 则 只 回退 到 扇 出 分支 ， 而 不 对 扇 出源 进行 可观 性 判定 。 对 扇 出源 的 可观 性 判定 留 到 外部 模拟 进行 处理 。 对 功能块 内部 故障 处理过程 中 不是 对 每 一个 门 都 建立 一 故障 表 ， 而 只 在 功能块 输出 端 建立 一 故障 表 。 该表 在 真值 模拟 过程 中以 链表 的 形式 建立 。 这个 过程 如图所示 。 图 a 为 一 功能块 内部结构 。 当 XXXX 时 ， 其 故障 表 的 链表 结构 形式 如图 b 所示 。 如果 输出 端 X 在 初级输出 可测 ， 则 查 功能块 输出 X 为 的 链表 即可 得出 故障 可测 。 其中 iv 表示 i 引线 固定 为 v 类型 故障 可测 ， 其中 v ∈ 。 这样 做 与 传统 的 同时 故障模拟 的 故障 表 相比 有 如下 的 优点 。 传统 同时 模拟 过程 中 ， 图 a 所示 电路 共有 个 故障 表 。 在 相同 的 输入 值下 故障 表 如下 所示 ： 　 　 fg 　 　 fg 　 　 fg 　 　 从 上述 表中 可以 看出 fg 含有 fg 和 fg 的 很多 信息 ， 如果 功能块 中门 的 个数 较 多 的话 ， 这种 重复 的 信息 在 故障 表 占有 的 空间 还是 很大 的 ， 因此 链表 的 使用 可以 有效 地 节省 故障 表所 占用 的 空间 。 在 上述 表达式 中 符号 ab 表示 a 引线 上 的 sab 故障 b ∈ 可以 在 功能块 输出 端 观察 到 。 　 实验 结果 　 　 上述 思想 用 C语言 在 Sun 工作站 上 进行 了 实现 。 表为 针对 文献 的 测试 产生 系统 所 产生 测试 码 的 实验 结果 。 从 实验 结果 可以 看出 ， 由于 电路 重构 和 两级 模拟 策略 的 采用 使 同时 模拟 的 空间 占用 太 大 以至 不足以 改善 ， 同时 由于 故障 表 的 压缩 ， 模拟 速度 也 得到 了 提高 ， 基本上 可以 满足 对大 电路 测试 产生 系统 所 得到 测试 码 进行 故障模拟 的 要求 。 表 针对 ISCAS 电路 的 实验 结果 电路 名称 矢量 长度 故障 覆盖率 模拟 时间 SSSSSSSSSSSSS 　 结论 　 　 影响 同时 故障模拟 方法 效率 的 原因 主要 有 两个 ： 一是 对 电路 中扇 出重 汇聚 点 的 过 多 判定 ； 二是 故障 表 占用 计算机 内存空间 大 ， 对 进行 处理 的 时间 也 因此 增加 。 针对 同时 故障模拟 这 两个 方面 的 不足之处 ， 本文 提出 了 基于 电路 结构 重组 和 两级 故障模拟 的 策略 以 提高 故障模拟 的 效率 。 针对 ISCAS 电路 的 实验 结果 也 表明 了 其 有效性 。 基金项目 ： 国家自然科学基金 （ ） 作者简介 ： 王仲 （ ～ ） ， 男 ， 讲师 ， 主研 大规模 集成电路 测试 作者 单位 ： 装甲兵 工程学院 电子 工程系 ， 北京 ） 参考文献 UlrichEGBakerTTheConcurrentSimulationofNearlyIdenticalDigitalNetwork 、 ProcthDesignAutomationWorkshop 陈思成 同步 时序电路 故障模拟 系统 的 设计 与 实现 硕士学位 论文 北京 ： 中国科学院计算技术研究所 王仲 一种 基于 模拟 的 时序电路 测试 产生 方法 大连 香港 国际 计算机 会议 论文集 收稿 日期 ：