计算机 研究 与 发展 JOURNALOFCOMPUTERRESEARCHANDDEVELOPMENT 年 　 第卷 　 第期 　 Vol 　 No 　 容错 机制 测评 中 的 故障注入 模型 及 应用 算法 孙峻 朝 　 王建莹 　 杨 孝宗 摘 　 要 ： 故障注入 FI 是 一种 有效 的 测试 和 评价 容错 机制 FTM 的 方法 可 被 普遍 应用 于 容错 计算机系统 开发 过程 的 各个 阶段 中 FI 技术 正确 的 和 更 广泛 的 应用 依赖于 对 FI 原理 的 一致 理解 文中 首先 详细 讨论 了 FI 的 应用 对象 即 FTM 在 测评 中 所 表现 出来 的 若干 特征 在 此基础 上 提出 了 六元 组 描述 的 FI 模型 并 对 各 组成 元 的 属性 进行 了 深入分析 同时 作为 FI 模型 的 具体 应用 过程 文中 给出 了 FI 独立试验 算法 FIIEA 并 讨论 了 该 算法 具体 实现 中 的 关键问题 关键词 ： 容错 机制 故障注入 测试 评价 中图法 分类号 ： TPAFAULTINJECTIONMODELANDITSAPPLICATIONALGORITHMFORTESTINGANDEVALUATIONOFFTMSUNJunZhaoWANGJianYingandYANGXiaoZongDepartmentofComputerScienceandEngineeringHarbinInstituteofTechnologyHarbinAbstract 　 FaultinjectionFIisapowerfulmethodforthetestingandevaluationoffaulttolerancemechanismsFTMswhichmaywidelybeusedduringallphasesofthedevelopmentoffaulttolerantcomputersystemsThetechniqueofFIcannotbeappliedcorrectlyandwidelyunlessitisbasedonaconsistentunderstandingofFIphilosophyFTMistheapplicationobjectofFIanditscharacteristicsasseenintestingandevaluationprocessesarediscussedindetailAndthenanFImodelisdescribedasatupleTheattributesofeachfactoraredeeplyanalyzedAstheactualapplicationprocessoftheFImodelanFIindependentexperimentalgorithmFIIEAispresentedatthesametimeandsomekeyproblemsonhowtoimplementthealgorithmarediscussedKeywords 　 faulttolerancemechanismFTMfaultinjectiontestingevaluation 　 引 　 言 　 　 容错 计算机系统 开发 中 的 一个 重要 问题 是 如何 对 所 采用 的 容错 机制 FTM 进行 测试 和 评价 故障注入 FI 技术 是 测评 FTM 的 有效 方法 ［ ］ 通过 人为 产生 故障 并 引入 系统 中 FI 加速 了 系统 发生 故障 和 失效 的 过程 利用 对系统 在 注入 故障 后 反应 信息 的 监测 和 分析 可 实现 测试 和 评价 FTM 的 目标 获得 期望 结果 与 其它 如 形式 证明 、 解析 模型 和 基于 测量 等 方法 相比 FI 作为 一种 基于 试验 的 测评 技术 具有 应用 范围广 、 结果 精确度 高 、 时间 花费 少 等 优点 已 引起 众多 工程 设计者 和 研究 人员 的 重视 　 　 目前 对 FI 的 研究 已有 很多 成果 许 礚 实用 的 工具 也 投入使用 然而 对 FI 技术 自身 形式化 的 统一 模型 方面 的 研究 还 很 缺乏 大多数 研究 集中 于 两 方面 ： 　 　 对 FI 具体 实现 方法 的 改进 和 创新 ［ ～ ］ 包括 对 在 不同 抽象层次 上 注入 故障 的 方法 、 尽可能 精确 模拟 真实 故障 影响 、 减少 试验 开销 和 提高 结果 精确性 、 构造 实用 的 FI 工具 等 方面 的 研究 ； 　 　 某些 具体 项目 中 专门 设计 的 FI 试验 ［ ～ ］ 研究 目的 是 提供 特定 目标 系统 某些 感兴趣 的 特征 或 指标 　 　 研究 的 局限性 导致 这些 具体 研究 中 FI 技术 简单 的 而 非 系统 的 应用 由于 不 存在 对 FI 技术 一致 的 理解 造成 一方面 试验 结果 精确度 不够 高 另一方面 难以 将 结论 推广 至 更为 广泛 的 其它 目标 系统 中 　 　 目前 获得 较 多 承认 的 FI 模型 研究 是 文献 ［ ］ 中为 FI 方法 建立 的 模型 将 FI 定义 为 四元组 ［ FARM ］ 并 从 以下 两 方面 讨论 了 模型 各 构成 元 的 癹 征 ： 　 　 抽象 级别 即 应用 FI 的 目标 系统 模型 类型 包括 公理 模型 、 经验 模型 和 物理 模型 种 ； 　 　 应用 目标 包括 互补 的 两个 目标 确认 和 设计 辅助 前者 包括 分别 针对 验证 过程 和 FTM 的 故障 排除 和 故障 预测 后者 包括 提供 改进 设计 的 信息反馈 以及 用于 维护 的 故障 字典 该 模型 在 以下 几 方面 存在 不足 ： 　 　 缺少 对模型 的 形式化 描述 仅 通过 纯文字 介绍 ； 　 　 过多 着眼于 FI 的 工程 应用 对 FI 自身 属性 的 理论 研究 不足 ； 　 　 只 描述 了 构成 FI 的 静态 元素 而 未 包含 试验 进行 的 动态 过程 ； 　 　 对 故障 和 工作 负载 即 系统 行为 集 A 的 描述 过于 粗略 和 过 多 简化 ； 　 　 没有 明确提出 模型 在 试验 中 的 具体 应用 方法 　 　 本文 着重 研究 FI 统一 的 形式化 模型 及其 应用 算法 在 详细 讨论 了 FI 测评 对象 即 FTM 在 测评 中 表现 特征 的 基础 上 提出 基于 六元 组 描述 的 FI 模型 并 对 各 组成 元 进行 了 细致 的 分析 ， 构造 了 该 模型 在 具体 应用 试验 中 的 算法 着重 讨论 了 算法 实现 中 的 几个 关键问题 　 对 测评 对象 FTM 的 几点 讨论 　 　 容错 计算技术 是 利用 “ 冗余 ” 思想 屏蔽 故障 影响 提高 计算机系统 可靠性 的 重要 手段 系统 中 采用 的 FTM 是 利用 容 计算技术 进行 故障 处理 的 重要 机构 计算机系统 按 抽象 级别 的 不同 可 描述 为 由 若干 层次 构成 的 多级 层次结构 如由低 至 高 可 抽象 为 硬件 、 系统软件 、 应用软件 层 其中 每 一级 中均 可能 发生 故障 系统 中 所 采用 的 每 一种 FTM 均 可 视为 位于 该 层次结构 的 某 一级 上 功能 是 阻止 该级 中 产生 的 某些 故障 向上 一级 传播 或 至少 检测 到 该 故障 的 发生 并 向 较 高层次 传递 有关 信息 以备 在 较高级 上 处理 FTM 所 实现 的 故障 处理 功能 包括 检测 、 屏蔽 、 重试 、 重组 、 恢复 、 重构 等 编码 技术 、 监视 定时器 watchdog 、 比较 、 表决 、 备份 、 卷回 、 切换 、 多样性 设计 等 是 典型 的 FTM 　 功能 级 FTM 模型 　 　 从 功能 级 上 抽象 FTM 模型 可 表示 为 状态 函数 STATE 和 输出 函数 OUTPUT 的 定义 ： STATEF × WSSOUTPUTF × WSA 或 简写 为 FTMF × WSAS 其中 FTM 的 输入 域 由 待处理 故障 集 F 与 工作 负载 集 W 的 笛卡尔 乘积 构成 S 为 系统 所处 原 状态 S 为 故障 处理 后 系统 的 更新 状态 ； A 为 FTM 在 F × W 的 输入 组合 下 所 采取 的 故障 处理 动作 之集 功能 级 FTM 模型 的 定义 有助于 理解 下节 中 对 FI 模型 的 定义 　 FTM 的 测试 与 评价 　 　 对 FTM 的 测试 是 指 验证 其 设计 和 实现 的 正确性 发现 所 开发 的 FTM 中 隐含 的 与 预期 功能 不 一致 的 设计 故障 并 为 进一步 的 诊断 和 纠正 提供 有关 故障 的 信息 FTM 专用 于 处理 故障 的 特殊性 使 FI 成为 FTM 测试 的 最 重要 手段 　 　 对 FTM 的 评价 主要 是 指 对 其 进行 故障 处理 的 运转 行为 效率 方面 的 定量 评估 也 包括 试验者 自定义 的 一些 定性 定量 评价 目标 经 测试 后 的 FTM 其 运行 效率 仍 不 完善 的 原因 来自 于 以下 几 方面 ： 　 　 需求 分析阶段 不 完善 的 故障 假设 致使 所 设计 的 FTM 有 可能 面临 未 预期 处理 的 或 与 预期 情况 不 一致 的 故障 类型 ； 　 　 FTM 设计 实现 过程 中 引入 的 故障 而 在 测试 过程 中 未被发现 或 正确 排除 ； 　 　 经 独立 测试 的 多种 FTM 在 组合 为 一个 整体 时 出现 的 问题 如 功能 方面 的 冲突 等 ； 　 　 为 容错 设计 而 增加 的 检测 和 恢复 等 部件 自身 通常 不 容错 有 受到 故障 影响 的 可能 ． 　 　 FTM 评价 结果 常 作为 可靠性 模型 等 解析 模型 中 的 输入 参数 其 精确度 对模型 运算 结果 影响 很大 FI 最 重要 的 应用 即 是 通过 评价 FTM 来 为 模型 提供 这些 参数 　 目标 FTM 的 形式 　 　 容错 系统 开发 过程 的 不同 阶段 中 可 形成 两种 不同 形式 的 测评 目标 模型 提交 给 测评 过程 包括 ： 　 　 模拟 模型 在 系统 开发 过程 的 早期 形成 通常 用 某类 标准 语言 如 VHDL 对系统 的 行为 结构特征 进行 描述 按 抽象 级别 的 不同 可 形成 描述 细致 程度 不同 的 模拟 模型 硬件 描述 级别 包括 晶体管 开关 级 、 逻辑 门级 、 寄存器 传送 级 、 功能模块 级 、 芯片 管脚 级 、 总线 级 等 软件 描述 级别 可 包括 微指令 级 、 宏 指令 级 、 操作系统 级 、 应用软件 级 等 为 减少 模拟 时间 开销 常 采用 混合 模拟 hybridsimulation 、 混合 模式 模拟 mixmodesimulation 和 分层 模拟 hierarchicalsimulation 等 先进 的 模拟 技术 ； 　 　 物理 模型 即 系统 原型 形成 于 开发 过程 后期 代表 了 目标 系统 的 真实 实现 根据 形式 的 不同 可 分为 硬件 原型 、 软件 原型 和 X 件 硬件 软件 原型 种 硬件 原型 如 容错 IC 软件 原型 如 N 版本 程序 和 容错 协议 物理 模型 也 可 与 模拟 模型 类似 地 在 不同 抽象 级别 上 进行 考察 　 　 目标 FTM 的 形式 直接 决定 采用 何种 FI 方法 及 故障模拟 层次 　 测评 粒度 　 　 根据 需要 可以 从 不同 粒度 对系统 中 所 包含 的 FTM 进行 测评 粒度 主要 包括 种 ： 　 　 单元 FTMUFTM 包含 于 某 子系统 中 的 功能 独立 的 FTM 或 用于 完成 某种 故障 处理 功能 的 整个 过程 中 的 一部分 ； 　 　 集成 FTMIFTM 包含 于 若干 子系统 中 的 用于 完成 某一 复杂 故障 处理 功能 的 若干 FTM 的 总称 ； 　 　 系统 FTMSFTM 用于 实现 系统 级 容错 目标 的 整个 系统 中 所有 FTM 运行 效果 的 总和 　 　 利用 FI 方法 进行 的 测试 常 应用 于 UFTM 和 IFTM 的 开发 过程 中 而 评价 则 主要 应用 于 SFTM 　 FTM 测评 中 的 FI 模型 　 　 除 测评 FTM 外 FI 还 可 应用 于 对 软硬件 的 测试 过程 中 包括 测评 硬件 测试 向量 选择 策略 的 故障 仿真 faultsimulation 、 估算 程序 中 错误 数量 的 撒播 模型 seedingmodel 和 软件 的 错误 驱 犨 测试方法 — 程序 变异 programmutation 本文 讨论 的 用于 测评 FTM 的 FI 模型 湟 可 方便 地 推广 到 这些 应用领域 中 图 　 FI 六元 组 模型 　 　 用于 测评 FTM 的 FI 方法 是 一个 六元 组 ： FI ［ FWRMCondProc ］ 其中 F ， W ， R ， M 分别 为 故障 集 、 工作 负载 集 、 读 回集 、 度量 集是 构成 FI 的 静态 元 系统 某 输入 域 fw ∈ F × W 与 某读 回元 r ∈ R 的 对应 关系 表示 为 fwCondr 显然 CondF × W × RProc 为 由 Cond 获得 某一 度量 m ∈ M 的 处理函数 定义 为 ProcCond → mCond 和 Proc 是 构成 FI 的 动态 元 各元间 关系 如图所示 以下 对 FI 各 组成 元 分别 进行 讨论 　 　 故障 集 F 　 　 F 是 在 获取 某 度量 m ∈ M 的 FI 试验 中 应用 的 故障 集设 FEX 为 FI 试验 中需 考虑 的 故障 集 FEI 为 试验 中 所 采用 的 FI 方法 能够 注入 的 所有 故障 之集 则 FFEX ∩ FEIFEX 的 确定 取决于 试验 目标 为 测试 或 评价 的 不同 对于 FTM 的 测试 FEX 是 目标 FTM 规格 说明 中 声明 欲 处理 的 故障 之集 评价 FTM 时 FEX 为 由 测试者 指定 的 某 特殊 故障 集 或 系统 在 其 运行 现场 中 所有 可能 发生 的 故障 集 完整 的 故障 模型 的 表示 由 两 部分 组成 ： 　 　 ① 故障 属性 ： FLMVMTM 其中 LMVMTM 分别 为 位置 、 值 、 时间 种 故障 属性 的 模型 　 　 ② 故障 分布 ： flmvmtm ∈ Ff 相对 于 故障 全集 F 的 发生 概率 PfF 依赖于 f 的 各 具体 属性 在 相应 属性 模型 中 的 分布 规律 ： PLMlm ∧ VMvm ∧ TMtm 若 假设 各 属性 间 相互 独立 则 PfFPLMlmPVMvmPTMtm ； 若 考虑 到 属性 间 的 相关性 则 PfF 以 某种 条件 概率 的 形式 给出 作为 条件 的 属性 顺序 取决于 可 获得 的 故障 分布 数据 及 注入 工具 功能 　 　 工作 负载 集 W 　 　 w ∈ Ww 表示 故障 发生 时刻 系统 运行 状态 及其 后 的 行为 故障 的 注入 需要 与 系统 负载 的 运行 在 某种 级别 上 相同 步 负载 运行 中 所 出现 的 随机 或 确定 的 系统 状态 作为 注入 触发 条件 以此 决定 注入 时刻 TInject 这 也 使 FTM 测试 中为 验证 设计 改进 效果 而 提出 的 FI 具有 可 重现 性 的 要求 得以 实现 系统 行为 的 精确 描述 决定 于 系统 和 故障 的 抽象 级别 通常 X 件 负载 特性 可简化 描述 为 系统 所 运行 的 程序 类型 硬件 目标 FTM 的 行为 可 描述 为 硬件 输入 信号 软件 目标 FTM 的 行为 珯 描述 为 待处理 的 输入 数据 　 　 负载 类型 对 试验 结果 影响 很大 对于 FTM 的 测试 可 选择 使 所 注入 的 故障 表现 为 错误 的 可能性 最大 的 w 评价 FTM 时 w 为 系统 运行 现场 程序 或 信号 的 仿真 ， 如 通用机 上 的 典型 程序 或 实时 控制系统 中 的 环境 输入 模拟 参数 等 基于 以上 分析 对于 某次 FI 试验 中 应用 的 工作 负载 模式 其 表示 可 分为 两 部分 ① 微观 方面 注入 触发 条件 wT （ Inject ） ∈ WT （ Inject ） 表示 注入 故障 时刻 的 系统 状态 其中 WT （ Inject ） 为 所有 可能 注入 触发 条件 之集 ② 宏观 方面 系统 中 运行 的 负载 类型 wRUN ∈ WRUN 表示 注入 过程 中 及其 后 的 系统 行为 其中 WRUN 为 所有 可能 负载 类型 之集 　 　 负载 类型 与 F 集 同样 需要 考虑 在 全 集中 的 分布 表示 为 PwWPWT （ Inject ） wT （ Inject ） WRUN ＝ wRUN ） P （ WRUN ＝ wRUN ） 当 不 考虑 F 与 W 之间 的 依赖 时 最 直观 的 方法 是 wT （ Inject ） 取 wRUN 运行 期间 的 随机 时刻 ； 若 F 与 W 相关 则 注入 触发 条件 wTInject 可 视作 F 的 故障 发生 时刻 属性 　 　 读 回集 R 　 　 对于 r ∈ Rr 是 将 某 一 选定 的 输入 用例 fw 施加 于 目标 系统 和 FTM 时 监测 到 的 反应 行为 信息 设 用于 表示 故障注入 效果 的 目标 系统 状态 可 形成 系统 的 基本 事件 集 Eee … eN 从而 系统 反应 行为 可定义 为 　 　 ① 基本 事件 e ∈ E 是 行为 　 　 ② 若 ai ， aj 是 行为 则 ai ∧ aj ， ai ∨ aj ， ai 均 是 行为 其中 ∧ ， ∨ ， 分别 表示 “ 二者 均 发生 ” 、 “ 二者 任一 发生 ” 、 “ 不 发生 ” ； 　 　 ③ 有限 次 利用 上述 二 原则 得到 的 均 是 行为 　 　 根据 目标 FTM 的 特征 和 测评 目标 试验者 可 自定义 有 意义 的 行为 集 Aaa … aM 并 利用 对 基本 事件 的 监测 获得 R 集中 包含 的 类读 回 信息 ： 　 　 ① 行为 发生 判定 函数 YaF × W → 使 对于 fw ∈ F × WYafwa 发生 a 未 发生 ； 　 　 ② 行为 发生 时刻 函数 TaF × W → ［ ∞ 使 对于 fw ∈ F × WTafwa 发生 时刻 ； a 未 发生 时 Tafw ∞ 此处 设 注入 时刻 为 时间 起点 即 TInject ； 　 　 ③ 其它 读回 信息 一方面 用于 辅助 判定 某些 行为 是否 发生 这是 由于 基本 事件 并非 均 可 监测 如 “ 故障 是否 表现 为 错误 ” 事件 另一方面 对于 系统 在 故障 发生 情况 下 的 反应 行为 可 进行 事后 的 深入 剖析 　 　 度量 集 M 　 　 是 测评 FTM 的 FI 试验 目标 集当 FI 用于 测试 FTM 时 M 是 对 目标 FTM 相对 于 其 规格 说明 正确性 的 判定 passfail 当 发现 设计 实现 故障 时 试验者 通常 希望 能 根据 R 集中 的 “ 其它 读回 信息 ” 确定 改进 设计 或 纠正错误 的 方案 当 FI 用于 FTM 的 评价 时 最 重要 的 度量 是 覆盖率 coverage 定义 为 输入 域 F × W 下 目标 FTM 故障 处理 行为 a 如 检测 、 隔离 、 恢复 等 的 发生 时刻 函数 Ta 的 累积 分布 函数 ： CatF × WPTa ≤ tF × W 假设 CatF × W 存在 概率密度函数 LatF × W 即 则 称 LatF × W 为 行为 a 的 延迟 期 latency 可见 覆盖率 与 延迟 期是 一对 等价 的 定义 通常 试验 中 更 关心 的 是 覆盖率 的 两个 简化 参数 ： 　 　 渐近 覆盖率 ： 　 　 平均 延迟 期 ： 　 　 根据 研究 目标 的 不同 其它 度量 还 包括 故障 传播 特性 、 故障 字典 、 负载 依赖 特性 、 多 FTM 的 比较 与 优化组合 、 失效 模式分析 等等 　 　 对应 关系 Cond 　 　 表示 试验 输入 fw 与 输出 r 之间 在 目标 FTM 作用 下 的 映射 关系 称 获取 一个 具体 度量 m ∈ M 的 过程 为 一次 “ 独立试验 ” IEIE 中 获取 F × W × R 空间 中 的 一点 fwr 的 过程 为 IE 的 一次 “ 运行 ” run 显然 每 一次 IE 开始 时 Cond ； IE 的 每 一次 Run 后 CondCond ∪ fwr 　 　 处理函数 Proc 　 　 定义 了 每 一次 IE 中 由 Cond 获取 度量 m ∈ M 的 算法 对于 FTM 的 测试 Proc 为 简单 的 行为 正确性 判定 过程 用于 定量 评价 FTM 的 运行 效率 时则 需 引入 参数估计 技术 对 Cond 中 包含 的 试验 结果 数据 进行 分析 如 点估计 、 极大 似然法 估计 、 区间 估计 等 当 评价 目标 为 获取 某 参数 的 分布 时 可 利用 χ 检验 等 技术 　 FI 独立试验 算法 FIIEA 　 　 下面 给出 FI 的 IE 算法 FIIEA 设某 FTM 上 的 一次 IE 用于 获取 度量 m ∈ M 根据 目标 FTM 的 形式 及 粒度 由 上节 讨论 可 首先 确定 作为 FIIEA 算法 输入 的 故障 全集 F 、 负载 全集 W 和 需 监测 的 行为 之集 A 具体 算法 描述 如下 ： 　 　 Cond ； CC ； mAccNull ； i ； 　 　 whileEndExprCondCAccTruedo 　 　 　 　 ii ； 　 　 　 　 fwInputCaseSeleFWCondm ； 　 　 　 　 RunwRUN ； 　 　 　 　 CallInjectfwT （ Inject ） ； 　 　 　 　 rReadout ； 　 　 　 　 CondCond ∪ fwr ； 　 　 　 　 mProcCond ； 　 　 　 　 CCCalCosti ； 　 　 　 　 AccCalAcciCondm ； 　 　 end 　 　 上述 算法 中 各 元素 、 函数 和 过程 在 具体 试验 进行 中所处 层次 不同 其中 仅 Inject 过程 和 Readout 函数 为 在线 过程 ， 如图所示 以下 讨论 该 算法 具体 实现 中 的 几项 关键问题 图 　 FI 过程 　 　 输入 用例 选择函数 　 　 InputCaseSeleFWCondm 其 功能 是 形成 第 i 次 Run 中 的 输入 用例 fw 进行 注入 对于 FTM 的 测试 通常 采用 功能测试 法即 由待测 目标 FTM 的 规格 说明 中 描述 的 预期 处理 输入 域 FW 中 导出 每 一次 试验 运行 的 测试 输入 元组 fw 许多 复杂 的 FTM 是 在 硬件 支持 下 由 软件 实现 的 为 满足 一定 的 测试 充分性 往往 引入 描述 待测 FTM 的 结构 模型 并 以此 模型 引导 测试 过程 导出 每 一步 试验 运行 中 应用 的 fw 　 　 当 FI 用于 评价 FTM 时 输入 用例 的 选择 策略 根据 目的 不同 主要 有 两种 方法 ： 　 　 ① 确定性 选择 策略 用于 比较 不同 FTM 执行 相同 故障 处理 功能 的 效率 高低 此时 wRUN 选取 标准 测试程序 benchmark 对 预先指定 的 输入 空间 F × WT （ Inject ） 中 的 每 一 元素 fwT （ Inject ） 进行 穷尽 注入 试验 ； 　 　 ② 随机性 选择 策略 用于 评价 某 特定 FTM 的 运行 效率 这 涉及 利用 某种 抽样 技术 在 完全 输入 空间 F × W 中 进行 抽样 常用 的 抽样 技术 包括 简单 随机抽样 、 概率 抽样 、 分层抽样 stratifiedsampling 、 多级 抽样 multistagesampling 等 　 　 以 表明 试验 历史 情况 的 Condm 作为 函数 的 输入 是 出于 “ 启发式 ” 选择 策略 的 考虑 如 测试 的 历史 情况 常用 于 确定 分枝 覆盖 中未 执行 路径 的 触发 输入 向 评价 中 采用 无放回 抽样 策略 时 需 将 已 注入 的 元组 fw 从 输入 全集 FW 中 排除 　 　 试验 终止 条件 爤 定 函数 　 　 EndExprCondCAcc 其 返回值 为 True 时 表示 该 IE 可以 终止 所 获得 的 m 即 为 待 测度 量 的 估计 终止 条件 表示 为 费用 变量 C 和 精确度 变量 Acc 之间 的 折衷 关系 常见 的 形式 为 ［ C ≥ MAXC ］ ∨ ［ Acc ≥ MINAcc ］ 其中 MAXC 为 允许 的 最大 费用 MINAcc 为 可 接受 的 最低 精确度 　 　 费用 计算 函数 ： CostCali 它 是 试验 次数 i 的 函数 总费用 其中 C 为 初始 设置 费用 N 为 IE 的 试验 次数 Ci 为 第 i 次 Run 的 费用 许多 情况 下 试验 运行 时间 是 唯一 需 考虑 的 费用 并常 假设 每次 Run 所需 时间 近似 相等 从而 费用 可 直接 用 Run 次数 i 简化 表示 ： Ci 　 　 精确度 计算 函数 AccCaliCondm 其 计算 规则 取决于 衡量 精确度 的 不同 标准 对于 FTM 的 测试 常 以 某种 覆盖 程度 作为 标准 如 功能测试 中 特定 输入 域 的 覆盖率 结构 测试 中 的 语句 判定 条件 路径 模块 覆盖率 等 评价 FTM 时 精确度 的 计算 与 采用 的 抽样 技术 和 参数估计 技术 有关 常见 的 标准 有 估计 参数 的 标准差 、 置信区间 范围 、 分布 稳定性 等 　 　 注入 过程 　 　 InjectfwT （ Inject ） 试验 中 采用 的 注入 方法 与 目标 FTM 形式 和 系统故障 的 抽象 级别 有关 如图所示 设计 一种 故障注入 工具 除 实现 注入 功能 外 其它 需 考虑 的 问题 包括 实现 费用 与 难易 程度 对 目标 系统 的 入侵 性 是否 干扰 负载 运行 及 干扰 程度 是否 有 破坏 目标 系统 的 可能 时间 分辨力 的 高低 可扩展性 和 通用性 等等 图 　 故障注入 方法 　 　 读回 函数 ： Readout 根据 试验 中 采用 的 注入 方法 和 待 监测 的 事件 类型 不同 可 设计 不同 的 读 回 策略 常见 的 有 与 无故障 运行 过程 及 结果 的 比较 、 跟踪 执行 路径 、 监测 特殊 硬件 信号 、 软件 报告 、 人工 观察 等 　 　 注入 及读 回 的 动态 过程 如图所示 图 　 故障注入 与 信息 读回 过程 　 应用 实例 及 结束语 　 　 FTT 型 故障注入 器 ［ ］ 是 基于 本文 FI 模型 实现 的 管脚 级 故障注入 工具 它 模拟 硬件 故障 在 芯片 管脚 上 的 表现 具有 注入 位置 和 故障 模型 可 随意 选择 等 特点 该 工具 已 应用 于 船舶 总公司 所 、 航天 总公司 五 院部 、 航天 总公司 所 等 部门 研制 的 多种 型号 容错 机中 在 辅助 设 辡 、 辅助 调试 和 项目 验收 中 发挥 了 重要 作用 目前 其 改进型 HFI 已经 研制成功 在 原有 功能 基础 上 增加 了 注入 电流 大小 可控 、 目标 地址 触发 注入 方式 等 更为 先进 的 功能 现 正在 被 一些 关键 部门 所 使用 　 　 本文 提出 的 FI 模型 弥补 了 已有 模型 中 的 不足 为 FI 的 研究 建立 了 一种 形式化 的 理论 框架 对 该 模型 的 具体 应用 算法 的 阐述 提供 了 将 FI 技术 应用 于 测评 FTM 的 具体 试验 中 的 一种 方法 　 　 实践证明 本文 建立 的 FI 模型 能够 准确 描述 FI 的 基本原理 其 应用 算法 具有 普遍 的 适用性 为 构造 实用 的 FI 系统 提供 了 一种 途径 是 指导 具体 FI 试验 的 行之有效 的 方法 本 课题 得到 国家自然科学基金 项目编号 资助 作者简介 ： 孙峻 朝 男年 月 生 博士 研究生 研究 方向 为 基于 模型 和 试验 的 系统 可信性 测评 技术 　 　 　 　 　 王建莹 男年 月 生 博士 研究生 研究 方向 为 计算机系统 可靠性 评测 理论 和 技术 　 　 　 　 　 杨 孝宗 男年 月 生 教授 博士生 导师 研究 方向 为 多 机系统 和 容错 计算技术 作者 单位 ： 哈尔滨工业大学 计算机科学 与 工程系 　 哈尔滨 　 参考文献 　 ClarkJAPradhanDKFaultinjectionAmethodforvalidatingcomputersystemdependabilityIEEEComputer ～ 　 KanawatiGAKanawatiNAAbrahamJAFERRARIAflexiblesoftwarebasedfaultanderrorinjectionsystemIEEETransonComputers ～ 　 GoswamiKKIyerRKYoungLDPENDAsimulationbasedenvironmentforsystemleveldependabilityanalysisIEEETransonComputers ～ 　 CarreiraJMadeiraHSilvaJGXceptionAtechniquefortheexperimentalevaluationofdependabilityinmoderncomputersIEEETransonSoftwareEngineering ～ 　 VardanegaTDavidPetalOnthedevlopmentoffaulttolerantonboardcontrolsoftwareanditsevaluationbyfaultinjectionInProcthIEEEIntlSymponFaultTolerantComputingFTCSPasadenaCalifornia ～ 　 AmendolaAMImpagliazzoLMarmoPetalExperimentalevaluationofcomputerbasedrailwaycontrolsystemsInProcthIEEEIntlSymponFaultTolerantComputingFTCSSeattle ～ 　 StottDTRiesGHsuehMCetalDependabilityanalysisofahighspeednetworkusingsoftwareimplementedfaultinjectionandsimulatedfaultinjectionIEEETransonComputers ～ 　 ArlatJetalFaultinjectionfordependabilityvalidationAmethodologyandsomeapplicationsIEEETransnSoftwareEngineering ～ 　 WangJYSunJZLiYCetalTheimplementationofFTTAhardwarebasedfaultinjectorInProcComputerAidedDesignTestandEvaluationforDependabilityBeijing ～ 原稿 收到 日期 ： ； 修改稿 收到 日期 ：