航空 动力学 报 JOURNALOFAEROSPACEPOWER 年 　 第卷 　 第期 　 Vol 　 No 　 可 扩展 的 燃气轮机 仿真 对象 模型 谢志武 　 苏明 　 翁史烈 　 　 【 摘要 】 　 应用 面向对象 的 分析 与 设计 方法 进行 可 扩展 的 燃气轮机 仿真 建模 研究 。 将 燃气轮机 仿真 的 各种 计算 任务 概括 为 部件 计算 、 流路 计算 和 系统 状态 计算 三个 层次 ， 并 在 此基础 上 提出 节点 连接器 部件 模型 ， 构造 了 一个 部件 模型 、 工质 流程 及 仿真 算法 均 可 扩展 的 仿真 类 属 框架 ， 并 通过 一个 三轴 燃气轮机 的 容积 效应 法 仿真 验证 了 该 模型 的 有效性 和 可 扩展 能力 。 　 　 主题词 ： 　 燃气轮机 　 仿真 　 建立 模型 　 　 分类号 ： 　 TK 　 TP 　 前言 　 　 在 简单 循环 燃气轮机 的 基础 上 ， 通过 增删 部件 和 改变 工质 流程 可以 得到 各种 以 燃气轮机 为 核心 的 复杂 动力装置 。 在 这类 装置 的 仿真 建模 中 应用 面向对象 方法 可以 方便 地 重用 已有 的 源代码 ， 因而 不仅 加速 了 建模 过程 ［ ］ ， 而且 为 构造 通用 的 燃气轮机 仿真 软件 奠定 了 基础 ［ ］ 。 　 　 面向对象 方法 的 各种 优越性 最终 都 必须 通过 软件 扩展 来 实现 。 对于 燃气轮机 仿真 模型 而言 ， 需要 扩展 的 不仅 有 部件 和 工质 流程 ， 而且 还 应该 包括 仿真 算法 。 本文 运用 统一 建模语言 ［ ］ （ UnifiedModelingLanguage ， 简称 UML ） 及其 建议 软件开发 过程 对 燃气轮机 仿真 问题 进行 了 面向对象 的 分析 、 设计 和 实现 ， 所 获得 的 燃气轮机 仿真 模型 在 部件 、 工质 流程 以及 仿真 算法 各 方面 都 具有 高度 的 可 扩展 能力 。 　 可 扩展 的 燃气轮机 仿真 类 属 层次结构 　 　 软件 的 可 扩展 能力 首先 表现 在 其类 属 层次结构 上 ， 只有 高度 概括 的 父类 才 有 可能 使 不同 特化 层次 的 子类 在 其 上 扩展 。 　 　 为 概括 各种 燃气轮机 仿真 的 共性 ， 将 燃气轮机 仿真 中 的 各种 计算 任务 概括 为 既 相互 联系 又 有 明确分工 的 三个 层次 ： 部件 计算 、 流路 计算 和 系统 状态 计算 。 其中 ， 部件 计算 以 单个 部件 的 特性 为 依据 ， 根据 该 部件 的 已知 参数 求解 其他 未知 参数 ， 如 根据 压气机 的 转速 、 压比 求解 流量 和 效率 等 。 部件 计算 仅 局限于 单个 部件 内部 而 不 涉及 部件 间 的 相互影响 ， 何时 进行 哪个 部件 的 计算 由 流路 计算 来 控制 。 流路 计算 定义 系统 中 各 部件 间 的 相互 关系 ， 规划 部件 计算 的 次序 和 参数传递 方向 ， 并 掌握 计算 结束 的 判据 。 流路 计算方法 包括 顺 算法 、 逆 算法 ［ ］ 、 容积 效应 法 ［ ］ 等 。 流路 计算 结束 时 ， 系统 中 的 所有 部件 均 已 求解 且 相互间 满足 一定 条件 ， 如顺 算法 要求 通流 部分 满足 压力 和 流量 平衡 ， 而 容积 效应 法则 仅 需 压力 平衡 即可 。 系统 状态 计算 从 流路 计算 的 结果 中 获得 系统 的 动态 信息 ， 然后 用 欧拉 法 、 龙格 库塔 法 或 辛 算法 等 数值积分 方法 求解 系统 的 下 一个 状态 。 　 　 三 层次 概括 对 稳态 仿真 和 动态 仿真 同样 适用 。 以 牛顿 — 莱普生 法为例 ， 稳态 仿真 时有 如下 迭代 公式 ： 其中 ， 是 系统 的 状态变量 ， k 是 残量 。 流路 计算 结束 后 先求 残量 k 和 J 矩阵 ， 然后 对 J 求逆 ， 就 可 由 第 k 轮 迭代 的 系统 状态 k 解出 残量 更 小 的 第 （ k ） 轮 系统 状态 k 。 上述 计算 虽然 不 包含 时间 因素 ， 但 与 动态 仿真 中 对 右 函数 作 数值积分 一样 ， 都 是从 流路 计算 的 结果 出发 求解 系统 下 一轮 的 状态 ， 因而 也 属于 系统 状态 计算 。 　 　 燃气轮机 仿真 的 三个 层次 是 相互 联系 、 相互依赖 的 。 流路 计算 既 控制部件 计算 的 进行 ， 其 结果 又 是 系统 状态 计算 的 依据 ， 系统 状态 计算 更为 下 一轮 部件 计算 准备 数据 。 因此 ， 实际 仿真 计算 时 这 三个 层次 的 计算 任务 是 交替 进行 的 。 图 　 可 扩展 的 燃气轮机 仿真 类 属 层次结构 示意图 　 　 根据 燃气轮机 仿真 的 三 层次 概括 可以 构造 一个 仿真 类 属 框架 。 首先 为 上述 三个 层次 的 仿真 计算 任务 构造 相应 的 抽象类 ， 然后 以 他们 为 父类 扩展 出 各种 不同 抽象层次 的 子类 。 例如 ， 可以 从 部件 类 Component 派生 压气机 类 Compressor ， 从 流路 计算 类 GasPathCalc 派生 容积 效应 法类 VolumeEffCalc 或 从 系统 状态 计算 类 SysStateCalc 派生 欧拉 法类 Euler 等等 。 图是 这个 类 属 层次结构 的 UML 表述 ， 其中 ， 目 字形 方框 代表 类 ， 虚线 箭头 代表 依赖 关系 ， 实线 三角 箭头 代表 继承 关系 。 图 所示 的 类 属 层次 框架 为 部件 以及 流路 计算 和 系统 状态 计算方法 的 扩展 奠定 了 基础 。 下面 详细 介绍 其中 部件 类 的 细节 。 　 节点 — 连接器 — 部件 模型 　 　 为了 表达 工质 流程 的 变化 ， 本文 之前 的 各种 燃气轮机 对象 模型 都 构造 了 工质 流类 。 但是 ， 工质 流类 的 存在 极大 地 限制 了 流路 计算方法 的 扩展 。 图 给出 了 采用 常规 顺 算法 、 逆 算法 ［ ］ 及 容积 效应 法 ［ ］ 时高 、 低压 压气机 间 的 各种 数据 的 传递 方向 。 尽管 这种 数据 传递 方式 有 明显 不同 ， 但 采用 工质 流类 表达 时 ， 由于 它 同时 封装 了 温度 、 压力 和 流量 信息 ， 因此 难以 显式 地 表达 上述 差别 。 为了 最大 限度 地 提高 模型 的 可 扩展 能力 ， 本文 废弃 了 工质 流类 ， 转而 构造 了 一个 更 灵活 多变 的 类 属 结构 ， 称为 节点 — 连接器 — 部件 模型 。 图 　 采用 不同 算法 时高 、 低压 压气机 间 的 数据 传递 示意图 　 　 首先 对 仿真 中 出现 的 各种 物理量 进行 分类整理 ， 将 相互间 存在 一一对应 关系 的 各种 变量 合成 一类 。 例如 ， 由于 工质 流 的 温度 t 、 焓 i 、 等压 比热 cp 、 相对 压力 的 自然对数 lnPai 以及 相对 压力 的 自然对数 对 温度 的 导数 dlnPai 间 存在 一一对应 关系 ， 因此 用 一个 流体 温度 类 TFluidNode 来 概括 所有 这些 变量 。 若 在 仿真 中 需要 传递 某种 工质 的 焓 值 ， 则 只 需 传递 相应 的 TFluidNode 对象 ， 它会 自动 进行 相应 的 数值 转换 。 同理 ， 油气 比 f 、 摩尔 燃料 系数 beta 、 纯 燃气 在 燃气 中 的 摩尔 成分 b 和 纯 燃气 在 燃气 中 的 质量 成分 bm 之间 的 一一对应 关系 也 可以 用 一个 油气 比类 FNode 来 概括 。 　 　 为 方便 以后 在 系统 中 扩展 新 的 物理量 ， 需要 为 上述 各 物理量 构造 一个 公共 父类 ， 称之为 节点 类 （ Node ） 。 节点 类 及其 子类 的 关系 见图 ， 其中 Node 类 的 各 子类 自左至 右 分别 代表 转速 对 时间 的 导数 、 功率 、 流量 、 油气 比 、 流体 温度 、 压力 、 压力 对 时间 的 导数 以及 转速 ， 流体 温度 类 TFluidNode 还 派 生出 空气 温度 和 纯 燃气 对 空气 温度 的 修正 项 两个 子类 。 必要 时 ， 还 可以 在 此基础 上 继续 扩展 出 其他 物理量 。 　 　 　 图 　 节点 类 与 连接器 类 示意图 　 　 　 　 图 　 压气机 类 包含 的 各种 对象 　 　 接着 建立 各 部件 类 与 节点 类 之间 的 关系 。 如图所示 ， 以 压气机 类为例 ， 它 包含 空气 温度 节点 和 压力 节点 对象 各 两个 （ 分别 代表 进 、 出口 空气 的 温度 和 压力 ， 注意 温度 对象 同时 还 隐含 了 焓 、 等压 比热 等 信息 ） 以及 流量 、 转速 和 功率 节点 对象 各 一个 。 UML 规定 用 实心 菱形 箭头 表示 值 包含 关系 ， 箭头 上 的 文字 标注 和 数字 分别 表示 包含 关系 的 名称 和 双方 的 数量 。 　 　 各 部件 所 包含 的 节点 间 要 进行 数据 传递 ， 因此 需要 一个 连接器 类 （ Connector ） 来 完成 这一 功能 。 连接器 类 和 节点 类 的 关系 见图 ， 其中 的 空心 菱形 箭头 代表 引用 型 包含 关系 。 　 　 在 节点 — 连接器 — 部件 模型 中 ， 根据 实际 情况 的 不同 ， 一个 真实 部件 可能 需要 由 几个 软件 部件 对象 拼接 起来 ， 其间 的 数据 联系 也 可能 与 实际 的 物理 联系 有所不同 。 图是 用 容积 效应 法 仿真 时高 、 低压 压气机 模型 的 图形界面 实例 ， 其中 与 部件 相连 的 圆 代表 从 属于 该 部件 的 各种 节点 ， 而 粗线 箭头 代表 连接器 。 由于 低压 压气机 存在 泄漏 ， 因此 增加 了 专门 用于 处理 流量 损耗 的 支管 （ Manifold ） 部件 。 注意 到 这里 压气机 与 支管 之间 可以 只 交换 流量 信息 而无须 同时 交换 温度 、 压力 信息 ， 而且 容积 效应 部件 与 各 压气机 之间 的 温度 、 压力 、 流量 信息 也 可以 分取 不同 的 传递 方向 ， 因此 就 比用 工质 流类 对象 来 传递数据 的 对象 模型 要 灵活 得 多 。 在 节点 — 连接器 — 部件 模型 中 ， 各种 不同 的 工质 流程 和 流路 计算方法 都 可以 借助 连接器 的 不同 设置 而 轻易 实现 。 图 　 容积 效应 法 仿真 时高 、 低压 压气机 模型 的 图形界面 实例 　 　 需要 说明 的 是 ， 作为 一种 软件 构造 范式 ， 面向对象 方法 仅仅 改变 仿真 数学模型 在 计算机 上 的 表达方式 ， 却 不会 对原 问题 的 逼真度 和 收敛 特性 造成 任何 影响 。 具体地说 ， 仿真 程序 的 逼真度 取决于 数学模型 的 精细 程度 ， 收敛 特性 则 取决于 与 该 数学模型 相对 应 的 包括 流路 计算方法 和 系统 状态 计算方法 在内 的 数值 求解 方案 。 对 一段 传统 的 过程 式 仿真 程序 进行 面向对象 化 改写 ， 虽然 会 使 程序结构 和 指令 调用 过程 变得 相对 复杂 ， 但 它 仍然 遵循 原有 数学模型 和 算法 所 设定 的 计算 任务 和 计算 次序 ， 因而 计算结果 必然 与 原程序 完全相同 。 　 　 另一方面 ， 由于 不同 仿真 问题 可能 提出 不同 的 精度 和 速度 要求 ， 因而 一个 通用 的 燃气轮机 仿真 软件 不仅 需要 具备 为 各种 部件 建立 不同 精度 数学模型 的 能力 ， 还 必须 能够 对 数值 计算方法 做 相应 调整 。 本文 的 仿真 模型 通过 提供 部件 模型 以及 流路 计算 和 系统 状态 计算方法 上 的 可 扩展 能力 保证 了 各种 精度 和 速度 要求 的 仿真 任务 都 能 在 同一 仿真 软件 环境 内 得以 实现 。 　 算例 　 　 使用 上述 对象 模型 进行 了 某三轴 燃气轮机 动态 性能 仿真 。 仿真 采用 燃气轮机 非线性 数学模型 ［ ］ ， 各 部件 特性 均 已知 ， 并且 考虑 了 进排 气压 损 、 压气机 抽气 及 涡轮 冷却 等 因素 。 流路 计算方法 采用 速度 快 、 收敛性 和 稳定性 均 较 好 的 容积 效应 法 ［ ］ ， 系统 状态 计算 采用 常用 的 欧拉 法 。 采用 UML 进行 面向对象 的 分析 和 设计 ， 然后 用 C语言 编程 实现 。 　 　 　 　 　 图 　 油量 阶跃 增时 的 转速 响应 　 　 　 　 图 　 油量 阶跃 减时 的 转速 响应 　 　 表 是从 前述 类 属 框架 中 扩展 得到 的 各个 类 及其 实例 化后 得到 的 对象 。 用 这些 对象 可以 拼接 出 系统 的 仿真 模型 。 图和图 给出 了 机组 各 转子 转速 对 油量 阶跃 微扰 的 动态 响应 计算结果 ， 与 常规 过程 式 仿真 的 结果 完全一致 。 仿真 的 时间 步长 设为 ms ， 在 Pentium Ⅱ MHz 微机 上 ， 每步 计算 耗时 ms ， 可以 满足 实时 仿真 的 速度 要求 。 表 　 某三轴 燃气轮机 动态 特性 仿真 的 对象 配置 说明 对象 名 所属 类名 简 　 　 要 　 　 说 　 　 明 lpchpchptlptptcomddddmmmmlvvvvrhrlrpc ～ cSpeyLPCSpeyHPCSpeyHPTSpeyLPTSpeyPTCombustorDuctDeltaManifoldGLCLoadVolumeInertiaRotorInertiaConnectorCompressor 的 子类 ， 采用 某 机组 低压 压气机 特性 Compressor 的 子类 ， 采用 某 机组 高压 压气机 特性 Turbine 的 子类 ， 采用 某 机组 高压 涡轮 特性 Turbine 的 子类 ， 采用 某 机组 低压 涡轮 特性 Turbine 的 子类 ， 采用 某 机组 动力 涡轮 特性 Duct 的 子类 ， Component 的 孙类 ， 压损 为 常数 Manifold 的 子类 ， Component 的 孙类 ， 流量 损失 为 常数 负荷 ， Component 的 子类 容积 惯性 ， Component 的 子类 转子 惯性 ， Component 的 子类 　 结论 　 　 本文 以 可 扩展 能力 为 中心 ， 综合 运用 面向对象 的 分析 和 设计 方法 ， 以 燃气轮机 仿真 三 层次 概括 为 依据 ， 构造 了 一个 可 扩展 的 仿真 类 属 框架 。 本文 提出 并 实现 了 节点 — 连接器 — 部件 模型 ， 并 通过 算例 验证 了 该 模型 的 有效性 和 可 扩展 能力 。 本文 的 工作 为 快速 有效 地 进行 热力 系统 建模 仿真 开辟 了 新 方向 。 本文 系 中国 船舶工业 总公司 “ 九五 ” 预研 资助 项目 作者简介 男 　 岁 　 博士 　 讲师 　 武汉市 海军工程学院 教研室 　 作者 单位 谢志武 　 海军工程学院 　 　 　 　 　 苏明 　 翁史烈 　 上海交通大学 参考文献 　 　 　 HeyenGMurphyKMarchioDetalDynamicSimulationandControlofGasTurbineandCompressorSystemsComputersinChemicalEngineering 　 　 　 HoPYNgPSObjectOrientedApproachtoGasTurbinePerformanceComputationASMEPaperGT 　 　 　 DrummondCKFollenGJPuttCWGasTurbineSystemSimulationAnObjectOrientedApproachNASATM 　 　 　 DrummondCKFollenGJCannonMObjectedOrientedTechnologyforCompressorSimulationAIAA 　 　 　 CurlettBPFelderJLObjectOrientedApproachforGasTurbineEngineSimulationNASATM 　 　 　 谢志武 ， 陈德来 ， 洪波 ． 燃气轮机 稳态 性能 仿真 的 面向对象 设计 与 实现 ． 上海交通大学 学报 ， ， 　 　 　 谢志武 ， 陈德来 ， 翁史烈 ． 面向对象 的 燃气轮机 仿真 建模 ： 综述 与 展望 ． 热能 动力工程 ， ， ： 　 　 　 谢志武 ． 面向对象 的 燃气轮机 仿真 研究 ： ［ 博士学位 论文 ］ ． 上海 ： 上海交通大学 动力 与 能源 工程学院 涡轮机 研究所 ， 　 　 　 RationalSoftwareCorporationUMLSummaryVersion 　 　 　 WangYANewMethodofPredictingthePerformanceofGasTurbineEnginesASMEJournalofEngineeringforGasTurbinesandPower 　 　 　 苏明 ， 翁史烈 ． 汽轮机 系统 仿真 中 一种 容积 环节 仿真 模型 及其 解 ． 动力工程 ， ， ： 　 　 　 翁史烈 ． 燃气轮机 性能 分析 ． 上海 ： 上海交通大学 出版社 ， ： （ 责任编辑 　 杨再荣 ） 年 月 收稿 ； 年 月 收到 修改稿 。