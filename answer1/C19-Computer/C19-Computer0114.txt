计算机 应用 COMPUTERAPPLICATIONS 年 第卷 第期 VolNo 网络管理 平台 的 分析 及 应用环境 颜凯 　 张军 　 　 摘 　 要 　 本文 介绍 当前 国际 上 最 流行 的 网络管理 平台 ： HPOpenView ， SUNNetManager 和 IBMNetView 。 比较 这些 管理 平台 的 应用 开发 环境 ， API 接口 等 。 　 　 关键词 　 网络管理 平台 ， SNMP ， API 　 关于 网络管理 　 　 网络管理 就是 通过 规划 、 配置 、 监视 、 分析 、 扩充 和 控制 计算机网络 来 保证 网络服务 的 有效 实现 ， 包含 五个 基本 功能域 ： 故障 管理 、 配置管理 、 性能 管理 、 计帐 管理 、 安全 管理 。 通常 ， 一个 网管 系统 只 需 选取 其中 几个 功能 加以 实现 。 　 　 网络管理 平台 是 实现 网管 功能 的 一种 软件产品 ， 运行 于 一定 的 计算机 平台 之上 ， 组成 一个 NMS 。 网管 平台 适应 多 协议 网络 环境 ， 提供 较 全面 的 管理 服务 ， 并 可 安装 符合规范 的 附加 管理 模块 。 网管 平台 还 提供 存储 、 访问 和 交换 网管 数据 所 需 的 通信 功能 和 存放 MIB 的 数据库 管理系统 ； 并 为 用户 提供 一致 的 图形用户界面 （ GUI ） 和 一定 的 开发工具 供 用户 开发 管理 模块 以便 装入 平台 。 实质 上 ， 网管 平台 是 网管软件 赖以 存在 的 “ 网络管理 操作系统 ” 。 　 　 网管 平台 结构 可 分为 集中式 和 分布式 。 集中式 是 在 单个 控制 台上 实现 监控 网络 的 运行状况 ， 收集 网络 运行 数据 ， 并 对 网络 实施 必要 的 控制 。 整个 网络管理 的 核心 集中 于 网络 控制台 ， 网管员 容易 掌握 全网 情况 。 在 大型 网络 中 ， 控制台 的 大量 通信 造成 处理 负载 过大 ， 成为 网络 的 处理 瓶颈 。 分布式 通常 是 由 多个 管理器 构成 ， 来 共同 承担 管理 任务 。 通过 分级 来 实现 管理 任务 的 分工 ， 可 减低 管理 复杂度 ， 一定 程度 上 减少 网络 上 管理 信息 的 流量 。 分布式 网络管理 的 大规模 网管 能力 较强 ， 伸缩性 也 较 好 ， 但 相应 的 代价 是 网管 平台 的 结构 较为 复杂 。 　 现有 网管 平台 的 分析 　 　 目前 ， 网络管理 平台 比较 流行 的 是 ： HPOpenViewIBMNetViewSUNNetManager 等 。 　 HPOpenView 　 　 HPOpenView （ 以下 简称 OV ） 是 第一个 网管 平台 ， 其 核心 框架 提供 了 基本 应用 的 开放系统 环境 。 通过 API 来 实现 对 公共 管理 服务 的 访问 ， 充分利用 网管 系统 的 开放性 。 它 不仅 是 一个 开放平台 ， 还 能 向 用户 提供 直接 的 管理 应用 。 　 　 HP 公司 将 OV 网管 平台 的 结构设计 成 开放 的 分布式 体系结构 ， 该 结构 源于 OSI 网络管理 结构 并 支持 TCPIP 网络 。 它 定义 了 一个 全面 的 服务 和 设施 环境 ， 将 网络 和 系统管理 问题 分成 ： 通信 下层 结构 、 图形用户界面 、 管理 应用 、 管理 服务 和 被 管 对象 。 这些 部分 都 通过 标准 的 应用 程序接口 访问 。 图 　 HPOpenView 网络管理 平台 结构 　 　 HPOV 网管 平台 的 通信 下层 结构 提供 建立 并 维护 各 部分 间 的 通信 的 机制 。 平台 定义 用户界面 ， 作为 网络管理 的 隔离 部分 。 由于 网络管理 是 种 分布式 的 活动 ， OV 网管 平台 将 管理 应用 和 管理 服务 设置 在 整个 网络 不同 的 系统 上 。 其中 ， 管理 服务 可 看作 是 网管 的 通信 下层 结构 和 被 管 对象 间 的 桥 ， 它 通过 几个 元素 来 实现 ： 通信协议 与 通信 所 需 的 界面 、 事件 转发 和 过滤 服务 、 一个 管理 数据库 和 metadata 服务 。 被 管 对象 是 实际 被 管理 的 资源 的 抽象概念 ， 这些 被 管 对象 能够 由 图形用户界面 显示 并 控制 。 　 　 HPOV 具有 较强 的 网络 性能 分析 能力 ， 通过 GUI 进行 警告 配置 ， 并 实施 故障 警告 。 OV 适用 于 大多数 厂家 的 硬件平台 上 ， 并 为 工作站 、 服务器 和 PC机 提供 广泛 的 管理 应用 和 软件平台 。 HP 的 NetworkNodeManagerNNM 是 可以 用于 分布式 管理系统 ， 系统 分为 管理 域 和 采集 域 。 采集 域 中 NNM 直接 进行 节点 发现 和 检测 ， 然后 把 管理 信息 向上 发送给 管理 域 中 的 NNM 管理 工作站 ， 由 管理 工作站 实现 整个 网络 的 管理 。 而 独立 的 管理 工作站 间 也 能 在 其 管理 域 内 交换 管理 信息 。 　 SUNNetManager 　 　 SUNNetManager （ 以下 简称 SNM ） 是 分布式 管理 体系结构 的 网络 管理系统 ， 可以 管理 包括 DECnet 和 FDDI 网络 环境 ， 并 能够 与 IBM 的 NetView 相互配合 。 其 集成 工具 能 提供 故障 管理 、 配置 、 记帐 和 安全 服务 。 但 它 基本上 还是 个 开发 平台 ， 还 需要 第三方 厂商 开发 的 应用 系统 来 实现 。 图 　 SUNNetManager 网络管理 平台 结构 　 　 SNM 是 第一个 提供 分布式 网管 的 产品 ， 它 的 委托 代理 和 协作 控制 充分体现 了 分布 性 。 委托 代理 是 通过 PRC 例程 与 管理站 进行 通信 的 ， 而 委托 代理 可 分布 于 整个 网络 中 ， 通过 协作 控制 管理站 能够 同 其它 SNM 管理站 共享 管理 信息 。 　 　 SNM 提供 了 两种 类型 的 代理 ： 代理 和 委托 代理 ， 它们 与 应用程序 间 的 通信 通过 RPCRemoteProcedureCall 协议 进行 。 委托 将 RPC 协议 翻译成 能 被 有关 元素 理解 的 协议 ， 通过 它 ， SNM 可以 管理 大量 的 资源 ， 包括 ： 　 　 通信协议 层 和 接口 　 　 网络设备 ， 如 网桥 、 路由器 、 集线器 、 打印机 、 工作站 和 PC机 　 　 应用程序 ， 数据 和 网络服务 　 　 系统 和 操作系统 资源 　 　 在 分布式 管理 结构 中 ， 配置 委托 代理 时应 使 之 尽量 靠近 所 管理 的 设备 ， 过滤 陷阱 信息 和 延迟 发送 报告 以 减少 同 控制台 的 传输 量 ， 分布式 管理应用程序 注册 从 事件 发送 设备 收到 的 报告 。 　 IBMNetView 　 　 NetView 是 IBM 公司 在 HPOpenView 的 基础 上 发展 起来 的 。 它 的 核心 代码 没有 改动 ， 但 其中 加入 了 大量 的 应用 ， 特别 是 SNA （ SystemsNetworkArchitecture ） 网络 的 支持 。 　 　 IBMNetView 是 IBM 开放式 网络管理 （ ONM ） 体系结构 的 体现 ， 它 不仅 向 第三方 网管 应用 系统 开发人员 提供 了 一个 开发 平台 ， 而且 本身 也 是 一个 可以 直接 使用 的 最终 系统 。 图 　 IBMNetView 网络管理 平台 结构 　 　 NetView 具有 以下 特点 ： 它 通过 分布式 SNMP 代理 来 管理 TCPIP 网络 ， 监视 并 显示 IP 设备 ， 可 监测 网络 性能 并 产生 报告 ， 具有 动态 发现 网络设备 的 能力 。 它 还 提供 了 强大 的 信息 过滤 能力 ， 通过 设置 阈值 的 方法 来 减少 部分 的 冗余 警告 。 并 为 开发 和 集成 新 的 网管 应用 提供 一个 开放 的 平台 。 但 NetView 不 具备 理解 网络设备 间 依赖 关系 的 能力 ， 使得 实现 自动 管理 较 困难 。 　 基于 网管 平台 的 应用 开发 环境 　 　 当前 流行 的 网管 平台 都 是 具有 开放性 的 平台 ， 能 通过 各自 的 应用 程序接口 API 来 实现 对 公共 管理 服务 的 访问 ， 使 用户 充分利用 平台 的 公共 管理 服务 ， 实现 对 特殊 应用 的 开发 。 　 HPOpenView 应用 开发 环境 　 　 HPOpenView 应用 开发 环境 包括 ： 应用 程序接口 ， 事件 管理 服务 ， 以及 数据库 支持 。 应用 程序接口 分 SNMPAPI 和 XMPAPI 。 　 　 SNMPAPI 是 SNMP 开发工具 和 分布式 管理 开发工具 的 组成部分 ， 包括 通信 API 和 配置 API 。 SNMP 通信 API 提供 SNMP 堆栈 的 直接 访问 来 完成 SNMP 管理 操作 ， 并 有 计划 地 访问 SNMP 事件 浏览器 ， 允许 应用 发送 并 接收 管理站 上 的 陷阱 。 SNMP 配置 API 提供 程序 访问 SNMP 配置 数据库 ， 提供 一整套 工具 动态 地 获取 、 更新 以及 存储配置 信息 。 　 　 工业 标准 的 XMPAPI 能够 发展 基于 SNMP 和 CMIP 的 网络 和 系统管理 应用 。 HP 完成 了 XMPAPI 的 详细 说明 ， 包括 分组 的 产生 ， 即将 GDMO 对象 定义 转换 为 XOM 分组 。 HP 还 增加 了 一个 相关 控制 服务 元素 API 扩充 ， 能 让 应用 开发者 控制 管理 连接 。 附加 的 基于 XMP 的 APIs 包括 基于 XMP 的 HPOpenViewWindowsAPIsforOSI 。 　 　 工业 标准 的 XOMAPI 支持 由 XMP 使用 的 对象 的 创建 和 控制 。 HPOV 提供 XOM 和 XOM 代码 产生器 的 实现 。 HPOVXMP 和 XOMAPIs 是 分布式 管理 代理 开发工具 和 分布式 管理 开发工具 的 组成部分 。 　 　 HPOV 事件 管理 服务 收集 有关 网络 事件 的 数据 ， 转发给 相应 的 应用 并 登记 ； 提供 收集 、 发送 SNMP 和 CMIS 事件 的 机制 。 HPOV 事件 代理 报告 管理 功能 ， 能 寻径 、 发送 、 过滤 事件 。 用户 可 通过 基于 X 的 HPOV 事件 登录 管理器 控制 事件 的 登录 和 过滤 值 。 事件 代理 和 登录 代理 均 能 通过 XMPAPI 访问 ， 能 检索 实时 和 历史 事件 。 　 　 HPOVSNMP 和 分布式 管理 平台 带有 工业 标准 的 可选 关系数据库 ， 可 提供 应用 开发者 和 最终用户 访问 网络 和 系统管理 数据 。 　 SunNetManager 应用 开发 环境 　 　 SunNetManager 应用 开发 环境 也 包括 应用 程序接口 ， 事件 管理 服务 ， 以及 数据库 支持 。 这里 着重 介绍 一下 应用 程序接口 （ API ） 。 　 　 SNM 的 API 可以 使 开发商 和 用户 建立 强大 的 工具 来 补充 SNM 用户 工具 的 功能 ， 包括 管理 服务 API ， 代理服务 API 和 数据库 拓扑图 服务 API 。 管理 服务 API 提供 基于 ONCRPC 的 、 比 SNMP 或 OSI 更 有效 的 通信 服务 ， 这些 通信 服务 可使 SNM 扩展 到 任何 其它 协议 和 大型 网络 上 。 　 　 代理服务 API 提供 了 通过 中间 协议 管理 多 协议 环境 的 能力 。 委托 能 被 写成 扩展 的 SNM 代理服务 API 。 许多 代理 被 写成 代理服务 API ， 包括 ： 　 　 diakinfo 磁盘 信息 ， etherif 以太网 接口 统计 ， hostif 接口 统计 ， hostmem 主机 内存 使用 ， hostperf 主机 运行 数据 ， iostat 磁盘 IO ， CPU 和 终端 统计 ， ippathIP 分组 路由 路线 信息 ， iproutesIP 路由表 和 统计 ， layers 物理层 统计 ， lpstat 打印机 状态 ， pingIP 联结 信息 ， rpcnfsRPC 和 NFS 统计 ， snmpMIBI ， II ， snmpdSPARC 系统 的 SNMP 代理 ， sync 同步 接口 统计 ， traffic 以太网 流量 分析 。 　 　 数据库 拓扑图 服务 API 提供 了 修改 和 用户 化 拓扑图 的 能力 。 　 　 SNM 还 提供 了 移植 到 将来 的 SunSoft 管理 平台 的 途径 。 使用 API 和 SNM 提供 的 动态 连接 库 编写 的 应用程序 ， 可以 与 EnterpriseManager 平台 二进制 兼容 。 　 NetView 应用 开发 环境 　 　 由于 NetView 是 在 HPOpenView 的 基础 上 发展 起来 的 ， 其 应用 开发 环境 结构 类似 于 HPOpenView ， 也 包括 应用 程序接口 等 几个 部分 。 　 　 NetView 可 提供 给 用户 的 API 分为 以下 几组 ： 　 　 － XMP ： XMP 是 一个 中立 协议 API ， 用于 访问 SNMP 或 CMOT ； 　 　 － SNMP ： 为 管理应用程序 ， 提供 标准 SNMPMIB 变量 和 TRAP 的 访问 ； 　 　 － OVuTL ： 通过 这 一组 API 调用 ， 可以 提供 跟踪 和 日志 记录 ； 　 　 － OVsPMD ： 使 应用程序 可以 和 进程 管理 守护 程序 ovspmd 集成 在 一起 ， 以便 有序 地 启动 和 关闭 进程 ； 　 　 － EndUserInterface ： 最终用户 接口 ， 具有 超过 个 API 调用 ， 用来 控制 屏幕显示 和 同 用户 的 交互 ； 　 　 － EventFiltering ： 事件 过滤 ， 一组 用来 创建 和 注册 事件 过滤器 的 例程 。 　 　 其中 ， XMPAPI 提供 了 一个 高层 的 抽象 。 通过 它 可以 使用 多种 网管 协议 来 访问 网络资源 ， 尤其 是 它 提供 了 对 SNMP 和 CMISCMIP 的 支持 ， 这 两种 协议 都 使用 TCPIP 传输 协议 。 其中 ， SNMP 和 OVuTL 这 两组 API 是 专用 于 NetView 的 ， 它们 可以 使用 网络日志 和 跟踪 工具 来 追溯 应用程序 的 活动 ， 这 在 开发 和 调试 阶段 尤为重要 。 进程 管理 接口 （ OVsPMD ） 允许 一个 到 核心 控制 结果 的 集成 。 例如 ， 可以 允许 正常 地 启动 和 终止 应用程序 ， 并 将 进程 活动 情况 记录 到 全局 日志 中 。 事件 记录 API ， 可以 控制 图 和 网络 事件 的 处理 及 显示 。 　 　 NetView 还 提供 使用 现有 关系数据库 获得 IP 拓扑 数据 、 SNMP 收集 的 数据 和 记录 的 陷阱 数据 的 能力 ， 还 可以 利用 关系数据库 产品 的 客户机 服务器 能力 。 　 　 NetView 还有 一些 特殊 功能 ： 管理程序 接管 功能 提供 在 不同 位置 的 工作 点 之间 灵活 转移 网管 的 能力 ， 当某 场地 发生 灾害 时 ， 可 在 另 一个 预定 场地 继续 管理网络 。 其 性能 监控 工具 允许 监控 NetViewforAIX 工作站 资源 状态 和 影响 性能 的 自动 执行命令 ， 可以 在 不 影响 网络 和 系统 性能 的 情况 下 纠正 问题 。 限制 节点 发现 功能 是 根据 文件 ， 可以 将 网络 发现 限制 在 指定 的 IP地址 范围 内 。 这 可 缩短 发现 时间 并 加快 资源 识别 和 启动 管理 的 速度 。 检查 分布 网络 状态 功能 是 利用 SystemMonitorforAIX 中级 管理器 MidLevelManager 检查 分布 网络 状态 。 　 结语 　 　 网络管理 平台 是 实现 网络管理 的 重要 基础 ， 其 结构 较为 复杂 ， 目前 的 产品 系列 也 比较 多样 。 随着 网络 技术 的 发展 ， 网管 平台 在 最近 也 有 了 较大 的 发展 ， 出现 了 一些 基于 Web 和 LDAP 目录 服务 的 网管 产品 。 这些 技术 的 应用 将会 是 网管 平台 向着 更为 智能化 ， 界面 更 友好 ， 管理 更 方便 的 方向 发展 。 作者简介 ： 颜凯 　 从事 因特网 网络管理 技术 的 开发 与 研究 。 张军 　 从事 计算机信息 网络 和 因特网 技术 的 开发 与 研究 。 作者 单位 ： 电子科技 大学 信息中心 　 四川 成都 （ ） 参考文献 ［ ］ 　 DavidMPeterson ， 著 TCPIP 连网 技术 IBM 网络 环境 指南 第一版 北京 ： 电子 工业 出版社 ， ： 收稿 日期 修改稿