微型机 与 应用 MICROCOMPUTERITSAPPLICATIONS 年 第卷 第期 VolNo 系统 功能 授权 控制 徐 东平 　 　 摘 　 要 ： 事务处理 系统 中 多级 口令 控制 及 功能 授权 控制 的 实现 原理 ， 实现 系统 功能 授权 控制 所 需 的 数据表示 和 基本功能 ， 并用 VFP 支持 语言 和 SQL 描述 了 控制 思想 。 　 　 关键词 ： 数据库 　 管理信息系统 　 授权 控制 　 　 个 庞大 的 事务处理 系统 ， 包含 着 多种 职能部门 的 多种 业务 活动 ， 各种 业务 活动 常 需要 相应 的 信息 保护措施 。 这些 系统 往往 是 在 分布式 数据库 及 网络 集成 环境 下 实现 的 。 为 便于 业务人员 交流 及 用户 在 不同 工作站 上 进入 系统 ， 可以 采用 系统 功能 授权 控制 方式 ， 使 不同 的 职能部门 或 工作 团体 仅能 进入 自己 享有 访问 权 的 系统 功能 ， 这 对于 保证 系统安全 极为重要 。 　 　 用户 使用 自己 的 口令 登录 ， 系统 按 用户 权限 ， “ 允许 ” 部分 功能 ， “ 禁止 ” 其它 功能 。 不同 用户 对应 不同 口令 级别 ， 口令 级别 可 分为 ： ① 系统 级 。 即 享有 所有 功能 使用 权限 ， 可 修改 所有 团体 口令 、 个人 口令 、 授权 及其 它 全部 功能 。 ② 团体 级 。 可 具有 自己 团体 口令 修改 功能 ， 接纳 本 团体 用户 ， 被 授予 其它 功能 。 ③ 一般 级 。 享有 被 授予 的 功能 ， 这些 功能 中 不能 享有 自己 团体 口令 修改 功能 及 接纳 本 团体 用户 功能 。 　 数据 描述 及 基本功能 　 　 以 VFP 集成 环境 为例 ， 用 VFP 语言 作 前台 开发 语言 ， 采用 按 口令 控制 进入 用户 享有 功能 实现 思想 ， 此 思想 可 支持 建立 在 WINDOWSNT 环境 下 ， 由 SQLSERVER 或 其它 大型 数据库 管理系统 作 后台 数据库 管理 的 事务处理 系统 ， 也 可 支持 单机 环境 下 的 事务处理 系统 。 　 　 在 VFP 菜单 定义 语句 中 ， 有 一可选 子句 “ SKIPFOR 逻辑 表达式 ” ， 当 此 逻辑 表达式 为 真时 ， 该 菜单 定义 项便 被 忽略 。 若 菜单项 被 忽略 ， 在 屏幕 上 见到 的 现象 是 相应 菜单项 被 暗化 ， 不能 被 选择 。 　 　 在 集成 开发 环境 IDE 的 菜单 设计 器中 ， 可以 用 鼠标 左键 点击 “ OPTION ” ， 并 在 随后 出现 的 对话框 “ SKIPFOR ” 选项 中 输入 逻辑 表达式 ， 此 逻辑 表达式 控制 着 菜单 中 相应 选项 的 有效性 。 　 　 基于 以上 子句 功能 ， 可以 令 每 一 菜单 功能 di 项 对应 个 逻辑 变量 contrxi 。 当 用户 登录 ， 即 系统 获得 用户 口令 时 ， 便 将 用户 允许 进入 的 功能 所 对应 的 菜单项 中 的 逻辑 变量 contrx 置成 “ 假 ” ， 其余 的 contrx 置成 “ 真 ” 。 　 　 要 实现 上述 控制 ， 需要 如下 信息 ： 　 　 表 F 记载 团体 名称 f 与其 口令 p ， 系统管理员 可 设置 F ， F 满足 ： 　 　 Ff ｜ f 是 组 人员 ， 或者 是 个 职能部门 ， f 唯一 拥有 口令 P 　 　 图为 F 的 关系 ， f 是 F 中 的 关键字 。 图 　 F 的 关系 描述 　 　 表 fr 记载 团体 f 及其 包含 的 成员 或 成员 口令 r ， 系统管理员 及 职能部门 负责人 可 设置 fr ， fr 满足 ： 　 　 fr ｜ r 是 f 的 成员 或 成员 口令 　 　 图为 fr 的 关系 ， f 与 r 是 fr 中 的 复合 关键字 。 图 　 fr 的 关系 描述 　 　 表 fd 记载 团体 f 可 享有 功能 d ， 系统管理员 可 设置 fd ， fd 满足 ： 　 　 fdd ｜ d ∈ 系统 全部 功能 ， f 可 享有 d 　 　 图为 fd 的 关系 。 f 与 d 是 fd 中 的 复合 关键字 。 图 　 fd 的 关系 的 描述 　 　 表 fc 记载 超级 口令 pp 唯一 存在 ， 但 也 可 看成 是 图 所示 的 关系 。 图 　 fc 的 关系 描述 　 　 以上 关系 也 可用 实体 关系 模型 图 ER 图 描述 ， 见图 。 图 　 实体 关系 模型 图 　 　 系统 中 应该 包括 下列 与 系统安全 有关 的 功能 ： 　 　 设置 自己 团体 口令 功能 d ： 显示 本 团体 名及 口令 ， 并 可 修改 口令 。 　 　 向 自己 团体 增加 用户 功能 d ： 显示 本 团体 名及 全体成员 ， 并 可 修改 或 删除 成员 。 　 　 设置 全部 团体 口令 功能 d ： 显示 全部 团体 名 及其 口令 包括 超级 口令 ， 并 可 修改 或 删除 团体 。 　 　 给 任一 团体 增加 用户 功能 d ： 显示 全部 团体 名及 所有 成员 名 ， 并 可 删 、 改 。 　 　 给 团体 授权 功能 d ： 给 任一 团体 指定 可 进入 功能 。 　 控制 思想 　 　 采用 团体 口令 P 包括 超级 口令 或 一般 用户 口令 R 登录 后 ， 相应 用户 享有 功能 确定 ， 可用 下面 的 子程序 subp 描述 ： 　 　 求 pP 享有 功能 ： 　 　 selectfddfromfdFwhereFpPandFffdfandpnotinselectpfromfcandnotinlistddd ‘ dorpinselectpfromfcintocursortemfounvarfountally 　 　 即 ： 持有 口令 P 的 用户 享有 varfoun 个 功能 ， 这些 功能 暂 存在 内存 文件 temfounl 中 。 　 　 求 rR 享有 功能 ： dimentionxselectdistinctfrffromfrwherefrrRintocarryxselectfddfromfdFwhereFfxandFffdfandnotinlistddddddintocursortemfounvarfoun － tally 　 　 即 ： 持有 口令 R 的 用户 享有 varfoun 个 功能 ， 这些 功能 暂 存在 内存 文件 temfoun 中 。 　 　 为 实现 菜单项 控制 ， 系统 中 可 建立 表 SYS ， SYS 中 建立 控制 数组 元素 c 与 系统 功能 d 对应 关系 如图 。 图 　 数组 元素 c 与 系统 功能 d 的 对应 关系 　 　 设 系统 包含 总 功能 数为 MAXF ， 控制 菜单项 程序代码 如下 ： 　 　 　 　 dosubp 　 　 foritoMAXF 　 　 　 　 contrxit 　 　 endfor 　 　 ifvarfoun 　 　 　 selectcfromsyswheredinselectdfromtemfounintocursortemfoun 　 　 else 　 　 　 selectcfromsyswheredinselectdfromtemfounintocursortemfoun 　 　 endif 　 　 scan 　 　 　 vartemc ‘ f 　 　 　 vartem 　 　 endscan 　 功能 保护 强度 　 　 上述 功能 保护 强度 ， 取决于 系统 中 口令 的 保密 强度 。 根据 以上 数据 说明 可知 ， 多级 口令 全在 表中 。 为 提高 口令 的 保密 强度 ， 可以 将表 F 中 各 元组 的 p 属性 值 、 表 fr 中 各 元组 的 r 属性 值 采用 密文 存放 ， 在 控制 菜单项 程序代码 中 ， 将 其 转为 明码 在 内存 临时 表中 保存 ， 然后 采用 上述 控制程序 。 关于 明文 与 密文 间 的 变换 问题 ， 本文 不 作 详细 讨论 。 作者 单位 ： 武汉 交通 科技 大学 计算机系 参考文献 　 　 MicrosoftSQLSERVER 管理员 指南 北京 ： 科学出版社 ， 龙门 书局 ， 　 　 运通 创作室 VisualFoxPro 语言 实用 详解 北京 ： 学苑 出版社 ， 收稿 日期 ：