自动化 学报 ACTAAUTOMATICASINICA 年 第卷 第期 VolNo 一种 基于 摄像机 模型 的 畸变 图象 校正 方法 王亚东 　 丁明跃 　 彭嘉雄 关键词 　 像机 模型 ， 像机 定标 ， 畸变 图象 校正 CORRECTIONOFDISTORTEDIMAGEBASEDONCAMERAMODELWANGYADONG 　 　 DINGMINGYUE 　 　 PENGJIAXIONGInstituteofPatternRecognitionArtificialIntelligenceHuazhongUniversityofScienceandTechnologyWuhanKeywords 　 Cameramodelcameracalibrationdistortedimagecorrection 　 引言 　 　 在 图象 分析 和 图象 匹配 中 ， 为了 获得 大 视场 图象 ， 需要 使用 广角镜头 但是 ， 这会 导致 图象 发生 畸变 ， 直接 影响 了 对 图象 的 理解 和 匹配 性能 ， 因此 必须 对 它 进行 校正 年 ， AGoshtasby ［ ］ 提出 了 一种 利用 理想 图象 和 畸变 图象 之间 的 转换 曲面 对 畸变 图象 进行 校正 的 方法 ， 然而 转换 曲面 难以获得 本文 从像机 针孔 模型 中 得出 图象 畸变 是 由 像 机 的 非线性失 真 系数 α 和 α 产生 的 Tsai ［ ］ 和 许志祥 等 ［ ］ 研究 了 像 机 内外 参数 的 定标 方法 ， 但 这些 方法 必须 求解 像机 模型 的 非线性 方程 本文 提出 了 一种 利用 实验 将 该 非线性 方程 简化 为 线性方程 ， 从而 直接 求解 α 和 α 的 方法 ， 并 采用 视场 角为 ° 广角镜头 的 CCD 摄像机 所 拍摄 的 图象 进行 了 校正 实验 ， 获得 了 令人满意 结果 　 图象 畸变 的 产生 　 　 图象 畸变 是 指 图象 的 形状 发生 了 变化 ， 如 直线 变 弧线 ， 矩形 变桶 形 等等 为 分析 其 原因 ， 首先 介绍 一下 像机 模型 常用 的 像 机 模型 是 针孔 模型 ， 如图所示 假定 xcyczc 为 像 机 坐标系 ， oc 与 像 机 的 针孔 重合 ， zc 与 像 机 的 靶面 即 像 平面 垂直 ， 设像 平面 坐标系 为 XOY ， xwywzw 为 测量 坐标系 测量 坐标系 与 像 机 坐标系 之间 可以 用 旋转 矩阵 R 和 平移 矢量 来 确定 ， 即 对 空间 一点 Pxcyczc 有图 　 摄像机 模型 　 　 根据 文献 ［ ］ ， 忽略 高阶 项 ， 则 像 机 模型 为 其中 f 为 像 机 焦距 ， xwywzw 为 空间 某 一点 的 测量 坐标 ， xy 为 像 平面 上 对应 于 xwywzw 点 的 像 点 坐标 ， xHyH 为 焦点 偏差 ， a 和 a 为 像 机 的 非线性失 真 系数 ， 为 像 点 的 径向 距离 对 大小 为 MXN 的 离散 图象 来说 ， 设 ij 为 图象 上 离散 坐标值 ， Sx 和 Sy 分别 表示 靶面 水平 和 垂直 标度因子 ， 则 上式 中 　 　 由 上式 可知 ， 影响 成像 的 要素 有 和 a ， a 称为 像机 的 外 参数 ， fxHyHSxSyaa 为 像 机 的 内 参数 ， 其中 像 机内 参数 是 由 像 机 本身 所 决定 的 为了 简化 分析 ， 先 不 考虑 像 机外 参数 及 xH ， yH 的 影响 ， 则 ， 式 变为 　 　 ， 式 表明 空间 一点 P 的 坐标 与 图象 上 对应点 P ′ 的 坐标 之间 的 关系 是 非线性 的 ， 因此 图象 发生 畸变 ， 可见 ， 畸变 是 由于 a 和 a 引起 的 ， 一般来说 ， a 和 a 均 大于 ， 此时 矩形 畸变 成桶 形当 考虑 像机 的 外 参数 时 ， 图象 不仅 存在 桶 形 失真 ， 还有 旋转 失真 和 平移 失真 本文 主要 考虑 桶 形 失真 　 像机 定标 方法 　 　 所谓 像机 定标 ， 就是 要 找出 像机 的 内外 参数 本文 是 为了 解决 畸变 图象 的 校正 问题 ， 因此 只要 找到 a 和 a 即可 由 文献 ［ ］ ， xHyH 不会 引起 明显 的 定标 误差 ， 故设 xHyH 又 设 R 为 单位矩阵 即 无 旋转 ， Sx 和 Sy 可 通过 测量 靶面 得到 ， 则 ， 式 为 　 　 ， 式 中 只有 一个 方程 是 独立 的 ， 因此 ， 利用 三组 对应点 即可 求解 a 和 a 　 　 由于 txty 为定值 ， 因此 可 归入 xwyw 中 ， 当 对应点 的 坐标 及 tz 均 已知 时 ， 即可 方便 地 得到 a 和 a 为此 ， 设计 了 如下 实验 ： 找 一 平面 物体 ， 对 平面 上 的 点 ， tz 为 一定 值 ， 故可 归入 zw 中 ； 使 像 平面 与 该 物体 平面 平行 ， 消除 Z 轴 方向 旋转 ； 保证 在 平面 上 无 旋转 ； 摄取 一幅 图象 ； 找到 图象 上 与 物体 平面 上 的 至少 三组 对应点 ， 并量 出 它们 的 坐标 ， 分别 记为 xiyixwiywizwi 测量 zwSx 和 Sy ； 对 每 一组 对应点 ， 代入 或式 ， 利用 最小 二 乘法 ， 找到 以式 为 例为 最 小时 的 估计值 ， 作为 a 和 a 的 真实 值 　 　 当 不 满足条件 ， 时 ， 所得 a 和 a 将 存在 估计 误差 设 测量 坐标系 与 像 机 坐标系 X ， Y ， Z 轴 之间 的 夹角 分别 为 α ， β ， γ ， 则 旋转 矩阵 R 不为 单位矩阵 ， 导致 ， 式 中 xwywzw 发生变化 将 变化 后 的 值 对 a 和 a 重新 估计 ， 当 α ， β ， γ 变化 小于 ° 时 ， a 和 a 变化 均 在 以内 ， 这 对 畸变 图象 的 校正 来说 是 可以 接受 的 　 畸变 图象 校正 方法 　 　 图象 畸变 是 由 a 和 a 所 引起 的 ， 它们 主要 使 图象 上 坐标 点 的 位置 发生变化 ， 而 对 相应 点 的 灰度级 无 影响 ， 因此 ， 几何 校正 就是 使 畸变 图象 上 的 点 恢复 到 无 失真 时 的 位置 上该 位置 由 假想 中 的 理想 像机 与非 理想 像机 在 同一 条件 下 拍摄 决定 ， 设用 非 理想 像机 拍摄 时 某点 坐标 为 xdyd ， 用 理想 像 机则 为 xuyu ， 不妨 设 xHyH 则 由 ， 式 得 xuxdararyuydarar 从 ， 式 可以 看出 ， xuyu 与 xdyd 之间 并非 都 一一对应 整数 ， 因此 ， 需要 对 那些 无 整数 对应点 的 点 进行 插值 ， 本文 中 利用 八 邻域 均值 代替 插值 　 实验 结果 　 　 本文 对 一种 带有 视场 角为 ° 的 广角镜头 的 CCD 像机 进行 了 实验 ， 取组 对应点 ， 并测 得 zwmm 采用 本文 提出 的 定标 方法 ， 得到 a ， a 用 它们 对 该 像 机 摄取 的 畸变 图象 进行 校正 ， 如图 ， 所示 从图 可以 看出 ， 场景 中 的 物体 有 明显 的 桶 形 失真 ， 图为 校正 后 的 图象 ， 失真 基本 消除 。 可见 ， 校正 结果 良好 图 　 桶 形 失真 图象 图 　 校正 后 的 图象 作者 单位 ： 华中理工大学 图象识别 与 人工智能 研究所 　 武汉 　 参考文献 ［ ］ 　 GoshtasbyACorrectionofimagedeformationfromlensdistortionusingbezierpatchesCVGIP — ［ ］ 　 TsaiRYAVersatilecameracalibrationtechniqueforhighaccuracyDmachinevisionmetrologyusingofftheshelfTVcamerasandlensesIEEEJournalofRoboticsandAutomation — ［ ］ 　 许志详 等 摄像机 定标 及其 误差 分析 自动化 学报 ， ， ： — 收稿 日期 ：