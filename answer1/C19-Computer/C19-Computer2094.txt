计算机 工程 COMPUTERENGINEERING 年 第卷 第期 VolNoJadmine 多媒体信息 的 Web 发布 邓劲生 　 张银福 　 赵振宇 摘要 ： 简要 分析 使用 面向对象 方法 ， 在 Intermet 上 基于 Web 发布 Jasmine 数据库 多媒体信息 的 可行性 和 特点 ， 并 给出 一个 网站 的 构造 步骤 。 关键词 ： Jasmine ； 面向对象 ； Web ； 多媒体 WebbasedPublicationofJasmineMultimediaInformationDengJinshengZhangYinfuZhaoZhenyuNationalUniversityofDefenseTechnologyCangsha 【 Abstract 】 ThispaperanalysisWebbasedpublicationofJasminedatabasemultimediainformationusingobjectorientedmethodthengivesoutanexampleimplicationofaWebsite 【 Keywords 】 JasmineObjectorientedWebMultimedia 　 多媒体数据库 与 面向对象 技术 的 结合 　 　 年代 以来 多媒体数据库 技术 得到 长足发展 ， 声音 、 图象 、 音频视频 的 采样 与 数模转换 及 存储 问题 基本 解决 ， 各种 独立 媒体 的 数据库 管理系统 的 出现 和 研究 为 媒体 之间 共存 与 互连 提供 了 技术 基础 ， 大量 超媒体 系统 、 多媒体 文档 系统 等 多媒体 应用 发展 起来 。 　 　 但是 ， 当今 多媒体数据库 系统 原型 多 是 以 某种 特定 应用 为 背景 设计 系统 和 功能 。 由于 不同 媒体 物理性质 各异 ， 多媒体 的 应用 类型 也 千差万别 。 当前 研究 的 主要 问题 有 ： 　 　 · 多媒体信息 建模 ， 为 多媒体 数据 提供 统一 的 数据模型 。 在 WWW 中 ， 数据结构 难以 套用 固定 的 格式 ， 从而 有 必要 建立 无 模式 自定义 模式 数据库 管理 措施 。 　 　 · 多媒体 数据 的 索引 、 检索 、 存取 和 组织 技术 。 当前 数据库 管理系统 日渐 庞大 ， 比较 好 的 解决方案 是 采取 数据库 组件 的 方式 ， 用户 可 根据 不同 需求 选用 不同 组件 实现 DBMS 的 模块 构造 ， 提供 良好 的 可扩展性 。 　 　 · 多媒体 数据 查询 ， 特别 是 按 内容 查询 。 在 获得 数据源 的 同时 ， 捕获 和 处理 与 质量 有关 的 元 数据 ， 实现 非 精确 查询 。 　 　 传统 的 关系数据库 RDB 曾 占据 统治 地位 ， 但 由于 缺乏 多媒体 数据 的 存储 和 操作能力 ， 如 存储 、 缓冲 、 并发 、 恢复 、 操纵 等 ， 在 应用 中 越来越 显示 出 不足 。 由于 数据库 语言 是 描述性 的 非 过程 化 语言 ， 而 宿主 语言 是 命令式 的 过程 化 语言 ， 数据库 语言 和 嵌入 的 宿主 语言 之间 存在 不 匹配 的 问题 。 RDB 采用 面向 数值 、 面向 记录 的 数据模型 ， 缺乏 灵活 的 建模 模式 演化 能力 ， 而 这些 对于 多媒体 应用 是 必须 的 。 　 　 关系 模型 擅长 数据 本身 的 组织 ， 而 对象 模型 擅长 数据结构 的 组织 。 面向对象 数据库 OODB 将 更 多 的 语义 嵌入 到 数据模型 中 。 在 关系 模型 中 ， 真实世界 被 强制 地 映射 成表 的 集合 一组 平面 关系 ， 因此 复杂 对象 的 许多 语义 如 聚合 、 特化 等 都 被 丢失 。 一方面 ， 面向对象 模型 允许 定义 任意 复杂 的 数据类型 ， 通过 它 来 模型 化 真实世界 的 静态 特性 ； 另一方面 ， 模型 提供 与 对象 类型 相关联 的 操作 ， 利用 它 来 记录 对象 的 动态 特性 。 对于 多媒体数据库 来说 ， 库中 的 一条 数据 只有 放在 上下文 中才 有 意义 或 更好 地被 理解 ， 只能 采用 面向对象 数据库 来 表达 。 同时 ， 面向对象 技术 提出 了 对 多媒体数据库 上述 问题 的 解决方案 。 　 　 多媒体数据库 和 面向对象 技术 的 结合 ， 是 当前 着力 研究 的 课题 。 目前 国内 对于 面向对象 数据库 的 研究 还 处于 起步 阶段 ， 有关 的 开发 大多 基于 单机 或多机 简单 CS 结构 。 随着 Internet 的 流行 、 多媒体 数据量 的 剧增 、 面向 IntranetWeb 的 应用 需求 变得 更为 紧迫 。 为此 ， 使用 CA 公司 刚 推出 的 纯 面向对象 数据库系统 Jasmine ， 对 面向对象 技术 和 多媒体数据库 的 底层 结合 进行 研究 ， 并 在 网上 构造 起 一个 内部人员 档案 查询 管理系统 。 　 Jasmine 数据库 的 纯 面向对象 特性 　 　 当前 主流 关系数据库 管理系统 的 厂商 几乎 都 在 其 成熟 的 关系 型 数据库 RDBMS 上 建立 对象 编程 功能 层 ， 加入 对象 功能 ， 把 RDBMS 转换成 对象 关系 DBMSO － RDBMS ， 以 对象 关系数据库 面向市场 。 但 包含 非 兼容 的 数据库 模式 ， 最终 将 导致 性能 、 功能 和 使用 等 各 方面 过多 的 折衷 。 　 　 与 大多数 数据库 厂商 不同 ， CA 直接 推出 纯粹 的 面向对象 的 Jasmine 数据库系统 。 面向对象 数据库 管理系统 OODBMS 是 为了 提供 高性能 多媒体 和 其它 复杂 数据 而 设计 的 。 它 保持 了 有关 多媒体 和 其它 复杂 对象 的 元 信息 ， 对于 Internet 环境 下 的 电子商务 、 在线 交易 等 应用 ， 对象 数据库 可 提供 比 传统 数据库系统 高得 多 的 性能 。 　 　 Jasmine 是 一种 综合 工具 ， 提供 用户 在 Internet 上 简单 方便 地 访问 多媒体数据库 的 途径 ， 支持 多 操作系统 平台 和 对称 多处理机 ， 主要 用于 多媒体 和 基于 Web 的 数据库 设计 。 它 集中 了 CA 系统管理 技术 和 FUTITSU 核心 对象 引擎 技术 ， 并用 面向对象 的 方式 结合 了 SQL 类库 以 解决 对 传统 数据 的 存取 问题 。 它 为 数据库 服务器 和 Web 服务器 提供 中间件 WebLink ， 使用 对象 数据库 查询语言 ODQLObjectDatabaseQueryLanguage ， 支持 通过 HTTP 服务器 访问 Jasmine 。 　 　 纯 面向对象 型 数据库系统 ， Jasmine 的 底层 引擎 是 基于 对象 处理 的 ， 而 非 底层 对象 引擎 方法 的 处理 一般 在 代码 和 速度 性能 上 劣于 底层 对象 引擎 。 面向对象 数据库 在 引擎 中 使用 了 对象 高速缓存 、 对象 标识符 切换 等 技术 ， 并 具有 定义 与 性能 相关 某些 特征 的 能力 ， 例如 聚簇 。 数据库 直接 储存 对象 ， 在 检索 时以 OIDObjectID 进行 全局 定位 ， 把 整个 对象 直接 、 完整 地 读入 内存 进行 处理 ， 以 提高 处理 数据 时 的 性能 。 　 　 一些 在 关系 模型 数据库 中 没有 很 好 解决 的 问题 ， Jasmine 处理 得 较 好 。 如 ： 关系数据库 缺少 处理 不 确定 型 和 模糊 型 数据 的 即席 查询 能力 ， 结构化 SQL 语句 对于 模糊 类型 的 查询 无能为力 。 Jasmine 的 ODQL 语句 可 十分 方便 地 进行 这种 查询 ， 特别 在 底层 有 知识 工程 支持 的 情况 下 。 长 事务 是 多 数据库 环境 的 自然 产物 ， 用 传统 事务处理 方法 管理 长 事务 会 产生 许多 严重 问题 ， 诸如 死锁 可能性 高等 ， 使用 ODQL 则 能够 得到 较 好 的 效果 。 面向对象 方法 还 可以 很 好 地 处理 在 分布 环境 中 的 修改 同步 问题 。 　 　 与 面向 关系数据库 的 概念 如表 Table 、 记录 Record 、 列 Column 等 不同 ， Jasmine 以类族 ClassFamily 、 类 Class 、 实例 Instance 、 属性 Method 等 取代 。 下 例 定义 了 媒体 类族 mediaCF 中 文件名 为 JPG 的 图象 文件类型 UsrJpgFile ： 　 　 defaultCFmediaCF 默认 类族 为 mediaClassFamily 　 　 defineClassUsrJpgFile 　 　 　 supermediaCFMMImageFile 　 　 　 从 高层 图像 类 MMImageFile 中 继承 　 　 descriptionJpgClass 　 　 　 　 instance 　 　 　 　 Stringformattypedefaultjpg 　 　 　 　 buildClassUsrJpgFile 　 　 如下 定义 了 媒体 类族 article 中 Author 类 ， 属性 为 作者姓名 、 年龄 、 性别 和 相片 ， 其中 相片 属性 使用 了 刚才 添加 类 UsrJpgFile 的 媒体 类族 mediaCF ， 可以 支持 JPG 图片 。 　 　 defaultCFarticle 　 默认 类族 为 article 　 　 defineClassAuthor 　 　 　 　 instance 　 　 　 Stringname 　 　 　 Integerage 　 　 　 Stringsex 　 　 mediaCFMMFileimage 定义 指向 相片 的 媒体文件 实例 　 　 　 　 　 　 　 　 　 　 　 　 　 本 处 使用 的 相片 可为 JPG 图像 　 　 　 　 buildClassAuthor 　 使用 WebLink 连接 Jasmine 数据库 　 　 为了 开发 Internet 上 的 多媒体数据库 资源 ， 对于 数据库 方面 来说 ， 需要 把 带有 图象 、 声音 等 多媒体信息 的 商业 数据库 技术 和 类似 于 传统 的 数据库 引擎 的 健壮性 要求 结合 起来 ， 并 适合 WWW 浏览器 的 使用 要求 。 为此 Jasmine 使用 WebLink 作为 Web 与 数据库 间 的 中间件 ， 以 适合 网上 发布 多媒体信息 。 　 　 在 通常 的 WWW 交互 中 ， 没有 用户 会晤 usersession 概念 。 为了 对 不同 类型 用户 提供 特定 的 对话 ， 服务器 需要 保留 用户 以前 动作 的 轨迹 ， 以 保证数据 的 安全 和 完整 。 有鉴于此 ， WebLink 实现 了 用户 会晤 过程 。 会晤 键 作为 组成部分 自动 包含 在 URL 中 ， 登录 后 从 同一 地址 发出 的 请求 被 认为 属于 同一 会晤 。 　 　 这一 途径 在 执行 WebLink 命令 时 开始 激活 ， 同时 建立 一条 Jasmine 数据库 会晤 通道 。 在 用户 对 数据库 请求 查询 或 其他 操作 时 ， WebLink 会晤 负责 用户 和 目的 数据库 之间 的 交互 。 直到 WWW 客户端 要求 关闭 会晤 或者 特定 时间 超过 timeout ， 数据库 会晤 即 和 WebLink 会晤 同时 关闭 。 　 　 WebLink 有 两种 实现 途径 ： CGI 和 NSAPI 。 CGI 可以 使用 在 所有 支持 CGI 的 Web 服务器 上 ， 而 NSAPI 仅 可 使用 于 Netscape 服务器 。 WebLink 提供 了 和 传统 CS 解决方案 相同 的 安全性 级别 ， 使 组织 能 建立 起 一个 面向 顾客 的 信息 服务 系统 。 充分利用 企业 数据库 中 存储 的 文本 、 数字 和 多媒体 数据 如 图象 、 声音 和 动画 ， 企业 为 顾客 提供 最具 说服力 的 信息 。 WebLink 使得 信息 为 许多 地点 共有 ， 如 分布 在 全国 各地 的 公司 销售 人员 通过 Intranet 可以 共享 存货 信息 等 数据 ， 每个 销售 人员 能 实时 地 查询 库存 ， 以 更好 地 作出 决策 及 加快 向 顾客 发布 信息 的 速度 。 　 　 从 逻辑 上 来讲 ， 使用 WebLink 访问 Jasmine 数据库 大致 过程 为 ： 用户 访问信息 服务 WebServer 的 登录 页面 loginpage ， 该 页面 包含 进入 服务 的 超 连接 ， 通过 点击 连接 开始 本次 WebLink 会晤 ； 首先 向 用户 展示 的 是 该 会晤 的 主 页面 homepage ， 它 包括 指向 若干项 服务 的 连接 ， 每个 连接 向 WebLinkServer 传递 所 使用 的 模板 template 标识符 作为 参数 ； DatabaseServer 通过 调用 WebLink 的 CGI 程序 对 Jasmine 数据库 进行 操作 ， 完成 数据 事务 并 返回 结果 数据 给 WebLink ； WebLink 调用 用户 选中 的 服务 所 需要 的 模板 ， 解释 其中 特殊 的 专用 标记 ， 把 从 底层 接收 到 的 数据 按照 模板 进行 格式化 ， 动态 生成 一个 普通 的 HTML 页面 传给 WebServer ； WebServer 将 该 页面 返回 用户 ， 从而 完成 一次 WebLink 会晤 ； 在 会晤 过程 中 ， 信息 服务 提供 用户 随时 退出 登录 的 功能 。 　 建立 多媒体信息 服务 站点 的 步骤 　 　 WebLink 信息 服务 由 应用程序 环境 总控 会晤 的 各项 行为 参数 ， 整个 站点 由 登录 页面 、 主 页面 和 一系列 在 Jasmine 数据库 WebLink 对象 族 中 注册 的 模板 组成 。 运用 WebLink 连接 Jasmine 数据库 发布 多媒体信息 ， 大致 需要 经过 个 步骤 ： 建立 应用程序 环境 Environment 　 　 应用程序 环境 由 控制 WebLink 软件 实时 行为 的 一系列 参数 组成 。 包括 WebLink 服务器 访问 的 指令 目的 数据库 名 和 所 使用 的 访问 日志 及 错误 日志 文件名 。 　 　 将 WindowsNT 中 环境参数 置于 注册表 中 ， 用 WebLink 环境 编辑器 来 创建 和 修改 。 用 唯一 的 标识符 为 不同 的 应用 创建 不同 的 应用环境 。 该 标识符 在 登录 页面 loginpage 中 作为 CGI 程序 odbloginexe 的 参数 用来 指定 应用环境 。 创建 登录 页面 Loginpage 　 　 登录 页面 是 一个 HTML 页面 ， 其 URL 即为 信息 服务 的 入口 。 用户 可以 从 浏览器 中 选择 这一 地址 进入 信息 服务 。 在 登录 页面 中 应该 包含 WebLink 登录 命令 obdlogin ， 让 用户 能够 开始 一组 WebLink 会话 和 Jasmine 会话 。 　 　 登录 页面 中 服务器 可以 询问 用户 帐号 和 密码 。 如果 希望 该项 服务 对 一般 公众 开放 ， 可以 使用 应用程序 环境 中 的 内置 帐号 和 密码 ， 一般 浏览器 用户 即可 直接 通过 点击 超链接 进入 服务 。 创建 主 页面 Homepage 　 　 一旦 用户 登录 并 选择 开始 服务 ， 将 显示 主 页面 。 主 页面 是 WebLink 编辑器 指定 应用环境 中 homepage 键 定义 的 HTML 文件 ， 使 用户 能 提出 对 数据 的 请求 。 它 可以 包括 对 数据 进行 查询 和 交易 的 菜单 。 例如 ： 选择 哪 种 查询 方式 ， 如人名 列表 或 地名 列表 ； 选择 要 执行 的 指令 ， 如 显示 指定 哪个 人 的 相片 。 　 　 在 主 页面 中 必须 包括 下列 WebLink 命令 ： 　 　 · ODBGET 用于 指明 将 执行 的 模板 ， 参数 WITtemplate 指明 WebLink 调用 的 模板 标识符 。 　 　 · ODBLOGOUT 用于 结束 本次 WebLink 服务 会晤 ， 参数 WIThtml 指明 结束 后 显示 给 用户 的 页面 。 　 　 如果 构造 的 是 简单 查询 服务 ， 不 需要 客户 进行 任何 选择 也 可以 不用 主 页面 ， 而 在 登录 页面 中 包含 ODBGET 命令 使 结果 能 立即 显示 ； 在 构造 结果 页面 的 模板 中将 ODBLOGOUT 命令 作为 可选项 。 创建 模板 Template 　 　 每个 模板 创建 时 是 一个 带有 WebLink 扩展 标记 的 HTML 文档 ， 在 WebLink 对象 库 注册 后 成为 WebLink 库中 的 一个 实现 ， 通常 使用 TemplateManage 来 管理 和 编辑 。 　 　 WebLink 模板 作为 Jasmine 数据库 的 一类 特殊 类族 ， 起 着 对 数据 进行 视图 管理 的 作用 。 用于 定义 使用 什么 数据库 ， 以及 怎样 将 从 Jasmine 数据库 底层 传回 的 数据 进行 格式化 ， 即 如何 动态 构造 返回 页面 ， 向 用户 显示 数据 操作 的 结果 。 对于 用户 而言 ， 浏览器 看到 的 只是 当 模板 被 解释 执行 后 生成 的 普通 HTML 页面 ， 屏蔽 了 数据库 查询 的 实现 细节 ， 按照 用户 帐户 级别 构造 不同 的 返回 页面 ， 使用 用户 视图 来 保证数据 的 安全性 。 　 　 模板 使用 ODQL 语句 从 对象 库中 查询 符合 用户 所 提条件 的 信息 ， 并 按照 某种 格式 展示 给 用户 。 它 使用 WebLink 标记 FOREACH 来 循环 读取 数据库 中 的 每个 实例 ， 生成 输出 表格 中 的 一行 。 实例 中 的 每个 属性 作为 表格 中 的 一列 ， 其中 以 其他 对象 Class 作为 属性 的 使用 标记 URL 写成 超 连接 形式 ， 指向 另 一 模板 执行 。 　 　 图象 、 声音 等 多媒体信息 作为 对象 存储 在 数据库 中 ， 同时 作为 其他 对象 的 属性 。 WebLink 标记 MEDIA 指明 该 媒体 归属 的 类族 ， 以 调用 正确 的 媒体播放器 组件 。 如 使用 IMGSRCMEDIAselfimageimagejpgALIGNTOP 即可 调用 数据库 中 JPG 图像文件 送往 客户 浏览器 。 　 小结 　 　 面向对象 方法 的 发展 成熟 ， 正向 数据库 技术 渗透 结合 。 Jasmine 采用 纯 面向对象 方法 管理 数据 ， 适合 于 网上 多媒体信息 的 使用 和 发布 ， 是 一种 较 好 的 解决方案 。 运用 Jasmine 数据库 ， 已 初步 构造 起 一个 内部人员 档案管理 查询 系统 ， 数据库 中 既有 文本 、 数字 等 普通 数据类型 ， 又 有 图象 、 声音 、 HTML 文档 和 WORD 文件 等 多种 媒体 信息 ， 基于 Web 进行 管理 和 更新 ， 运行 情况 良好 。 作者简介 ： 邓劲生 （ ～ ） ， 男 ， 研究生 ， 主研 方向 为 网络 数据通信 作者 单位 ： 国防科技大学 ， 长沙 参考文献 CAFUJITSUJADEHelponIineCAFUJITSUWebLinkUserManualKenNorth 陈乃江译 面向对象 的 数据库 程序设计 北京 ： 电子 工业 出版社 收稿 日期 ：