软件 学报 JournalofSoftwareVolNoP 基于 移动 代理 的 主动 网络 曾小平 　 孙永强 　 谢 建华 摘 　 要 　 在 介绍 主动 网络 的 基础 上 提出 了 一个 在 移动 代理 系统 基础 上 建立 的 安全 而 高效 的 主动 网络系统 框架 MANetmobileagentsbasedactivenetwork 通过 将 程序代码 和 数据 封装 成 主动 数据包 在 主动 结点 上 作为 代理 来 运行 这个 框架 实现 了 集成化 的 主动 网络 ， 并且 通过 基于 CodeBroker 的 代码 装载 和 缓存 技术 改善 了 整个 主动 网络 的 性能 和 灵活性 关键词 　 主动 网络 移动 代理 主动 结点 主动 数据包 代码 装载 中图法 分类号 　 TPActiveNetworkonMobileAgentsZENGXiaoping 　 SUNYongqiang 　 XIEJianhuaDepartmentofComputerScienceandEngineering 　 ShanghaiJiaotongUniversity 　 Shanghai 　 Abstract 　 BasedontheintroductionofactivenetworktheMANetmobileagentsbasedactivenetworkispresentedasasecureandefficientactivenetworksystemconstructedonthemobileagentssystemItimplementsintegratedactivenetworksbycapsuletheprogramcodeanddataintoanactivepackagewhichcanrunonactivenodeasanagentAlsotheperformanceandflexibilityofactivenetworkareimprovedbytheondemandcodeloadingandcachingbasedontheCodeBrokerKeywords 　 Activenetworkmobileagentactivenodeactivepackagecodeloading 　 　 在 传统 的 计算机网络 中 网络 被动 地 将 数据 从 一个 系统 传送 到 另 一个 系统 网络 中 的 网络 结点 如 网关 、 网桥 或 路由器 的 计算能力 是 非常 有限 的 通常 它 只能 对 数据包 进行 简单 的 处理 如 包交 网络 中 的 报头 处理 、 面向 连接 网络 中 的 信号处理 等 这种 被动 的 网络结构 存在 许多 问题 ： 首先 是 很 难 将 新 技术 和 新 标准 集成 到 现有 的 共享 网络 基础设施 中 ； 其次 ， 多层 协议 的 协议 层 之间 的 冗余 操作 降低 了 网络系统 的 性能 ； 并且 在 这种 网络 中 增加 新 服务 也 是 非常 困难 的 ［ ］ 因此 从 年 以来 在 DARPAdefenseadvancedresearchprojectsagency 的 支持 下 ， 人们 开始 研究 更加 开放 、 性能 更 高 的 网络结构 主动 网络 activenetwork 就是 以 解决 上述 计算机网络 所 遇到 的 问题 为 目标 的 开放式 网络结构 　 　 本文 首先 介绍 了 主动 网络 及其 结构 和 应用 以及 研究 现状 在 此基础 上 提出 了 一种 利用 移动 代理 mobileagent 技术 来 建立 主动 网络 的 方法 进而 提出 利用 CodeBroker 来 实现 主动 网络 中 程序代码 的 动态 按 需 装载 实现 高性能 的 主动 网络 　 主动 网络 activenetwork 　 　 在 主动 网络 中 网络 结点 对 流经 本地 的 消息 能 进行 客户 化 的 计算 例如 一个 用户 可以 向 某些 路由器 发送 “ trace ” 程序 以便 在 数据包 经过 这些 结点 时 执行 该 “ trace ” 程序处理 该 数据包 以 实现 路由 跟踪 也就是说 主动 网络 中 的 网络 结点 具有 计算能力 它 能 对 流经 本地 的 数据 进行 计算 和 修改 这种 计算 可以 是 基于 每个 用户 、 每个 应用 或者 是 其他 需求 的 通过 这种 可编程 的 网络结构 新 标准 、 新 技术 的 采用 变得 迅速 而 简单 从而 加快 了 计算机网络 发展 的 步伐 ［ ］ 　 主动 网络 　 　 主动 网络 中 的 网络 结点 具有 计算能力 它 对 流经 本 结点 的 数据包 进行 客户 化 的 计算 如图所示 具有 计算能力 的 网络 结点 从 网络设备 接收 数据包 后 执行 相应 的 程序 对 该 数据包 进行 处理 如 路由 选择 、 数据 合并 、 数据 解包 等 然后 将 数据包 可能 已 被 修改 发送给 其他 网络 结点 网络 结点 的 计算能力 使得 主动 网络 结点 本身 具有 可编程 性 从而 使得 整个 网络结构 也 是 可编程 的 Fig 　 Datatransferonactivenetwork 图 　 主动 网络 的 数据 传送 　 　 实现 这种 可编程 的 主动 网络 主要 有 以下 两种 方法 ［ ］ 一种 是 数据 的 处理 同 处理程序 注入 网络 结点 的 过程 分离 的 离散 方法 ［ ］ 用户 需 预先 将 数据包 处理程序 传送 给 数据包 要 经过 的 每个 网络 结点 之后 ， 当 相应 的 数据包 经过 该 网络 结点 时 网络 结点 通过 检查 该 数据包 的 报头 来 决定 调用 相应 的 处理程序 对 它 进行 处理 这种 处理 方式 通过 由 报头 决定 报文 内容 的 处理程序 提供 了 一定 的 客户 化 计算能力 对于 需要 严格控制 所 装载 程序 以及 客户 化 程序 比较 大 的 场合 这种 离散 的 方法 是 非常 有效 的 　 　 另 一种 更加 灵活 也 更为 “ 野心勃勃 ” 的 方法 是 集成化 方法 ［ ］ 即 每个 数据包 都 是 由 程序代码 和 数据 组成 的 程序 当 数据包 到达 某个 网络 结点 后 数据包 所 携带 的 程序代码 被 执行 ， 以 处理 数据包 所 携带 的 数据 这 就 像 PostScript 打印机 对 传送 给 它 的 PostScript 文件 的 解释 执行 一样 ［ ］ 这种 方法 具有 更大 的 灵活性 和 可编程 性 ， 但 也 更为 复杂 可 移动 代码 和 可编程 结点 等 技术 的 发展 为 这种 集成化 的 方法 提供 了 坚实 的 基础 　 主动 网络 的 优点 及其 应用 　 　 Internet 的 发展 对 计算机网络 内部 的 计算 提出 了 新 的 需求 提供 满足 这些 需求 的 服务 要求 网络结构 能 对 自身 进行 调整 但是 传统 的 计算机网络 结构 不能 很 好 地 满足 这 类 需求 在 传统 的 计算机网络 中 实现 新 技术 从 实验室 原型 到 大规模 应用 的 转变 过程 需要 大约 年 时间 这个 过程 包括 标准化 、 进入 硬件 生产商 的 硬件 产品 、 相关 程序 的 开发 和 用户 的 安装 调试 等 在 主动 网络 中 网络 结点 对 每个 数据包 的 处理 都 是 针对 用户 、 应用 或者 其他 需求 的 网络 内部 的 计算能力 得到 了 充分 的 体现 多种 网络协议 可以 共存 通过 增加 新 的 协议 处理程序 网络协议 的 兼容性 和 更新 能力 都 得到 了 很 好 的 支持 从而 也 提高 了 网络 互操作性 的 抽象层次 通过 提供 实现 新 服务 的 程序 主动 网络 就 能 为 用户 提供 这种 新 的 服务 这样 ， 网络服务 的 更新 就 取决于 市场 的 接受 能力 ， 而 不再 是 网络设备 生产厂家 的 产品 更新 能力 它 使得 网络结构 从 传统 的 软件 和 硬件 捆绑 在 一起 的 “ 主机 ” 模式 转变 为 软件 和 硬件 分离 的 “ 虚拟 ” 模式 从而 形成 了 功能强大 的 网络平台 　 　 目前 Internet 对 计算机网络 内部 的 计算能力 提出 需求 的 应用领域 主要 有 消息 的 合并 与 分布 、 用户 化 的 网络 保护 、 主动 的 网络管理 、 消息 传送 的 自 付费 和 动态 的 网络带宽 划分 等 ［ ］ 主动 网络 结点 的 计算能力 为 这些 领域 的 应用 提供 了 非常 有效 的 支持 　 基于 移动 代理 的 主动 网络系统 MANet 　 　 MANetmobileagentsbasedactivenetwork 是 一个 以 移动 代理 系统 为 基础 通过 将 主动 数据包 封装 成 移动 代理 来 实现 利用 移动 代理 系统 处理 主动 网络 数据包 的 主动 网络 利用 移动 代理 来 实现 主动 数据包 的 封装 和 运行 不仅 可以 充分利用 移动 代理 的 自主性 和 可 移动性 而且 提供 了 更好 的 主动 网络 可编程 性 和 灵活性 将 主动 网络 数据包 所 携带 的 程序 和 数据 封装 成 移动 代理 ， 使得 数据包 具有 很 好 的 主动性 和 处理 能力 例如 ， 主动 数据包 可以 利用 代理 的 克隆 及子 代理 的 生成 和 分发 来 实现 多路 分发 等 另一方面 ， 移动 代理 系统 也 提供 了 一些 相对 于 主动 网络 来说 多余 的 功能 例如 ， 移动 代理 能 在 程序运行 的 任意 点上 挂 起 ， 并 在 迁移 到 另一台 主机 后 接着 这 一点 继续 往 下 执行 为了 提高 整个 主动 网络系统 的 性能 要 针对 主动 网络 的 特性 对 移动 代理 系统 进行 修改 ， 以 去除 不必要 的 功能 ， 从而 提高 系统 的 性能 事实上 包括 我们 的 系统 在内 的 许多 基于 Java 的 移动 代理 系统 ， 如 AgletsOdysseyDagent 等 ， 由于 Java 语言 本身 所 存在 的 程序运行 状态 的 获取 问题 都 未能 实现 断点 式 的 代理 迁移 此外 支持 主动 数据包 之间 的 通信 对于 主动 网络 来说 ， 开销 也 太大 　 移动 代理 mobileagent 　 　 移动 代理 是 能 在 异构 网络 主机 之间 自主 地 进行 迁移 的 有 名字 的 程序 程序 能 自主 地 决定 在 什么 时候 迁移 到 什么 地方 它 能 在 程序运行 的 任意 点上 挂 起 然后 迁移 到 另一台 主机 上 ， 并 接着 这 一点 继续 往 下 执行 移动 代理 也 能 克隆 自己 或者 产生 子 代理 ， 迁移 到 其他 主机 上以 共同 协作 完成 复杂 的 任务 ［ ］ 移动 代理 系统 是 指能 创建 、 解释 、 执行 、 传送 和 终止 代理 的 平台 它 由 名称 和 地址 唯一 标志 每个 系统 都 可以 运行 多个 代理 代理 通过 和 主机 服务 进行 交互 来 获得 所 需 的 服务 　 　 目前 我们 正在 实现 的 是 一个 以 Java 作为 代理 编程语言 ， 并 通过 CodeBroker 来 动态 地 、 按 需地 装载 程序模块 的 移动 代理 系统 ［ ］ 该 系统 不仅 能 提供 移动 代理 的 基本 运行 环境 而且 通过 称为 “ CodeBroker ” 的 类 装载 器 实现 了 程序代码 块 的 动态 按 需 装载 在 这种 代码 迁移 方式 下 代理 在 迁移 时 只 需 携带 最小 的 代码 集合 只有 在 执行 尚未 装载 的 代码 时 ， 移动 代理 执行 环境 才 通过 CodeBroker 搜索 并 装载 相应 的 程序代码 块 这种 代码 迁移 方式 不仅 提高 了 整个 移动 代理 系统 的 性能 而且 提供 了 更好 的 资源共享 能力 和 容错 能力 　 MANet 主动 结点 的 结构 　 　 在 MANet 中 每个 内部 网络 结点 都 是 一个 具有 计算能力 的 主动 结点 每个 主动 结点 不仅 具有 有 相当 功能 的 处理器 而且 也 具备 由 多种 存储设备 组成 的 多级 存储系统 实际上 它 是 一个 由 网络 硬件 设备 、 处理机 以及 相应 的 软件 所 组成 的 系统 ， 如图所示 虚拟 网络层 完成 传统 网络 中 数据 链路层 的 功能 它 通过 网络设备 接收 数据包 ， 对 数据包 的 格式 进行 识别 ， 并 依据 数据包 格式 对 其 进行 分解 然后 将 数据包 所 携带 的 代码 和 数据 等 传送 给 移动 代理 运行 环境 MAEMAE 将 程序代码 作为 代理 装载 运行 代理 实现 的 是 客户 化 的 协议 程序 它 在 运行 过程 中 可能 还要 和 基础 网络服务 ， 部分 进行 交互 调用 最 基本 的 网络服务 如 获取 本地 以及 相邻 结点 的 信息 、 下 一 转发 结点 的 地址 以及 本地 结点 状态 的 存取 等 经过 代理 处理 后 的 数据 交由 虚拟 网络层 重新 封装 然后 通过 网络设备 发送给 下 一个 主动 网络 结点 或 几个 网络 结点 Fig 　 Activenodearchitecture 图 　 主动 结点 的 结构 　 　 MAE 是 一个 基本 的 移动 代理 执行 环境 它 从 虚拟 网络层 接收 数据包 并 对 其 进行 分析 和 分解 将 其中 的 程序代码 装载 执行 同时 ， 它 还要 监视 代理 的 运行 状态 在 要 执行 的 程序代码 尚未 装载 时 ， 通过 CodeBroker 搜索 并 装载 相应 的 代码 块 MAE 也 要 为 主动 网络系统 的 安全性 提供 诸如 身份验证 、 授权 以及 代码 的 安全 运行 等 有效 的 支持 基础 网络服务 主要 是 为 主动 数据包 提供 最 基本 的 网络协议 功能 ， 如 本地 环境 的 存取 、 路由 控制 以及 转发 等 它 有效 地 减少 了 数据包 所 携带 代码 的 长度 提高 了 主动 网络系统 的 性能 甚至 较为 上层 的 常用 网络协议 ， 如 TCPUDP 和 IP 等 也 可以 作为 基础 网络服务 的 一部分 以 实现 与 传统 网络 的 兼容性 和 提高 主动 网络 的 性能 　 　 MANet 的 主动 数据包 编程语言 采用 的 是 Java 语言 ［ ］ ， 这有 以下 几 方面 原因 一方面 MAE 的 基础 是 我们 已经 实现 的 移动 代理 系统 另一方面 Java 不仅 通过 虚拟机 JVM 实现 了 与 系统 平台 的 无关 性 而且 Java 是 一个 通用型 的 程序设计 语言 具有 一般 通用 程序设计 语言所 具有 的 编程 能力 为 主动 结点 的 编程 提供 了 有力 的 支持 更 重要 的 一个 原因 是 ， Java 所 具有 的 安全性 是 基于 网络 编程 的 基础 它 为 主动 网络 的 安全性 提供 了 有效 的 保证 另外 ， 通过 JIT 可以 将 Java 程序 编译 为 可 执行 代码 从而 提供 了 比 TclML 等 高层 语言 更好 的 性能 而且 Java 语言 提供 了 丰富 的 类库 用户 不仅 可以 方便 地 利用 这些 类库 进行 编程 ， 而且 这些 专门 类库 有着 很 好 的 效率 在 代码 装载 时 丰富 的 类库 也 使得 大部分 的 程序代码 只 需 从 本地 环境 装载 有效 地 改善 了 MANet 的 性能 但是 ， Java 也 包含 了 一些 在 建立 主动 网络 结点 时 所 不 需要 的 语言 成分 如 AWT 、 网络连接 类 等 对 主动 网络系统 来说 这些 成分 不仅 增加 了 主动 网络 编程 的 复杂性 而且 影响 了 主动 网络系统 的 性能 因此 需要 针对 主动 网络 的 特点 开发 针对 主动 网络 的 Java 版本 ， 如 针对 WWWBrowser 的 JavaApplet 仅 保留 主动 网络 编程 所 必需 的 基本 语言 成分 使得 数据包 处理程序 “ 轻量 ” 化 　 MANet 主动 数据包 的 格式 　 　 主动 数据包 是 在 MANet 中 的 虚拟 网络层 之间 传送 的 数据 实体 它 封装 了 所要 传输 的 数据 以及 数据 的 处理程序 图 所示 的 是 MANet 主动 数据包 的 格式 标志符 域 标志 了 数据包 的 网络协议 类型 它 实现 了 主动 网络 和 传统 网络协议 TCPIPUDP 等 之间 的 兼容性 例如 ， 当该 标志符 被 设置 为 TCP 时该 数据包 包含 的 报头 以及 报文 是 遵循 TCP 协议 的 数据 报 格式 当 标志符 被 置 为 主动 数据包 时 公共 报头 包含 了 源地址 、 目标 地址 、 TTL 以及 电子货币 、 数字签名 等 信息网络 结点 利用 数字签名 来 验证 ， 并 给予 网络 用户 相应 的 授权 以 保证 整个 主动 网络 的 安全性 利用 电子货币 则 可以 实现 实时 的 网络 自 付费 报文 部分 则 包含 了 程序代码 以及 传输数据 等 内容 Fig 　 Activepackageformat 图 　 主动 数据包 格式 　 　 当 一个 主动 数据包 到达 主动 网络 结点 后 结点 通过 标志符 检查 数据包 格式 若 数据包 是 传统 网络协议 如 TCPIP 则 向 基础 网络服务 提出 请求 调用 相应 的 协议 处理程序 来 对 数据包 进行 处理 ； 若 数据包 是 主动 数据包 则 从 报文 的 代码 域 抽取 相应 的 程序代码 ， 并 将 其 装载 执行 然后 将 经过 处理 的 数据 可能 已经 改变 重新 封装 成 主动 数据包 后 发送给 后面 的 主动 结点 这样 用户 通过 主动 数据包 可以 将 网络协议 程序 注入 到 主动 结点 中 从而 实现 对 主动 网络 的 编程 　 通过 CodeBroker 来 实现 代码 的 动态 按 需 装载 　 　 从 主动 网络系统 的 性能 出发 要求 主动 数据包 中 所 包含 的 代码 长度 远 小于 数据 的 长度 ， 否则 ， 系统 的 性能 损失 将 直接 影响 到 主动 网络 的 可行性 因此 ， 除了 精简 数据包 编程语言 使得 协议 程序 变得 “ 轻量 ” 之外 MANet 还 将 最 基本 的 协议 处理程序 ， 如 网络设备 启动 、 路由 选择 、 邻近 主动 网络 结点 信息 的 获取 以及 传统 协议 处理程序 ， 如 TCPUDPIP 等 作为 主动 结点 的 一部分 通过 基础 网络服务 所 提供 的 这些 服务 来 减少 数据包 中 处理程序 的 长度 减轻 网络 负载 ， 提高 系统 性能 　 　 但是 由于 主动 网络 是 可编程 的 网络 它 的 许多 服务程序 是 动态变化 的 这些 动态变化 的 协议 处理程序 不 可能 作为 基础 服务 的 一部分 但 这些 协议 处理程序 又 是 可以 被 用户 共享 的 这些 协议 处理程序 可能 很 简单 如 多路 分发 也 可能 很 复杂 如 数据 合并 如果 能 实现 程序代码 的 动态 按 需 装载 那么 主动 网络系统 不仅 可以 共享 那些 由 网络设备 供应商 、 第三方 软件 开发商 甚至 由 用户 所 开发 的 协议 服务程序 而且 可以 进一步 减轻 数据包 负载 即 数据包 中 程序代码 的 长度 提高 系统 的 性能 以及 容错 能力 　 　 MANet 充分利用 原有 移动 代理 系统 中 基于 CodeBroker 的 代码 迁移 机制 动态 地 、 按 需地 装载 代码 块 ［ ］ 实现 了 服务程序 的 共享 和 系统 性能 的 改善 当 在 移动 代理 执行 环境中运行 的 代理 执行 到 尚未 装载 的 程序代码 或类 时 执行 环境 向 CodeBroker 提出 该 代码 的 装载 请求 如图所示 CodeBroker 接收 到 装载 请求 后 首先 搜索 该 代码 所在 的 位置 以 确定 从 本地 文件系统 还是 从 远程 的 代码 服务器 装载 代码 若 代码 存在 于 本地 文件系统 中 CodeBroker 将 直接 从 本地 装载 该 代码 ， 随后 将 控制 转移 给 移动 代理 执行 环境 若 代码 不 在 本地 文件系统 中则 还要 依据 某种 优化 算法 从 多个 包含 该 代码 的 代码 服务器 中 选择 一个 代码 服务器 装载 所 需 的 代码 在 图 中 代理 在 运行 过程 先是 发现 要 执行 的 代码 A 尚未 装载 它 通过 MAE 向 CodeBroker 提出 代码 装载 请求 CodeBroker 接收 该 请求 后 搜索 该 代码 的 位置 信息 发现 本地 文件系统 中有 代码 A 的 一个 副本 然后 ， CodeBroker 直接 从 本地 文件系统 装载 代码 A ， 并 交由 MAE 执行 一段时间 后 代理 又 发现 要 执行 的 代码 B 尚未 装载 向 CodeBroker 提出 装载 请求 这次 CodeBroker 查询 到 代码 B ， 位于 代码 服务器 它 将 从 代码 服务器 装载 代码 B ， 并 将 其 缓存 在 本地 文件系统 中如图 中 虚线 所示 Fig 　 CodeBrokerbasedcodeloading 图 　 基于 CodeBroker 的 代码 装载 　 　 在 计算机网络 中 ， 数据包 的 传送 存在 着 连续性 即 同一 协议 的 数据包 连续 地 到达 某个 网络 结点 或者说 连续 到达 的 数据包 有着 相同 的 处理程序 利用网络 传输 的 这 一 特性 MANet 引入 了 代码 的 缓存 技术 通过 将 已 装载 的 代码 缓存 在 本地 文件系统 中 可以 减少 代码 的 传输 缓解 网络 传输 的 拥挤 现象 改善 整个 主动 网络系统 的 性能 由于 装载 的 代码 是 动态变化 的 因此 这些 代码 的 缓存 是 由 CodeBroker 而 不是 由 基础 网络服务 来 管理 的 CodeBroker 在 装载 代理 所 请求 的 代码 后 将 该 代码 缓存 在 本地 文件系统 中 ， 并 对 该 代码 进行 登记注册 CodeBroker 在 搜索 代码 时 总是 先 检查 本地 文件系统 的 代码 注册 信息 在 注册表 中 没有 装载 代码 的 信息 时才 向 其他 代码 服务器 查询 该 代码 的 信息 在 一个 时间 或 遇到 存储空间 不足 时 CodeBroker 将 采用 具有 先进先出 原则 的 FIFO 算法 淘汰 过时 的 代码 为 新 的 扫描 腾出 存储空间 　 　 通过 动态 的 按 需 装载 和 缓存 技术 MANet 不仅 减少 了 网络带宽 的 使用 提高 了 系统 的 性能 和 容错 能力 而且 实现 了 协议 服务程序 的 共享 代码 服务器 的 存在 使得 网络设备 供应商 、 第三方 网络协议 软件 开发商 甚至 终端用户 都 能 独立 地 开发 满足 各种 应用 需求 的 客户 化 网络协议 程序 只 需 将 服务程序 放在 某个 代码 服务器 中 ， 并 通过 类似 于 公告牌 等 的 分布 机制 就 可以 实现 这些 程序 的 共享 这种 迁移 机制 的 灵活性 加快 了 网络 服务程序 的 更新 速度 有效 地 发挥 了 主动 网络 的 潜力 　 安全性 　 　 可 移动 代码 在 主动 结点 上 的 运行 不可避免 地 引入 了 传统 安全 领域 中 所 没有 的 安全性 问题 ［ ～ ］ 代理 要 在 主动 结点 上 执行 就 必须 占用 系统 中 的 CPU 、 内存 等 资源 ， 并 对 它们 进行 存取 因此 如何 保护 主动 结点 不 受 恶意 代理 的 侵犯 以及 保护 代理 不 受 恶意 主动 网络 结点 的 窃听 或 拒绝 等 都 是 主动 网络系统 所 必须 解决 的 问题 MANet 通过 集成 现有 的 安全 技术 从 底层 运行 环境 、 编程语言 以及 应用 等 各个 层次 提供 了 整个 主动 网络系统 的 安全性 　 　 迄今为止 ， 移动 代理 安全 领域 所 做 的 研究 工作 为 主动 结点 运行 环境 的 安全性 提供 了 基础 ［ ］ 这些 研究 工作 包括 通过 限制 代理 的 运行 空间 和 所能 存取 的 资源 保护 运行 环境 不 受 恶意 代理 的 侵犯 以及 通过 跟踪 检查 保护 代理 等 另外 MANet 还 通过 公共 报头 域 中 的 数字签名 有效 地 实现 了 代码 的 身份验证 并 给予 相应 的 授权 在 语言 层次 上 Java 语言 在 设计 之初 就 考虑 了 安全性 问题 通过 类 装载 器 、 验证 器 、 安全 管理器 和 严格 定义 的 虚拟机 字节 码 等 机制 Java 语言 提供 了 很 好 的 语言 级 安全性 更为 灵活 的 是 ， 主动 数据包 可以 携带 数据包 自身 的 加密 解密 程序 和 安全 协议 程序 通过 客户 化 的 加密 解密 程序 和 安全 协议 程序 MANet 提供 了 灵活 的 可 扩展 安全 机制 为 用户 级 的 安全控制 提供 了 基础 通过 各个 层次 之间 的 密切合作 MANet 对 数据 窃取 、 服务 否认 和 恶意 攻击 等 都 具有 较 好 的 防范 能力 　 和 其他 工作 的 比较 　 　 MIT 的 ANTSactivenetworktransfersystem ［ ］ 是 一个 建立 在 链路层 上 、 采用 Java 作为 主动 数据包 ANTS 中 称为 “ capsule ” 编程语言 的 主动 网络 它 采用 集成化 的 方法 每个 “ capsule ” 都 是 由 可 移动 代码 和 数据 组成 的 程序 ANTS 通过 使用 可 移动 代码 技术 能够 在 主动 网络 的 中间 结点 和 终端 系统 上 自动 配置 新 协议 它 将 网络 看作 分布式 的 可编程 系统 ， 并 提供 了 在 结点 上 通过 操作 实现 新 协议 的 类似 于 编程语言 的 模型 ［ ］ 与 ANTS 相比 MANet 系统 则 是 建立 在 移动 代理 系统 上 的 主动 网络系统 它 比 ANTS 更为 集成 ， 而且 也 具有 更好 的 可编程 性 和 灵活性 移动 代理 、 按 需 装载 和 缓存 等 技术 的 使用 也 为 MANet 系统 性能 的 进一步提高 提供 了 可能 　 　 宾夕法尼亚大学 的 SwitchWare ［ ］ 是 一个 完全 不 依赖于 其他 Internet 协议 的 主动 网络系统 整个 系统 由 主动 数据包 、 Switchlet 和 SANE 三层 组成 ［ ］ 主动 数据包 是 用 PLAN 语言 ［ ］ 编写 的 由 代码 和 数据 组成 的 可 移动 程序 PLAN 语言 非常简单 其 目的 是 为了 简化 程序 减少 网络 开销 更为 复杂 的 功能 是 通过 调用 称为 Switchlet 的 服务程序 实现 的 Switchlet 是 用 通用 语言 编写 的 服务程序 这些 程序 是 动态 可 装载 的 因此 Switchlet 具有 很 好 的 灵活性 和 可 扩展 能力 ［ ］ 安全 主动 网络 环境 层 SANE 的 作用 则 是 为 上述 两层 提供 安全 的 执行 环境 SwitchWare 采用 的 是 在 集成 和 离散 之间 折衷 的 方法 它 的 系统 实现 和 网络 编程 都 比 MANet 更为 复杂 　 　 哥伦比亚大学 开发 的 NetScript ［ ］ 是 一个 用于 开发 主动 网络服务 协议 的 程序设计 语言 及其 运行 环境 NetScript 语言 是 一个 专用 于 通信 任务 描述 的 小 而 简单 的 动态 数据流 语言 ［ ］ 它 特别 适合 于 编写 完成 路由 选择 、 包 分析 、 信号处理 和 管理 等 功能 的 程序 NetScript 本身 并 不是 一个 完整 的 程序设计 语言 ， 而 只是 一个 控制 描述语言 通过 NetScript 的 控制结构 可以 将 称为 “ box ” 的 程序 单元 组合成 数据包 流 处理 引擎 ， 并 为 其 分配 相关 的 资源 NetScript 对 数据包 的 处理 采用 的 是 比前 两种 方法 更为 保守 的 离散 方法 — — 它 根据 数据包 的 报头 来 决定 数据包 的 处理程序 　 　 此外 Bell 和 宾州 大学 合作 的 ProtocolBoosters 、 英国 BBN 的 SmartPackets 、 佐治亚 理工学院 的 CANES 和 亚利桑那大学 的 LiquidSoftware 等 系统 都 在 主动 网络 的 体系结构 、 编程语言 以及 工作 机制 等 方面 开展 了 研究 工作 ， 并 取得 了 许多 研究成果 为 主动 网络 的 实用化 开辟 了 道路 有关 主动 网络 研究 的 综述 见 文献 ［ ］ 　 结束语 　 　 与 现有 的 主动 网络系统 相比 MANet 以 移动 代理 作为 基础 将 代码 和 数据 封装 成 数据包 每个 数据包 都 可以 作为 代理 运行 使得 主动 网络 具有 很 好 的 可编程 性 它 具有 其他 主动 网络系统 所 没有 的 灵活性 和 编程 能力 基于 CodeBroker 的 代码 装载 以及 缓存 技术 有效 地 改善 了 主动 网络 的 性能 和 代码 共享 能力 但是 ， MANet 在 与 现有 网络设备 的 兼容性 、 主动 网络系统 的 安全性 等 方面 还 存在 许多 不足之处 在 应用 开发 和 系统 性能 测试工具 方面 的 工作 也 尚未 开始 本文 研究 得到 国家自然科学基金 No 资助 曾小平 （ 上海交通大学 计算机科学 与 工程系 　 上海 　 ） 孙永强 （ 上海交通大学 计算机科学 与 工程系 　 上海 　 ） 谢 建华 （ 上海交通大学 计算机科学 与 工程系 　 上海 　 ） 参考文献 ． TennenhouseDSmithJsincoskieWetalAsurveyofactivenetworkresearchIEEECommunicationsMagazine ～ ． HicksMKakkarPMooreJetalPLANAprogramminglanguageforactivenetworksInFelleisonMedProceedingsoftheInternationalConferenceonFunctionalProgrammingNewYorkACMPress ． TennenhouseDLWetherallDJTowardsanactivenetworkarchitectureComputerCommunicationReview ～ ． GrayRSAgentTclatransportableagentsystemInFinnTedProceedingsoftheCIKMWorkshoponIntelligentInformationAgentsCIKMBaltimoreACMPress ． WhiteJETelescripttechnologymobileagentsInBradshawJedSoftwareAgentsBostonAAAIPressMITPress ． ZengXiaopingSunYongqiangShiRongetalThecodemigrationofmobileagentssystemInChenJianLiMingshuMingginsCedsProceedingsofTOOLSMeyerCALosAlamitosIEEECSPress ． GoslingJJoyBSteeleGTheJavalanguagespecificationReadingMAAddisonWesleyPublishingCompany ． WetherallDGuttagJTennenhouseDANTSatoolkitforbuildinganddynamicallydeployingnetworkprotocolsInIEEEOPENARCHSanFranciscoCAwwwsdslcseduactiveware ． AlexanderDArbaughWHicksMetalTheswitchwareactivenetworkarchitectureIEEENetworkSpecialIssueonActiveandControllableNetworks ～ ． AlexanderDShawMNettlesSetalActivebridgingComputerCommunicationReview ～ ． YeminiYSilvaSdaTowardsprogrammablenetworksInIFIPIEEEInternationalWorkshoponDistributedSystemsOperationsandManagementhttpwwwcscolumbiaedudasilva 收稿 修稿