微型机 与 应用 MICROCOMPUTERITSAPPLICATIONS 　 No 　 No 　 P 计算机网络 防火墙 的 体系结构 李海泉 摘要 ： 对 防火墙 的 概念 、 类型 、 要求 以及 与 设计 有关 的 问题 进行 了 概述 ， 探讨 了 防火墙 的 安全 体系结构 及其 发展趋势 ， 介绍 了 一些 典型 的 防火墙 产品 。 关键词 ： Internet 安全 防火墙 的 类型 防火墙 的 体系结构 　 　 Internet 已 成为 人们 探索 和 交换 信息 及 电子 商贸 的 全球性 设施 ， 已 成为 各国 进行 信息 交换 的 战略目标 。 随着 越来越 多 的 单位 和 个人 加入 Internet ， 保护 网络 及其 信息安全 已 成为 人们 十分关心 的 问题 。 防火墙 技术 提供 了 一种 保护 Internet 的 安全 屏障 。 Internet 的 安全 问题 　 　 Internet 好像 座 不设防 的 城市 ， 应用 中 受到 一次次 严重威胁 和 攻击 。 “ 蠕虫 ” 利用 应用 最广 的 电子邮件 上 的 漏洞 ， 在 网上 猖狂 传播 ， 无休止 地 耗尽 用户 的 存储空间 文件传输 （ FTP ） 中 ， “ 特洛伊木马 ” 处处 给 网站 毁灭性 的 打击 。 远程 登录 随时 遭受 黑客攻击 ， 让 站点 被 侵袭 和 窃听 。 万维网 （ WWW ） 时时 受到 恶意 的 入侵 ， 导致 控制 困难 。 网络 文件传输 系统 （ NFS ） 和 用户 新闻组 也 无法 抵御 非法 入侵 ， 造成 信息 泄露 和 溢出 。 据 FBI 统计 ， 美国 每年 因 网络安全 所 造成 的 损失 高 达 亿美元 ， 美国 一位 大学生 编写 的 “ 蠕虫 ” 病毒 ， 一夜之间 使 北美 大部分 计算机网络 瘫痪 。 年月日 ， 设防 严密 的 美国 花旗银行 计算机网络 ， 被 苏联 克格勃 人员 入侵 ， 损失 达 万美元 。 年月日 ， 黑客 入侵 美国空军 网络 ， 更换 美国 网络 主页 。 月 日 黑客 竟 将 美国空军 主页 改为 只 鲜血 直流 的 眼球 ， 对 美国 政治 大肆 攻击 。 据 美国 《 金融时报 》 报道 ， 美国 平均 每分钟 就要 发生 起 Internet 犯罪案 。 我国 政府 也 多次 透露 ， 金融界 发生 计算机 犯罪案 ， 发生 私 设帐号 、 盗窃 财物 并 造成 网络 瘫痪 的 事故 。 　 　 总之 ， 对 计算机网络 的 入侵 、 威胁 和 攻击 ， 基本上 可以 归纳 为 以下 几种 ① 黑客 入侵 （ 占 整个 网络 犯罪 的 ） ② 撊 涑 鏀 计算机病毒 的 攻击 ③ 信息 的 泄露 、 盗取 和 破坏 ④ 来自 内外部 人员 的 攻击 （ 占 ） ⑤ 搭线 窃听 或 线路 干扰 ⑥ 拒绝服务 或 注入 非法 信息 ⑦ 修改 或 删除 关键 信息 ⑧ 身份 截取 或 中继 攻击 ⑨ 人为 地 破坏 网络设备 ， 造成 网络 瘫痪 。 据统计 ， 的 财政 损失 都 是因为 网络计算机 的 安全 问题 造成 的 。 　 　 其 原因 主要 有 以下 几个 方面 ① 局域网 存在 的 缺陷 和 Internet 的 脆弱性 ② 薄弱 的 网络 认证 环节 和 系统 易 被 监视 性 ③ 网络软件 的 缺陷 和 Internet 服务 的 漏洞 ④ 没有 正确 的 安全策略 和 安全 机制 ⑤ 缺乏 先进 的 网络安全 技术 、 工具 、 手段 和 产品 ⑥ 缺乏 先进 的 系统 恢复 、 备份 技术 和 工具 ⑦ 主机 的 复杂 设置 和 复杂 控制 ⑧ 最 重要 的 一条 是 没有 正视 黑客 、 病毒 和 计算机犯罪 所 造成 的 严重后果 ， 舍不得 投入 必要 的 人力 、 物力 和 财力 来 加强 网络 的 安全性 。 只要 我们 充分认识 安全 问题 的 严重性 ， 严格 按照 安全 规则 处理 ， 就 可以 把 网络安全 风险 限制 在 有限 范围 内 。 为了 增强 网络 的 安全性 ， 人们 在 Internet 与 局域网 之间 设置 了 防火墙 。 防火墙 的 概念 与 类型 　 　 防火墙 是 一种 安全 有效 的 防范 技术 ， 是 访问控制 机制 、 安全策略 和 防 入侵 措施 。 从 狭义 上 来讲 ， 防火墙 是 指 安装 了 防火墙 软件 的 主机 或 路由器 系统 从 广义 上 讲 ， 防火墙 还 包括 了 整个 网络 的 安全策略 和 安全 行为 。 它 是 通过 在 网络 边界 上 建立 起来 的 相应 网络安全 监测 系统 来 隔离 内部 和 外部 网络 ， 以 确定 哪些 内部 服务 允许 外部 访问 ， 以及 允许 哪些 外部 服务 访问 内部 服务 ， 阻挡 外部 网络 的 入侵 。 　 　 实际上 ， 防火墙 的 概念 是 借用 了 建筑学 上 的 个 术语 。 在 建筑学 上 ， 防火墙 是 用来 防止 大火 从 建筑物 的 一部分 蔓延到 另 一部分 而 设置 的 阻挡 机构 。 计算机网络 的 防火墙 是 用来 防止 互联网 的 损坏 ， 如 黑客攻击 、 病毒破坏 、 资源 被盗 用 或 文件 被 篡改 等 波及 到 内部 网络 的 危害 。 它 不 像 现代化 大厦 中 的 防火墙 ， 而 像 中世纪 的 护城河 。 它 是 内部 网络 与 外部 网络 之间 的 一种 安全 防范措施 系统 。 Internet 上 的 防火墙 如图所示 。 图 Internet 上 的 防火墙 结构 　 　 从技术上 看 ， 防火墙 有种 基本 类型 ① 包 过滤 型 ② 代理服务器 型 ③ 电路 层 网关 ④ 混合型 。 　 　 包 过滤 型 防火墙 （ PacketFilterFirewall ） 　 　 包 过滤器 安装 在 路由器 上 ， 当然 PC机 上 也 可以 安装包 过滤 软件 。 它 工作 在 网络层 （ IP ） ， 因此 也 称为 网络 防火墙 。 它 基于 单个 包 实施 网络 控制 ， 根据 所 收到 的 数据包 的 源地址 、 目的 地址 、 TCPUDP 、 源 端口号 及 目的 端口号 、 包 出入 接口 、 协议 类型 和 数据包 中 的 各种 标志 位 等 参数 ， 与 用户 预定 的 访问控制 表 进行 比较 ， 决定 数据 是否 符合 预先 制定 的 安全策略 ， 决定 数据包 的 转发 或 丢弃 ， 即 实施 信息 过滤 。 它 实际上 是 控制 内部 网络 上 的 主机 直接 访问 外部 网络 ， 而 外部 网络 上 的 主机 对 内部 网络 的 访问 则 要 受到限制 。 这种 防火墙 的 优点 是 简单 、 方便 、 速度 快 、 透明性 好 ， 对 网络 性能 影响 不 大 ， 但 它 缺乏 用户 日志 （ log ） 和 审计 信息 （ audit ） ， 缺乏 用户 认证 机制 ， 不 具备 登录 和 报告 性能 ， 不能 进行 审核 管理 ， 且 过滤 规则 的 完备 性 难以 得到 检验 ， 复杂 过滤 规则 的 管理 很 困难 ， 因此 安全性 较差 。 　 　 代理服务器 型 防火墙 （ ProxyServiceFirewall ） 　 　 代理服务器 型 防火墙 通过 在 主机 上 运行 代理 的 服务程序 ， 直接 对 特定 的 应用层 进行 服务 ， 因此 也 称为 应用型 防火墙 。 其 核心 是 运行 于 防火墙 主机 上 的 代理服务器 进程 。 代理 网络 用户 完成 TCPIP 功能 ， 实际上 是 为 特定 网络应用 而 连接 个 网络 的 网关 。 对 每种 不同 的 应用层 （ 如 Email 、 FTP 、 Telnet 、 WWW 等 ） 都 应用 个 相应 的 代理 。 外部 网络 与 内部 网络 之间 想要 建立 连接 ， 首先 必须 通过 代理服务器 的 中间 转换 ， 内部 网络 只 接收 代理服务器 提出 的 要求 ， 拒绝 外部 网络 的 直接 请求 。 代理服务 可以 实现 用户 认证 、 详细 日志 、 审计 跟踪 和 数据 加密 等 功能 ， 并 实现 对 具体 协议 及 应用 的 过滤 ， 如 阻塞 Java 或 JavaScript 。 这种 防火墙 能 完全 控制 网络 信息 的 交换 ， 控制 会话 过程 ， 具有 灵活性 和 安全性 ， 但 可能 影响 网络 的 性能 ， 对 用户 不 透明 ， 且 对 每 一种 服务器 都 要 设计 个 代理 模块 ， 建立 对应 的 网关 层 ， 实现 起来 比较复杂 。 　 　 电路 层 网关 （ CircuitGateway ） 　 　 电路 层 网关 在 网络 的 传输层 上 实施 访问 策略 ， 是 在内 、 外 网络 主机 之间 建立 个 虚拟 电路 ， 进行 通信 ， 相当于 在 防火墙 上 直接 开了个 口子 进行 传输 ， 不像 应用层 防火墙 那样 能 严密 地 控制 应用层 的 信息 。 　 　 混合型 防火墙 （ HybridFirewall ） 　 　 混合型 防火墙 把 过滤 和 代理服务 等 功能 结合 起来 ， 形成 新 的 防火墙 ， 所用 主机 称为 堡垒 主机 ， 负责 代理服务 。 各种类型 的 防火墙 各有 其 优缺点 。 当前 的 防火墙 产品 已 不是 单一 的 包 过滤 型 或 代理服务器 型 防火墙 ， 而是 将 各种 安全 技术 结合 起来 ， 形成 个 混合 的 多级 防火墙 ， 以 提高 防火墙 的 灵活性 和 安全性 。 一般 采用 以下 几种 技术 ① 动态 包 过滤 ② 内核 透明 技术 ③ 用户 认证 机制 ④ 内容 和 策略 感知 能力 ⑤ 内部 信息 隐藏 ⑥ 智能 日志 、 审计 和 实时 报警 ⑦ 防火墙 的 交 互操作性 等 。 防火墙 的 设计 　 　 防火墙 的 安全 要求 　 　 从 网络 的 安全 角度看 ， 防火墙 必须 满足 以下 要求 　 　 （ ） 防火墙 应由 多个 构件 组成 ， 形成 个 有 一定 冗余度 的 安全 系统 ， 避免 成为 网络 的 “ 单 失效 点 ” 。 若 这 一点 被 突破 ， 则 网络 无 安全 可言 。 　 　 （ ） 防火墙 应 能 抵抗 网络 “ 黑客 ” 的 攻击 ， 并 可 对 网络通信 进行 监控 和 审计 。 这样 的 网络 节点 ， 被 称为 “ 阻塞点 ” 。 　 　 （ ） 防火墙 一旦 失效 、 重启动 或 崩溃 ， 则 应 完全 阻断 内 、 外部 网络 站点 的 连接 ， 以免 闯入 者 进入 。 这种 安全 模式 的 控制 方法 ， 是 由 防火墙 安全 机制 来 控制 网络接口 的 启动 。 这种 防火墙 的 失效 模式 被 称为 “ 失效 — 安全 ” 模式 。 　 　 （ ） 防火墙 应 提供 强 认证 服务 ， 外部 网络 站点 对 内部 网络 的 访问 应 经过 防火墙 的 认证 检查 ， 包括 对 网络 用户 和 数据源 的 认证 。 应 支持 Email 、 FTP 、 Telnet 和 WWW 等 应用 。 　 　 （ ） 防火墙 对 内部 网络 应 起到 屏蔽 作用 ， 即 隐藏 内部 网站 的 地址 和 内部 网络 的 拓朴 结构 。 　 　 防火墙 拓朴 设计 的 基本 原则 　 　 （ ） 决定 防火墙 的 类型 和 拓朴 结构 　 　 针对 防火墙 所 保护 的 系统 的 安全级别 作出 定性 和 定量 的 评估 ， 从 系统 的 成本 、 安全 保护 实现 的 难易 程度 以及 升级 、 改造 和 维护 的 难易 程度 ， 决定 该 防火墙 的 类型 和 拓朴 结构 。 　 　 （ ） 制定 安全策略 　 　 在 实现 过程 中 ， 没有 允许 的 服务 是 被 禁止 的 ， 没有 被 禁止 的 服务 都 是 允许 的 ， 因此 网络安全 的 第一条 策略 是 拒绝 一切 未 许可 的 服务 。 防火墙 封锁 所有 信息流 ， 逐一 完成 每一项 许可 的 服务 第二条 策略 是 允许 一切 没有 被 禁止 的 服务 ， 防火墙 转发 所有 的 信息 ， 逐项 删除 被 禁止 的 服务 。 在 此 策略 的 指导 下 ， 再 针对 系统 制定 各项 具体 策略 。 　 　 （ ） 确定 包 过滤 规则 　 　 一般 以 处理 IP 数据包 包头 信息 为 基础 ， 包括 过滤 规则 序号 、 过滤 方式 、 源 和 目的 端口号 及 协议 类型 等 。 它 决定 算法 执行 时 的 顺序 ， 因此 正确 的 排列 至关重要 。 过滤 方式 包括 允许 和 禁止 。 另外 还有 源 端口号 、 目的 端口号 、 IP地址 、 目的 端口 是否 设置 ACK 位 、 协议 类型 等 内容 。 　 　 （ ） 设计 代理服务 　 　 代理服务器 接受 外部 网络 节点 提出 的 服务 请求 ， 如果 服务 请求 被 接受 ， 代理服务器 再 建立 与实 服务器 的 连接 。 由于 它 作用 于 应用层 ， 故可 利用 各种 安全 技术 ， 如 身份验证 、 日志 登录 、 审计 跟踪 、 密码 技术 等 ， 来 加强 网络 安全性 ， 解决 包 过滤 所 不能 解决 的 问题 。 　 　 （ ） 严格 定义 功能模块 ， 分散 实现 　 　 防火墙 由 各种 功能模块 组成 ， 如包 过滤器 、 代理服务器 、 认证 服务器 、 域名 服务器 、 通信 监控器 等 。 这些 功能模块 最好 由 路由器 和 单独 的 主机 实现 。 功能 分散 减少 了 实现 的 难度 ， 增加 了 可靠 程度 。 　 　 （ ） 防火墙 维护 和 管理 方案 的 考虑 　 　 防火墙 的 日常 维护 是 对 访问 记录 进行 审计 ， 发现 入侵 和 非法 访问 情况 。 据此 对 防火墙 的 安全性 进行 评价 ， 需要 时 进行 适当 改进 ， 管理工作 要 根据 网络 拓朴 结构 的 改变 或 安全策略 的 变化 ， 对 防火墙 进行 硬件 和 软件 的 修改 和 升级 。 通过 维护 和 管理 进一步 优化 其 性能 ， 以 保证 网络 及其 信息 的 安全性 。 防火墙 的 安全 体系结构 　 　 防火墙 的 安全 体系结构 基本上 有种 ① 过滤 路由器 结构 ② 双 宿主机 结构 ③ 主机 过滤 结构 ④ 过滤 子网 结构 ⑤ 吊带 式 防火墙 结构 。 　 　 过滤 路由器 防火墙 结构 　 　 它 是 通过 在 传统 的 路由器 中 增加 分组 过滤 功能 而 形成 的 最 简单 的 防火墙 。 这种 防火墙 的 好处 是 完全 透明 ， 但 由于 在 单机 上 实现 ， 从而 形成 了 网络 中 的 “ 单 失效 点 ” 。 由于 路由器 的 基本功能 是 转发 分组 ， 一旦 过滤机 能 失效 ， 就 会 形成 网络 直通 状态 ， 任何 非法 访问 都 可以 进入 内部 网络 。 因此 这种 防火墙 的 失效 模式 不是 “ 失效 — 安全 ” 型 ， 也 违反 了 阻塞点 原理 ， 仅 选择 转发 分组 并 不能 完全 排除 非法 访问 ， 所以 内部 网络 中 各个 潜在 的 访问 都 必须 增加 其 安全措施 。 因此 ， 这种 防火墙 尚 不能 提供 有效 的 安全 功能 ， 仅 在 早期 的 Internet 中 应用 。 　 　 双 宿主机 防火墙 结构 　 　 该 结构 围绕 着 至少 具有 个 接口 、 块 网卡 的 双 宿主机 而 构成 。 双 宿主机 一个 接口 接 内部 网络 ， 另 一个 接口 接 外部 网络 。 双 宿主机 内 、 外 的 网络 可 与 该 堡垒 主机 实施 通信 ， 而 内 、 外 网络 之间 不能 直接 通信 。 该 防火墙 的 安全 结构 如图所示 。 图双 宿主机 的 防火墙 结构 　 　 使用 时 ， 一般 要求 用户 先 注册 ， 再 通过 双 宿主机 访问 另一边 的 网络 。 由于 代理服务器 简化 了 用户 的 访问 过程 ， 可以 做到 对 用户 透明 ， 属 “ 失效 — 安全 ” 型 。 由于 该 防火墙 仍 是 由 单机 组成 ， 没有 安全 冗余 机制 ， 仍 是 网络 的 “ 单 失效 点 ” ， 因此 这种 防火墙 仍 是 不 完善 的 ， 在 现在 的 Internet 中 仍 有 应用 。 　 　 主机 过滤 防火墙 　 　 这种 防火墙 是 由 过滤 路由器 和 运行 网关 软件 的 堡垒 主机 构成 。 该 结构 中 提供 安全 保护 的 堡垒 主机 仅 与 内部 网络 相连 ， 而 过滤 路由器 位于 内部 网络 和 外部 网络 之间 ， 如图所示 。 图 主机 过滤 型 防火墙 结构 　 　 该 主机 可 完成 多种 代理 ， 如 FTP 、 Telnet ， 还 可以 完成 认证 和 交互作用 ， 能 提供 完善 的 Internet 访问控制 。 这种 防火墙 主机 是 网络 的 单 失效 点 ， 也 是 网络 黑客 集中 攻击 的 目标 ， 安全 保障 仍 不够 理想 。 但 这种 防火墙 投资 少 ， 功能 容易 实现 ， 也 便于 扩充 ， 因而 应用 比较 广泛 。 　 　 子网 过滤器 防火墙 结构 　 　 该 防火墙 是 在 主机 过滤 结构 中 再 增加 层 参数 网络 的 安全 机制 ， 使得 内部 网络 与 外部 网络 之间 有层 隔断 。 由 参数 网络 的 内 、 外部 路由器 分别 连接 内部 网络 与 外部 网络 ， 如图所示 。 图 子网 过滤器 防火墙 结构 这种 防火墙 把 前 一种 主机 的 通信 功能 分散 到 多个 主机 组成 的 网络 中 ， 有 的 作为 FTP 服务器 ， 有 的 作为 Email 服务器 ， 有 的 作为 WWW 服务器 ， 有 的 作为 Telnet 服务器 ， 而 堡垒 主机 则 作为 代理服务器 和 认证 服务器 置于 周边 网络 中 ， 以 维护 Internet 与 内部 网络 的 连接 。 这种 网络 防火墙 容易 配置 ， 也 减少 了 闯入 破坏 的 机会 ， 是 一种 比较 理想 的 安全 防范 模式 。 　 　 吊带 式 防火墙 的 结构 　 　 这种 防火墙 与 子网 过滤器 防火墙 结构 的 区别 是 作为 代理服务器 和 认证 服务器 的 网关 主机 位于 周边 网络 中 ， 另外 增加 了 内部 过滤 路由器 保护 内部 网络 的 安全 。 这样 代理服务器 和 认证 服务器 是 内部 网络 的 第一道 防线 ， 内部 路由器 是 内部 网络 的 第二道 防线 ， 而 把 Internet 的 公共服务 （ 如 FTP 服务器 、 Telnet 服务器 、 WWW 服务器 及 Email 服务器 等 ） 置于 周边 网络 中 ， 也 减少 了 内部 网络 的 安全 风险 。 这种 防火墙 的 结构 如图所示 。 这种 结构 正 符合 我们 提出 的 点 要求 ， 应是 最 安全 的 防范 模式 。 图 吊带 式 防火墙 结构 　 　 应用 实践 表明 ， 过滤 路由器 防火墙 是 简单 的 安全 防范措施 ， 双 宿主机 防火墙 居中 ， 主机 过滤 防火墙 和 子网 过滤 防火墙 安全措施 比较 理想 ， 而 吊带 式 防火墙 安全 防范措施 最好 ， 但 一般 在 中小型 企业 网络应用 中 还 不是 很广 。 　 　 现实意义 的 防火墙 将 多种 安全 技术 如包 过滤器 路由器 、 代理服务器 、 密码 技术 、 审计 认证 技术相结合 ， 将 各种 单一 的 防火墙 相结合 ， 如 与 子网 过滤 防火墙 结构 相结合 构造 的 防火墙 ， 使用 台 堡垒 主机 的 参数 网络结构 ， 使用 外 、 内部 路由器 合并 的 过滤 子网 结构 和 多 参数 网络结构 的 防火墙 等 。 上海交通大学 网络 中心 设计 的 防火墙 结构 如图所示 。 图 上海交大 设计 的 Internet 防火墙 结构 　 　 这个 防火墙 由个 包 过滤 路由器 和 个 堡垒 主机 构成 ， 支持 应用层 和 网络层 的 安全 功能 。 它 把 代理服务器 （ WWW 、 Telnet 、 FTP 和 Email ） 、 身份 认证 系统 ， 日志 登录 和 审计 系统 以及 加密 系统 放在 堡垒 主机 中 。 堡垒 主机 位于 外部 网络 和 内部 网络 之间 。 其中 路由器 、 堡垒 主机 和 包 过滤 、 代理服务 、 加密技术 、 身份 认证 和 日志 登录 审计 系统 构成 屏蔽 子网 。 　 　 目前 比较 知名 的 防火墙 产品 有 TIS 公司 （ TrustedInformationSystemInc ） 的 GauntletInternetFirewall ， 美国 弗吉尼亚州 ASN 公司 （ AdvancedNetworkServiceInc ） 的 Interlock ， SunMicrosystem 的 FirewallI ， 加拿大 安大略省 BoarderNetworkTechnololgies 开发 的 Borderware 等 产品 。 Gauntlet 防火墙 基本功能 是 面向 应用服务 的 代理服务器 ， 可以 对 Telnet 、 FTP 、 SMTP 、 Gopher 、 HTTP 及 XWindows 等 应用 提供 代理服务 ， 还 配有 系统 完整性 自检 、 系统文件 记录 和 报告 、 接入 控制 和 用户 确认 等 功能 ， 应用 相当 广泛 。 Interlock 是 用户 层上 的 代理服务 系统 ， 它 为 Telnet 、 FTP 、 SMTP 、 XWindows 、 Gopher 、 HTTP 、 NNTP 等 应用 提供 代理服务 ， 还有 个 接入 控制 规则 数据库 ， 用作 用户 确认 、 加密 等 应用 。 FirewallI 防火墙 在 网络 的 链路层 与 网络层 之间 增加 个 过滤器 ， 对 数据 进行 过滤 ， 其 主要 优点 对 应用层 用户 是 透明 的 。 BoarderWare 防火墙 基本功能 是 个 代理服务器 ， 可以 对 Telnet 、 FTP 、 SMTP 、 NNTP 、 POP （ 邮局 协议 ） 等 应用 提供 代理服务 。 此外 还 具有 包 过滤器 、 远程管理 、 审计 和 报警 等 功能 。 除此之外 ， 还有 Microsoft 的 MicrosoftProxyServer 、 Digital 的 AltaVistaFirewall ， Raptorsystem 的 EagleFirewall ， NetscapeProxyServer 等 产品 。 防火墙 发展趋势 　 　 随着 Internet 的 广泛应用 和 计算机技术 的 发展 ， 防火墙 技术 也 在 不断 发展 。 目前 ， 混合 应用 包 过滤 技术 、 代理服务 技术 和 其它 一些 技术 ， 如 动态 包 过滤 、 内核 透明 代理 、 用户 身份 认证 、 智能 日志 审计 、 跟踪 、 加密技术 等 的 新型 防火墙 正向 我们 走来 。 　 　 动态 包 过滤 　 　 传统 的 包 过滤 基于 单个 IP 包 包头 中 的 源 目的 IP地址 、 源 目的 端口号 、 协议 类型 等 判断 包 是否 转发 或 丢弃 。 目前 包 过滤 技术 向着 更具 柔性 和 多功能 的 方向 发展 ， 比如 动态 包 过滤 技术 动态 包 过滤 还 可以 与其 数据流 向 适应 ， 基于 ICP 连接 和 通信 过程 中 的 状态 变化 及 上 、 下文 内容 ， 建立 临时 会话 状态表 来 控制 访问 。 例如 TIS 公司 的 Statefulfiltering 就是 采用 动态 过滤 技术 ， 是 种 包 过滤 防火墙 。 CISCOPIX 防火墙 、 CheckPointFirewall 也 是 对 数据 进行 动态 过滤 ， 其 过滤 规则 可 由 路由器 快速 进行 配置 。 　 　 内核 透明 代理 　 　 现在 越来越 多 的 应用 支持 代理服务 方式 ， 而且 网络操作系统 采用 最小 内核 技术 ， 关闭 了 IPforwarding 等 功能 子系统 加入 IPSec 、 IP （ V ） 等 支持 ， 以 提供 加密 的 IP 通信 ， 对 提供 的 服务 给 以 最小 特权 ， 并 使 提供 的 服务 独立 ， 以 提供 防火墙 的 安全 基石 。 在 内核 级 实现 了 代理服务 ， 做到 协议 透明 和 应用 透明 ， 采用 包 截取 方法 ， 获取 数据包 ， 待 做出 授权 校验 后 ， 决定 转发 或 丢弃 ， 整个 过程 对 用户 透明 。 　 　 用户 强 认证 机制 　 　 传统 防火墙 缺乏 用户 认证 机制 ， 其 安全 强度 较 低 。 现在 的 防火墙 都 加入 用户 认证 机制 ， 对 用户 远程 访问 实施 强 认证 ， 提供 分布式 跨域 认证 能力 。 强 认证 系统 可 基于 第三方 的 认证 服务 ， 基于 用户 （ 组 ） 、 地址 、 服务类型 、 时间 等 要求 ， 采用 一次 口令 机制 ， 不必 存储 秘密 口令 。 　 　 加密技术 　 　 采用 加密技术 ， 使 网络 数据交换 中 不 被 非法 用户 理解 和 伪造 ， 采用 的 密码 机制 有种 对称 密钥 机制 和 公开密钥 机制 。 对称 的 加密算法 和 解密 算法 公用 一把 密钥 ， 其 加密 和 解密 互为 逆 过程 ， 典型 的 算法 有 DES 、 三重 DES 、 IEDA 和 Kerberos 几种 ， 公开密钥 机制 的 加密 和 解密 算法 使用 各自 的 密钥 。 其 加密 密钥 是 公开 的 ， 而 解密 密钥 是 秘密 的 ， 只有 用户 知道 ， 典型 的 算法 如 RSA 、 DiffieHellman 和 PGP 等 。 其 加密 的 强度 取决于 密钥 的 大小 ， 以及 对 密码 分析 的 抵抗能力 等 。 　 　 智能 日志 、 审计 跟踪 和 实时 报警 　 　 智能 日志 系统 具有 综合性 数据 登录 、 自动 分类 和 自动检索 功能 。 审计 跟踪 系统 能 提供 对 防火墙 的 完整性 校验 ， 具有 跟踪 多次 连接 行为 的 能力 。 实时 报警 系统 利用 日志 和 审计 结果 进行 网络 探测 、 端口扫描 ， 并 通过 智能型 推理 实时 触发 Email 、 窗口 、 呼叫 和 打印 等 功能 ， 进行 报警 和 跟踪 ， 必要 时 可以 自动 中断 服务 和 关闭系统 。 　 　 内容 和 策略 感知 能力 　 　 代理服务 若 具有 内容 和 策略 感知 能力 ， 则 防火墙 不仅 能 理解 传输 类型 和 本地 策略 ， 它 还 可以 根据 本地 策略 自 适应 地 进行 处理 。 例如 在 防火墙 上 进行 病毒 扫描 及 消除 ， 进行 黄色 信息 的 过滤 ， 对 FTP 下载 的 自 抽取 文档 进行 筛选 ， 检测 隐藏 在 多媒体数据库 中 的 非法 命令 等 能力 。 　 　 内部 信息 隐藏 技术 　 　 使用 网络地址 翻译 技术 可 使 内部 信息 实现 隐藏 ， 对 公开 的 信息 服务 采用 静态 映射 ， 对 内部 主机 采用 多 对 多 或 多 对 一 的 地址映射 。 在 防火墙 内 、 外部 域名 和 帐号 等 之间 建立 映射 关系 来 保护 内部 信息 。 　 　 集成性 与 交 互操作性 　 　 提高 防火墙 产品 的 集成性 ， 采用 分布式 管理 ， 加强 防火墙 之间 的 交 互操作性 。 　 　 此外 还 可以 采用 智能 IO 处理 宽带 技术 ， 以 提高 防火墙 的 信息 吞吐量 结合 安全 代理 技术 ， 采用 高速传输 介质 （ 如 ATM ） 以及 快速 处理 能力 、 可 适应性 控制 、 监测 数据包 重组 ， 以 优化 数据交换 时 的 安全检查 ， 对 高速 数据流 提供 高度 安全控制 。 还 可以 采用 双机 备份 运行 技术 等 ， 以 消除 防火墙 作为 单 失效 点 的 缺陷 。 　 　 目前 ， 被 称为 第三代 防火墙 产品 的 第一批 系统 ， 如 Border 公司 的 Border 产品 和 TIS 公司 的 GauntletFirewall Ⅲ 已经 面市 。 这些 防火墙 看起来 像 代理服务器 ， 而 内部 又 像 包 过滤 ， 还有 认证 和 审计 功能 ， 安全性 很 好 ， 十分 实用 。 现在 ， 人们 正在 设计 新 的 IP 协议 （ IPV ） ， 将 对 防火墙 的 建立 和 运行 产生 深远影响 。 李海泉 （ 西安石油 学院 计算机系 ７ １ ０ ０ ６ ５ ） 参考文献 １ ， 胡道 元 ． Internet 网络 技术 及 应用 ． 北京 ： 清华大学出版社 ， ２ ， 刘渊 ． 因特网 防火墙 技术 ． 北京 ： 机械 工业 出版社 ， ３ ， 李海泉 ． 计算机 网络安全 与 加密 ． 北京 ： 科学出版社 ， ４ ， 李海泉 ， 李健 ． 计算机网络 的 安全 与 加密技术 ． 计算机 与 通信 ， ； ５ ， 汪立东 ， 钱丽萍 ． Internet 攻击 和 防火墙 新 技术 ． 计算机系统 应用 ， ； 收稿 日期 ： － －