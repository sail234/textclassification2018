计算机 工程 COMPUTERENGINEERING 年 　 第卷 　 第期 　 Vol 　 No 　 企业级 Javabeans 的 建立 李陟 　 姚耀 文摘 要 　 对 建立 企业级 Javabens 的 技术 要点 及 难点 进行 了 介绍 与 分析 ， 并 给出 了 一个 建立 企业级 Javabeans 的 实例 。 关键词 　 Javajavabeans 组件 BuildingofEnterpriseJavabeansLiZhiYaoYaowenSouthChinaUnivofTechComputerScienceandEngineeringDeptGuangzhouAbstract ： InthispaperthekeypointtobuildenterpriseJavabeanswasintroducedandanalyzedAttheendofthepapertheauthorsgaveanexampleofbuildingenterpriseJavabeansKeywords ： javaJavabeansComponent 　 　 如今 ， Java 在世界上 已经 越来越 趋于 流行 了 ， 由于 它 较 好地解决 了 指针 分配 错误 、 内存 分配资源 不足 及 溢出 、 平台 依赖性 等 问题 ， 因此 可以 大大减少 编程人员 的 工作量 。 Java 用 十分 简单 和 强大 的 核心 API 技术 使 应用 程序开发 的 复杂性 大大 缓解 ， 令 程序员 可以 将 精力 集中 在 应用程序 上 ， 不必 考虑 别的 杂事 ， 从而 提高 产品 的 质量 。 　 　 Javabeans 是 Java 的 软件 组件 标准 ， 它 继承 了 Java 的 平台 独立性 及 简单 性 ， 使 程序员 能够 更 容易 、 高效 地 编写出 能 运行 于 任何 支持 Java 平台 上 的 标准 的 应用程序 ， 并且 使 开发 出 的 应用程序 更 便于 维护 和 理解 。 因此 ， 如何 开发 出 高效 、 易于 使用 、 易于 利用 其 进行 二次开发 的 Javabeans 组件 ， 以便 于 快速 建立 高质量 的 专业性 应用程序 ， 就 成 了 当前 需要 解决 的 重点 。 　 Javabeans 简介 　 　 Javabeans 标准 是 Java 语言 的 低级 组件 模型 。 它 不 需 指定 复合 文档 和 应用程序 框架 等 内容 ， 而 OpenDoc 、 CORBA 、 ActiveX 等 组件 标准 则 需要 指定 这些 内容 ， 也 即 Javabeans 与 Java 一样 ， 具有 平台 独立性 。 　 　 Javabeans 可以 看作 一个 黑盒子 ， 只须 知道 其 功能 而 不用 管其 内部结构 。 作为 黑盒子 ， Javabeans 有个 接口 面 ， 可以 独立 开发 ： 　 　 · Javabeans 可以 调用 的 方法 　 　 由于 Javabeans 严格 遵循 面向对象 的 设计 概念 ， 因此 ， 方法 是 操纵 Javabeans 行为 的 唯一 途径 。 　 　 例如 一个 数据库 连接 Javabeans 可以 有 connect 、 close 等 方法 ， 以便 可以 方便 地 操纵 该 Javabeans 与 数据库 的 连接 和 关闭 连接 。 　 　 · Javabeans 提供 的 各个 可 读写 的 属性 　 　 Javabeans 提供 了 高层次 属性 Properties 的 概念 。 从 面向对象 的 角度 ， 属性 就是 传统 的 对象 属性 Attribute ， 但 多 了 属性 读取 与 设置 API 的 支持 。 　 　 一个 数据库 连接 Javabeans 可以 有 连接 协议 通过 JDBC 、 ODBC 连接 、 数据库 服务器 类型 Informix 数据库 、 SQL 数据库 或 Oracle 数据库 、 数据库 名称 、 用户名 、 密码 等 属性 ， 开发人员 只 需 设定 相关 的 属性 值 ， 就 可以 轻松 地 建立 一个 数据库 连接 。 　 　 · Javabeans 与 外部 交互 的 事件 　 　 Javabeans 与 其它 软件 组件 相 交互 的 方式 是 发送 与 接收 事件 。 　 　 例如 一个 数据库 表格 视图 Javabeans 应有 接收 键盘输入 、 鼠标 按键 等 事件 消息 的 功能 。 　 Javabeans 设计 基本概念 及 注意事项 　 　 Javabeans 总是 运行 在 一个 Java 的 虚拟机 JVM 、 并 存在 于 多线程 的 环境 中 ， 因此 可以 由 多个 线程 同时 访问 。 　 　 可以 将 Javabeans 的 属性 分为 专家 属性 与 普通用户 属性 ， 在 开发 专业 应用程序 时 ， 由于 一个 开发 项目 中 的 应用程序 应当 具有 相同 或 类似 的 界面 ， 因此 ， 对于 普通用户 和 一般性 的 需要 ， 可以 将 应用程序 标准 界面 要求 作为 Javabeans 的 缺省 属性 ， 以便 于 系统 的 快速 、 高质量 开发 ； 而 对于 专家 用户 及 特殊 的 需要 ， 可以 修改 缺省 属性 ， 以 符合 特殊 的 需要 。 　 　 由于 Javabeans 可以 运行 在 各种 Java 虚拟机 中 ， 因此 建立 Javabeans 的 时候 ， 必须 考虑 一些 特殊 的 情况 ： 例如 运行 在 没有 显示器 的 环境 中 或者 运行 在 没有 GUI 的 环境 下 。 这时 ， 无法 使用 AWT ， 因为 ： 　 　 · 无法 看到 Javabeans 显示 的 结果 ； 　 　 · 这种 系统 的 ROM 不 提供 GUI 功能 。 　 　 因此 ， 编写 的 Javabeans 既要 考虑 到 这种 极端 的 情况 ， 也 要 考虑 到 开发 投入 的 问题 ， 如果 开发 的 费用 过高 ， 开发周期 过长 ， 或者 是 所 开发 的 Javabeans 只 使用 在 GUI 环境 中 ， 则 可以 不用 考虑 这种 情况 。 　 　 另 一个 需要 考虑 的 问题 是 语言 显示 的 国际化 问题 。 由于 一个 好 的 Javabeans 可能 会 被 多个 国家 及 地区 所 使用 ， 因此 Javabeans 必须 设计 得 足够 灵活 ， 以便 中文 、 英文 、 法文 、 德文 等 文字 的 输入 、 存储 、 修改 及 输出 。 此外 ， 日期 、 时间 及 货币 等 信息 ， 也 必须 用 当地 的 标准 形式 。 这些 问题 都 必须 予以 重视 。 由于 Java 增加 了 一些 支持 国际化 的 改动 ， 过去 ， 写 一个 国际化 的 代码 需要 付出 额外 的 工作 和 比 写 近似 代码 大得多 的 困难 ， 现在 ， 可以 利用 Java 的 新 特性 编写 支持 国际化 的 Javabeans 。 　 编写 支持 国际化 的 Javabeans 　 Locale 类 　 　 一个 Locale 对象 封装 了 一个 指定 Locale 的 信息 ， 包括 足够 独一无二 地 标识 这个 Locale 地域 的 信息 。 当 一个 与 Locale 相关 的 方法 被 传递 给 一个 Locale 对象 作为 参数 时 ， 它会 试图 为 指定 的 Locale 修改 其 行为 。 一个 Locale 对象 可以 用 语言 代码 、 国家 代码 和 一个 可选 的 变量 来 初始化 ， 这种 参数 定义 了 一个 地域 。 例如 ， 有 一个 中国 的 Locale 对象 ， 若 你 使用 时间 类 的 时候 ， 时间 类会 试图 返回 中国 的 时间 定义 格式 。 　 　 可以 用 以下 语句 创建 一个 中国 的 Locale 对象 ： 　 　 LocalechiLocalenewLocalezhcn 　 　 还 可以 将 中文 设置 为 缺省 语言 ： 　 　 LocalesetDefaultnewLocalezhcn 　 封装 Locale 相关 数据 　 　 虽然 Locale 类 很 容易 操作 Locale 相关 方法 ， 然而 ， 多数 applet 需要 使用 字符串 、 按钮 、 标签 等 其他 类 ， 这些 类 也 需要 本地化 ， 以便 显示 本地 信息 。 例如 ， 在 多数 GUI 程序 中 ， 需要 有 OK 及 Cancel 按钮 ， 但 在 中文 程序 中 ， 可能 需要 将 其 定义 为 确认 及 取消 按钮 ， 因此 ， 所 编写 的 Javabeans 必须 要 注意 到 这些 差别 。 所以 ， 在 定义 了 Locale 类 之后 ， 还要 将 编写 的 Javabeans 与 相应 的 Locale 类 封装 起来 。 　 　 要 封装 Locale 相关 数据 ， 需要 使用 ResourceBundle 类 。 ResourceBundle 类 是 一个 抽象类 ， 为 实现 任一 功能 它 都 必须 被 继承 。 ResourceBundle 类由类 装载 器 classloader 通过 名字 装载 。 为了 正确 装载 必须 遵循 严格 的 命名 协议 。 例如 要 编写 一个 叫作 ButtonBundle 的 类 ， 它 是 ResourceBundle 类 的 子类 ， 它 包含 所有 在 应用程序 中 使用 的 Button 的 名字 ， 这个 ButtonBundle 类 提供 缺省 信息 ， 而 ButtonBundlezhcn 提供 中文 简体 标签 ， ButtonBundlezhtw 提供 中文 繁体 标签 ， BundleBundleenus 提供 英文 标签 。 可以 采用 如下 方法 申请 一个 ResourceBundle 。 ResourceBundlegetResourceBundleStringbaseNameLocalelocaleNameClassLoaderloader 　 　 这个 方法 采用 指定 的 类 装载 器去 查找 与 baseName 及 实例 化 的 Locale 属性 相匹配 的 类 。 有 一种 特殊 的 查找 方式 ， 可以 用来 找到 与 请求 的 ResourceBundle 最近 的 匹配 。 　 　 bundleNamelocalLanguagelocaleCountry 　 　 localeVariant 　 　 bundleNamelocalLanguagelocaleCountry 　 　 bundleNamelocalLanguage 　 　 bundleNamedefaultLanguagedefaultCountrydefaultVariant 　 　 bundleNamedefaultLanguagedefaultCountry 　 　 bundleNamedefaultLanguage 　 　 bundleName 　 　 创建 本地化 ResourceBundle 最 简单 的 形式 是 直接 继承 类 ResourceBundle ， 然后 重载 其 一个 方法 ： 　 　 ObjecthandleGetObjectStringkey 　 　 这个 方法 返回 一个 对应 于 关键词 key 的 对象 。 这些 关键词 是 存储 在 ResourceBundle 中 内容 的 内部 表示 ， 对 所有 相同 的 局部 数据 来说 应该 是 相同 的 。 一个 最 简单 的 ButtonBundle 可以 如此 定义 ： 　 　 classButtonBundleextendsResourceBundle 　 　 publicObjecthandleGetObjectStringkey 　 　 ifkeyequalsOK 　 　 returnOK 　 　 elseifkeyequalsCancel 　 　 returnCancel 　 　 returnnull 　 　 　 　 　 　 如果 要 编写 ButtonBundle 的 中文 简体版 本 ， 应 定义 ButtonBundlezhCN 类 ， 返回 确认 和 取消 等 信息 。 　 建立 企业级 Javabeans 　 企业级 Javabeans 的 标准 　 　 所 建立 的 Javabeans 如果 要 成为 企业级 的 组件 ， 必须 符合 以下 标准 ： 　 　 · Javabeans 组件 必须 有 明确 、 细致 的 功能 ， 并 能 很 好 地 完成 这个 功能 ； Javabeans 组件 必须 要 做到 在 速度 、 大小 及 准确性 方面 有 良好 的 质量 。 　 　 · Javabeans 组件 必须 健全 。 在 不同 的 环境 包括 不同 的 操作系统 环境 ， 不同 的 Java 开发 平台 ， 不同 的 JVM 中 运行 时 都 不会 出错 ， 且 不会 导致 应用程序 或 系统 的 崩溃 。 　 　 · Javabeans 组件 应当 是 用户 友好 的 ， 如果 有 GUI 界面 ， 则 应 具有 良好 的 人机工程 学 或 图形学 设计 。 具有 GUI 的 组件 应 充分 测试 其 人机接口 的 易用性 。 　 　 · Javabeans 组件 应当 能够 本地化 ， 例如 能 输入 、 修改 、 输出 本地 文字 ， 出错 时能 以 本地 文字 信息 显示 错误信息 。 　 　 · Javabeans 组件 报告 错误 时 ， 应 能 报告 比较 详细 的 错误信息 ， 能 让 普通用户 理解 。 　 　 · Javabeans 组件 应当 具有 二次开发 比较简单 的 特性 。 利用 组件 来 进行 开发 应当 简单 而 直观 。 Javabeans 的 接口 应 尽量 简单 ， 这样 才能 使 所 开发 的 Javabeans 组件 取得 更大 的 成功 。 　 　 · Javabeans 组件 应当 是 纯 Java 的 ， 不 包含 本地 代码 。 否则 会 使 所 开发 的 Javabeans 组件 在 其他 操作系统 或 JVM 上 无法 执行 。 　 开发 企业级 Javabeans 实例 　 市场需求 　 　 这 一二年 来 ， 开发 Internet 管理系统 项目 的 需求 逐渐 增多 。 越来越 多 的 公司 希望 能 把 自身 的 一些 业务管理 放到 Internet ， 以便 远程管理 以及 业务 扩展 。 例如 酒店 、 机场 等 企业 ， 就 十分 需要 一个 联入 Internet 的 订房 、 订票 系统 ， 以便 各种 客户 使用 。 　 　 要 开发 一个 这样 的 瘦 客户端 的 Internet 管理系统 ， 采用 Java 来 开发 就 比较 合适 。 因为 采用 Java 开发 ， 不管 客户 使用 什么 操作系统 ， 只 需要 联入 Internet ， 安装 一个 通用 的 浏览器 ， 就 可以 访问 该 管理系统 了 ， 而 不用 在 客户端 安装 任何 其它 软件 。 　 　 当前 ， 如果 使用 JDK 来 开发 ， 由于 不是 可视化 开发 ， 因此 开发 效率 比较 低下 。 而 采用 一般 的 Java 可视化 开发工具 ， 如 VJ 等 ， 不是 没有 辅助 数据库 开发 的 控件 ， 就是 不 支持 中文 的 输入 、 输出 。 因此 很 有 必要 开发 一套 辅助 系统 开发 的 Javabeans 组件 ， 以 提高 Java 数据库 开发 的 速度 。 　 开发 分析 　 　 作为 一套 数据库 Javabeans ， 首先 必须 实现 一个 databaseJavaBeans ， 以 用于 记录 数据库 服务器 IP地址 、 数据库 类型 SQLserver 、 Oracle 、 Informix 数据库 或是 其它 、 数据库 名称 、 用户名 、 密码 等 信息 。 高级 用户 还 可以 对 这个 databaseJavabeans 进行 继承 ， 指定 数据库 服务器 IP地址 、 数据库 类型 、 数据库 名称 等 信息 ， 只 让 普通用户 改动 用户名 与 密码 等 信息 。 　 　 接着 ， 需要 实现 一个 TableViewJavabeans 类 ， 可以 让 用户 输入 一个 SQL 语句 ， 以 决定 从 database 中 获取 什么 数据 。 作为 一个 完善 的 Javabeans ， 应 可以 让 用户 决定 所 获取 的 TableView 数据 在 修改 时是 表级 锁 、 页面 锁 还是 行级 锁 ， 当然 ， 这 需要 数据库 本身 的 支持 例如 Informix 就 可以 支持 行级 锁 ， 而 Sybase 则 只 支持 页面 锁 。 　 　 除此之外 ， 还 需 实现 ： 　 　 · DataBrowerJavabeans 类 ， 以便 浏览 TableView 类 所 获取 的 数据 ； 　 　 · DataListJavabeans 类 ， 以便 浏览 TableView 类 所 获取 的 数据 中 的 某 一列 ； 　 　 · RecordStateJavabeans 类 ， 以便 知道 当前 记录 是否 已 被 修改 等 信息 ； 　 　 · RecordNumberJavabeans 类 ， 以便 知道 当前 记录 在 TableView 所 获取数据 中 的 行号 ； 　 　 · DataText 、 DataGraph 、 DateTime 、 DataNumber 、 DataBoolean 等 Javabeans 类 ， 以便 获取 数据库 中 不同 的 数据类型 ； 　 　 · DataOptionalButton 、 DataButton 、 DataImageButton 、 DataComboBox 、 DataCheckBox 、 DataLabel 、 DataTips 等 Javabeans 类 ， 以便 更好 地 对 程序流程 进行 控制 ； 　 　 · DataChartJavabeans 类 ， 可以 对 输入 数据 进行 分析 ， 并 可 有 D 图 、 饼 状图 、 条形图 等 直观 化 图形 输出 。 　 Javabeans 设计 　 　 决定 实现 哪些 类 之后 ， 需要 具体 设计 每个 Javabeans 类 具有 哪些 属性 方法 。 　 　 对于 database 类 ， 就 起码 必须 有 connect 、 close 等 方法 ； 而 TableView 类 ， 则 需要 有 moveFirst 、 moveLast 、 movePrev 、 moveNext 、 goToRecordNo 、 addRecord 、 updateRecord 、 deleteRecord 、 commit 、 rollback 方法 以及 获取 和 修改 数据库 中 各种类型 数据 的 方法 。 　 　 DataChart 类 ， 则 需要 有 setXAxis 、 setYAxis 、 setZAxis 、 setXMax 、 setXMin 、 setYMax 、 setYMin 、 setZMax 、 setZMin 、 setChartStyle 等 方法 。 　 　 其它 各 Javabeans 类 的 方法 在 此 不 一一 详述 。 　 　 各个 Javabeans 间 的 通信 主要 依靠 在 生成 该 Javabeans 类 对象 时 ， 传递 需要 通信 的 Javabeans 类 的 句柄 来 通信 。 　 　 例如 Database 类 与 TableView 类 的 通信 ， 就是 依靠 在 生成 TableView 类 对象 时 ， 传递 Database 类 对象 的 句柄 给 TableView 类 ， 以便 TableView 类 知道 所 要 读取 的 数据库 的 有关 信息 。 　 Javabeans 对象 的 封装 及 二次开发 　 　 高级 用户 可以 继承 我们 的 Javabeans 组件 ， 以 创立 自己 的 Javabeans 组件 。 例如 可以 为了 开发新 项目 的 需要 ， 继承 Database 组件 、 封装 数据库 服务器 、 数据库 类型 与 数据库 名称 等 属性 ， 而 只 让 普通用户 见到 用户名 与 密码 属性 。 在 二次开发 中 ， 高级 用户 甚至 可以 自己 建立 一个 LoginFormJavabeans ， 以 实现 用户 的 登录 功能 ， 完全 将 DatabaseJavabeans 封装 起来 ， 使 其 对 普通用户 不 可见 。 普通用户 可见 的 只是 一个 DatabaseJavabeans 的 句柄 ， 其 再 使用 该 句柄 来 对 数据库 中 的 表 进行 访问 。 　 　 在 二次开发 中 ， 用户 可以 继承 DataImageButton 类 ， 实现 有 自己 特色 的 确定 、 取消 、 退出 等 功能 按钮 ， 以 适应 自己 需要 ， 加快 开发 速度 。 　 结束语 　 　 在 上述 分析 及 设计 的 基础 上 ， 实现 了 一套 数据库 Javabeans ， 并 应用 于 实际 开发 中 ， 获得 了 令人满意 的 效果 。 虽然 ， 在 一 开始 建立 Javabeans 应用 时 ， 会 有 十分复杂 及 不知 如何 下手 的 情况 发生 ， 但是 慢慢 地会 发现 ： Javabeans 在 设计 与 代码 复用 方面 的 特长 必将会 在 设计 和 代码 复用 的 宏观 规模 上 带来 一场 革命 。 作者简介 ： 李陟 男 ， 岁 ， 研究生 ， 主要 研究 方向 为 多 计算机 组织 与 系统结构 作者 单位 ： 华南理工大学 计算机科学 与 工程系 广州 参考文献 　 廖 卫东 陈梅 Java 程序设计 实用 指南 北京 ： 机械 工业 出版社 　 AblanJ 用 Java 开发 Intranet 应用 北京 ： 机械 工业 出版社 　 KhuranaGSWeb 数据库 的 建立 与 管理 北京 ： 机械 工业 出版社 ， 　 MohseniPWeb 数据库 开发人员 指南 北京 ： 机械 工业 出版社 ， 　 MorganMWebmaster 专家 方案 上海 ： 上海 远东 出版社 　 MorrisonMPresentingJavabeans 美国 ： SAMS 出版社 ， 　 BankstonSeifertJavaUnleashedThirdEdition 美国 ： SAMS 出版社 　 VariousDevelopingProfessionalJavaApplets 美国 ： SAMS 出版社 　 MorrisonMJavaUnleashedSecondEdition 美国 ： SAMS 出版社 　 WeberJSpecialEditionUsingJavaSecondEdition 美国 ： QUE 出版社 收稿 日期 ：