宇航学 报 JOURNALOFASTRONAUTICS 年 月 第卷 第期 科技期刊 开放式 飞行 任务 规划 方法 沈林成 高 国华 常文森 国防科技大学 长沙 关世义 孙华 苏康 航天工业 总公司 第三 研究院 北京 摘要 　 　 本文 给出 了 一种 基于 分布式 黑板 结构 的 开放式 飞行 任务 规划 方法 简要 叙述 了 飞行器 飞行 任务 规划 的 概念 和 其 独特 要求 并 对 飞行 任务 规划 的 数据 预处理 、 知识 表达 、 规划 方法 作 了 深入 的 探讨 。 最后 介绍 了 分布式 黑板 的 结构 和 运行 方式 。 主题词 无人 飞行器 　 飞行 任务 规划 　 数据 预处理 　 开放式系统 ANOPENSYSTEMAPPROACHTOMISSIONROUTEPLANNINGShenLinchengGaoGuohuaChangWensenNationalUniversityofDefenseTechnologChangshaGuanShiYiSunHuaSuKangtheThirdResearchAcademyofCASCBeijingAbstractAdistributedblackboardbasedopensystemapproachtomissionrouteplanningisgivenbrieflyAndthedatapreprocessingtheknowledgerepresentationandtheplanningmethodsofthemissionrouteplanningarediscussedFinallythedistributedblackboardsstructureandoperatingrulesaregivenKeywordsUnmannedaircraft 　 Missionrouteplanning 　 Datapreprocessing 　 Opensystemapproach 引言 　 　 飞行 任务 规划 是 无人 飞行器 有效 执行 任务 的 重要 支持 其 中心 内容 是 选择 最优 飞行 航线 。 所 选 航线 必须 满足 地形匹配 、 地形 跟踪 及 景象 匹配 等 各种 导航 要求 以较 高 概率 到达 或 命中 目标 同时 所 冒风险 又 不能 超出 一定 的 限度 ［ ］ 。 八十年代 以前 飞行 任务 规划 主要 靠 人工 进行 。 由于 无人 飞行器 的 飞行 区域 基本上 被 敌人 防御 系统 所 覆盖 为 最大 限度 地 减少 被 敌方 雷达 发现 的 概率 它 需要 作 超低空 地形 跟踪 地形 回避 TFTA 飞行 因此 飞行 任务 规划 需要 在 各种因素 之间 进行 仔细 权衡 。 纯 人工 地 进行 这些 权衡 不但 费时费力 且 航线 质量 也 不 一定 好 。 　 　 八十年代 中后期 美国 投入 大量 的 人力物力 进行 自动 飞行 任务 规划 方法 的 研究 取得 了 较大 的 成功 ［ ］ 但 在 实用 上 仍 有 较大 的 局限性 。 由于 全自动 意味着 人 的 不可 参与性 难以 满足 许多 战略 限制 和 战术 意图 。 所以 将 人 完全 排斥 在外 的 全自动 飞行 任务 规划 并 不是 最好 的 也 并非 规划 人员 所 希望 的 。 理想 的 飞行 任务 规划系统 不仅 应 具有 良好 的 自动 航迹 规划 能力 而且 应该 对人 开放 的 即 具有 灵活 的 人机交互 机制 。 无人 飞行器 任务 规划 的 基本 要求 　 　 无人 飞行器 任务 规划 是 要 寻找 从 发射点 到 指定 目标 的 最优 飞行 航线 。 航线 既 要 尽量 提高 飞行器 的 命中 精度 又 要 尽量减少 坠毁 概率 和 被 摧毁 概率 。 这 意味着 任务 规划 方法 必须 识别 既 要 满足 飞行器 特有 导航 要求 又 要 满足 突防 要求 的 飞行 航线 。 另外 飞行 航线 还 需 满足 各种 战略战术 约束 。 这些 约束 往往 相互 耦合 改变 其中 一个 因素 通常 会 引起 其它 因素 的 变化 。 明确 这些 因素 在 任务 规划 中 的 作用 及其 影响 对 开放 飞行 任务 规划系统 设计 具有 重要 意义 。 导航 要求 　 　 许多 远程 无人 飞行器 采用 惯性导航 系统 INS 。 由于 INS 存在 漂移 误差 为 精确 到达 目标 INS 需要 辅以 地形匹配 制导系统 TERCOM 和 数字 景象 匹配 制导系统 DSMAC 进行 定期 修正 。 这 限制 飞行器 必须 飞 经 某些 特定 的 TERCOM 地图 使 飞行 任务 规划 复杂化 。 　 　 由于 TERCOM 地图 的 独特 地形 特征 要求 一般 难以 找到 合适 的 TERCOM 地图 。 若 TERCOM 地图 数量 很少 将 导致 飞行 航线 数量 太 少 容易 被 敌人 识别 出 从而 增加 了 飞行器 被 拦截 概率 另外 对于 某些 特别 平坦 或 地形 起伏 但 相对 无 差异 的 目标 可能 没有 合适 的 TERCOM 攻击 航线 对于 有着 大块 沙漠 的 目标 区域 航线 规划 后 到 实际 使用 之间 的 数月 或 数年 内 由于 风 造成 沙丘 移动 其 地形 可能 发生 明显 变化 沿海地区 尽管 地形 起伏 但 TERCOM 在 水域 上空 无法 工作 TERCOM 制导 在 冰山 和 密 林区 上空 也 可能 遇到 麻烦 在 这种 地区 高度表 能 交替 地 接收 来自 地面 和 冰面 或 森林 的 回波 。 少量 可用 的 进攻 航线 以及 TERCOM 地图 的 局限性 也 会 限制 飞行器 可用 的 发射 区域 。 突防 要求 　 　 当 敌方 防御 系统 不能 捕获 和 跟踪 无人 飞行器 或 虽然 捕获 但 来不及 拦截 时 就 达到 了 突防 目的 。 为 提高 突防 能力 除 需 在 设计 中使 飞行器 保持 尽可能 低 的 信号 特征 低 RCS 参数 外 更 重要 的 是 使 飞行 航迹 本身 具有 良好 的 突防 性能 。 在 飞向 目标 过程 中 对 飞行器 的 主要 威胁 是 敌 防御 系统 和 碰地 。 这 两种 威胁 是 相互 关联 的 飞行 任务 规划 需要 在 减少 坠毁 概率 的 高飞 与 减小 被 摧毁 概率 的 低飞 之间 进行 折衷 。 　 　 为 提高 飞行 航线 的 突防 性能 飞行 任务 规划 还 需 采用 欺骗 航迹 加强 航迹 的 不 可预测性 。 在 飞行器 进入 威胁 区域 时 提高 飞行速度 给 敌 防空 系统 留下 的 反应时间 越短 敌人 进行 拦截 的 难度 越大 从而 提高 突防 性能 。 　 物理 特性 的 要求 　 　 飞行 任务 规划 必须 满足 燃料 限制 和 射程 约束 。 在 降低 敌 防御 系统 和 撞 到 地面 这 两种 威胁 的 同时 必须 考虑 到 高度 的 任何 降低 都 会 减少 飞行器 的 航程 。 　 　 由于 受到 飞行器 垂直 和 水平 机动性 能 的 约束 地形 跟踪 时 地形 高度 的 升降 经常 比 飞行器 可能 达到 的 高度 变化 要 快 。 当 地形 高度 迅速 上升时 飞行器 必须 提早 开始 爬高 否则 飞行器 就 会 撞 到 山坡 。 反之 在 地形 高度 迅速 下降时 飞行器 必须 提早 拉开 以免 撞 到 地面 。 在 威胁 回避 和 地形 回避 时 为了 避免 侧向 撞 到 障碍物 也 需要 留有 适当 的 机动 距离 。 战略 和 战术 限制 　 　 要 确保 飞行器 到达 目标 还须 满足 许多 战略战术 限制 它们 是 根据 国家 政策 或 战略 原则 提出 的 。 每一项 新 的 限制 都 会 降低 飞行器 到达 目标 的 概率 。 　 　 冲突 解决 在 战时 通常 要 为 许多 飞行器 规划 航线 。 它们 可能 在 同一 时刻 飞过 同一 地区 或 攻击 同一 目标 导致 飞行 路线 可能 交叉 。 规划 时 必须 防止 它们 发生 碰撞 。 　 　 己方 伤害 飞行 任务 规划 要 避免 来自 自己 方面 的 任何 危险 。 　 　 到达 时间 一项 任务 可能 要求 飞行器 沿 特定 路线 在 某个 特定 时间 到达 目标 或 某些 中间 点 这 就 对 飞行 路线 、 飞行速度 等 加以 限制 。 　 　 禁飞区 根据 国家 政策 或 政策 因素 禁止 飞行器 飞过 某些 特定 地区 如 划定 的 禁飞区 、 中立区 、 人口稠密 区 等 。 　 　 有限 TERCOM 地图 大量 使用 同 一张 TERCOM 地图 带来 的 误差 或 该 地点 未预料到 的 敌 防御 系统 会 使 飞行器 到达 目标 前有 许多 架次 被 意外 地 摧毁 。 　 飞行 任务 规划 预处理 　 　 飞行 任务 规划 过程 涉及 了 上述 诸多 因素 的 权衡 以及 众多 规划 约束条件 的 检验 是 一个 高强度 的 计算 过程 。 如果 对 这些 因素 进行 在线 计算 将 导致 规划 过程 的 极端 复杂性 。 因此 在 飞行 任务 规划 之前 可以 事先 对 各种因素 进行 分析 计算 以 避免 规划 过程 中 的 大量 数学计算 。 预处理 在 给定 约束条件 下 根据 相关 的 地理 、 军事 特征 和 导航 要求 对 地形图 象 进行 详细分析 将 地图 分割 为 一系列 具有 一致 性质 的 小 区域 以 获取 地形图 象 、 战场 环境 中 充分 支持 航迹 规划 、 辅助 决策 等 方面 的 数据 为 进行 开放式 任务 规划 创造条件 。 　 　 任务 规划 预处理 由 地形图 象 分析 和 安全性 分析 两 部分 组成 。 地形图 象 分析 包括 地形 统计 特征分析 和 地形 可 导航 性 分析 。 地形 统计 特征分析 涉及 地形 标准差 、 均值 、 粗糙度 、 坡度 标准差 相关 长度 等 地形 统计 量 的 计算 。 根据 地形 统计分析 确定 飞行器 的 参考 飞行高度 及其 相应 的 区域 。 地形 可 导航 性 分析 就是 按照 地形匹配 和 景象 匹配 的 选择 准则 对 战区 地形 进行 分析 评价 确定 出 所有 可能 的 地形匹配 区 。 　 　 安全性 分析 包括 威胁 分析 和 地形 可飞性 分析 。 威胁 分析 就是 根据 有关 的 信息 、 情报分析 敌放 威胁 范围 中 的 雷达探测 区 、 火力 杀伤 区及 地形 遮蔽 区 并 根据 飞行器 对 地形 跟踪 的 要求 分析 出敌 威胁 范围 内 可 实施 地形 跟踪 的 安全 走廊 。 地形 可飞性 分析 就是 根据 碰地 概率 的 大小 、 飞行器 升限 和 指定 的 禁飞区 将 战区 划分 为 一系列 的 可飞 和 不可 飞 区域 。 飞行 任务 规划 问题 知识 表达 　 　 飞行 任务 规划 需 多方面 的 知识 区域 背景 知识 自然语言 接口 知识 和 航线 产生 知识 。 区域 背景 知识 是 作战 区域 的 地理 和 军事 特征 知识 包括 地形 标高 、 威胁 配置 、 可 用作 导航 地 标的 地理 参考点 、 雷达 地形 遮蔽 等 。 　 　 作战 区域 的 地理 和 军事 特征 知识 采用 多重 分辨率 锥体 结构 的 组合 地图 和 符号 地图 两种 表达形式 。 符号 地图 表达 包括 地形匹配 区 、 威胁 区 、 地形 遮蔽 区 、 地形 跟踪 区 、 按 碰地 概率 和 飞行器 升限 确定 的 可飞 不可 飞区 等 。 可飞 区域 包括 自由 飞行 区域 和 有 一定 飞行 代价 的 飞行 区域 雷达探测 区 减去 火力 杀伤 区 地形 跟踪 区 、 地形 遮蔽 区 等 不可 飞 区域 包括 火力 杀伤 区 、 指定 禁飞区 、 人口稠密 区 、 中立地区 、 障碍 区域 等 。 约束 知识 尽量 表达 在 组合 地图 中 并 在 规划 过程 中 尽量 以 数学 描述 形式 纳入 到 代价 函数 中 无法 嵌入 到 组合 地图 或 无法 纳入 代价 函数 的 部分 尽量 设计 成 一系列 “ 对照表 ” 无法 用 上述 两种 方法 描述 的 知识 用 推理 模式 或 仲裁 规则 来 表达 。 　 　 自然语言 接口 知识 包括 任务 生成 和 处理 自然语言 总是 和 解释 中需 作为 参考 的 大量 信息 。 它 分为 两类 语言 知识 和 非 语言 知识 。 这 两类 知识 中 一部分 是 说明性 一部分 是 程序 知识 一部分 是 说明 与 程序性 知识 的 结合 如 生成 规划 。 　 　 开放式 任务 规划系统 需要 的 另一类 知识 是 航线 产生 知识 。 它 描述 了 生成 航线 和 确定 所 生成 的 航线 中 可能 很多 哪一条 航线 最 可能 成为 可 飞行 航线 所 需 的 数据 和 程序 。 这 类 知识 以 “ if … then … ” 规则 形式 编码 规则 的 设计 需要 在 经验丰富 的 任务 规划 人员 指导 下 进行 。 这 类 知识 大致 分为 三组 第一组 规则 与 地理 和 军事 特征 的 识别 有关 这些 特征 对于 TFTA 航线 规划 是 重要 的 。 第二组 规则 与 飞行器 的 飞行 特点 有关 比如 飞行员 一般 以 度角 而 不 沿 一条 垂直于 山脊 的 航线 飞行 因为 度 的 交叉 角可使 飞行器 更快 地 进入 山脊 另一侧 的 雷达 盲区 。 第三组 规则 主要 负责 备选 航线 评估 决定 哪条 航线 更好 些 。 开放式 任务 规划 的 基本 方法 　 　 路径 规划 的 方法 很多 一般 都 是 化为 状态 空间 中 的 路径 搜索 问题 利用 搜索算法 求解 。 状态 空间 表达 和 搜索算法 的 不同 可 导致 不同 的 路径 规划 方法 大致 分成 四类 ［ ］ 基于 确定性 搜索 、 基于 随机 搜索 、 基于 计算 和 基于 知识 推理 规划 方法 。 基于 确定性 搜索 的 方法 一般 化为 数值 成本 最小化 问题 然后 利用 动态 规划 或者 A 搜索 等 算法 求解 。 成本 的 大小 通常 根据 燃料 消耗 和 生存能力 来 衡量 。 基于 随机 搜索 的 方法 主要 有 遗传算法 和 模拟退火 规划 方法 均 为 概率 搜索算法 。 美国 已 将 遗传算法 和 模拟退火 技术 应用 于 飞机 的 航迹 选择 与 规划 。 基于 计算 的 方法 主要 有 神经网络 和 人工 势场 两种 途径 。 基于 知识 推理 的 规划 方法 包括 直观 推断 法 和 符号 规划 方法 等 。 　 　 以上 方法 直接 用于 求解 飞行 任务 规划 问题 还有 较大 的 局限性 飞行器 面临 的 战场 环境异常 复杂 辽阔 规划 约束条件 众多 且 模糊性 大 各 因素 间 存在 强 耦合 飞行器 有 独特 的 制导 体制 、 突防 要求 和 命中 精度 要求 飞行 任务 规划 过程 具有 非 马尔可夫 特性 飞行 任务 规划 过程 需 及时 贯彻 指挥员 的 作战 意图 人 应该 能够 充分 地 参与 飞行 任务 规划 过程 飞行 任务 规划 一般 要求 一次 规划 多条 航迹 多条 航迹 间 可能 有 重合 。 　 　 因此 有效 的 飞行 任务 规划 方法 应是 开放式 的 一方面 应该 是 分层 分段 分 区域 的 多种 规划 方法 的 融合 另一方面 应 以 人为 中心 强调 人机交互 规划 的 重要性 将 自动 规划 只 作为 一种 辅助 手段 。 开放式 任务 规划 方法 可以 描述 为 首先 对 发射 位置 和 攻击 目标 的 合理性 进行 评价 若 不 满足 约束条件 就 提出 修改 建议 然后 通过 份层 来 处理 航迹 规划 问题 并 在 各层 上 允许 规划 人员 的 介入 和 干预 。 第一 层次 是 满足 导航 要求 的 高级别 符号 航线 规划 通过 称号 处理 裁减 下 一 层次 的 搜索 空间 。 第二 层次 是 两个 导航 点 之间 满足 突防 要求 的 小 范围 符号 航线 规划 进一步 裁减 下 一 层次 的 搜索 空间 。 第三 层次 是 满足 物理性能 要求 的 状态 空间 搜索 基本上 是 一个 高强度 的 计算 过程 。 它 对于 高 飞行高度 的 航线 规划 来说 是 很快 的 但 对 TFTA 航线 规划 则 可能 较慢 。 因为 在 TFTA 任务 中 在 大量 爬升 、 俯冲 和 转弯 动作 。 　 　 为了 裁减 第三 层次 搜索 空间 采用 渐进 深化 搜索 技术 使 搜索 空间 随 搜索 阶段 的 递进 依次 减少 。 第一 搜索 阶段 从 符号 阶段 确定 的 近似 航线 开始 。 每 一条 近似 航线 都 确定 了 一条 飞行 走廊 在 第二个 搜索 阶段 中 每 一个 飞行 走廊 包含 的 区域 都 将 按 渐近 提高 的 分辨率 进行 分析 。 这种 分析 会 产生 比 原来 飞行 走廊 更 狭窄 的 走廊 集合 。 这些 新 的 、 狭窄 的 走廊 也 将 根据 同样 的 准则 进行 评估 。 然后 将 最 有 希望 的 条 走廊 保存 下来 其余 被 淘汰 。 重复 此 过程 直至 达到 所 要求 的 高分辨率 。 渐进 深化 搜索 较 A 搜索 快 但 无法 保证 获得最佳 航线 然而 它 使 人工 参与 成为 可能 。 在 每 一个 搜索 阶段 计算机 都 可以 向 用户 解释 它 为什么 选择 某 一些 飞行 走廊 而 舍弃 了 另外 一些 用户 可以 认可 或 修改 它 。 开放式 任务 规划系统 的 结构 　 　 开放式 任务 规划系统 是 高度 交互式 的 允许 用户 参与 部分 工作 能够 解释 自身 作业 的 合理性 易于 修改 。 一般 采用 面向对象 的 模块化 设计 和 黑板 系统结构 。 为 避免 一般 黑板 系统 的 通讯 瓶颈 问题 采用 分布式 黑板 主从 式 系统结构 。 它 由 对应 于 物理 CPU 的 若干 局部 黑板 组成 并 由 一个 主 黑板 管理 全局 。 　 　 黑板 上 的 共享 内容 是 以 对象 为 单元 的 结构化 数据 。 局部 黑板 的 数目 取决于 系统 功能模块 的 个数 计算 量 和 相互连接 。 按照 任务 规划系统 的 功能 和 规模 要求 需要 ～ 个 局部 黑板 每个 黑板 对应 于 一个 CPU 并 配置 一个 局部 监视器 。 所有 的 功能模块 知识 源 KS 也 被 划分 成 ～ 组 每 一组 对应 于 一个 局部 黑板 。 对于 KS 来说 所有 的 黑板 逻辑 上 是 一个 整体 它 存取 黑板 信息 时 只 向 监视器 发 一个 标准 的 黑板 操作命令 不必 指出 该 信息 属于 黑板 系统 中 的 哪 一部分 。 监视器 将 首先 在 本地 黑板 上 寻找 再 到 其它 黑板 上 搜索 。 由于 局部 黑板 与 本地 KS 紧密 相关 大部分 存取 操作 均 发生 在 本地 黑板 减少 了 通讯 开销 。 　 　 每一 知识 源 作为 一 独立 的 进程 在 计算机 上 执行 有 一个 专用 的 窗口 知识 源 之间 的 协作 由 分布式 黑板 来 实现 。 在 系统启动 后除 用户 接口 知识 源外 每 一 知识 源以 类似 的 方式 运行 。 运行 完 初始 程度 后 就 转入 静止 状态 然后 知识 源 监视 信息 黑板 。 一旦 得到 与其 有关 的 信息 知识 源 的 处理过程 就 恢复 并 完成 相应 功能 然后 又 转入 静止 状态 。 在 接到 “ 退出 ” 信息 后 知识 源 执行 终止 程序 并 清除 它 本身 的 处理程序 。 用户 接口 知识 源以 不同 的 方式 工作 在 执行 初始 程序 后 就 等待 规划者 的 输入 。 一旦 接到 输入 请求 知识 源 就 将 信息 传至 黑板 然后 转入 静止 状态 并 开始 监视 黑板 。 当有 信息 传至 黑板 表明 用户 的 请求 已 满足 时 用户 接口 知识 源 的 处理过程 立即 恢复 并 等待 任务 规划者 的 其它 输入 。 　 　 系统启动 的 同时 也 给 每个 知识 源 建立 了 一个 窗口 。 缺省 时 唯一 显示 的 窗口 是 用户 接口 知识 源 的 窗口 其它窗口 不 可见 除非 要求 显示 这些 窗口 中 的 信息 。 这样 任务 规划者 就 不会 为 系统 如何 运行 的 一大堆 细节 所 困惑 。 任何 其它 知识 源 都 可以 在 该 窗口 上 显示 关键性 信息 保证 任务 规划者 可以 看到 所有 关键性 信息 。 结束语 　 　 开放式 飞行 任务 规划 是 一种 分层 分段 分 区域 多 方法 相 融合 的 规划 策略 需要 灵活 有效 的 知识 表达 强调 复杂 的 交互式 图形 显示 在 计算机辅助 任务 规划 中 的 重要性 。 战场 地形图 象 分析 和 符号 地图 分割 预处理 为 开放式 任务 规划 提供 了 灵活 有效 的 知识结构 。 知识 表达 的 组合 地图 多 分辨率 锥体 数据结构 具有 很大 的 优点 但 也 存在 一些 局限性 在 许多 方面 还 需要 进行 深入 地 研究 特别 是 符号 地图 分割 在 支持 TFTA 航线 规划 方面 有 很大 的 潜力 。 本文 于 年月日 收到 参考文献 MillarRJAnArtificialIntelligenceBasedFrameworkforPlanningAirLaunchedCruiseMissileMissionsADAHalpernMEApplicationoftheAAlgorithmtoAircraftTrajectoryGenerationADAWilloughbyJKetalOptimizationApproachestoRoutePlanningforCruiseMissileAJardineTJandShebsSTKnowledgeRepresentationinAutomatedMissionPlanningAIAAComputersinAerospaceIVConferenceMacMillanTRetalKnowledgeBasedRoutePlanningProceedingsofIEEENAECONpMalinJAAutomaticRoutingModuleN 沈林成 自主 移动机器人 地形 导航 — — 数字 地形模型 与 自动 路径 规划 研究 国防科技大学 博士论文