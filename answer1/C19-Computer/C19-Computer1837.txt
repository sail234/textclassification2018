微型机 与 应用 MICROCOMPUTERITSAPPLICATIONSVolNoP 基于 网络共享 CACHE 技术 的 研究 龚涛 摘要 ： 基于 网络 的 Cache 技术 ， 并 在 此基础 上 讨论 了 该 技术 的 广泛应用 。 关键词 ： Cache 技术 网络带宽 重复 访问 　 　 当前 ， 近一半 的 企事业 单位 实现 了 Intranet ， 并 将 大量 的 图形 数据 提供 给 WAN 。 而 WWW 用户 近年来 正以 指数 增长 ， Web 访问 需求 的 无法控制 使得 网络带宽 严重不足 。 在 IT 中 产业 网络 和 计算机硬件 产品 以 Moore 定律 保持 每 ～ 各月 的 速度 翻一番 的 速度 增长 。 然而 ， Moore 定律 并 不 适合 网络带宽 ， 其 网络通信 基础设施 的 改进 依然 昂贵 。 为 解决 网络带宽 不足 及 重复 访问 同一 资源 的 问题 ， 提出 了 Cache 技术 。 　 　 Cache 技术 是 一种 对于 频繁 访问 Web 信息 的 请求 在 本地 实现 的 技术 。 它 将 Web 页 内容 存储 在 本地 存储 装置 上 ， 使得 Web 查找 变得 更 快 。 其 工作 方式 ： （ ） 某 用户 访问 个 Web 页 ， 当 这页 信息 发送给 用户 时 ， Cache 系统 将 这 一页 的 全部 信息 保存 在 本地 存储 装置 上 ， 这页 信息 被 称为 是 已 缓存 的 信息 ； （ ） 以后 的 另 一 用户 或是 原 用户 访问 这页 已 缓存 的 信息 ， WebCache 系统 将 从 本地 存储器 发送 这页 信息 给 用户 ， 这样 就 减少 了 与 WAN 连接 的 带宽 需求 ； （ ） 重要 的 是 数据 更新 问题 ， 这 可 根据 系统 的 设计 来 采用 不同 的 方法 实现 。 　 　 在 客户端 采用 了 基于 浏览器 的 客户 Cache 技术 ， 这种 技术 通过 设置 硬盘空间 给 Cache 和 设置 更新 时间 使得 再次 访问 个 站点 时 ， 可 从 用户 本地 硬盘 上 取出 。 这种 方法 对于 用户 本身 很 好 ， 但 不 适合 在 同一 网络 上 的 其它 用户 访问 同一 站点 的 情况 。 网络 Cache 解决方案 　 　 目前 ， 有种 类型 的 网络 级 Cache 解决方案 ： 一种 是 代理服务器 方案 另 一种 是 网络 Cache 方案 。 代理服务器 是 运行 在 通用 硬件 和 操作系统 上 的 软件应用 ， 它 可 接收 来自 Web 服务器 的 包 信息 ， 并且 检查和 过滤 用户 的 请求 ， 决定 是否 满足 或 阻止 访问 特定 的 站点 。 因此 ， 代理服务器 不能 优化 Cache ， 在 网络 负载 过重 情况 下会 失败 。 这是 由于 代理服务器 是 所有 用户 的 通道 ， 而且 ， 代理服务器 需要 配置 每个 用户 的 浏览器 ， 这 对于 企业级 服务商 是 不可 接受 的 。 　 　 为了 克服 代理服务器 在 WebCache 应用 上 的 缺点 ， 人们 提出 了 网络 Cache 的 技术 。 这种 Cache 定位 在 软件应用 上 ， 通过 增强 Cache 软件 和 祛除 代理服务器 慢速 应用 方面 来 改进 Cache 。 然而 ， 这种 网络 Cache 是 运行 在 通用 操作系统 下 的 应用软件 ， 由此 增加 了 操作系统 的 开销 。 一般 情况 下 ， 这种 技术 不 适合 上 千个 并发 用户 进行 Web 访问 。 　 　 随着 进一步 的 发展 ， 人们 设计 出 专用 网络 Cache ， 它 是 由 专用 硬件 和 软件 组成 ， 进一步提高 了 速度 、 可靠性 、 安全性 。 这种 专用 网络 Cache 降低 了 WAN 访问 带宽 和 加速 了 用户 访问 Web 的 速度 。 长期 考虑 ， 降低 了 网络 分摊 费用 。 为此 ， 著名 网络 公司 CISCO 提出 了 WCCP （ WebCacheControlProtocol ） 。 其 网络 Cache 采用 的 松散 耦合 ， 可 多点 网络系统 优化 。 网络 Cache 连接 在 路由器 上 ， 其 工作 方式 ： 当 用户 发出 Web 请求 时 ， 运行 WCCP 的 路由器 中断 TCP 口 ， 将 Web 请求 转 到 网络 Cache 设备 。 这样 ， 对于 其它 请求 ， 路由器 接着 履行 自己 的 功能 ， 网络 Cache 将 进行 下面 的 操作 。 此时 ， 若 网络 Cache 并 没有 所 请求 的 内容 ， 那么 它 就 将 用户 的 请求 发往 Internet 或 Intranet ， 接着 将 收到 的 内容 存 到 网络 Cache 上 ， 并 将 此 内容 传送 到 用户端 。 若 用户 的 Web 请求 已 在 网络 Cache 上 ， 网络 Cache 就 将 所 请求 的 内容 传送 到 用户端 。 由于 路由器 是 将 包 请求 由 Web 服务器 重定向 到 网络 Cache 的 ， 所以 网络 Cache 的 操作 对于 用户 是 透明 的 。 网络 Cache 并不需要 配置 用户 浏览器 。 用户 可以 各种 层次 将 网络 Cache 放置 在 一些 网络 地区 。 例如 ： 可 在 主 节点 处 放置 较大 容量 的 网络 Cache ， 而次 节点 可 放置 较 小 容量 的 网络 Cache 。 网络 Cache 实际上 是 一 专用 磁盘 控制 子系统 ， 其 使用 面向 线程 、 实时 的 文件 管理 和 网络 堆栈 软件设计 ， 用于 缓存 文件系统 ， 并 具有 清理 文件 碎片 和 目录 查询 文件系统 管理 功能 。 这种 网络 Cache 的 安全 、 实时 嵌入式操作系统 并 不 增加 通用 操作系统 的 处理 开销 ， 而 通用 操作系统 并 不能 使用 本身 的 网络共享 Cache 系统 来 实现 数千 节点 规模 的 同时 网上 事务处理 。 因此 ， 为 减小 网络流量 、 降低 费用 ， 需 采用 网络 Cache 技术 。 据统计 ， 个 站点 的 中 规模 Intranet ， 并发 进行 TCP 请求 ， 其 GB 的 Cache 容量 即可 满足要求 。 若 支持 数千 上万 站点 的 ISP ， 可 根据上述 原则 配置 大容量 网络 Cache ， 或 配置 多个 较 小 容量 的 网络 Cache 。 总之 ， 网络 Cache 在 目前 是 解决 网络带宽 和 防止 重复 访问 浪费资源 的 有效 手段 。 另外 ， 为 使 用户 能 及时 访问 到 最新 或 较 新 的 内容 ， 可 对 网络 Cache 进行 按期 刷新 。 关于 刷新周期 的 设置 ， 应 根据 用户 访问 的 频度 和 网站 信息 更新 周期 来 决定 。 应用 分析 　 　 用户 访问 WWW 资源 的 不定期 、 不确定性 ， 决定 了 需 对 以下 几个 方面 进行 定性分析 。 用户 访问 WWW 的 频度 ， 是 符合 高斯分布 的 。 据统计 目前 我国 上网 用户 每周 访问 网上 资源 平均 小时 。 其 下载 信息量 实际 不 超过 MB ， 千人 则 是 GB 的 信息量 。 目前 ， 大多数 用户 在 网上 查询 信息 是 通过 搜索引擎 ， 常用 的 搜索引擎 不过 几个 ， 这 就 说明 了 存在 大量 的 重复 访问 相同 的 站点 。 用户 对 其 站点 多层 树结构 的 根 主页 越 靠近 ， 其 访问 频度 就 越 高 ， 跟随 节点 往下 按 对数 规律 下降 ， 每 Web 页 文档 平均 ～ 个 链接 ， 按 平均 访问 页 和 每页 个 链接 ， 每人 查找 第页 的 个 链接 来 分析 ， 人 查找 为次 ， 若 使用 网络 Cache 则 最大 只 需 ＋ ＋ ＋ ＝ 次 ， 这样 就 可 节省 约 ％ 的 带宽 ， 而 实际上 网络 Cache 并不需要 遍历 所有 的 点 。 另外 ， 网络 Cache 若 在 企事业 、 校园网 内 使用 ， 由于 其 工作 性质 的 同一性 ， 访问信息 的 重复性 就 更 大 ， 利用率 会 更 高 。 对于 多数 搜索引擎 ， 从 天次 到 个 月 更新 次 ， 平均 是 一 星期 更新 次 。 因此 ， 将 网络 Cache 设置 为 每周 更新 次 ， 可 保持 新 的 信息内容 ， 并且 减小 了 带宽 ， 降低 了 费用 。 按 我国 目前 Internet 的 使用 情况 ， 在 台 用户 的 园区 网 ， 若 使用 网络 Cache ， 半年 至 年 就 可收回 成本 。 　 　 将 网络 Cache 引入 园区 网 ， 会 较 明显降低 网络 费用 ， 减小 网络带宽 ， 同时 也 就 加快 了 访问速度 。 目前 ， 网络 Cache 产品 日趋 成熟 ， 设备 价格 会 逐渐 降低 ， 今后 将会 成为 园区 网及 ISP 的 必选 设备 。 龚涛 （ 天津 农行 金融管理 干部 学院 计算中心 ） 参考文献 ， CharlesE ． Spurgeon ： PracticalNetworkingwithEthernet ， SporttackM ． A ． PappasF ． C ． RensingE ． High － Perfor － manceNetworking ， TereParnell ． 高速 网络 建设 指南 ． 收稿 日期 ： － －