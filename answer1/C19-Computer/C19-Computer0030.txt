计算机 应用 ComputerApplications 年 第卷 第期 VolNoInternetIntranet 上 电子商店 的 一个 实现 方法 曹 　 勇 　 刘 　 洁 　 　 摘 　 要 　 本文 的 主要 目的 是 以 IBMebusiness 解决方案 中 的 NetCommerce 为例 ， 介绍 如何 在 Internet 上 建立 并 实现 电子商店 。 　 　 关键词 　 电子商务 电子商店 InternetIntranet 　 　 ANIMPLEMENTATIONMETHODOFELECTRONICSTOREONINTERNETINTRANETCaoYongDepartmentofComputerandSystemScienceNankaiUniversityTianjinLiuJieTheInstituteofElementoOrganicChemistryNankaiUniversityTianjin 　 　 Abstract 　 ThepurposeofthispaperistopresentanimplementationofelectronicstoreonInternetIntranetusingIBMNetCommercewhichisoneproductofIBMebusinessfamily 　 　 Keywords 　 ElectronicstoreElectroniccommerceInternetIntranet 　 　 为了 从技术上 更好 地 了解 电子商务 的 实现 ， 我们 以 IBMNetCommerce 为例 ， 介绍 如何 在 Internet 上 建立 虚拟 商店 的 实现 技术 。 　 　 NetCommerce 是 IBM 实现 Internet 网络 商店 的 产品 它 为 用户 提供 了 许多 方便 、 灵活 的 工具 ， 用以 在 网络 上 建立 和 维护 一个 虚拟 商店 。 NetCommerce 的 体系结构 和 实现 技术 ， 为 我们 进行 广泛 的 电子商务 应用 做出 了 有益 的 尝试 。 　 　 　 三个 阶段 　 　 在 WWW 上 的 商业 应用 中 ， 一般 都 要 经过 三个 阶段 ， 即 存在 、 集成 和 商业活动 。 　 　 存在 阶段 ， 不论 哪 一种 商业活动 ， 发展 其 商业 潜力 的 前提 是 该 商业活动 在 Internet 上 ， 可以 被 广大 用户 找到 。 虽然 现在 的 网络 速度 还 不是 都 很快 ， 典型 的 网络 操作 模式 还是 令人 厌烦 的 “ 等待 浏览 等待 ” ， 但 谁 也 不能 忽视 WWW 上 千万 网民 （ 这个 数字 每天 还 在 增加 ） 。 所以 ， 如果 想要 在 网络 上 发展 商业 ， 第一件 事 就是 要 让 这些 网民 们 知道 你 的 存在 和 你 能 为 他们 做 什么 。 　 　 集成 阶段 ， 商家 们 在 Internet 上 建立 系统 ， 并 对 这些 系统 作 内部 和 外部 的 集成 。 外部 集成 ， 使 所有 连接 上来 的 用户 使用 相同 的 客户端 接口 — — Web 浏览器 进行 操作 ； 内部 集成 ， 将 不同 的 服务器 系统 连接 在 一起 协同 操作 。 　 　 商业活动 阶段 ， 也 是 最终 的 目标 阶段 ， 利用 建立 的 虚拟 网络 商业 服务 系统 为 用户服务 ， 同时 获取 利润 。 　 　 IBMNetCommerce 就是 这么 一种 产品 ， 帮助 商家 在 WWW 上 实现 上述 三个 阶段 。 它 提供 从 店铺 建立 、 编写 商店 主页 到 安全 交易 管理 等 多种 功能 ， 集成 了 Internet 应用 的 最新 思想 与 技术 实现 。 　 NetCommerce 概述 　 　 NetCommerce 与 关系数据库 ， 如 IBMDB ， 和 安全 Web 服务器 共同 工作 ， 组成 一个 简单 却是 安全 的 工作 环境 。 　 　 NetCommerce 的 系统结构 如图 。 　 　 NetCommerce 作为 服务器 由 两 部分 组成 ： NetCommerceServer 和 NetCommerceAdministrator 。 　 　 NetCommerceServer 由 NetCommerceServerDaemon 和 NetCommerceServerDirector 组成 。 前者 是 在 服务器 上 运行 的 通信 进程 ， 负责 与 数据库 进行 信息 交流 ， 辅助 数据库 服务器 完成 对 购买过程 的 控制 和 从 数据库 中 收取 用户 所 需 的 数据 。 它 支持 SSL 协议 保证数据 的 安全 。 后者 通过 TCPIP 协议 ， 管理 InternetConnectionSecureServer （ ICSS ） 和 NetCommerceServerdaemon 之间 的 快速 数据 访问 ， 它 是 用 通用 网关 接口 （ CGI ） 程序实现 的 。 　 　 图 　 NetCommerce 的 整体 结构 　 　 NetCommerceAdministrator 通过 NetCommerceSiteManager 、 NetCommerceStoreManager 以及 NetCommerceTemplateDesigner （ 模板 编辑器 ） 等 工具 ， 建立 和 维护 商家 的 商店 。 具体 说明 如下 ： 　 　 NetCommerceSiteManager 　 　 它 帮助 商家 在 一个 商场 内 建立 和 管理 一个 或 多个 在线 店铺 。 主要 功能 有 ： 　 　 指定 商场 主页 位置 　 　 存取控制 和 店铺 权限 管理 　 　 购物者 信息管理 。 　 　 它 的 主 操作界面 如图 。 　 　 图 　 NetCommerceSiteManager 的 主 操作界面 　 　 NetCommerceStoreManager 　 　 该 工具 帮助 创建 和 维护 在线 商店 的 商品目录 。 可 输入 或 更新 商品信息 和 目录 、 创建 新 的 商品目录 、 指派 消费者 组和 察看 商品 购买者 的 其他 信息 等 。 图是 NetCommerceStoreManager 的 主 操作界面 。 　 　 图 　 NetCommerceStoreManager 主 操作界面 　 　 NetCommerceTemplateDesigner 　 　 这是 一个 重要 的 工具 ， 通过 图形化 的 HTML 编辑器 ， 辅助 使用者 完成 模板 的 设计 和 修改 工作 。 该 工具 使用 Javaapplet 实现 。 通过 模板 编辑器 ， 可以 创建 店铺 、 商场 、 产品 、 项目 以及 商品目录 等 的 主页 。 模板 编辑器 使用 “ 所见即 所得 ” （ WYSIWYG ） 技术 实现 HTML 的 设计 过程 。 同时 ， 该 工具 还 提供 定制 SQL 宏 的 功能 ， 使 HTML 具有 动态 读取 数据库 的 能力 。 图是 一个 典型 的 模板 编辑器 界面 。 　 　 图 　 典型 的 NetCommerceTemplateDesigner 界面 　 　 相关 的 系统 组件 　 　 如前所述 DB 和 ICSS 与 NetCommerce 系统 的 性能 密切相关 ， 如图所示 。 　 　 数据库 　 　 DB 数据库系统 管理 并 保存 使用者 输入 的 有关 店铺 与 商品 的 信息 。 DB 中 的 数据表 与 NetCommerceAdministrator 中 的 表单 相关联 ， 每次 用户 在 浏览器 上 填写 、 保存 表单 后 ， 数据 将 自动 地 存储 或 更新 到 数据库 中 。 　 　 Web 服务器 　 　 InternetConnectionSecureServer （ ICSS ） 是 NetCommerce 系统 中 的 重要 组成部分 ， 它 利用 SSL 协议 控制 安全 的 交易过程 ， 使 交易 在 合法 的 情况 下 进行 。 NetCommerce 在 用户 付款 管理 上 ， 使用 其它 的 安全 系统 ， 如 SET 协议 。 　 　 图 　 与 NetCommercesystem 相关 系统 　 电子 付款 　 　 鉴于 安全性 在 整个 系统 的 重要 地位 ， 而且 电子 付款 将 是 系统 的 关键环节 ， 下面 我们 将 对 SET 协议 进行 简单 介绍 。 图 　 安全 电子 交易 （ SET ） 协议 　 　 整个 电子 付款 交易过程 包括 ： 浏览 、 购买 、 付款 合法性 验证 以及 获取 付款 等 过程 。 具体 定义 如下 ： 　 　 信用卡 持卡人 访问 某 电子商店 ， 浏览 商品 并 准备 购买 ； 　 　 持卡人 得到 订单 信息 ， 包括 产品 和 服务 的 详细描述 ， 以及 总 价格 （ 包括 运输 和 保管 费用 等 ） ； 　 　 购买者 必须 确认 此 订单 ， 并 提交 付款 信息 ； 　 　 销售商 利用 获得 的 付款 信息 向 “ 付款 网关 ” 提出 确认 请求 ， 并 附带 订货单 ； 　 　 “ 付款 网关 ” 向 相应 的 金融机构 提交 付款 信息 ， 并且 请求 确认 ； 　 　 如果 该 信用卡 合法 ， 金融机构 将 向 “ 付款 网关 ” 发出 认可 应答 ； 　 　 销售商 得到 付款 合法 应答 后 ， 组织 装运 、 交付 商品 或者 提供 相应 服务 的 工作 ； 　 　 销售商 使用 订货单 ， 要求 “ 付款 网关 ” 付款 。 　 　 SET 协议 设计 用来 为 厂商 提供 安全 、 可靠 、 一致 的 付款 环境 。 其 功能 如图所示 。 　 　 NetCommerceSET 体系结构 主要 由 NetCommerce 服务器 和 NetCommerceSET 扩展 两 部分 组成 。 　 　 NetCommerce 服务器 　 　 NetCommerce 服务器 是 整个 NetCommerce 系统 的 核心 ， 它 在 IBMInternet 安全 连接 服务器 和 数据库 （ DB ） 之间 起着 桥梁 的 作用 。 该 部分 主要 完成 顾客 交易 和 店主 管理 等 任务 。 　 　 NetCommerce 服务器 主要 包括 ： NetCommerce 服务器 守护 进程 （ mserverd ） 和 NetCommerce 服务器 定向 （ nphmsrvr ） 。 　 　 NetCommerce 服务器 守护 进程 mserverd 从 数据库 中 检索 顾客 或者 店主 想要 的 信息 ， 并 将 它们 组织 成 HTML 页 形式 。 为了 提高效率 ， NetCommerce 服务器 进程 与 数据库 之间 被 设计 成 连续 的 数据库 连接 ， 同时 用户 还 可以 设置 多个 运行 实例 ， 使 NetCommerce 可为 多个 顾客 店主 请求 服务 。 顾客 店主 是 通过 NetCommerce 服务器 定向 与 mserverd 进行 通信 的 。 NetCommerce 服务器 定向 nphmsrvr 与 NetCommerce 服务器 守护 进程 之间 通过 IP 进行 信息 交换 ， mserverd 在 IP 端口 监听 由 nphmsrvr 来 的 请求 信息 。 　 　 NetCommerce 服务器 定向 实际上 是 一个 CGI 程序 ， 连接 Browser 和 mserverd 。 当 顾客 提出 数据库 存取 请求 （ 显示 产品 信息 、 提交 订货单 等 ） 或者 店 主要 对 其 商品 数据 进行 维护 时 ， 该 nphmsrvr 程序 被 激活 。 　 　 NetCommerceSET 扩展 　 　 该 部分 主要 包括 NetCommerceSET 扩展 定向 器 （ ExtensionDirector ） 和 NetCommerceSET 扩展 守护 进程 （ ExtensionDaemon ） 。 　 　 NetCommerceSET 扩展 定向 器 实际上 就是 图中 的 nphpay ， 它 是 一个 运行 于 Browser 和 SET 守护 进程 之间 的 CGIScript 接口 ， 当 电子商店 的 顾客 通过 浏览器 向 店主 发出 SET 消息 时 被 激活 。 　 　 NetCommerceSET 扩展 守护 进程 （ ncsetd ） 是 SET 扩展 的 核心 ， 它 将 完成 ： 　 　 处理 信用卡 持卡人 的 交易 ； 　 　 与 特定 的 银行 通信 ； 　 　 将 必要 信息 存储 到 数据库 中 。 　 　 nphpay 和 ncsetd 之间 通过 基于 IP 的 专门 协议 进行 通信 ， 它们 之间 默认 采用 端口 。 NetCommerceSET 扩展 守护 进程 （ ncsetd ） 与 相应 的 金融机构 通过 “ 付款 网关 （ AcquirerGateway ） ” 进行 交互 。 “ 付款 网关 ” 与 NetCommerceSET 在 Internet 上 通过 HTTP 相互 通信 。 另外 ， ncsetd 还 在 数据库 上 维护 着 一些 特定 的 表 ， 用以 存储 诸如 授权 和 请求 等 信息 。 　 　 　 小结 　 　 以上 我们 以 IBMNetCommerce 为例 介绍 了 电子商店 的 实现 方法 。 基于 Internet 的 电子商务 应用 还 刚刚开始 ， 从 观念 到 法规 、 从 技术 到 产品 都 还 远 没有 完成 。 电子商务 领域 对于 商业 企业 和 计算机专业 人员 来说 都 还是 一块 刚 开发 的 新天地 ， 充满 了 迷人 的 诱惑 同时 又 蕴藏 着 巨大 的 挑战 。 不过 我们 相信 ， 随着 计算机网络 应用 的 普及 与 深入 ， 电子商务 的 大 发展 时代 已经 到来 ， 我们 应 义无反顾 地 担负起 信息时代 赋予 我们 的 责任 和 义务 。 　 　 曹 　 勇 　 硕士 。 主要 研究 方向 ： 计算机网络 与 信息系统 。 　 　 刘 　 洁 　 博士 。 主要 研究 方向 ： 计算机辅助 分子 设计 、 计算 化学 、 农药 学 。 　 　 作者 单位 ： 曹 　 勇 （ 南开大学 计算机 与 系统 科学系 ） 　 　 　 　 　 　 　 刘 　 洁 （ 南开大学 元素 有机化学 研究所 ） 参考文献 ［ ］ 　 httpwwwdeveloperibmcomwelcomeebusinessindexhtml ［ ］ 　 EamonMurphy ， MartinWMurhammer ， etalIntegratingNetCommercewithLegacyApplicationsIBMRISCSystemRedbooksCollection ， October ［ ］ 　 RobMacgregor ， CatherineEzvan ， etalSecureElectronicTransactionsWWWCreditCardPaymentIBMRISCSystemRedbooksCollection ， October 收稿 日期 修改稿