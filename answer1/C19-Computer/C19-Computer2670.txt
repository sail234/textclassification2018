软件 学报 JOURNALOFSOFTWARE 年 　 第卷 　 第期 　 Vol 　 No 　 多媒体信息 网络 QoS 的 控制 林闯 摘要 文章 综述 了 多媒体信息 网络 在 服务质量 QoS 研究 方面 的 一些 最近 的 工作 着重 论述 了 接纳 控制 和 信源 整形 、 QoS 选路 和 资源 预留 、 基于 QoS 的 传输 调度 、 综合 服务网 的 QoS 控制 等 问题 文章 还 描述 了 多媒体信息 网络 QoS 控制 的 技术 以及 所 面临 的 问题 和 进一步 的 研究 方向 关键词 服务质量 QoS 接纳 控制 信源 整形 QoS 选路 资源 预留 QoS 调度 中图法 分类号 TPOnQoSControlofMultimediaInformationNetworksLINChuangStateInformationCenterBeijingAbstractThisisareviewpaperonrecentworksaboutqualityofserviceQoSofmultimediainformationnetworksAbriefofthetechnologiesconsideredintheliteraturesisgiveninthispaperThesetechnologiesincludeadmissioncontroltrafficshapingQoSroutingresourcereservationQoSbasedschedulingandQoScontrolforintegratedservicesAfewofmethodologiesresearchdirectionsandopenproblemsinthisareaarediscussedinthispaperKeywordsQualityofserviceQoSadmissioncontroltrafficshapingQoSroutingresourcereservationQoSscheduling 　 　 在 当今 的 网络 中 多种 应用 需要 提供 服务质量 QoS 控制 例如 视频会议 、 IP电话 和 远程教育 等 多媒体信息 传输 的 QoS 控制技术 也 是 下一代 网络 的 核心技术 之一 是 当前 网络 研究 与 开发 的 热点问题 　 　 多媒体 高速 网络 的 研究 开发 近几年 进展 得 异常 迅速 QoS 问题 的 研究 已经 有 了 一些 基本 成果 这些 成果 大量 地 反映 在 IEEEINFOCOM 每年 的 会议 论文集 和 Internet 的 IETFRFCrequestforcomments 标准 草案 中 但是 目前 QoS 的 研究 开发 在 很多 方面 仍然 是 开放 的 其 主要 问题 有 网络系统 状态 和 链路 带宽 容量 变化 的 不确定性 传输 通路 端到 端 带宽 预留 缺乏 有效 的 保证 QoS 选路 、 资源 预留 和 信息 传输 调度 算法 的 复杂性 还 不能 适应 高速 信息 传输 处理 时间 的 要求 QoS 要求 所 导致 的 资源 利用 的 无效 性 不能 充分利用网络 资源 提高 网络 的 吞吐量 QoS 控制 方案 基本上 还是 静态 方案 缺乏 有效 的 动态控制 方案 一些 基本 研究成果 主要 存在 于 理论 中 还 没有 形成 专利 或 技术 产品 现存 的 网络 交换机 或 路由器 还 不能 完全 保证 用户 服务质量 缺乏 简单 而 有效 的 控制 方案 和 算法 的 实现 传输 管理 与 控制 亟待 改进 在 Internet 中 为了 使 IPInternetprotocol 网络 不仅 能 传输 非 实时 的 数据 信息 而且 还 能 传输 实时 的 多媒体信息 国际 上 的 标准化 组织 如 ITUIETF 等 已 开始 起草 并 完成 了 一些 用于 IP 实时 通信 的 标准 如实 时 传输 协议 实时控制 协议 RTPRTCPrealtimeprotocolrealtimecontrolprotocol 、 资源 预留 协议 RSVPresourcereservationprotocol 以及 H 标准 等 这些 协议 和 标准 对 用户 服务质量 控制 的 研究 提供 了 一定 的 基础 但 还有 很远 的 路 要 走 　 　 QoS 控制 主要 包括 信息 传输 的 实时性 和 信息 丢失 的 管理 与 控制 等 问题 在 多媒体 网络 中 不同 用户 可能 有 不同 的 传输 要求 例如 视频 和 音频 的 传输 有 实时 的 要求 超时 的 信息 不能 使用 但 同时 可以 容忍 某种程度 的 信息 丢失 而 数据 的 传输 则 不容许 信息 的 丢失 但 传输 的 时延 则 不成问题 因此 要 保证 信息 传输 的 实时性 和 丢失 的 综合 要求 是 多媒体 网络 传输 控制 的 一个 重要 问题 　 　 本文 主要 参考 IEEEINFOCOM 年 、 年 和 年 会议 论文 以及 Internet 有关 QoS 的 RFC 标准 草案 结合 作者 多年 的 研究 工作 就 QoS 控制 与 管理 个 方面 的 问题 进行 探讨 和 综述 它们 包括 接纳 控制 和 信源 整形 、 QoS 选路 和 资源 预留 、 基于 QoS 的 传输 调度 、 综合 服务网 的 QoS 控制 虽然 ATM 和 Internet 两种 网络 对 QoS 控制 的 协议 和 实现 有所不同 但 多数 QoS 控制 的 技术 方法 和 思路 却 可以 互用 本文 重点 介绍 上述 问题 研究 的 技术 和 思路 这些 思路 和 技术 对 多媒体 网络 QoS 控制 的 理解 、 设计 和 实现 具有 普遍意义 　 接纳 控制 和 信源 整形 　 　 为了 保证 传输 的 QoS 任何 实际 的 QoS 传输 控制 方案 必须 考虑 对 用户 传输 实施 接纳 控制 admissioncontrol 对 其 信源 实施 整形 trafficshaping 　 　 QoS 的 传输 连接 要求 在 新 用户 传输 前 进行 接纳 控制 在 用户 入网 时 要求 用户 把 自己 的 传输 特性 和 参数 以及 他 所 要求 的 服务质量 告知 网络 网络 再 根据 用户 的 传输 性能 要求 和 网络 现存 的 资源 情况 同 用户 协商 决定 是否 接纳 建立 一个 新 的 QoS 传输 的 连接 　 　 在 QoS 接纳 控制 中有 个 主要 问题 需要 研究 哪些 传输 参数 可以 确切 地 描述 一个 连接 的 传输 网络 使用 哪些 判据 来 决定 是否 接受 一个 新 的 连接 网络 性能 与 传输 参数 之间 的 关系 如何 　 　 传输 描述 参数 　 　 在 目前 的 网络 QoS 研究 中 要求 用户 提供 的 有关 QoS 属性 的 参数 主要 包括 　 　 峰值 分组 速率 peakpacketrate 是 指 传输 中 的 最大 瞬间 速率 可用 产生 两个 相邻 分组 的 最 短时间 间隔 的 倒数 来 表示 　 　 平均 分组 速率 sustainedpacketrate 是 指 一段时间 内 分组 传输 的 平均 速率 　 　 分组 丢失 率 packetlossrate 是 指 由于 出错 或 阻塞 网络 上 丢失 的 分组 数 与 用户 发出 的 分组 总数 之 比 　 　 分组 传输 时延 packettransferdelay 是 指 分组 从 信源 发出 的 源 节点 至 到达 目的 节点 之间 的 时间 由 传播 时延 、 排队 时延 、 交换 时延 等 组成 　 　 分组 时延 变化 量 packetdelayvariation 是 分组 传输 时延 的 变化 度量 当该 变量 取值 高时 意味着 要 给 延迟 敏感数据 如 声音 和 图像 传输 提供 较大 的 缓冲 　 　 接纳 判据 　 　 接纳 判据 是 指 网络 在 判断 是否 接受 一个 新 的 连接 时 决定 的 依据 分组 传输 时延 和 分组 丢失 率 是 两个 最 常用 的 接纳 判据 　 　 在 QoS 控制 网络 中 分组 传输 可 采用 统计 多路复用 的 方法 共享 带宽 资源 各个 连接 没有 固定 速率 的 专用 信道 当某 一 连接 传输 量 增加 时会 占用 其他 连接 的 资源 从而 会 影响 其他 连接 的 服务质量 特别 是 由于 多媒体 网络 传输 具有 高 突发性 、 高速率 的 特点 其 传输速率 变化 很快 因此 增加 了 接纳 控制 过程 的 复杂性 仅 使用 长时间 项 的 平均 分组 传输 时延 和 分组 丢失 率 作为 接纳 判据 不能 充分 表示 多媒体 网络 快速 、 动态变化 的 程度 因此 必须 虑 能 反映 网络 瞬间 行为 的 判据 一些 短时间 项 的 瞬间 行为 的 判据 例如 传输 时延 的 变化 、 分组 丢失 变化率 等 应 在 多媒体 网络 中 采用 　 　 网络 性能 与 传输 参数 之间 的 关系 　 　 在 多媒体 网络 的 接纳 控制 中 一个 重要 的 研究 问题 是 各种 传输 参数 与 网络 性能 之间 的 关系 一些 定性 的 关系 和 影响 已经 给出 但是 如何 给出 定量 的 数学 描述 来 表明 它们 之间 的 关系 仍然 面临 挑战 尤其 是 在 多个 异种 传输流 被 多路复用 的 情况 下 更是 一个 难题 　 　 在 多媒体 网络 中 传输流 是 高度 突发 的 其 传输速率 变化很大 QoS 网络系统 一般 要 对 分组 到达 的 流速 进行 整形 并 对 用户 所 使用 的 信道 带宽 实行 监控 信源 整形 和 带宽 监控 技术 就是 要 避免 分组 在 网络 中 的 突发性 传输 达到 改善 网络 QoS 性能 的 目的 传输 整形 技术 成功 的 关键在于 减少 传输 时延 和 分组 的 丢失 　 　 可以 使用 传输 限制 函数 来 描述 信源 整形 如图所示 bt 表示 在 时间 长度 t 内 信源 能够 发送 进入 网络 的 分组 个数 Ajss 表示 在 时间 间隔 ss 连接 或会 话 在 本文 中 二者 一般 不 加 区别 j 到达 的 分组 数量 传输 限制 函数 可以 表达 为 　 　 目前 最 常用 的 信源 整形 和 带宽 监控 技术 是 “ 漏桶 ” leakybucket 算法 这个 算法 可 将 突发 信 源流 转化 为 平缓 传输流 并 确保 用户 的 传输流 遵守 用户 在 建立 连接 时 的 规定 　 　 漏桶 算法 的 基本 思想 是 任何 一个 分组 要 进入 网络 一定 要 从 令牌 池漏 桶 中 取得 一个 令牌 如果 此时 令牌 池为 空则 该 分组 被 丢失 令牌 由 网络 平均 接纳 速率 R 产生 令牌 池 最 多 可 存放 P 个 令牌 P 即漏 桶 的 大小 令牌 池满时 新 产生 的 令牌 被 丢弃 图是 这种 方法 的 示意图 在 漏桶 算法 限定 信源 模型 中 传输 限制 函数 btPRt 一个 信源 允许 在 任意 短 的 时间 间隔 内 发送 P 个 分组 的 突发 信息 但 在 长时间 间隔 范围 内 信源 被 限定 以 平均 速率 R 来 发送 　 　 一个 改进 方法 是 在 分组 到达 漏桶 前 增加 一个 缓冲区 这样 当 令牌 池为 空时 只要 缓冲器 没有 满 分组 就 可以 缓存 在 缓冲器 中 而 不 被 丢失 如图所示 　 　 　 　 　 　 　 　 　 　 　 　 　 图 　 漏桶 算清 法 　 　 　 　 　 　 　 　 　 　 图 　 带 缓冲器 的 漏桶 算法 　 　 这些 漏桶 算法 还有 一些 缺点 例如 即使 在 网络 负载 很 低时 漏桶 算法 对 违约 分组 仍然 采用 丢弃 或 放入 缓冲区 的 方法 由于 算法 的 限制 减缓 了 传输 流速 造成 网络资源 的 浪费 采用 标志 法 可以 对此 加以 改善 当 分组 到达 但 令牌 池为 空 或 缓冲器 已满时 就 将 该 分组 打 上 一个 标志 说明 是 违约 分组 然后 接纳 它 进入 网络 如果 在 网络 某处 遇到 拥塞 则 丢弃 若 一直 没有 遇到 拥塞 则 可 到达 目的 节点 这 也 是 目前 IP 网络 所 采用 的 区分 服务 的 基本思路 　 　 信源 整形 仅 限定 在 信源 入网 处非 QoS 传输 不 需要 整形 　 QoS 选路 和 资源 预留 　 　 QoS 选路 所 涉及 的 选路 机制 要 完成 两个 目标 选择 满足 QoS 要求 的 通路 如果 存在 多条 可行 的 通路 选择 一条 有效 的 通路 以 完成 高 网络 吞吐量 QoS 选路 主要 包括 管理 选路 信息 例如 链路 状态 或 距离 向量 和 选路 算法 在 信息 传输 之前 在 源 节点 和 目的 节点 之间 建立 某种 连接 为 这个 连接 预留 有效 的 带宽 等 资源 带宽 预留 的 原则 是 确保 QoS 传输 的 端 到 端 时延 和 分组 丢失 率 但 目前 的 研究 偏重于 端到 端 时延 保证 这个 时延 基本上 包括 固定 时延 线路 传输 时延 等 和 排队 时延 两 部分 固定 时延 表现 了 选择 通路 的 特性 可 由 通路 选择 算法 描述 而 排队 时延 则 由 QoS 控制 的 调度 策略 决定 在 这 一节 我们 将 介绍 和 讨论 时延 保证 的 选路 算法 、 选路 的 策略 、 不 确定 信息 环境 的 选路 以及 选路 的 实现 线路 传输 时延 保证 的 选路 算法 　 　 在 假定 网络 所有 链路 的 带宽 信息 都 确定 有效 的 情况 下 一个 网络 可 由 一个 图 GVE 表示 V 是 节点 集合 E 是 链路 或边 集合 对于 ij ∈ V 的 链路 eij ∈ E 它 能够 传输 信息 的 带宽 为 Be 分组 秒 每个 分组 在 链路 e 上 传输 的 时延 为 De 一个 分组 在 时间 t 从 节点 i 发送 将 在 时间 tDe 到达 节点 j 链路 时延 De 包括 链路 的 准备 时间 和 在 链路 上 的 传播 时间 由于 分组 的 连续 发送 r 个 分组 沿着 链路 e 发送 时延 时间 为 rBeDe 　 　 考虑 一条 从 节点 i 到 ik 的 通路 它 由 链路 iiii … ikik 构成 对于 j … kijij ∈ E 如果 ii … ik 是 不 相同 的 这条 通路 是 简单 的 这条 通路 P 的 时延 由 DP 表示 DP Σ Kj 其中 ejijij 这条 通路 的 带宽 由 BP 表示 BPminKjBej 　 　 线路 传输 时延 保证 问题 可以 描述 如下 给定 计算机网络 GVE 所有 e ∈ E 的 时延 De 和 带宽 Be 任务 是 计算 一条 从源 节点 s 到 目的 节点 d 的 通路 P 在 P 上 发送 r 个 分组 使得 从 s 发送 第个 分组 起到 d 接收 最后 一个 分组 止 的 传输 时间 不 超过 t 亦 即 rBPDP τ 选路 策略 　 　 QoS 选路 建立 的 通路 既 要 可行 满足 端到 端 时延 保证 又 要 网络 有效 符合 网络 资源管理 要求 要 达到 两个 重要 目标 减少 计算 的 复杂性 和 优化 网络资源 的 消耗 　 　 具有 多重 目标 的 QoS 选路 问题 是 典型 的 NP 完全 问题 对于 这样 的 问题 一般 可以 使用 一些 标准 近似 方法 求解 但是 不能 用于 大规模 的 、 复杂 的 网络 目前 算法 的 研究 集中 在 利用网络 层次 的 、 可压缩 的 拓扑 结构 特性 方面 　 　 如果 在 源 节点 和 目的 节点 存在 多条 不 相交 的 通路 一个 重要 的 选路 策略 是 如何 选择 一条 通路 这个 选路 策略 的 目标 是 保证 发送 速率 、 优化 网络资源 的 消耗 和 增强 网络 适应 进一步 呼叫 的 能力 在 这方面 经常 考虑 的 策略 包括 负载平衡 、 最 短时 延 、 最短 最 宽 通路 和 概率 选择 不 确定 链路 状态 等 　 　 在 线路 交换 网络 中 在 单一 服务 情况 下 每 一个 传输流 的 带宽 要求 是 常数 与 同一 链路 的 其他 传输流 无关 选择 最小 负载 通路 leastloadedpath 策略 可 平衡 网络 负载 减少 新 用户 呼叫 阻塞 的 概率 然而 在 多媒体 服务 的 分组 交换 网络 中 由于 链路 的 统计 复用 和 不同 传输流 的 混合 通路 选择 的 策略 同 经典 的 负载平衡 策略 相反 选择 最坏 负载 通路 worstloadedpath 策略 可 达到 较 好 的 效果 它 可以 在 最小 负载 通路 上 留下 更 多 带宽 容量 为 要求 高带宽 的 新 用户 呼叫 服务 另外 由于 统计 复用 特性 将 不同 的 传输流 放在 同 一条 连接 通路 上会 更 有效 选择 当前 信源 速率 概率分布 压缩 方差 最大 的 通路 可以 节省 带宽 要求 不 确定 信息 环境 中 的 选路 　 　 随着 网络 规模 的 增长 网络 元素 状态 的 不确定性 也 会 自然 地 增长 选路 必须 依赖 部分 和 近似 的 信息 使 所 选择 的 通路 仍然 满足 QoS 如何 提供 必要 的 信息 有效 参数 的 语义 依赖于 所 使用 的 描述 方法 例如 我们 可以 考虑 使用 平均值 、 正态分布 的 一个 可能 范围 或者 最好 、 最坏值 通路 选择 过程 的 目标 之一 就是 选择 一条 通路 使 其 最 可能 满足 QoS 同 链路 状态值 相 联系 的 确切 概率分布 取决于 网络 修改 和 网络 动态 行为 的 知识 对于 广泛 的 概率分布 这个 问题 的 求解 是 不 可能 的 然而 可以 定义 具有 聚集 特性 的 一类 分布 来 建立 确切 和 有效 的 算法 实际 系统 中 的 典型 分布 属于 这 类 分布 在 实施 不 确定 信息 选路 时 可以 考虑 将 端 到 端 时延 限制 分解 为 局部 时延 限制 以便 建立 有效 、 可行 的 算法 然后 结合 链路 状态值 的 概率分布 来 考虑 选路 的 综合 优化 问题 选路 的 实现 　 　 在 实际 选路 实现 中选 路 过程 依赖于 一些 分布 协议 主要 包括 链路 状态 协议 、 资源 预留 协议 RSVP 和 实时 传输 协议 实时控制 协议 链路 状态 协议 完成 每个 节点 带宽 等 当前 参数 的 修改 和 向 网络 其他 节点 播发 本 节点 参数 的 修改 资源 预留 协议 主要 完成 带宽 等 资源 的 预留 实时 传输 协议 实时控制 协议 完成 实时 分组 的 排队 处理 和 控制 在 IP 综合 服务网络 中 已有 一个 开放 的 路由 协议 “ 开放 最 短路 优先 ” openshortestpathfirst 简称 OSPF 的 实现 在 此基础 上 已 加入 了 QoS 选路 扩展 的 实现 　 　 在 Internet 的 视频会议 等 应用 中选 路 是 多路 连接 的 它 包含 了 很多 节点 而且 这些 成员 是 动态变化 的 如何 在 这种 环境 中 实现 动态 选路 和 预留 资源 是 一个 难题 　 基于 QoS 的 传输 调度 　 　 调度 算法 的 基本功能 是从 节点 的 每 一个 输出 链路 中 挑选 在 下 一个 有效 周期 发送 的 分组 QoS 传输 调度 控制 要 基于 几个 原则 例如 带宽 的 保证 、 流 的 隔离 、 时延 的 保证 和 公平 选择 等 协议 和 算法 的 复杂性 要 适应 网络 高速传输 和 便于 实现 使 其 具有 可扩展性 和 鲁棒性 调度 算法 可以 分为 两类 基于 速率 的 调度 算法 和 基于 时间 的 调度 算法 　 　 目前 最 主要 的 调度 策略 都 是 近似 广义 处理器 共享 generalizedprocessorsharing 简称 GPS 的 调度 策略 在 Internet 中 有关 近似 GPS 调度 策略 的 规定 在 文献 中 有所 描述 在 处理器 共享 processorsharing 简称 PS 调度 中 对于 每个 连接 会话 都 有 一个 先进先出 FIFO 队列 它们 共享 着 相同 的 链路 在 任何 时间 间隔 都 正好 有 N 个 非空 队列 服务器 以 链路 速率 的 N 同时 传送 在 队列 头部 的 N 个 分组 PS 方案 以 相同 速率 服务 所有 非空 队列 GPS 方案 则 是 PS 方案 的 扩充 允许 不同 的 会 话 有 不同 的 服务 速率 GPS 方案 有 两个 特性 可以 保证 端到 端 有界 时延 服务 和 确保 带宽 的 公平 分配 　 　 GSP 调度 器 特性 可以 描述 如下 让 N 个 连接 会话 由 N 个 正 实数 φ φ … φ N 刻画 Wist 是 会 话 i 在 时间 间隔 st 接收 服务 的 发送量 对于 在 st 期间 正在 传输 的 会 话 i 要 满足 下列 不等式 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 对于 在 st 期间 正在 传输 的 任何 两个 会话 i 和 j 有 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 表明 调度 器 按照 fi 的 比例 分布 带宽 给 所有 的 在 st 期间 正在 传输 的 会 话 因此 ， fi 可以 叫做 服务 共享 权让 C 是 服务 速率 所有 会话 的 发送量 有 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 从式 ～ 我们 能 获得 会话 i 的 最小 服务 速率 xi 为 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 式 表明 GPS 调度 器 的 隔离 特性 每 一个 会话 不受 其他 会话 的 影响 可以 有 其 最小 服务 速率 的 下界 服务 速率 的 下界 确保 了 会 话 传输 时延 的 上界 服务 共享 权 既 用于 描述 最小 要求 的 服务 速率 又 表示 了 公平 共享 的 比例 　 　 由 服务 共享 权 的 含义 和 接纳 控制 的 保证 可知 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 以上 描述 的 GSP 调度 器 特性 表明 GSP 可以 同时 提供 隔离 和 公平 特性 连同 速率 和 时延 的 保证 　 　 GPS 方案 只是 一个 理想 的 流体 模型 而 不能 完全 在 实际 中 应用 大多数 感兴趣 近似 GSP 的 调度 器 是 要 考虑 分组 传输 并 按 速率 比例 服务 的 调度 器 在 流体 系统 和 分组 网络 之间 的 区别 是 在 任何 时间 在 流体 系统 中有 多个 分组 同时 接受 服务 而 在 分组 网络 中仅 能 有 一个 分组 接受 服务 时延 保证 是 所有 这些 近似 GSP 调度 器 的 公共 特性 但 公平 特性 每个 调度 算法 却 各不相同 在 近似 GSP 调度 器 的 节点 服务器 使用 系统 虚拟 时间 函数 为 系统 中 的 分组 计算 时间 标签 时间 标签 规定 这个 分组 相对 于 其他 分组 应当 被 服务 的 时间 分组 的 服务 按照 它们 时间 标签 值 增加 次序 排列 在 每个 会话 队列 头部 的 分组 时间 标签 值 作为 会话 的 时间 标签 值 系统 虚拟 时间 函数 决定 这 类 算法 的 时延 和 公平 特性 　 　 近似 GPS 策略 调度 算法 实现 的 复杂性 主要 是 由 维持 和 分类 所有 连接时间 标签 的 复杂性 决定 的 具体 包括 系统 虚拟 时间 函数 所 要求 计算 的 复杂性 为了 选择 和 发送 具有 最小 时间 标签 分组 而 进行 分类 操作 的 复杂性 处理 和 存储 时间 标签 的 花费 　 　 简化 近似 GPS 策略 调度 算法 实现 的 复杂性 是 QoS 调度 策略 的 主要 研究 方向 最近 提出 的 离散 速率 调度 算法 并 不 要求 给 每 一个 连接 计算 和 存储 一个 时间 标签 仅 对 每 一种 速率 维持 一个 时间 标签 这种 调度 器有 非常简单 的 两层 层次结构 在 这个 层次结构 的 低层 使用 先进先出 FIFO 队列 一种 速率 一个 FIFO 队列 一个 队列 仅 有 一个 时间 标签 具有 相同 速率 的 所有 连接 使用 一个 队列 这样 就 减少 了 时间 标签 的 数量 因而 降低 了 实现 的 复杂性 在 这个 层次结构 的 高层 使用 一个 最坏 情况 公平 调度 器 在 不同 FIFO 队列 中 进行 调度 　 　 现在 已 研究 的 近似 GPS 调度 策略 的 例子 有 自 时钟 公平 排队 selfclockedfairqueueing 简称 SCFQ 方案 、 虚拟 时钟 virtualclock 简称 VC 方案 、 最坏 状况 公平 加权 公平 排队 worstcasefairweightedfairqueueing 简称 WFQ 方案 和 最小 时延 自 时钟 公平 排队 minimumdelayselfclockedfairqueueing 简称 MDSCFQ 方案 等 公平 排队 方案 最 根本 的 思路 就是 给 每 一个 会话 以 对 有效 带宽 的 公平 共享 亦 即 相等 的 存取 权力 在 加权 公平 排队 方案 中 调度 器 可以 分配 不同 的 权力 给 不同 的 会 话 　 　 在 加权 公平 排队 方案 中 一个 连接 中 的 每个 服务 节点 除了 服务 时延 外 都 要 有 等待 时延 这些 等待 时延 要 累加 起来 将 形成 会话 传输 时延 的 一部分 文献 提出 了 协调 最早 到期 优先 coordinatedearliestdeadlinefirst 简称 CEDF 的 调度 算法 来 克服 等待 时延 的 累加 一旦 一个 分组 通过 它 的 第个 服务器 它 就 能 很快 地 通过 它 所有 剩下 的 服务器 CEDF 算法 没有 累加 分组 通过 每个 服务器 的 等待 时延 　 综合 服务网 的 QoS 控制 　 　 在 综合 服务网络 中 传输流 基本 可以 分成 两大类 QoS 传输流 和 尽量 做好 besteffort 传输流 QoS 传输流 目前 又 可 分为 保证 服务 guaranteedservice 、 控制 负载 服务 controlledloadservice 和 区分 服务 differentiatedservices 等 传输流 它们 需要 QoS 控制 必须 为 其 选路 预留 带宽 、 缓冲 和 处理 能力 等 资源 并 进行 实时 调度 控制 而 尽量 做好 的 传输流 没有 QoS 保证 其 带宽 分配 可以 动态 地 改变 可以 根据 当前 时刻 的 传输 要求 和 网络 的 有效 带宽 进行 分配 　 　 在 网络 中 实时 传输 一般 使用 常数 位 速率 constantbitrate 简称 CBR 和 实时 可变 位 速率 variablebitrate 简称 VBR 服务 非 实时 传输 一般 使用 非 实时 可变 位 速率 、 有效 位 速率 availablebitrate 简称 ABR 、 无 规定 位 速率 unspecifiedbitrate 简称 UBR 实时 传输 属于 QoS 控制 的 传输 典型 的 应用 包括 音频 和 视频 互放 的 应用 ABR 服务 属于 典型 的 尽量 做好 传输 典型 的 应用 包括 文件 和 Email 的 传输 　 　 如果 仅 分别 考虑 不同 服务 级别 的 选路 QoS 传输流 选路 重视 减少 新 用户 呼叫 阻塞 概率 而 尽量 做好 传输流 的 选路 重视 避免 链路 拥塞 和 改进 每个 会话 的 吞吐量 但 在 综合 服务网络 中 包含 着 多个 服务 流 时 如果 仅 为 每 一个 流 选择 一个 优化 的 通路 这样 优化 的 通路 将 可能 增加 其他 级别 流 的 拥塞 条件 因此 需要 一个 机制 能够 根据 当前 的 负载 情况 在 不同 服务 流 之间 动态 地 分配 链路 资源 这是 综合 服务网络 QoS 选路 的 性能 关键 综合 服务网络 QoS 选路 可 使用 下述 种 策略 　 　 静态 链路 共享 策略 将 链路 的 容量 静态 地 在 QoS 传输流 和 尽量 做好 传输流 之间 分配 问题 是 在 两种 传输流 比例 随着 时间 而 动态 改变 时 如何 静态 地 决定 资源 的 分配比例 另外 每种 传输流 在 网络 中 不是 均衡 分布 的 QoS 传输流 可能 集中 在 网络 的 一部分 而 尽量 做好 传输流 集中 在 网络 的 另 一部分 静态 共享 策略 不 适应 这种 不 平衡 　 　 半 动态 链路 共享 策略 测量 不同 传输流 的 总 链路 利用率 周期 地 修改 不同 流 的 资源分配 比例 这种 策略 不 适应 链路 利用率 的 突然 改变 它们 的 反映 时间 太 长 　 　 动态 链路 共享 策略 分别 测量 不同 传输流 的 链路 利用率 考虑 到 Internet 主要 传输流 是 尽量 做好 传输流 QoS 传输流 的 选路 应 选择 尽量 做好 传输流 低 拥塞 的 链路 为了 更好 地 表示 链路 的 利用率 在 文献 中 采用 虚拟 剩余 带宽 概念 来 表示 不同 传输流 的 状况 　 　 为了 确保 QoS 传输流 的 端 到 端 时延 界限 就要 根据 QoS 传输流 最坏 可能 状况 预留 资源 因此 典型 QoS 传输流 实际 到达 时延 要远 小于 保证 的 端 到 端的 时延 界限 这 势必 限定 网络资源 有效 的 利用 据 对 某些 状况 的 统计 带宽 多路复用 的 利用率 仅达 另外 在 视频 互放 的 应用 中 由于 分组 到达 经常 早 于 它们 要 被 传递 的 时刻 因此 在 接收 系统 还 需要 缓冲 它们 直至 应用 处理 它们 这 一点 也 表明 系统 需要 减少 分组 到达 最小 和 最大 时延 之间 的 差 　 　 为了 克服 网络资源 利用率 的 限制 在 QoS 传输流 的 预留 资源 不能 充分利用 时 可以 考虑 临时 引入 尽量 做好 传输流 使用 这部分 空闲 的 资源 但 当 QoS 传输流 完全 “ 忙 ” 时 就让 QoS 传输流 完全 占用 预留 资源 这样 的 动态 带宽 调度 既 可 满足 QoS 传输流 的 QoS 要求 又 可 提高 网络 的 性能 　 　 在 动态 带宽 调度 策略 中 一个 直接 和 简单 的 方法 就是 在 每个 网络 节点 给 尽量 做好 传输流 最低 的 可能 优先级 如图所示 假定 会话 从 k 有 QoS 要求 的 传输流 会话 从 k 到 N 是 尽量 做好 传输流 会话 从 k 需要 信源 整形 而会 话 从 k 到 N 不 需要 信源 整形 队列 从 k 比 队列 从 k 到 N 有 更 高 的 发送 优先级 仅当 队列 从 k 中 没有 分组 时 队列 从 k 到 N 中 的 分组 才 有 被 发送 的 可能 对于 QoS 传输流 的 每 一个 会话 在 连接 建立 时 可以 根据 它 所 要求 的 QoS 给 每 一个 会话 一个 优先级 　 　 图 综合 服务 的 静态 优先级 调度 器 　 　 这种 静态 优先级 方法 还 不能 充分 地 提高 网络资源 的 利用率 另外 一种 方法 是 只要 满足 QoS 传输流 按时 到达 目的 节点 的 要求 就 给 尽量 做好 传输流 最高 的 可能 优先级 这种 方法 的 思路 显然 比前 一种 方法 更 有效 也 更 公平 但是 它 的 实现 也 较 复杂 对于 这种 方法 的 一种 实现 方法 可以 考虑 在 QoS 传输流 的 边界 节点 计算 传输 时延 的 界限 和 处理 时间 在 这个 通路 的 每个 节点 对 每 一个 要 离开 节点 的 QoS 分组 给 一个 时间 “ 邮戳 ” 时间 邮戳 记录 还 多余 到达 目的 节点 的 时间 每个 节点 可以 根据 时间 邮戳 和 局部 调度 处理 插入 尽量 做好 传输流 减少 邮戳 多余 时间 当 邮戳 多余 时间 为 零时 不能 插入 尽量 做好 传输流 这种 方法 的 一个 关键问题 是 如何 将 每个 节点 的 调度 算法 扩充 为 整个 网络 的 调度 算法 如何 清楚 地 刻画 节点 局部 控制 的 性能 对 整个 网络 性能 的 影响 是 一个 困难 的 问题 　 　 另外 一种 动态 优先级 方法 可以 考虑 计算 每 一个 QoS 分组 在 每 一个 节点 的 停留时间 界限 给 达到 停留时间 界限 的 QoS 分组 最大 的 优先 发送 权在 所有 QoS 分组 都 没有 达到 停留时间 界限 时 给 尽量 做好 传输流 最高 的 可能 优先级 　 　 在 综合 服务网络 中 用户 可以 根据 服务 的 要求 、 费用 和 喜好 选择 服务 的 级别 当 尽量 做好 传输流 客户 的 传输 发生 拥塞 且 不能 满足 性能 要求 时流控 机制 可以 将 尽量 做好 传输流 客户 的 传输 转到 QoS 服务 级别 　 　 多媒体 网络 QoS 控制 的 设计 和 实现 面临 着 众多 的 折衷 不 可能 有 一种 设计 和 实现 在 所有 环境 中 都 是 “ 最好 的 ” 现有 的 QoS 控制 思路 、 方法 和 技术 在 多 目标 的 综合 方案 中 更是 面临 着 挑战 它们 仍然 是 开放 问题 注释 ： 本文 研究 得到 国家自然科学基金 和 国家 高科技 术 项目 基金 资助 。 作者简介 ： 林闯 ： 年生 ， 博士 ， 研究员 ， 主要 研究 领域 为 系统 性能 评价 计算机网络 ， 随机 　 　 　 　 　 Petri 网 ； 作者 单位 ： 国家信息中心 北京 参考文献 　 ShenkerSWroclawskiJNetworkelementservicespecificationtemplateIETF 　 　 FCSeptember 　 林闯 ATM 网络 一种 实时 传输 调度 和 分组 丢失 控制 的 综合 方案 计算机 学报 　 　 ～ LinChuangIntegrationoftrafficschedulingandcelllosscontrolinATM 　 　 networksChineseJournalofComputers ～ 　 ReissleinMRossKWRajagopalSGuaranteeingstatisticalQoStoregulated 　 　 trafficthesinglenodecaseInProceedingsofthethAnnualJoint 　 　 ConferenceoftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ 　 　 NewYorkIEEEComputerSociety ～ 　 LinChuangChansonSTATMadmissionmodelsofstochastichighlevelPetri 　 　 netsbasedonhierarchicalmodelingInProceedingsofInternational 　 　 ConferenceonNetworkProtocolsTokyoIEEEComputerSociety ～ 　 林闯 张元生 基于 随机 高级 Petri 网 的 ATM 网络 接纳 控制 过程 模型 通信 学报 　 　 ～ LinChuangZhangYuanshengModelingATMadmissioncontrolprocedures 　 　 usingstochastichighlevelPetrinetsJournalofChinaInstituteof 　 　 Communications ～ 　 KurzTThiranPBoudecJLRegulationofaconnectionadmissioncontrol 　 　 algorithmInProceedingsofthethAnnualJointConferenceoftheIEEE 　 　 ComputerandCommunicationsSocietiesIEEEINFOCOM ’ NewYorkIEEE 　 　 ComputerSociety ～ 　 KnightlyEWEnforceablequalityofserviceguaranteesforburstytraffic 　 　 streamsInProceedingsofthethAnnualJointConferenceoftheIEEE 　 　 ComputerandCommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEE 　 　 ComputerSociety ～ 　 ShenkerSPartridgeCGuerinRSpecificationofguaranteedqualityofservice 　 　 IETFRFCSeptember 　 CrawleyENairRRajagopalanBetalAframeworkforQoSbasedroutinginthe 　 　 internetIETFRFCAugust 　 CidonIRomRMultipathroutingcombinedwithresourcereservationIn 　 　 ProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ KobeIEEEComputerSociety 　 　 ～ 　 BradenRZhangLBersonSetalResourceReSerVationProtocolRSVPVersion 　 　 FunctionSpecificationIETFRFCSeptember 　 RaoNSVBatsellSGQoSroutingviamultiplepathsusingbandwidth 　 　 　 reservationInProceedingsofthethAnnualJointConferenceoftheIEEE 　 　 ComputerandCommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEE 　 　 ComputerSociety ～ 　 OrdaARoutingwithendtoendQoSguaranteesinbroadbandnetworksIn 　 　 ProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEEComputer 　 　 Society ～ 　 SuCFVecianaGOnstatisticalmultiplexingtrafficmixesandVP 　 　 managementInProceedingsofthethAnnualJointConferenceoftheIEEE 　 　 ComputerandCommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCA 　 　 IEEEComputerSociety ～ 　 LorenzDHOrdaAQoSroutinginnetworkswithuncertainparametersIn 　 　 ProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEEComputer 　 　 Society ～ 　 ApostolopoulosGGuerinRKamatSImplementationandperformance 　 　 measurementsofQoSroutingextensionstoOSPFInProceedingsoftheth 　 　 AnnualJointConferenceoftheIEEEComputerandCommunicationsSocietiesIEEE 　 　 INFOCOM ’ NewYorkIEEEComputerSociety ～ 　 ToutainFDecoupledgeneralizedprocessorsharingafairqueuingprinciple 　 　 foradaptivemultimediaapplicationsInProceedingsofthethAnnualJoint 　 　 ConferenceoftheIEEEComputerandCommunicationsSocietiesIEEE 　 　 INFOCOMSanFranciscoCAIEEEComputerSociety ～ 　 ChiussiFMFranciniAImplementingfairqueuinginATMswitchesthe 　 　 discreterateapproachInProceedingsofthethAnnualJointConferenceof 　 　 theIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ SanFrancisco 　 　 CAIEEEComputerSociety ～ 　 GolestaniSJAselfclockedfairqueuingschemeforbroadbandapplications 　 　 InProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ TorontoIEEEComputerSociety 　 　 ～ 　 BennettJCRZhangHWFQworstcasefairweightedfairqueuingIn 　 　 ProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEEComputer 　 　 Society ～ 　 AndrewsMZhangLMinimizingendtoenddelayinhighspeednetworkswitha 　 　 simplecoordinatedscheduleInProceedingsofthethAnnualJointConference 　 　 oftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ NewYork 　 　 IEEEComputerSociety ～ 　 BradenRClarkDShenkerSIntegratedservicesintheinternetarchitecture 　 　 anoverviewIETFRFCJune 　 WroclawskiJSpecificationofthecontrolledloadnetworkelementservice 　 　 IETFRFCSeptember 　 NicholsKJacobsonVZhangLAtwobitdifferentiatedservicesarchitecture 　 　 fortheinternetIETFInternetDraft ＜ draftnicholsdiffsvcarchtex ＞ 　 　 Nov 　 WroclawskiJTheuseofRSVPwithIETFintegratedservicesIETFRFC 　 　 September 　 MaQSteenkistePSupportingdynamicinterclassresourcesharinga 　 　 multiclassQoSroutingalgorithmInProceedingsofthethAnnualJoint 　 　 ConferenceoftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ 　 　 NewYorkIEEEComputerSociety ～ 　 ElwalidAMitraDDesignofgeneralizedprocessorsharingschedulerswhich 　 　 statisticallymultiplexheterogeneousQoSclassesInProceedingsoftheth 　 　 AnnualJointConferenceoftheIEEEComputerandCommunicationsSocietiesIEEE 　 　 INFOCOM ’ NewYorkIEEEComputerSociety ～ 　 LinDConstanttimedynamicATMbandwidthschedulingforguaranteedandbest 　 　 effortserviceswithoverbookingInProceedingsofthethAnnualJoint 　 　 ConferenceoftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ 　 　 KobeIEEEComputerSociety ～ 　 LiBLinCChansonSTAnalysisofahybridcutoffpriorityschemefor 　 　 multipleclassesoftrafficinmultimediawirelessnetworksACMJournalof 　 　 WirelessNetworks ～ 　 CruzRLSCEDefficientmanagementofqualityofserviceguaranteesIn 　 　 ProceedingsofthethAnnualJointConferenceoftheIEEEComputerand 　 　 CommunicationsSocietiesIEEEINFOCOM ’ SanFranciscoCAIEEEComputer 　 　 Society ～ 　 ChangCSCruzRLAtimevaryingfilteringtheoryforconstrainedtraffic 　 　 regulationanddynamicserviceguaranteesInProceedingsofthethAnnual 　 　 JointConferenceoftheIEEEComputerandCommunicationsSocietiesIEEE 　 　 INFOCOM ’ NewYorkIEEEComputerSociety ～ 　 MithalSBoundsonendtoendperformanceviagreedymultipathroutingin 　 　 integratedservicesnetworksInProceedingsofthethAnnualJoint 　 　 ConferenceoftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ 　 　 SanFranciscoCAIEEEComputerSociety ～ 　 林闯 ATM 网络 基于 队列 长度 阈值 的 传输 调度 软件 学报 ～ 　 　 LinChuangTrafficschedulingbasedonthequeuelengththresholdinATM 　 　 networksJournalofSoftware ～ 　 AltmanEOrdaAShimkinNBandwidthallocationforguaranteedversusbest 　 　 effortservicecategoriesInProceedingsofthethAnnualJointConference 　 　 oftheIEEEComputerandCommunicationsSocietiesIEEEINFOCOM ’ San 　 　 FranciscoCAIEEEComputerSociety ～ 收稿 日期 修稿 日期