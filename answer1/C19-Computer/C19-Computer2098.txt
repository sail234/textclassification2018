计算机 工程 COMPUTERENGINEERING 年 第卷 第期 VolNo 用途 广泛 的 多 协议 语音 编 译码器 聂幼 三 　 刘千红 　 周申克 　 宋 国文 　 薛 向阳 摘要 ： 介绍 一种 具有 多种 协议 处理 能力 的 语音 处理 编 译码器 。 该编 译码器 可 支持 ITUTG 、 G 、 G 和 G 等 建议 标准 ， 其中 G 是 IP电话 主流 建议 标准 。 同时 给出 两种 多 协议 语音 处理 平台 的 实例 。 关键词 ： 语音 编译 码 ； 语音 压缩 解压 ； 多 协议 语音 编 译码器 AMultiprotocolVodecUsedintheVariousApplicationsNieYousanLiuQianhongZhouShenkeSongGuowenXueXiangyangShanghaiBranchSouthwestElectronicsTeleconmunicationsInstituteShanghaiDepartmentofComputerFudanUniversityShanghai 【 Abstract 】 InthispaperwefirstintroduceamultiprotocolvoicecodecthendiscusstwopossibleapplicationsThecodecsupportsGGGandGofITUTGisusedforphoneoverIP 【 Keywords 】 CodecVoicecimpressdecompressMultiprotocol 　 　 语音 编 译码器 是 采用 某种 算法 ， 利用 数字 语音 信号 的 冗余 以及 人耳 对 声音 感受 的 固有 特性 ， 对 表示 语言 的 数字信号 进行 不同 程度 的 压缩 处理 ， 从而 减少 对 存储资源 的 占用 。 　 　 在 选择 编码方式 上 ， 人们 通常 考虑 几个 因素 ： 话音 的 质量 、 编码 的 复杂程度 、 比特率 。 　 　 高 比特率 固然会 带来 好 的 话音 品质 ， 但 同时 会 占用 大量 的 存储空间 及 更 多 的 系统 处理 资源 。 不过 ， 低 比特率 下 获得 好 的 话音 品质 则 需要 复杂度 较 高 的 编码方式 ， 或者 用 较 高 比特率 的 代价 也 可能 用 更 多 的 通道 、 存储容量 等 来 稍稍 减低 编码 的 复杂度 。 适用 于 所有 实际 应用环境 的 语音 编码器 是 不 存在 的 ， 语音 编码器 必须 在 语音 品质 及 比特率 之间 进行 折衷 。 实际 运用 的 理想 语音 编 译码器 应该 可以 根据 传输 信道 的 不同 状况 带宽 、 QoS 等 而 改变 编码方式 ， 多 协议 语音 处理 平台 是 为此 目的 开发 的 。 其 初衷 在于 期望 语音 编 译码器 具有 多 协议 处理 能力 、 可 与 多种 接口方式 互连 、 支持 多种 控制 方式 ， 以便 在 应用 中 能 根据 传输 信道 状况 的 变化 随意 改变 编码方式 ， 从而 获得最佳 的 语音 通信 效果 。 　 多 协议 语音 编 译码器 套片 简介 　 　 JADEMMJointAudioDecodeMultimod 和 ARCOFISPAudioRingingCodecFilterFeaturingSpeakerphoneFunction 是 Siemens 公司 年 推出 的 多 协议 语音 处理 专用 套 片中 的 两个 主要 芯片 。 JADEMM 的 主要 特点 　 　 JADEMM 是 一个 非常 有 特色 的 多 协议 语音 全双工 压缩 解压 处理 芯片 ， 其 功能 如图 。 图 JADEMM 功能 框图 　 　 JADEMM 的 第一个 主要 特点 是 可以 完成 多种 协议 的 语音 编译 码 ： 　 　 · GKbs ， 低 延迟 码 激励 线性 预测 LDCELP 全双工 压缩 编码 输入 和 解压 译码 输出 ； 　 　 · GKbs ， 代 数码 激励 线性 预测 ACELP ； 或 Kbs ， 多 脉冲 最大 似然 量化 MPMLQ 全双工 压缩 编码 输入 和 解压 译码 输出 ； 　 　 · GKbs 、 kBS 、 Kbs ， 子带 编码 自 适应 差分 脉冲 编码 调制 SBCADPCM 全双工 压缩 编码 输入 和 解压 译码 输出 ； 　 　 · GKbs ， 脉冲 编码 调制 PCM ， Alaw μ law 全双工 压缩 编码 输入 和 解压 译码 输出 ； 　 　 · bit 线性 语音 全双工 编码 输入 和 译码 输出 。 　 　 JADEMM 第二个 特点 是 支持 多种 语音 数据 IO 的 组合 方式 ： 　 　 · IOM 接口 输入输出 SAI 接口 输出 输入 　 　 · IOM 接口 输入输出 HOST 接口 ISA 、 PCI 、 … 输出 输入 　 　 · HOST 接口 ISA 、 PCI 、 … 输入输出 HOST 接口 　 　 ISA 、 PCI 、 … 输出 输入 　 　 SAI 串行 音频接口 是 一个 具有 时钟 SCLK 、 接收 发送 SRTR 和 帧 同步 RFSTFS 的 接口 ， 支持 HDLC 格式 的 语音 数据 传送 。 IOMISDNOrientedModular 是 一个 类似 NISDN 基本 速率 接口 BD 的 接口 ， 具有 数据 时钟 DCL 、 数据 下载 上载 DDDU 以及 帧 同步 FSC 。 此外 ， JADEMM 还 提供 一个 并行接口 HOST ， 供 目标 系统 与 PC机 或 其它 MCU 相连 。 　 　 JADEMM 第三个 特点 是 提供 了 带 内 控制 Inband 和 带外 控制 Outband 两种 控制 方式 ： 　 　 · 带内 控制 方式 主要 用于 独立 的 应用 系统 ， 诸如 中 提到 的 H 会议 电视 实时处理 系统 。 带内 控制 方式 将 对 该卡 的 控制 方式 与 预处理 的 语音 数据 打成 一个 HDLC 包 ， 通过 SAI 接口 控制 使用 JADEMM 。 　 　 · 带外 控制 方式 则 以 总线 形式 与 PC机 或 其它 MCU 连接 ， 利用 PC机 的 已有 硬 软件资源 协作 形成 应用 系统 ， 完成 LAN 网 、 IP 网上 的 多媒体通信 。 诸如 中 提到 的 实时 多 协议 语音 编译 码卡 。 　 　 · 带内 带外 控制 均 可 根据 应用 需要 完成 对 该卡 的 如下 控制 ： 　 　 多种 语音 压缩 解压 协议 的 设置 和 转换 ； 　 　 多种 语音 数据 输入输出 方式 的 设置 和 转换 ； 　 　 多 协议 语音 编 译码器 音量 、 静音 等 设置 和 转换 。 ARCOFISP 的 主要 特点 　 　 ARCOFISP 是 一个 与 JADEMM 配套 的 专用 芯片 ， 提供 数字电话 的 语音 、 振铃 、 编译 码 、 滤波器 处理 的 一揽子 解决方案 。 ARCOFISP 的 应用 硬件 和 软件 均 已 包含 在内 ， 无须 任何 额外 的 元器件 ， 便 可 直接 驱动 扬声器 和 麦克风 。 ARCOFISP 的 功能 如图 。 图 ARCOFISP 的 功能 框图 　 两种 多 协议 语音 实时处理 平台 的 实现 Internet 网上 实时 语音 传输 　 　 Internet 网 实时 语音 传输 ， 是 国家科委 项目 的 一部分 。 为了 在 IP 网上 以 一定 服务质量 传输 多媒体 数据 、 实现 RTP 实时 传输 协议 和 RSVP 资源 预约 协议 的 功能 ， 需 完成 语音 数据 的 实时 采集 、 压缩 、 解压缩 、 回放 ； 实现 语音 数据 在 网络 上 的 传输 。 在 语音 数据 上 加入 RTP 和 RTCP 实时 传输控制协议 功能 ， 来 监测数据 的 传输 情况 ； 在 语音 数据 的 传输 路线 上 加入 RSVP 功能 ， 使 语音 数据传输 首先 得到 路由器 的 带宽 保证 。 显然 ， 语音 数据 的 实时 采集 、 压缩 、 解压缩 、 回放 是 其中 十分 重要 的 部分 。 　 　 采用 JADEMM 和 ARCOFISP 开发 的 实时 多 协议 语音 编译 码卡 ， 使用 带外 控制 方式 ， 硬件 组成 结构 如图 。 图 实时 多 协议 语音 编译 码卡 硬件 组成 结构 　 　 语音 的 实时 采集 、 压缩 解压 、 回放 均 通过 实时 多 协议 语音 编码 卡 完成 。 语音 数据 经 麦克风 采集 后 按 相应 语音 协议 压缩 ， 形成 IP 包 格式 。 采用 UDP 协议 进行 IP 网 传输 。 由于 UDP 协议 不 处理 传输 过程 中 IP 包 的 延时 、 丢失 等 问题 ， 故 在 采集 的 实时 语音 数据 增加 RTP 的 报头 ， 来 监视 数据 传送 的 服务质量 QoS 。 RTCP 则 用来 将 接收 方 监测 的 QoS 包括 传送 的 序列号 、 丢失 、 抖动 等 发回 发送 方 。 发送 方 根据 RTCP 的 状态 改变 语音 的 压缩 编码 协议 ， 并 加入 RTP ， 使 话音 质量 得以 保证 。 实时 语音 数据 在 传送 过程 中 还 采用 了 RSVP ， 通过 应用程序 向 路由器 申请 一定 带宽 方式 ， 获得 语音 质量 更好 的 QoS 效果 。 H 会议 电视 系统 中 实时 多 协议 处理 语音 平台 　 　 H 会议 电视 系统 的 实时 多 协议 语音 处理 平台 是 采用 JADEMM 和 ARCOFISP 开发 的 另 一 设备 。 由于 H 会议 电视 系统 的 音频接口 具有 多 协议 ITUTG 、 G 、 G 的 特征 ， 为 灵活 控制 和 便于 扩展 起 见 ， 使用 带内 控制 方式 构成 硬件平台 如图 。 图 H 会议 电视 实时 多 协议 语音 处理 平台 　 　 H 会议 电视 系统 线路 接口 完成 E 接口 的 转换 ， E 接口 帧 接口 符合 ITUTG 标准 、 电平 符合 ITUTG 标准 ； 视频 、 音频 及 辅助 数据 的 复接 和 分接 符合 ITUTH 标准 ； 视频压缩 解压缩 符合 ITUTH 标准 ； 音频 压缩 解压缩 符合 ITUTG 、 G 、 G 标准 。 　 　 线路 接口 采用 了 E 接口 专用 芯片 ， 完成 HDB 码 转换 、 时钟 提取 。 H 标准 的 复用 处理 则 使用 DSP 信号处理 片 完成 。 经 DSP 处理 后 的 视频 和 音频 数据 ， 一路 送给 H 标准 压缩 解压缩 专用 芯片 处理 ， 并 可 直接 与 模拟 视频 输出 输入 设备 相连 ； 另 一路 送给 实时 多 协议 语音 处理 平台 。 　 　 实时 多 协议 语音 处理 平台 采用 带内 控制 方式 。 H 复接 处理 后 ， 按照 H 协议 指示 的 不同 语音 协议 ， 构成 对 JADEMM 的 控制 ， 并 将 控制数据 和 语音 数据 打成 一个 HDLC 包 ， 按 一定 的 时间 间隔 发送给 JADEMM ， 解压 处理 后 由 ARCOFISP 直接 驱动 扬声器 输出 。 从 麦克风 输入 的 会议 电视 音频 信号 ， 经 ARCOFISP 进入 JADEMM ， 按 指定 语音 协议 压缩 处理 后 ， 在 JADEMM 中 形成 状态 数据 和 语音 数据 ， 再 由 H 复接 处理 上 线路 传输 。 　 结束语 　 　 现今 的 IT 产业 仍 遵循 摩尔定律 发展 ， 因此 无论是 计算机 产品 还是 通信 产品 均 已 大量 采用 全 定制 或 半 定制 大规模 集成电路 。 作者 认为 ， 对于 通信 终端设备 的 开发 ， 应 利用 Internet 网 获取信息 的 优势 ， 大量 采用 专有 芯片 ， 加快 研制 适应 市场需求 的 通信 设备 。 基金项目 ： 国家 通信 项目 （ ） 作者简介 ： 聂幼 三 （ ～ ） ， 男 ， 高级 工程师 ， 主研 方向 ： 通信 终端设备 作者 单位 ： 聂幼 三 　 刘千红 　 周申克 　 宋 国文 （ 西南 电子 电信技术 研究所 上海 分 所 ， 上海 　 ） 　 　 　 　 　 薛 向阳 （ 复旦大学 计算机系 ， 上海 ） 参考文献 SiemensJointAudioDecoderEncodeMultimodeDataSheetSiemensAudioRingingCodecFilterFeaturingSpeakerphoneFunctionUsersManual 收稿 日期 ：