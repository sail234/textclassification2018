微型机 与 应用 MICROCOMPUTERITSAPPLICATIONS 　 Vol 　 No 　 P 新型 锁具 耐用度 测试仪 的 研究 鲁墨武 　 蒋玉洁 　 曾小凡 摘要 ： 对 机电 一体 在 新型 锁具 耐用度 测试仪 的 应用 进行 了 研究 ， 着重 讨论 了 SNC － 型 锁具 耐用度 测试仪 的 软硬件 设计 。 关键词 ： 锁具 耐用度 　 测试仪 　 计算机 测量 　 　 锁具 耐用度 测试仪 是 用来 进行 锁具 寿命 测试 的 专用 检测 仪器 。 检测 部门 用 其 对 生产 锁具 的 企业 产品质量 进行 抽样 检测 ， 检测 结果 是 判断 锁具 是否 合格 的 重要依据 。 测试 时 将 锁具 装在 测试仪 上 ， 由 步进 电机 通过 传动 机构 带动 锁体 和 钥匙 运动 ， 模拟 锁具 的 使用 状况 ， 测量 其 使用寿命 。 　 　 我国 近期 所 研制 的 锁具 耐用度 测试仪 是 以 单片机 为 中心 的 控制系统 ， 它 利用 单片机 控制台 步进 电机 ， 按照 预定 的 规律 运动 ， 利用 数码管 显示 有关 参数 和 状况 ， 直到 钥匙 出现 破坏 为止 。 在 硬件 方面 需要 研制 专用 的 控制板 ， 软件 主要 采用 汇编语言 进行 设计 。 采用 这种 方法 存在 着 研制 周期 比较 长 ， 调试 和 维修 不便 ， 可靠性 较差 ， 人机界面 环境 较差 以及 运转 噪声 大 等 缺点 。 有鉴于此 ， 我们 在 此基础 上 研制 了 新型 的 锁具 耐用度 测试仪 — — SNC － 型 锁具 耐用度 测试仪 。 这种 测试仪 主要 由 计算机 、 数控系统 和 机械 三 部分 组成 ， 如图所示 。 锁体 和 钥匙 分别 固定 在 移动 和 转动 工作 台上 ， 工作 时 由 计算机控制 步进 电机 使锁体 按 预置 的 速度 和 距离 往复 移动 ， 模拟 钥匙 的 插拔 动作 ， 由 计算机控制 步进 电机 控制 转动 工作台 ， 使 钥匙 按照 用户 预置 的 速度 和 角度 转动 ， 模拟 钥匙 的 旋转 动作 ， 以 完成 锁具 寿命 的 测试 。 图 SNC － 型 锁具 耐用度 测试仪 结构图 　 　 新型 锁具 耐用度 测试仪 综合 应用 了 计算机技术 、 自动化 技术 与 机械 技术 。 硬件 设计 　 　 锁具 耐用度 测试仪 主要 工作 在 实验室 中 ， 工作 环境 较 好 ， 所 需要 的 数量 较 少 。 为了 缩短 设计 周期 ， 简化 调试 和 维修 过程 ， 使 操作 简单 方便 且 人机界面 友好 等 ， 本 设计 采用 了 模块化 结构 。 所谓 模块化 结构 ， 就是 根据 需要 采用 典型 的 基础 技术 产品 ， 进行 系统 组织 。 利用 基础 软件 进行 二次开发 ， 以 构成 个 完整 的 机电 一体化 数控 产品 。 模块化 结构 具有 结构 简单 ， 可靠性 高 ， 维修 方便 以及 开发 周期短 等 特点 ， 对于 多 品种 、 小批量 的 设备 比较 适宜 ， 保证 了 系统 的 高技术 、 低成本 ， 可以 方便 地 进行 一些 常用 数控系统 的 开发 。 图是 我们 设计 的 控制系统 的 硬件 结构 简图 。 图中 的 PSC 卡是 步进 电机 的 专用 控制卡 ， 国内外 都 有 现成 的 产品 ， 插 在 计算机 的 扩展槽 中 即可 。 购买 PSC 卡时 随卡 提供 的 软件 中有 控制 步进 电机 运动 的 各种 函数 ， 使用 时 直接 按照 用户 输入 的 各个 参数 ， 调用 相应 的 函数 即可 。 图 控制系统 的 硬件 结构 简图 　 　 整个 控制系统 是 利用计算机 通过 PSC 卡 控制 步进 电机 ， 实现 个 独立 的 运动 。 运动 的 基准 位置 由 光电开关 来 保证 ， 系统 中 采用 的 计算机 就是 普通 的 或 微机 。 　 　 为了 提高 运动 精度 ， 降低 噪声 ， 在 硬件 中 我们 采用 了 倍 细分 电路 步进 电机 驱动 电源 。 所有 的 硬件 部分 由图 中 的 各 部分 组合而成 ， 硬件 结构 是 模块化 的 ， 很 容易 进行 组合 。 由于 PSC 卡 和 步进 电机 驱动 电源 都 是 较 成熟 的 产品 ， 性能 比较稳定 ， 从而 确保 了 整个 系统 的 可靠性 。 软件设计 　 　 由于 在 硬件 设计 中 采用 PSC 卡 ， 软件 不必 从 基础 做起 ， 提高 了 软件 的 设计 水平 。 PSC 卡 提供 了 供 二次开发 用 的 函数 ， 在 程序 中 直接 调用 所 提供 的 函数 即可 实现 对 步进 电机 的 控制 ， 使 开发软件 的 重点 从 单纯 的 功能 实现 转向 如何 使 所 设计 的 软件 具有 更 多 的 功能 和 良好 的 人机交互 接口 。 由于 系统 采用 了 以 通用 计算机 为 中心 的 控制系统 ， 可 充分利用 通用 计算机 的 软硬件 资源 ， 从而 可 开发 出 人机界面 友好 、 操作 简单 且 功能 比较 强 的 软件 。 　 　 我们 所 开发 的 软件 是 以 UCDOS 汉字 操作系统 为 平台 ， 利用 C语言 在 普通 微机 上 进行 开发 。 整个 软件 以个 操作程序 菜单 为 核心 来 进行 设计 。 在 对 锁具 耐用度 测试 所 需要 的 各种 要求 进行 综合 考虑 和 分析 的 基础 上 ， 设计 出 如下 的 操作 菜单 ： 　 　 　 　 　 　 　 　 　 锁具 耐用度 测试仪 操作程序 菜单 测试 件 编号 ： 测试 时间 ： 　 年 　 月 　 日 基准点 测试 ： 　 　 　 　 　 ／ 预置 顺时针 旋转 角度 ： 　 度 预置 逆时针 旋转 角度 ： 　 　 度 预置 钥匙 旋转 速度 ： 　 转 ／ s 预置 钥匙 首先 旋转 方向 ： ／ 预置 锁体 移动 速度 ： 　 mm ／ s 预置 锁体 首先 移动 方向 ： ／ 预置 钥匙 拔出 距离 ： 　 　 mm 预置 测试 次数 ： 　 　 　 　 　 次 当前 测试 次数 ： 　 　 　 　 次 当前 测试 频率 ： 　 　 　 次 ／ 分 以下 为 所 设置 的 热键 ： F 预置 Enter 执行 F 初始化 F 暂停 F 急停 F 存盘 F 打印 Esc 退出 　 　 运行 时 ， 一般 要 先 按 F 键 ， 在 菜单 中 进行 参数 的 设置 。 在 软件 中 设计 的 菜单 具有 全屏幕 编辑 功能 ， 可 利用 上下左右 光标键 移动 光标 至 相应 的 位置 ， 输入 或 修改 各个 参数 。 参数设置 完毕 后 ， 按 Enter 键 进行 测试 操作 ， 计算机控制 步进 电机 带动 锁体 和 钥匙 运动 。 在 测试 过程 中 ， 可能 会 出现 一些 异常情况 ， 为此 设置 了 暂停 和 急 停 功能 ， 测试 时 用户 可以 随时 按 暂停 键 F ， 测试仪 在 完成 个 测试 周期 后 暂停 测试 ， 暂停 后 可以 按 Enter 键 继续 进行 测试 。 出现 紧急情况 时 ， 可 直接 按 F 键 立即 停止 测试 ， 返回 主 菜单 。 为了 保存 测试 结果 ， 设置 了 存盘 功能 ， 按 F 键 可以 将 测试 结果 存盘 。 由于 锁具 的 耐用度 检测 往往 需要 较长时间 ， 一般 持续 几天 ， 每天 测试 完毕 后 ， 都 需 将 测试 结果 存盘 ， 以便 第天 继续 进行 测试 。 为 防止 突然 断电 引起 的 测试数据 丢失 ， 在 软件设计 中 设计 了 定时 存储 数据 的 功能 ， 每过 min 程序 会 自动 将 数据 存盘 。 每次 退出 测试 时 ， 程序 都 会 提示 用户 ， 存储 数据 。 测试 结束 时 ， 按 F 键 可 将 检测 结果 打印 出来 。 软件 中 设置 的 初始化 热键 F ， 在 每次 进行 新 的 测量 时 ， 可 自动 初始化 各 参数 。 　 　 程序 的 设计 主要 是 围绕 上述 的 操作 菜单 来 进行 ， 在 软件 的 设计 过程 中 ， 以 实现 各个 预定 功能 作为 各个 模块 的 设计 原则 。 各 独立 功能 一般 都 设计 了 相应 的 函数 ， 例如 文本编辑 函数 、 打印函数 、 初始化 函数 、 运行 函数 等 ， 使 所 设计 的 软件 具有 层次 清楚 ， 修改 方便 等 特点 。 在 计算机控制 步进 电机 运动 时 ， 由于 是 采用 光电开关 控制 位置 ， 程序设计 时要 注意 在 换向 时 ， 给出 一些 余量 ， 以 避免 由于 机器运行 的 惯性 造成 位置 的 偏差 ， 使 机器 产生 不必要 的 停机 ， 余量 的 大小 可 在 实际 调试 过程 中 确定 。 为了 使 测试仪 开始 测试 时 处于 基准 位置 ， 在 软件 中 另外 设置 了 组 功能键 ， 实现 对台 步进 电机 的 微调 ， 以 确定 基准点 。 此外 ， 在 软件 的 设计 中 还 对 一些 常见 的 错误 以及 可能 发生 的 误操作 进行 了 必要 的 处理 。 出现 错误 时 ， 软件 中 设计 了 报警 功能 。 结论 　 　 与 以往 以 单片机 为 核心 的 锁具 耐用度 测试仪 相比 ， 所 研制 的 软件 可 完成 参数 输入 和 修改 、 参数 初始化 、 运行 暂停 、 运行 急停 、 数据 存盘 、 打印输出 、 故障 报警 、 定时 自动 存盘 等 多项 功能 ， 功能 得到 了 大大 增强 。 　 　 经过 调试 和 运行 ， 我们 研制 的 SNC － 型 锁具 耐用度 测试仪 取得 了 较 好 的 设计 效果 ， 现已 在 国内 多家 单位 得到 了 应用 ， 并 得到 了 用户 的 充分肯定 。 　 　 SNC － 型 锁具 耐用度 测试仪 是 我国 锁具 测试 设备 的 第代 产品 ， 可以 对 各种 型号 的 门锁 、 抽屉锁 等 锁具 进行 耐用度 测试 。 由于 整体 结构 采用 了 模块化 设计 并 具有 良好 的 人机 操作界面 以及 其它 一些 设计 特点 ， 使得 测试仪 具有 运行 平稳 、 噪声 小 、 可靠性 高 、 操作 简单 、 调试 方便 和 易于 维修 等 特点 。 可以 说 这种 测试仪 是 运用 工业 自动化 和 计算机 等 高新技术 ， 方便 、 快捷 、 低成本 开发 机电 一体化 产品 的 一次 有效 尝试 ， 对 类似 机电产品 的 开发 具有 一定 的 参考价值 。 鲁墨武 （ 沈阳 航空工业 学院 ） 蒋玉洁 （ 沈阳 航空工业 学院 ） 曾小凡 （ 沈阳 航空工业 学院 ） 参考文献 江秀汉 ， 周建辉 ， 吕岭 ． C语言 实用 荟萃 ． 西安 ： 西安电子科技大学 出版社 ， 收稿 日期 ： － －