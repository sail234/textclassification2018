计算机 工程 COMPUTERENGINEERING 年 第卷 第期 VolNo 基于 颜色 的 图象 检索 技术 凌玲 摘要 ： 论述 了 基于 色彩 的 图象 检索 方法 ， 对 颜色 空间 的 选择 、 颜色 的 量化 以及 颜色 的 相似 测试 进行 了 讨论 。 在 此基础 上 ， 对 两种 典型 的 基于 颜色 的 图象 检索 方法 的 特点 、 关键技术 的 实现 方法 以及 存在 的 根本 问题 进行 了 详细 的 分析 和 比较 。 关键词 ： 图象 检索 ； 基于 内容 ； 图象 数据库 ； 颜色 直方图 ColorbasedImageRetrievalTechniquesLingLingDeptofEngandComputerGraphicsGuangdongUnivofTechGuangzhou 【 Abstract 】 ThecolorbasedimageretrievalmethodsarediscussedinthepaperwithemphasisonthechoiceofcolorspacethequantizationofcolorandthesimilarmeasureofcolorOnthebasisofthisthefeatruesofthetwotypicalcolorbasedimageretrievalmethodstherealizablemechodsofkeytechniquesandtheexistingbasicproblemsareanalysedandcomparedingreaterdetail 【 Keywords 】 ImageretrievalContentbasedImagedatabaseColorhistogram 　 　 随着 多媒体 、 通信 、 网络 技术 的 发展 ， 图象 的 应用 越来越 广泛 ， 对 日益 庞大 的 图象 库 进行 有效 的 管理 显得 尤为重要 。 以往 对 图象 数据 的 管理 是从 图象 中 抽取 属性 信息 ， 并 在 关系数据库 中 把 它们 当成 格式化 数据 ， 对 图象 的 检索 仅 局限于 对 图象 属性 的 字符串 匹配 上 ， 这种 基于 属性 的 方法 要求 用户 能 精确 定义 查询 内容 非常 困难 。 考虑 到 基于 内容 的 图象 检索 方法 具有 传统 的 文本检索 技术 无法比拟 的 优越性 ， 因此 ， 研究 和 开发 基于 内容 查询 的 图象 数据库 是 当今 研究 的 热点 。 　 　 由于 颜色 是 人 识别 图象 的 主要 感知 特征 之一 ， 因而 基于 颜色 的 查询 是 基于 内容 的 图象 检索 中 最 基本 的 方法 。 迄今为止 ， 基于 内容 检索 的 图象 数据库 的 典型 代表 主要 有 ： IBM 的 QBICTM ， 哥伦比亚大学 的 VisualSEEK 图象 查询 系统 ， 密执根 大学 和 MIT 多媒体 实验室 开发 的 Virage 系统 等 ， 其 应用领域 涉及 多媒体数据库 、 电子 图书馆 、 商标 管理 、 医疗 图象 管理 、 公安系统 、 卫星 图象 管理 等 领域 。 下面 就 基于 颜色 的 图象 检索 中 涉及 的 关键问题 以及 检索 方法 进行 论述 和 比较 。 颜色 模型 的 选择 　 　 颜色 是 图象 内容 组成 的 基本要素 ， 选择 一个 符合 人眼 视觉 特性 的 颜色 模型 是 利用 颜色 特征 进行 图象 检索 的 关键 。 　 　 传统 的 RGB 颜色 模型 的 可 分辨 色差 是 非线性 的 ， 且 没有 直感 所以 不是 一个 好 的 颜色 描述 系统 。 HSV 颜色 模型 与 人 的 视觉 特性 比较 接近 ， 它 由 色度 H 、 饱和度 S 、 亮度 V 个 分量 组成 。 由于 这种 模型 具有 线性 伸缩性 ， 可 感知 的 色差 与 颜色 分量 的 相应 样值 上 的 欧几里德 距离 成 比例 ， 因此 HSV 颜色 模型 比 RGB 颜色 模型 更 直观 、 更 容易接受 。 　 　 通过 非线性 变换 可 将 RGB 颜色 空间 r 、 g 、 b 值 转换 到 HSV 空间 的 h 、 s 、 v 值 ： 设 vmaxrgb ， 定义 rgb 为 ： 　 　 （ ） 则 　 　 （ ） 其中 　 　 （ ） 式 中 ， rgb ∈ … ， h ∈ … ， s ∈ … ， v ∈ … 。 该 颜色 空间 中 两种 颜色 chsv 和 chsv 之间 的 距离 为 ： dcicjvivjsicoshjsjcoshjsisinhisjsinhj 　 　 两 颜色 之间 的 相似 度为 ： 　 　 颜色 的 量化 　 　 由于 人眼 对 视觉 的 分辨 能力 有 一定 局限性 ， 因此 对 整个 颜色 空间 进行 适当 的 量化 是 必要 的 ， 即 选择 一定 代表性 的 颜色 ， 丢弃 那些 无 显著 视觉 意义 的 信息 ， 从而 使 图象 的 检索 过程 能 节约 大量 的 计算 时间 。 　 　 可 将 H 、 S 、 V 个 分量 按照 人 的 颜色 感知 进行 非 等 间隔 的 量化 ， 即 把 色度 H 空间 分成 份 ， 饱和度 S 和 亮度 V 空间 分别 分成 份 ， 并 根据 色彩 的 不同 范围 进行 量化 ， 把 量化 后 的 个 颜色 分量 合成 为 一维 特征 矢量 ： lHQsQvSQvV 　 　 其中 ， Qs 分量 S 的 量化 级数 ， Qv 分量 V 的 量化 级数 。 因此 式 可 表示 为 lHSV 　 　 这样 ， 根据 上 式 ， H 、 S 、 V 个 分量 可 获得 柄 bin 的 一维 直方图 。 　 　 上述 问题 也 可 采用 模式识别 中 的 聚类 方法 对 颜色 空间 进行 量化 处理 。 把 颜色 空间 所有 的 颜色 按 要求 量化 为 N 种颜色 ， 用 统计法 寻找 N 个 最优 的 初始 聚类 中心 ， 即 寻找 颜色 空间 中 N 个 最 有 代表性 的 颜色 值 ； 然后 用 迭代 的 方法 ， 把 颜色 空间 中 的 所有 颜色 按 最小 距离 准则 向 N 个 聚类 中心 聚类 ， 即可 得到 与 各聚类 中心 感知 距离 最 邻近 的 N 个 聚 类域 si ≤ i ≤ N 颜色 集合 ； 最后 使用 每个 颜色 集合 si 的 质心 censi 来 形成 新 的 N 个 聚类 中心 ， 即 N 个 颜色 集合 的 代表 色 。 这里 　 　 式 中 ， x 为 si 颜色 集合 所 包含 的 一种 颜色 ， countx 为 x 在 图象 库中 出现 的 次数 ， Ni 为 si 颜色 集合 所 包含 的 颜色 在 图象 库中 出现 的 总和 。 颜色 的 相似 测度 　 　 用 数值 来 有效 表示 两幅 图象 在 颜色 上 的 相似 程度 ， 这 便是 颜色 的 相似 度量 问题 ， 它 是 直接 影响 检索 效果 的 重要环节 。 在 模式识别 技术 中 ， 特征 的 相似 度量 均 采用 距离 法 。 关于 距离 度量 方法 可 采用 绝对值 距离 、 欧几里德 距离 、 二次 距离 度量 方法 。 　 　 绝对值 距离 形式 如下 ： 　 　 　 　 欧几里德 距离 形式 如下 ： 　 　 　 其中 ， Hq 为待检 图象 颜色 直方图 ， Ht 为库 中 图象 颜色 直方图 ， hqci 和 htci 分别 表示 待检 图象 和 库 中 图象 第 i 种颜色 象素 的 频数 。 　 　 由于 欧氏 距离 在 计算 中 没有 考虑 颜色 间 的 相似性 ， 这 显然 不 符合 人 的 视觉 感觉 。 目前 克服 这一 缺陷 的 方法 是 采用 直方图 二次 距离 法 ， 即 在 欧氏 距离 计算 中 加进 颜色 相似矩阵 ， 其 形式 如下 ： DHqHtHqHtTAHqHt 　 　 式 中 ， An × n 为 颜色 相似矩阵 　 　 　 　 其 元素 sij 表示 颜色 ci 和 cj 之间 的 相似 度 ， 如式 计算 所得 。 通过 对 直方图 之间 距离 的 设定 ， 如当 它们 的 距离 小于 给定 的 阈值 时 ， 即 DHqHt ≤ t 时 ， Ht 所 对应 的 图象 即 为 要 检索 的 图象 。 基于 多种 主色调 扩展 的 图象 检索 方法 　 　 一幅 图象 的 主色调 能够 反映 该 图象 的 基本 概貌 ， 因而 可 作为 查询 的 主要 特征 进行 相似性 匹配 ， 考虑 到 人眼 对 颜色 的 认知 在 一定 范围 内 具有 模糊性 ， 在 选择 主色调 时 也 往往 带有 一定 的 随机性 和 个人 的 主观因素 。 因此 ， 对 主色调 进行 扩展 是 弥补 上述 缺陷 造成 漏检 的 一种 有效 的 方法 。 　 　 采用 正态分布 拟 合法 可以 对 指定 颜色 进行 扩展 。 设 用户 指定 颜色 为 l 、 模糊 度为 σ ， 则 经过 正态分布 拟合 后 的 直方图 特征 fl 如下 ： 　 　 （ ） 　 　 可以 证明 在 这个 范围 内 的 颜色 都 可能 与 用户 实际 需要 的 颜色 相关 ， 因此 可以 按 上式 来 确定 用于 检索 的 颜色 扩展 值 。 　 　 此外 ， 一幅 图象 往往 包含 两种 以上 的 主色调 ， 而 这些 主色调 在 图象 中所 占 的 比例 及其 重要 程度 也 各不相同 ， 因而 可用 不同 模糊 度 和 比例 的 方法 来 组合 一个 更 有效 的 颜色 值供 检索 中 匹配 。 　 　 实验 结果表明 ： 该 方法 尤其 对 处在 量化 边界 范围 的 颜色 的 检索 效果 有 明显 的 改善 。 由于 待查 图象 往往 包含 多种 主色调 ， 而 主色调 选择 的 随机性 以及 个人 的 主观因素 又 使得 其 模糊 度 σ 较大 ， 这样 势必 造成 检索 范围 的 扩大 而 大大 地 降低 了 检索 效率 。 因此 ， 如何 准确 、 快速 地 选择 图象 的 主色调 仍 是 需要 进一步 研究 的 问题 。 采用 图象 分割 的 直方图 检索 方法 则 可以 有效 地 提高 图象 检索 的 准确性 。 基于 图象 分割 的 直方图 检索 方法 　 　 颜色 直方图 虽然 能 较 好 地 反映 图象 中 各种 颜色 的 频率 分布 ， 但 没有 保留 各 象素 颜色 的 空间 分布 信息 ， 这 显然 与 人 的 视觉 感应 不符 ， 即误 检率 较 高 。 为此 ， 可 采用 基于 图象 分割 的 直方图 检索 方法 予以 解决 。 　 　 方法 一是 对 图象 中 所 包含 的 对象 的 边界 进行 提取 即 提取 图象 的 纹理 特征 ， 采用 Snake 边界 提取 算法 、 手工 交 互相 结合 的 方法 以及 采用 小 波 变换 的 方法 提取 图象 纹理 特征 ， 然后 对 每个 对象 所 包含 的 颜色 用 跨 距离 扫描线 算法 进行 直方图 统计 ， 最后 采用 距离 法 对待 查 图象 和 库 中 图象 进行 相似性 匹配 。 实验 结果表明 ： 采用 对象 分割 比 整幅 图象 进行 相似 检索 精度 提高 了 ～ 。 　 　 方法 二是 将 一幅 图象 简单 地 划分 为 n × n 个子 图象 P ， P ， … ， Pn ， 然后 分别 计算 每个 子 图象 的 直方图 ， 这样 ， 整幅 图象 的 直方图 就 等于 各子 图象 的 直方图 之 和 ， 即 ： 根据 直方图 可 得 空间 距离 的 度量 式 为 ： 　 　 可见 ， 基于 图象 分割 后 的 直方图 距离 的 计算精度 要 比 对 整幅 图象 的 直方图 距离 计算 的 精度 要 高 ， 从而 有效 地 提高 了 检索 精度 。 但 由此 要 为 计算 相似性 距离 付出 较 高 的 代价 ， 且 越 精确 的 距离 公式 其 计算 代价 也 越 高 。 因此 如何 高效 准确 地 查询 用户 的 图象 数据 是 图象 检索 方法 的 主要 目标 ， 采用 多 阶段 的 粗粒度 和 细粒度 相结合 的 相似 匹配 检索 方法 则 不失为 一种 提高 检索 效率 的 有效 方法 。 结束语 　 　 基于 内容 查询 的 图象 数据库 把 图象处理 、 图象识别 、 数据库 个 领域 的 技术 成果 结合 起来 ， 是 一个 很 有 前景 的 发展 方向 。 图象 数据库 是 图象处理 技术 和 传统 数据库 技术 的 应用 ， 又 为 图象处理 技术 提供 了 有力 的 支持 。 目前 利用 颜色 特征 进行 图象 检索 还 处于 研究 阶段 ， 其中 还有 许多 关键 的 技术 问题 尚未 得到 很 好 的 解决 ， 例如 ， 如何 有效 地 提取 颜色 特征 ， 如何 简化 颜色 直方图 相似 距离 的 计算 等 。 如果 能 很 好地解决 这些 问题 ， 必将 使 图象 检索 技术 产生 一个 飞跃 。 作者 单位 ： 广东 工业 大学 工程 与 计算机 图学 教研室 ， 广州 参考文献 FinnRQuerybyImageContentIBMResearch ～ 曹莉华 ， 柳伟 ， 李国辉 基于 多种 主色调 的 图象 检索 算法 研究 与 实现 计算机 研究 与 发展 ， ～ 李向阳 ， 鲁 东明 ， 潘云鹤 基于 颜色 的 图象 数据库 检索 方法 的 研究 计算机 研究 与 发展 ， ， ： ～ 凌玲 ， 凌卫新 彩色 图象 量化 的 一种 新聚类 算法 广东 机械 学院 学报 ， ， ～