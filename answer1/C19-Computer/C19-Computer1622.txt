信息 与 控制 INFORMATIONANDCONTROL 年 第卷 第期 VolNo 敏捷 供需 链中 工作 流 管理系统 的 设计 柴跃廷 李芳芸 任守 榘 　 　 摘 　 要 ： 过程 管理 是 敏捷 供需 链 的 有效 运作 方式 ， 工作 流 管理系统 是 实现 过程 管理 的 有效 手段 ． 本文 分析 了 敏捷 供需 链中 过程 的 特征 及其 管理 与 控制 的 机理 ， 在 工作 流及 分布式 对象 技术 的 基础 上 ， 讨论 了 系统 的 功能 分布 、 信息 分布 、 通讯 机制 等 问题 ， 给出 了 工作 流 管理系统 的 结构 、 功能 与 实现 形式 ， 该 系统 可以 有效 地 支持 敏捷 供需 链 的 优化 运作 ． 　 　 关键词 ： 敏捷 供需 链 ， 过程 管理 ， 工作 流 ， CORBA 　 　 中 图 分类号 ： TP 　 　 　 　 　 　 文献 标识码 ： ATHEDESIGNOFWORKFLOWMANAGEMENTSYSTEMINAGILESUPPLYCHAINCHAIYuetingLIFangyunRENShoujuDepartmentofAutomationTsinghuaUniversityBeijingAbstract 　 ProcessmanagementwhichisputintopracticebyworkflowmanagementsystemWFMSistheeffectiveoperatingpatternofagilesupplychainASCThecharacteristicsofprocessanditsmanagementandcontrolprincipleinASCisanalyzedBasedontheworkflowanddistributedobjecttechnologythefunctionstrategyinformationdistributionandcommunicationconceptsofWFMSispresentedThesystemstructurefunctionsandrealizationofWFMSwhichsupportsoptimizedoperationofASCeffectivelyarealsointroduced 　 　 Keywords 　 agilesupplychainprocessmanagementworkflowCORBA 　 引言 　 　 敏捷 供需 链 （ AgileSupplyChainASC ） 是 指 在 竞争 、 合作 、 动态 的 市场 环境 中 ， 由 供应商 、 制造商 、 销售商 、 用户 等 各 （ 自主 ） 实体 构成 的 快速 响应 市场 变化 的 动态 供需 网络 ． 实体 是 指 参与 供需 链 的 企业 或 企业 内部 业务 相对 独立 的 部门 ， 具有 自主 决策权 的 实体 称为 自主 实体 ． “ 动态 ” 反映 为 适应 市场 变化 而 进行 的 供需 关系 的 重构 过程 ． “ 敏捷 ” 用于 强调 供需 链 对 市场 变化 及 用户 需求 的 快速 响应 能力 ． 敏捷 供需 链 管理 （ AgileSupplyChainManagementASCM ） 的 根本 目标 在于 通过 对 供需 链中 的 物流 、 信息流 、 资金流 进行 有效 地 计划 、 协调 、 调度 与 控制 ， 在 正确 的 时间 ， 将 正确 的 物料 ， 按照 正确 的 数量 交给 正确 的 交易 对象 ． 深入 考查 供需 链 ， 不难 发现 其中 的 任意 两个 实体 之间 均 可 被 视为 供应商 与 客户 的 关系 ， 供需 链 管理 的 主要 内容 是 管理 以 各种 形式 的 订单 （ 或 协议 ） 为 媒体 的 、 供应商 与 客户 之间 所 进行 的 交易 与 协调 、 后勤 与 服务 、 认证 与 支付 ． 交易 与 协调 主要 包括 物料 供求 过程 中 的 计划 、 协商 、 调整 等 ； 后勤 与 服务 主要 包括 运输 调度 、 仓储 管理 、 客户 信息 服务 等 ； 认证 与 支付 主要 包括 企业 资信 、 资格 认证 、 权力 、 义务 、 责任 等 的 认定 与 仲裁 、 资金 往来 及 财会 管理 等 ． 在 供需 链中 ， 订单 的 计划 及其 执行 过程 通常 跨越 多个 实体 或 同一个 实体 的 多个 部门 ， 需要 分布 于 系统 中 的 多个 环节 的 协作 才能 完成 ． 另外 ， 不同 的 订单 具有 不同 的 生命周期 ， 从 数分钟 到 数个 月 ， 变化 较大 ， 控制 与 管理 的 难度 较大 ． 这 就 要求 采用 过程 管理 的 思想 ， 加强 过程 中 各 环节 之间 的 协同 管理 与 监督 ， 提高 过程 管理 的 效率 与 质量 ． 来自 于 计算机 支持 协同工作 CSCW （ ComputerSupportedCooperatingWork ） 领域 的 工作 流 技术 是 实现 业务流程 协调 管理 和 监控 的 一种 途径 ． 通过 采用 工作 流 技术 可以 松 耦合 的 方式 将 不同 的 活动 通过 一个 流程 组织 在 一起 ， 使 它们 在 受控 状态 下 运行 ． 工作 流 管理系统 是 一个 完整 地 定义 、 管理 和 执行 工作 流 的 人机系统 ． 因此 ， 在 工作 流 管理系统 的 支持 下 ， 对 敏捷 供需 链 的 运作 实施 过程 管理 是 实现 其 目标 的 有效途径 ． 　 敏捷 供需 链中 的 过程 管理 与 控制 过程 及其 特征 　 　 在 敏捷 供需 链中 ， 存在 各钟 形式 的 订单 ， 例如 ， 用户 订单 、 设计 订单 、 采购 订单 、 制造 订单 、 运输 订单 等 ． 对于 各种 形式 的 订单 ， 首先 需要 基于 供需 链中 的 有限 资源 ， 制定 可行 的 订单 执行 计划 ， 然后 执行 订单 计划 ， 实现 用户 需求 ． 订单 计划 的 执行 过程 实际上 是 出入库 、 采购 、 运输 、 收 付款 等 活动 协同 运作 的 过程 ， 基于 过程 管理 的 思想 ， 我们 将 各种 形式 的 订单 的 执行 过程 统称 为 过程 ． 这些 过程 具有 如下 特征 ： 　 　 （ ） 嵌套 性 ． 由于 市场需求 的 不确定性 及 用户 需求 的 个性化 ， 大多数 企业 采用 面向 订单 的 生产 经营方式 ， 而 订单 的 执行 过程 不仅仅 涉及 物料 的 出入库 活动 ， 还 可能 涉及 到 设计 、 制造 、 采购 、 运输 、 财务 等 活动 ， 这些 相关 的 活动 可能 跨越 多个 供应商 、 运输商 等 实体 ， 需要 多 实体 间 的 多个 环节 的 协作 才能 完成 ， 表现 为 订单 执行 过程 中 的 多个 子 过程 ， 形成 了 过程 的 嵌套 ． 如图所示 ． 图 过程 的 嵌套 性 　 　 对于 嵌套 性 的 过程 ， 我们 将 相关 的 父 、 子 过程 分别 视为 相对 独立 的 过程 ， 对于 父 过程 而言 ， 子 过程 只是 父 过程 的 一个 活动 而已 ． 父 过程 负责人 监控 子 过程 的 执行 过程 与 结果 ， 子 过程 负责人 对父 过程 负责人 负责 ． 　 　 （ ） 分布 性 ． 由于 构成 供需 链 的 供应商 、 制造商 、 分销商 等 实体 具有 地理 上 的 分散性 ， 使得 跨越 多 实体 的 过程 具有 明显 的 分布 性 特征 ． 　 　 （ ） 动态性 ． 由于 市场 的 不确定性 ， 构成 供需 链 的 供应商 、 制造商 、 分销商 等 实体 具有 职权 的 自主性 和 充分 的 自治 性 ， 合作 与 竞争 、 自主 与 联合 并存 ， 使得 过程 在 执行 当中 ， 对 某些 活动 、 实体 及其 相互 关系 等 进行 适当 的 调整 是 不可避免 的 ． 　 　 （ ） 并行性 ． 系统 中 可能 同时 存在 多个 过程 ， 在 每个 过程 中 可能 存在 多个 并行 的 环节 或 活动 ， 需要 进行 适当 的 管理 与 控制 才能 达到最佳 的 效果 ． 过程 的 描述 　 　 过程 由 一组 相关 活动 构成 ． 活动 是 出入库 、 采购 、 运输 、 收 付款 等 操作 的 统称 ． 将 分派 了 执行者 的 活动 称为 任务 ， 每 项 任务 包括 任务 内容 、 任务 状态 、 任务 执行 结果 ． 如图所示 ． 图 过程 的 组成 与 结构 　 　 为了 便于管理 与 控制 ， 我们 将 过程 定义 成 如下 的 三元组 ： P （ A ， E ， S ） ， 其中 ： 　 　 P 表示 过程 ． 　 　 A 表示 活动 （ 或 任务 ） 集合 ， 某 活动 an ∈ A ， n … N 　 　 E 表示 过程 的 属性 集合 ， 某 属性 en ∈ E ， n … N ． 过程 的 主要 属性 有 过程 编号 、 过程 描述 、 过程 负责人 、 计划 开始 与 完成 时间 、 实际 开始 与 完成 时间 、 过程 评估 等 ． 　 　 S 表示 过程 的 状态 集合 ， 某 状态 sn ∈ S ， n … N ． 过程 的 主要 状态 有 未 执行 、 正常 执行 、 拖期 执行 、 挂 起 、 完成 等 ． 　 　 将 活动 （ 或 任务 ） 定义 为 如下 的 三元组 ： A （ E ， C ， S ） ， 其中 ： 　 　 A 表示 活动 （ 或 任务 ） ． 　 　 E 表示 活动 （ 或 任务 ） 的 属性 集合 ， 某 属性 en ∈ E ， n … N ． 活动 （ 或 任务 ） 的 主要 属性 有 活动 编号 、 所属 过程 编号 、 活动 描述 、 活动 执行者 、 计划 开始 与 完成 时间 、 实际 开始 与 完成 时间 、 前趋 条件 、 后继 条件 、 活动 评估 等 ． 其中 ： 　 　 前趋 条件 和 后继 条件 一方面 表达 活动 （ 或 任务 ） 的 之间 的 逻辑关系 ， 一方面 作为 是否 激活 该 活动 （ 或 任务 ） 的 判据 ． 前趋 条件 和 后继 条件 是 由 pnoano 、 AND （ 与 ） 、 OR （ 或 ） 、 NOT （ 非 ） 构成 的 逻辑 表达式 ． Pno 表示 某 过程 编号 ， ano 表示 某 活动 编号 ． 　 　 C 表示 活动 （ 或 任务 ） 的 内容 ， 通常 用 文本文件 描述 ． 　 　 S 表示 活动 （ 或 任务 ） 的 状态 集合 ， 某 状态 sn ∈ S ， n … N ． 活动 （ 或 任务 ） 的 主要 状态 有 未 执行 、 正常 执行 、 拖期 执行 、 挂 起 、 完成 等 ． 过程 的 管理 与 控制 模式图 过程 的 管理 与 控制 模式 　 　 过程 的 管理 与 控制 模式 是 影响 系统 运作 效率 的 主要 因素 之一 ． 针对 不同 的 应用 场合 ， 有 两种 模式 可 供选择 ， 见图 的 （ a ） 及 （ b ） ． 在 图 （ a ） 中 ， 过程 及其 相关 的 活动 都 有 各自 的 负责人 （ 或 机构 ） ， 各 活动 负责人 对 过程 负责人 负责 ． 构成 过程 的 N 个 活动 由 过程 负责人 进行 统一 管理 、 监督 与 控制 ， 确保 过程 能够 按时 、 高效 地 完成 ． 管理 、 监督 与 控制 的 主要 内容 有 ： 根据 活动 之间 的 逻辑关系 决定 每个 活动 是否 开始 执行 ， 查询 处于 执行 状态 的 活动 的 进度 ， 对 可能 拖期 的 活动 进行 预警 或 报警 ， 协助 解决 活动 执行 过程 中 的 意外 情况 ， 对 活动 执行 的 结果 及其 负责人 进行 评估 等 ． 这种 模式 由于 过程 负责人 对 与 过程 相关 的 各 活动 进行 统一 管理 与 控制 ， 因而 管理 与 控制 的 难度 较大 ． 对于 活动 数量 较 少 、 承担 活动 的 机构 或 个人 较 稳定 、 各 活动 所 涉及 的 时空 范围 较 小 的 应用 场合 比较 合适 ． 　 　 在 图 （ b ） 中 ， 过程 的 第一个 活动 由 过程 负责人 触发 执行 ， 其余 活动 在 满足 活动 间 逻辑关系 的 前提 下 ， 由 其前 趋 活动 触发 执行 ． 活动 的 执行 结果 由 其 后继 活动 进行 评估 ， 最后 活动 的 结果 由 过程 负责人 进行 评估 ． 由于 前趋 活动 的 执行 效果 （ 或 质量 ） 对 其 后继 活动 有 直接 影响 ， 因此 ， 后继 活动 会 自觉 地 对 其前 趋 活动 进行 监督 ， 从而 形成 一条 跨越 各 活动 的 监督 链 ． 过程 负责人 并 不 对 各 活动 的 执行 情况 进行 完全 的 管理 与 控制 ， 只是 在 必要 时 对 活动 的 执行 过程 进行 指导 ， 处理 一些 活动 间 的 协调 问题 ． 这种 模式 的 管理 与 控制 难度 较 小 ． 对于 活动 数量 较 多 、 承担 活动 的 机构 或 个人 不 稳定 、 各 活动 所 涉及 的 时空 范围 较大 的 应用 场合 比较 合适 ． 对于 敏捷 供需 链 系统 而言 ， 考虑 其 过程 的 嵌套 性 、 动态性 、 并行性 及 分布 性 等 特点 ， 宜 采用 图 （ b ） 的 管理 与 控制 模式 ． 　 工作 流 管理系统 的 设计 系统 逻辑 结构 　 　 基于 上述 的 过程 管理 与 控制 模式 ， 参照 工作 流 管理系统 的 参考模型 ， 支持 敏捷 供需 链 的 工作 流 管理系统 的 逻辑 结构 如图所示 ． 图 工作 流 管理系统 逻辑 结构 　 　 在 图 中 ， 组织 管理 负责管理 与 维护 供需 链 系统 中 组织 机构 、 岗位 及 人员 的 配置 等 组织 模型 数据 ， 为 过程 的 任务 分派 提供 基础 信息 ． 过程 、 任务 信息库 中 保存 有 过程 的 基本 信息 、 状态 信息 及 结果 信息 ， 构成 过程 的 各 活动 或 任务 的 基本 信息 、 活动 之间 的 逻辑关系 、 状态 信息 及 结果 信息 等 ． 过程 管理 对 各 过程 的 基本 信息 、 过程 中 活动 之间 的 逻辑关系 、 状态 信息 及 结果 信息 等 进行 管理 与 维护 ， 并 进行 过程 的 仿真 运行 、 下达 过程 的 执行 指令 、 暂停 或 终止 过程 的 执行 等 操作 ． 基于 活动 的 基本 信息 及 组织 模型 数据 ， 任务 管理 为 各 活动 分派 执行者 ， 或者 根据 实际 情况 更换 活动 的 执行者 ． 任务 执行 模块 对 下达 给 执行者 的 任务 进行 浏览 ； 根据 任务 开始 执行 时 的 环境 信息 （ 时间 、 所 需 数据 、 所 需 资源 等 ） 及其 对 该 任务 的 影响 ， 对 其前 趋 任务 进行 评估 ； 根据 任务 的 执行 情况 对 其 状态 信息 进行 实时 维护 ． 任务 监控 模块 检测 任务 的 进度 及 完成 时间 ， 对 可能 拖期 的 任务 进行 预警 或 报警 ． 过程 监控 模块 检测 过程 的 进度 及 完成 时间 ， 对 可能 拖期 的 过程 进行 预警 或 报警 ， 检测 完成 活动 的 后继 任务 ， 如果 条件 具备 ， 则 下达 该 任务 ． 如果 某 过程 的 最后 一个 任务 已经 完成 ， 则 置 该 过程 为 完成 状态 ， 以便 过程 负责人 对 最后 一个 任务 及 该 过程 的 执行 情况 进行 评估 ， 并 进行 相关 的 归档 处理 ． 系统 实现 形式 　 　 由于 敏捷 供需 链 系统 的 动态性 、 分布 性 、 异构 性 等 特点 ， 客观 上 要求 支持 敏捷 供需 链 运作 的 工作 流 管理系统 必须 是 一个 分布 、 柔性 、 开放 的 信息系统 ． 　 　 考查 系统 的 逻辑 结构 可知 ， 在 功能 方面 ， 过程 管理 、 任务 管理 、 组织 管理 、 过程 监控 功能 是 由 过程 负责人 操作 的 ， 称之为 过程 管理 与 监控 部分 ． 任务 执行 及 任务 监控 功能 是 由 若干 任务 负责人 操作 的 ， 称之为 任务 管理 与 监控 部分 ． 这 两 部分 之间 具有 相对 的 独立性 ， 各 部分 内部 的 各 功能 之间 具有 紧密 的 相关性 ． 因此 ， 我们 将 整个 系统 的 功能 划分 为 过程 管理 与 监控 及 任务 管理 与 监控 两 部分 ． 对于 每 部分 而言 ， 为了 便于 系统 的 维护 与 重构 ， 将 其 表示 逻辑 与 处理 功能 分离 ， 形成 相对 独立 的 人机界面 及 服务器 两 部分 ． 如图所示 ． 图 工作 流 管理系统 实现 形式 　 　 在 信息 方面 ， 基于 功能 分布 的 约束 ， 将 系统 的 信息 划分 为 过程 信息 和 任务 信息 两 部分 ， 分别 存放 在 过程 信息库 和 任务 信息库 中 ． 过程 信息 主要 包括 过程 的 基本 信息 、 活动 （ 或 任务 ） 之间 的 逻辑关系 、 状态 信息 、 结果 信息 及 组织 模型 信息 ． 任务 信息 主要 包括 任务 的 基本 信息 、 任务 内容 、 状态 信息 等 ． 实际上 ， 任务 信息 是 过程 信息 的 一个 局部 视图 ， 过程 信息 中 的 任务 是 对 相关 过程 而言 的 ， 任务 信息 是 对 某个 任务 执行者 而言 的 ， 它 是 某个 任务 执行者 的 所有 任务 的 信息 集合 ． 　 　 由于 系统 功能 与 信息 的 分布 ， 必然 会 带来 通信 问题 ． 为了 在 过程 负责人 及 任务 执行者 之间 进行 通信 ， 在 系统 中须 配置 消息 服务器 ， 该 服务器 完成 消息 的 发送 、 接收 、 监听 及 缓冲 的 功能 ． 为了 实现 通信 的 可靠性 ， 采用 双向通信 的 机制 ． 例如 ， 为了 获取 某 任务 的 进度 信息 ， 任务 执行者 须 在 更新 任务 进度 的 同时 ， 将 该 信息 发送给 相应 的 过程 负责人 ， 同时 ， 过程 负责人 在 需要 时应 主动 从 任务 信息库 提取 相关 信息 ． 为了 避免 同一 信息 被 重复 发送 和 提取 ， 在 消息 结构 中 增加 时间 戳 属性 可以 有效 解决 该 问题 ． 　 　 基于 上述 的 功能 与 信息 的 分布 方案 ， 针对 不同 规模 的 供需 链 系统 可以 进行 不同 的 配置 ． 对于 较 小规模 的 供需 链 系统 ， 可以 将 过程 管理 与 监控 服务器 、 任务 执行 与 监控 服务器 、 过程 及 任务 信息库 配置 在 同一 台 机器 中 ， 为 多个 过程 及 任务 操作 提供 服务 ； 对于 中等 规模 的 供需 链 系统 ， 可以 将 过程 管理 与 监控 服务器 、 任务 执行 与 监控 服务器 、 过程 及 任务 信息库 分别 配置 在 不同 机器 中 ， 分别 为 相关 的 多个 过程 及 任务 操作 提供 服务 ； 对于 大规模 的 供需 链 系统 ， 可以 配置 多台 过程 管理 与 监控 服务器 、 任务 执行 与 监控 服务器 、 过程 及 任务 信息库 服务器 ， 分别 为 相关 的 多个 过程 组及 任务 组 提供 服务 ． 　 　 系统 的 信息 基础 平台 采用 InternetIntranetExtranet 环境 下 的 分布式 对象 技术 ， 利用 符合 CORBA 规范 的 ORB 将 系统 的 各 组成部分 集成 在 一起 ， 便于 与 其它 异构 系统 进行 互联 ， 实现 系统 间 的 功能 与 信息 的 互操作 ． 　 结束语 　 　 在 竞争 、 合作 、 动态 的 市场 环境 中 ， 敏捷 供需 链 技术 与 系统 是 企业 通过 动态 联盟 等 组织 形式 ， 集成 原料 供应 、 产品 制造 、 产品 流通 等 环节 ， 实现 敏捷 制造 与 集约化 流通 ， 增强 竞争力 的 重要 使能 技术 之一 ． 基于 供需 链 系统 分布 、 动态 等 特征 ， 采用 过程 管理 的 思想 ， 在 工作 流及 分布式 对象 技术 的 基础 上 ， 建立 动态 可 重构 的 分布式 工作 流 管理系统 ， 支持 供需 链 的 有效 运作 ， 对于 促进 敏捷 供需 链 技术 与 系统 在 企业 中 成功 应用 ， 增强 我国 企业 在 国际 市场 中 的 竞争力 ， 具有 重要 的 现实意义 ． 基于 本文 的 主要 思想 ， 结合 企业 实际 需求 的 敏捷 供需 链 工作 流 管理系统 正在 开发 之中 ． 大量 的 调研 与 研究 结果表明 ， 该 系统 可以 为 敏捷 供需 链 的 优化 运作 奠定 良好 的 基础 ． 基金项目 国家 CIMS 主题 资助 项目 作者简介 　 　 柴跃廷 ， 男 ， 副教授 ． 研究 领域 为 CIMS 分析 与 设计 、 管理 与 决策 、 供需 链 、 BPR 等 方面 的 研究 、 开发 与 应用 工作 ． 　 　 李芳芸 ， 女 ， 教授 ． 研究 领域 为 自动控制 理论 及 应用 、 CIMS 总体 分析 与 设计 、 管理 与 决策 、 BPR 、 供需 链 方面 的 研究 工作 ． 　 　 任守 榘 ， 男 ， 教授 ， 博士生 导师 ． 研究 领域 为 自动控制 理论 及 应用 、 CIMS 总体 分析 与 设计 、 管理 与 决策 、 供需 链 、 自 组织 及 协同 论 方面 的 研究 工作 ． 作者 单位 ： 清华大学 自动化系 北京 参考文献 　 柴跃廷 ， 韩坚 ， 李芳芸 基于 协调 中心 的 敏捷 供应链 系统 的 研究 计算机 集成 制造 系统 ， ， （ ） ： ～ WorkflowManagementCoalitionTheWorkflowReferenceModelHttpWWWAiimOrgWfmcStandardsDocsHtmWorkflowManagementCoalitionWorkflowManagementCoalitionTerminologyGlossaryHttpWWWAiimOrgWfmcStandardsDocsHtmRonBenNatanCORBAAGuidetoCommonObjectRequestBrokerArchitectureNewYorkMcGrawHill 柴跃廷 ， 李芳芸 ， 张晓东 RADISS — 面向 CIMSMIS 的 快速 开发 平台 高技术 通讯 ， （ ） ： ～ 收稿 日期