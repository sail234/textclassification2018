计算机 研究 与 发展 JOURNALOFCOMPUTERRESEARCHANDDEVELOPMENT 　 Vol 　 No 　 P 黑白 文档 图像 的 高倍 压缩 任 明武 　 曹雨龙 　 唐振民 　 胡 钟山 　 杨静宇 摘 　 要 ： 黑白 文档 图像 不同于 常规 的 文本文件 和 图像文件 ， 使用 常规 的 压缩算法 难以 取得 较 高 的 压缩 倍数 文中 分析 了 常规 文档 的 特性 及 使用 常规 算法 的 优缺点 ； 并 针对 其 特殊性 ， 提出 了 一种 无 失真 压缩算法 ， 大大提高 了 压缩 倍数 ， 它 采用 文中 提出 的 分块 编码 和 游程 编码 的 混合 编码方法 实验 证明 ， 该 方法 的 压缩比 字典 序 压缩 （ ARJ ， PKZIP ， LZW 等 ） 约 提高 ～ ， 比 常规 游程 编码 提高 约 ～ 关键词 ： 无 失真 压缩 ， 熵 ， 游程 编码 ， 分块 编码 分类号 ： TPDOCUMENTBINARYIMAGEEFFECTIVELOSSLESSCOMPRESSIONRENMingWu （ DepartmentofComputerScienceNanjingUniversityofScienceandTechnologyNanjing ） CAOYuLong （ DepartmentofComputerScienceNanjingUniversityofScienceandTechnologyNanjing ） TANGZhenMin （ DepartmentofComputerScienceNanjingUniversityofScienceandTechnologyNanjing ） HUZhongShan （ DepartmentofComputerScienceNanjingUniversityofScienceandTechnologyNanjing ） YANGJingYu （ DepartmentofComputerScienceNanjingUniversityofScienceandTechnologyNanjing ） Abstract ： DocumentbinaryimageisdifferentfromtextfileandgeneralimagefileItsverydifficulttoreachhighcompressratiosusinggeneralcompressingalgorithmsInthispaperthecharacteristicofdocumentisanalyzedandalosslessmixedcodingalgorithmisproposedwhichusestheblockcodingandrunlengthcodingRLCExperimentsproveitcanincreasehighercompressratiosbytocomparedwithdictionarybasedcodingARJLZWPKZIPetcandbytocomparedwithgeneralRLCKeywords ： losslesscompressionentropyrunlengthcodingblockcoding ▲ 　 引言 　 　 信息 数字化 的 高速 进行 给 数据压缩 带来 严重 的 挑战 在 不同 的 领域 ， 出现 了 各种各样 的 压缩 方法 ［ ～ ］ ， 例如 基于 熵 的 统计 编码 （ Huffman 编码 、 Shannon 编码 、 算术 编码 等 ） ［ ～ ］ ， 基于 字典 的 ARJ ， LZH ， PKZIP 等 压缩 方法 ［ ］ ， 分形 编码 、 小 波 变换 等 变换编码 ［ ］ ， 分块 编码 ［ ］ ， 以及 JPEG ， MPEG ［ ］ 等 　 　 熵 编码 和 基于 字典 的 压缩 用于 压缩 常规 文本文件 和 灰度 图像 的 无 失真 压缩 由于 文本文件 中 大量 词句 的 重复 ， 基于 字典 的 压缩 通常 能比 熵 编码 取得 更好 的 文本文件 压缩 效率 ； 分形 编码 、 小 波 变换 等 变换编码 主要 用于 灰度 图像 和 彩色图像 的 有 失真 压缩 ， 不适 用于 二值 图像 和 文本 图像 的 压缩 ； 分块 编码 主要 用于 二值 图像 的 压缩 ； JPEG 、 MPEG 专用 于 静止 和 运动 图像 的 有 失真 压缩 　 　 文档 图像 的 处理 正 成为 数字 信息处理 的 重要 应用 之一 文中 第二 部分 分析 了 二值 文档 图像 的 特点 和 常规 的 压缩算法 ； 第三 部分 中 ， 提出 了 一种 高倍 压缩 的 方案 ； 第四 部分 是 实验 结果 和 总结 　 二值 文档 图像 的 压缩 　 　 我们 提出 了 个 能 指导 二值 图像压缩 的 参数 ： 黑白 比例 、 细节 量 、 黑 占空比 、 黑长 和 白长 、 游程 个数 和 目标 个数 ， 分析 了 二值 文档 图像 的 特性 ； 比较 分析 了 常规 的 WPS 、 分块 编码 、 熵 编码 、 字典 编码 、 游程 编码 等 二值 图像压缩 方法 文中 像素 按 比特 存储 　 二值 文档 图像 的 特点 　 　 文档 的 扫描 分辨率 一般 采用 能 不 丢失 纵向 笔画 的 最小 分辨率 ， 笔画 宽度 为 ～ 个 像素 ， 是 一种 弱 分辨率 图像 二值 文档 图像 在 个 方面 不同 与 常规 的 灰度 图像 、 二值 图像 和 文本文档 ， 主要 表现 在 以下 几个 方面 　 　 （ ） 细节 量 极大 因为 黑色 像素 来源于 字符 的 笔画 ， 且 分辨率 弱 采用 边缘 点 总数 占 全部 黑色 像素 总数 的 比例 表示 细节 量 ； 也 可以 采用 平均 笔画 宽度 来 表示 细节 量 　 　 （ ） 黑长 的 种类 太少 而 白长 的 种类 太 多 黑色 像素 来自 字符 的 笔画 ， 所以 其 种类 不 多 ； 而 由于 行间 空白 、 短行 、 左右 边界 、 页 头页 尾 、 字内 空白 等 的 存在 ， 白长 的 种类 异常 丰富 　 　 （ ） 游程 数目 众多 从 一个 字符 到 另 一个 字符 之间 存在 间隙 ， 字符 的 内部 一个个 的 笔画 之间 也 存在 间隙 ， 黑白 频繁 交叠 ， 导致 游程 数目 众多 　 　 （ ） 目标 小而多 一个 字符 可能 就是 一个 目标 ， 甚至 一个 笔画 就是 一个 连通 的 目标 　 　 （ ） 黑色 像素 只 占 全部 像素 中 极小 的 比例 ， 一般 在 ～ 之间 　 　 （ ） 黑色 像素 的 散布 范围 大 文档 的 行 由 黑色 字符 组成 ， 行 的 分布 范围 从头到尾 ， 导致 黑色 像素 的 散布 范围 大 我们 采用 N × N 的 非 全白块 的 概率 表示 设行 宽 为 Wr ， 行间距 为 Wg ， 令 ： NWrWg 　 压缩 方法 分析 　 　 二值 图像 的 无 失真 压缩 是 研究 较 早 的 数据压缩 方法 ［ ］ ， 存在 跳白块 编码 WBS 、 游程 长度 编码 RLC 和 分块 编码 等 多种 方法 表 给出 了 图 、 图 的 压缩比 及 平均 码长 图 　 英文 文章 跳过 的 部分 以 灰色 表示 图 　 中文 文件 跳过 的 部分 以 灰色 表示 表 　 二值 文档 图像 图 、 图 的 特性 　 图像 长宽 行宽 行间 距离 笔画 宽度 黑色 比例 黑色 散布 细节 黑长 种类 白长 种类 游程 个数 目标 个数 图像 　 　 　 　 　 　 　 　 　 　 图像 　 　 　 　 　 　 　 　 　 　 表 　 二值 文档 图像 图 、 图 的 压缩比 　 熵 WBS 分块 编码 ARJRLC 压缩比 × × × × × × Bitbyte 图像 图像 　 　 由于 二值 文档 图像 是 一种 弱 分辨率 图像 ， 线宽 为 ～ 个 像素 ； 而且 字数 太 多 ， 即 目标 太 多 使用 常规 的 二值 图像 轮廓 编码 ， 因为 大量 边缘 点 的 重复 跟踪 和 大量 的 轮廓 起点 ， 甚至 达 不到 一般 的 压缩 效率 　 　 WBS 基于 二值 图像 中 黑色 像素 只 占 图像 中 很小 的 比例 ， 因此 它 跳 过 全白 区域 而 对 非 全白 区域 直接 编码 在 文档 图像 中 ， 虽然 黑色 像素 只 占 图像 中 很小 的 比例 ， 但 因 黑色 像素 的 散布 范围 非常 大 ， 得不到 高 的 压缩比 　 　 与 WBS 相比 ， 分块 编码 采用 最佳 变 长 编码 定理 ， 按 每块 内像素 的 不同 排列 所 出现 概率 的 不同 进行 变 长 编码 ， 其 压缩比 高于 WBS 在 文档 图像 中 ， 由于 细节 非常 丰富 、 黑色 像素 比例 非常 小而 散布 范围 非常 大 、 黑色 的 行 和 白色 的 行间 交织 ， 当 分块 较 小时 ， 使得 除 全白块 外太多 和 全黑 块 太少外 ， 其它 块 的 概率 相差 不 大 ， 从而 得不到 较 高 的 压缩比 且 难以 自 适应 分层 编码 　 　 在 二值 图像 中 ， 有 一个 有趣 的 特性 就是 黑白 交织 基于 字典 序 的 编码 可以 有效 利用 … BB … Bn … WW … Wm … BB … Bk … 的 序列 特性 建立 字典 进行 编码 但 由于 黑长 种类 很少 而 白长 种类 极 多 ， 可知 大小 一定 的 黑长 和 大小 一定 的 白长 的 相关性 很小 ， 编码 字典 中较 长词组 被 使用 的 概率 较 小 ， 难以达到 高 的 压缩比 表中 分别 给出 了 以 bit （ 个 像素 ） 和 Byte 为 单位 （ 个 像素 ） 建立 字典 得到 的 压缩比 　 　 RLC 是 文档 图像压缩 中 常用 的 方法 ， 其 压缩比 高于 WBS 和 分块 编码 ， 它 能 充分利用 文档 图像 的 内在 属性 ： （ ） 黑长 来自 字符 的 笔画 ， 笔画 的 使用 显然 是 不 均匀 的 ， 而且 黑长 的 种类 较 少 ， 便于 使用 最佳 变 长 编码 定理 ； （ ） 使用 白长 能 把 多行 连续 的 行间 空白 、 页 头页 尾 空白 、 上 一行 的 右边 空白 和 下 一行 左边 空白 的 仅 表示 为 一个 白长 其 压缩比 高于 基于 字典 序 编码 ， 但 因白长 的 种类 太 多 ， 压缩 后 得到 的 白长 的 平均 码长 较大 ， 在 一定 程度 上 降低 了 压缩比 图 、 图 的 白长 和 黑长 的 平均 码长 分别 为 ， 　 高倍 压缩 　 　 本文 提出 了 一种 基于 减少 白长 种类 、 从而 减小 白长 的 平均 码长 ， 提高 RLC 压缩比 的 方法 使用 分层 编码 ， 依据 行宽 、 行间距 、 笔画 宽度 等 参数 选择 一定 的 块 大小 ， 将 图像 分成 层 ， 每层 分别 使用 RLC 编码 第一层 记录 块 信息 ， 将 全白块 赋以 个 比特 ‘ ’ 、 非全 白块 赋以 个 比特 ‘ ’ 第二层 中 只 把 标记 为 ‘ ’ 的 块 参加 游程 的 计算 ， 从而 有效 地 减小 了 白长 、 白长 的 种类 　 　 由于 行间 空白 、 短行 、 左右 边界 、 页 头页 尾 、 字内 空白 等 的 存在 ， 又 白色 像素 的 占空比 达到 ～ ， 跳掉 大量 的 白块 ， 可使 白长 的 种类 大大减少 仅 在 极少 情况 下 ， 跳白块 刚好 跳掉 相邻 黑长 之间 的 白长 ， 所以 认为 跳白块 处理 后 游程 个数 不变 、 黑长 的 种类 不变 　 　 设 hb 为 直接 对 黑长 编码 的 熵 ， hw 为 直接 对白 长 编码 的 熵 ， Nw 为 白长 的 个数 ， Nb 为 黑长 的 个数 ， S 为 图像 的 像素点 总数 ， b 为 图像 的 平均 码长 ， r 为 图像 的 压缩比 ， 则 有 ： NwNb ≤ 　 　 　 　 　 　 　 　 　 　 　 由式 可知 ， 图像压缩 比 反比 于 白长 平均 码长 与 黑长 平均 码长 之 和 已知 跳白块 处理 后白长 的 种类 N ′ w 小于 原 图像 中白长 的 种类 Nw ， 令 ， nNwN ′ w 设 h ′ w 为 跳 白块 后 图像 的 白长 平均 码长 ， pi 为 种类 数 减少 的 过程 ， 则 经过 pp … pn 后 ， 白长 的 种类 数由 Nw 变至 N ′ w 设 hiw 为 经过 pi 后白长 的 平均 码长 ， 根据 熵 的 渐化 性 ［ ］ ， 可 得 ： hwhwhw … ， 又 ， hnwh ′ w 即 跳 白块 后 图像 的 白长 平均 码长 小于 原 图像 的 白长 平均 码长 　 　 设 r ′ 为 跳 白块 后 得到 的 压缩比 ， I 为原 图像压缩 后 的 长度 ， I ′ 为 跳 白块 压缩 后 得到 的 长度 ， 则 有 ： 　 　 　 　 　 　 　 因为 h ′ whw ， 所以 I ′ I 　 　 设 I ′ 为块 信息压缩 后 的 长度 ， 若 I ′ II ′ ， 则 证明 跳白块 后 增加 了 图像 的 压缩比 因为 II ′ ， 因此 只 需要 选择 合适 的 分块 大小 N × M ， 即可 增加 压缩比 设原 图像 长宽 分别 为 Tb ， Tw ， 则 有 ： 　 　 　 　 　 其中 r ′ 是 分块 信息 的 压缩 倍数 ， r ′ ； ［ ］ 表示 取 最 接近 的 整数 　 　 由此可知 ， 分块 越大 ， 则 I ′ 可能 越小 ； 但 白长 种类 的 减少 可能 越小 ， I ′ 可能 越大 对 特定 的 应用 背景 ， 可 选择 固定 的 分块 大小 ， 取得 最优 的 压缩比 表 　 图 的 压缩 结果 　 原始 图像 × × × × 跳白后 块 信息 跳白后 块 信息 跳白后 块 信息 跳白后 块 信息 白长 种类 黑长 种类 白 平均 码长 黑 平均 码长 游程 个数 压缩比 　 　 跳过 白块 的 原则 是 尽可能 跳过 文档 图像 中 的 行间 空白 、 短行 、 左右 边界 、 页 头页 尾 及 字 内 空白 设行 宽 为 Wr ， 行间距 为 Wg ， 笔画 宽度 为 Wp ， 字 宽 为 Ww ， 则 应 ： WpNminWgWr 　 　 　 WpMWw 　 　 　 　 　 　 　 　 　 使用 投影 和 Hough 变换 可以 很 容易 求得 上述 参数 ［ ］ 表 给出 了 图 的 压缩 结果 　 小结 　 　 本文 提出 算法 可 用于 常规 文档 的 无 失真 压缩 ， 其 对 文档 图像 的 压缩比 大于 常规 的 二值 图像编码 方法 、 熵 编码 和 基于 字典 序 的 无 失真 压缩 方法 ； 而且 由于 白长 种类 的 大大减少 ， 一般 少于 种 ， 从而 使得 后续 的 对 游程 长度 的 算术 编码 得以 快速 运行 本文 方法 在 理论 和 实践 中 得到 了 有力 的 证明 ， 我们 使用 文中 方法 对 汉字 书籍 、 英文 文章 、 银行 支票 、 手写 文稿 、 英文 字典 等 常规 的 文档 图像 进行 压缩 ， 证明 其 压缩比 高于 常规 的 ARJ 算法 约 ～ ， 高于 常规 的 RLC 约 ～ ■ 作者简介 ： 任 明武 ， 男 ， 年月生 ， 硕士 研究生 ， 南京 理工大学 计算机系 讲师 ， 主要 研究 　 　 　 　 　 　 方向 为 数字图像处理 、 计算机 视觉 、 图像编码 与 压缩 　 　 　 　 　 曹雨龙 ， 男 ， 年月生 ， 副教授 ， 研究 方向 为 数字图像处理 、 计算机 视觉 等 　 　 　 　 　 唐振民 ， 男 ， 年月生 ， 教授 ， 研究 方向 为 数字图像处理 、 机器人 等 　 　 　 　 　 胡 钟山 ， 男 ， 年生 ， 博士 研究生 ， 研究 方向 为 图像识别 ， 字符 处理 等 　 　 　 　 　 杨静宇 ， 年生 ， 教授 ， 研究 方向 为 人工智能 、 机器人 等 作者 单位 ： 任 明武 （ 南京 理工大学 计算机科学 与 工程系 　 南京 　 ） 　 　 　 　 　 曹雨龙 （ 南京 理工大学 计算机科学 与 工程系 　 南京 　 ） 　 　 　 　 　 唐振民 （ 南京 理工大学 计算机科学 与 工程系 　 南京 　 ） 　 　 　 　 　 胡 钟山 （ 南京 理工大学 计算机科学 与 工程系 　 南京 　 ） 　 　 　 　 　 杨静宇 （ 南京 理工大学 计算机科学 与 工程系 　 南京 　 ） 参考文献 ： ［ ］ 许织 新 数据压缩 北京 ： 国防工业 出版社 ， 　 　 　 XuZhixinDataCompressioninChineseBeijingNationalDefenseIndustryPress ［ ］ NelsonMFeaturingFastEfficientDataCompressionTechniquesinCMTBooksCompanyUSA ［ ］ 黎洪松 数字 图像压缩 编码 技术 及其 C语言 程序 范例 北京 学苑 出版社 ， 　 　 　 LiHongsongDigitalImageCompressionandCodingCSamplesinChineseBeijingXueyuanPress ［ ］ CastlemanKRDigitalImageProcessingEnglewoodCliffsNJPrenticeHall ［ ］ 陈廷标 ， 夏良 正 数字图像处理 北京 人民邮电出版社 ， 　 　 　 ChenTingbiaoXiaLiangzhengDigitalImageProcessinginChinese ， BeijingPeoplesPostPress ， ［ ］ SchurmanJBartnectNBayerTetalDocumentanalysis — — frompixelstocontentsProcIEEE ， ～ 收稿 日期 ： 修稿 日期 ：