　 自动化 学报 ACTAAUTOMATICASINICA 年 第卷 第期 volNo 基于 行为 表达式 的 任意 随机 Petri 网 的 品质 分析 ） 蒋昌俊 　 　 郑应平 　 　 疏松 桂 　 　 摘 　 要 　 提出 一种 基于 行为 表达式 的 品质 分析方法 ， 可以 做 任意 分布 的 有界 或 无界 随机 Petri 网 的 品质 分析 该 方法 不仅 拓广 了 分析 范围 ， 解决 了 文献 ［ ］ 中 没有 解决 的 问题 ， 而且 不必 画出 Petri 网 的 可达 标识 图 ， 使 分析 过程 更为 简洁 　 　 关键词 　 随机 Petri 网 ， 任意 分布 ， 行为 表达式 ， 品质 分析 PERFORMANCEANALYSISOFARBITRARYSTOCHASTICPETRINETSBASEDONBEHAVIOREXPRESSIONJIANGCHANGJUNZHENGYINGPINGSHUSONGGUIInstituteofAutomationchineseAcademyScienceBeijing 　 　 AbstractAperformanceanalysismethodbasedonbehaviorexpressionispresentedinthispaperThismethodcanbeusedforperformanceanalysisofboundedornonboundedstochasticPetrinetswitharbitrarydistributionsItnotonlyextendsanalysisrangebutalsosolvesanopenprobleminpaper ［ ］ ItneedntdrawthereachabilitymarkinggraphofPetrinetsThustheanalysisprocessproposedinthispaperissimpleandeasytoimplement 　 　 KeywordsStochasticPetrinetarbitrarydistributionbehaviorexpressionperformanceanalysis 　 　 　 引 　 言 　 　 Petri 网是 异步 并发 系统 建模 与 分析 的 有力 工具 利用 Petri 网 进行 系统 建模 ， 不仅 有 图形 的 直观性 和 结构 的 层次性 ， 而且 还有 一套 理论 方法 支持系统 的 性质 分析 和 品质 分析 　 　 Molloy ［ ］ 首先 建立 了 可达 标识 图 与 有限 马尔柯夫 链 的 对应 关系 ， 从而 为 服从 负 指数分布 的 有界 随机 Petri 网 的 品质 分析 提供 了 相应 的 马氏 分析方法 其后 ， Marson 等 人 ［ ］ 推广 了 Molloy 的 工作 ， 提出 一种 广义 随机 Petri 网 GSPN 模型 ， 此 模型 包括 了 某些 变迁 为 立即 变迁 无 时延 的 情形 而 Dugan 等 人 ［ ］ 从 另 一个 方面 推广 了 Molloy 的 工作 ， 提出 一种 增广 随机 Petri 网 ESPN 模型 ， 该 模型 包含 了 抑止 弧 的 情况 然而 这些 工作 均 未 突破 负 指数分布 的 限制 ， 因而 均 是 在 马氏 框架 下 进行 分析 GuoZhou 等 人 ［ ］ 受 GERT ［ ］ 分析方法 的 启发 ， 将 矩母 函数 方法 应用 于 Petri 网 ， 从而 提出 任意 分布 随机 Petri 网 ASPN 的 矩母 函数 分析方法 该 方法 是 将 随机 Petri 网 的 可达 标识 图 作为 一个 状态机 Petri 网 ， 并 应用 矩母 函数 及 传递函数 于 该 Petri 网 ， 从而 形成 一个 适合 任意 分布 的 有界 随机 Petri 网 的 分析方法 由于 这些 方法 都 是 基于 可 达 标识 图 ， 因而 决定 了 它们 只能 分析 有 界 随机 Petri 网 众所周知 ， 生成 一个 复杂 系统 的 Petri 网 模型 的 可达 标识 图是 一件 相当 困难 的 工作 ， 有时 会 出现 状态 爆炸 等 问题 也就是说 ， 这些 方法 也 只能 对 那些 小规模 系统 有效 ， 而 对 那些 稍大 一点 规模 系统 的 分析 便 不能 凑效 　 　 本文 基于 Petri 网 的 行为 表达式 ［ ］ ， 将 矩母 函数 法 思想 引入 其中 ， 从而 形成 一种 适合 任意 分布 的 有界 或 某些 无 界 具有 行为 表达式 的 随机 Petri 网 AGSPN 的 分析方法 　 　 　 基于 行为 表达式 的 解析 方法 　 　 为了 便于 计算 ， 首先 给出 行为 表达式 的 不同 形式 的 定义 及 性质 　 　 定义 称 α 是 T 上 的 一个 单项式 当且 仅 当 α 是 若干个 也 可能 是 零 个字符 连接 的 形式 其 长度 是 它 包含 的 字符 个数 ， 记 作 ｜ α ｜ 例如 α abcadce 则 α 是 一个 单项式 ， 并且 ｜ α ｜ 　 　 定义 称 α 是 T 上 的 一个 多项式 当且 仅 当 α 是 若干个 单项式 的 选择 运算 或 并发 运算 的 形式 当 α 中不含 并发 运算 时 ， 称 α 为 标准 多项式 例如 α abcdeaf 则 α 是 一个 多项式 　 　 由于 σ σ 可 按 并发 运算 的 定义 展成 若干个 单项式 的 选择 运算 形式 ， 故 任何 多项式 均 可展 成 与 之 等价 表示 的 语言 相同 的 标准 多项式 例如 上面 的 α 也 可以 写成 α abcdeafcedafceadfceafdecdafeacdfeafcd 　 　 定义 称 α 是 T 上 的 一个 闭包式 当且 仅 当 α 是 单项式 或 多项式 α ′ 的 “ 星 ” 运算 形式 ， 即 α α ′ 例如 α abacde 是 一个 闭包式 　 　 定义 称 α 是 一个 复合式 当且 仅 当 α 是 若干个 单项式 、 多项式 或闭 包式 在 连接 运算 、 选择 运算 、 并发 运算 以及 “ 星 ” 运算 有限 次 运算 下 的 形式 例如 α abcde 是 一个 复合式 　 　 一个 正规 式 经典 形式语言 的 表达式 本质 上 与 一个 复合式 等价 单项式 、 多项式 和 闭 包式 均 是 复合式 的 特例 　 　 定义 称 α s 是 α 的 一个 子式 当且 仅 当 α s 是 α 中 的 一部分 ， 并且 α s 或者 是 一个 单项式 ， 或者 是 一个 多项式 ， 或者 是 一个 复合式 例如 α sabc 是 α ababccdf 的 一个 子 式 　 　 定义 称 α 是 一个 幂级式 当且 仅 当 α 中 含有 形如 的 子式 ， 其中 α ′ ≠ 。 例如 α 是 一个 幂级式 　 　 本质 上 说 ， 幂级式 的 表达能力 已真 超于 复合式 ， 实际上 幂级式 中 具有 计数 限制 能力 ， 已 达到 上下文 无关 语言 的 表达能力 ， 甚至 达到 上下文 有关 语言 的 表达能力 例如 L α 便是 一个 上下文 有关 语言 其中 α α α 非空 ； α ≠ α 　 　 一个 行为 表达式 或者 是 一个 复合式 ， 或者 是 一个 幂级式 因此 ， 它 可以 刻划 有界 Petri 网 ， 或 某些 无界 Petri 网 表达式 存在 的 根据 表达式 并 借助 下面 的 结论 ， 可以 求得 petri 网 的 传递函数 ［ ］ ， 再 利用 矩母 函数 的 有关 方法 便 可 对 任意 分布 的 随机 Petri 网 进行 品质 分析 　 　 命题 设 α tt … tq 是 一个 单项式 ， 则 其 传递函数 　 　 证明 直接 由 文献 ［ ］ 的 化简 规则 即可 得到 此 结论 　 　 命题 设 α α α … α n 是 一个 标准 多项式 ， 则 　 　 命题 设 α α ′ 则 　 　 证明 可 按 文献 ［ ］ 中 证明 循环 化简 方法 类似 地 进行 　 　 分析方法 的 具体步骤 如下 ： 　 　 第一步 基于 文献 ［ ］ 产生 系统 的 行为 表达式 ， 并化 多项式 为 标准 多项式 形式 若有 的话 ； 　 　 第二步 依据 所 给 的 分布 参数 及 行为 表达式 结构 ， 求出 各 事件 的 引发 概率 及其 矩母 函数 注 表达式 中 不同 位置 的 同一 事件 可能 传递函数 不 一样 ， 这是 由于 不同 位置 的 同一 事件 的 引发 概率 可能 不 一样 ； 　 　 第三步 据 第二步 的 计算结果 ， 对 行为 表达式 重新 标号 ， 以 区别 表达式 中 具有 不同 传递函数 的 同一 事件 ； 　 　 第四步 据 命题 — 计算 标号 后 的 行为 表达式 的 传递函数 ； 　 　 第五步 基于 前面 的 结果 和 矩母 函数 的 有关 方法 进行 各 性能指标 的 计算 ， 从而 获得 系统 的 定量分析 结果 　 　 　 一个 无界 AGSPN 分析 　 　 利用 前面 的 方法 ， 分析 一个 无界 的 任意 分布 的 增广 Petri 网 　 　 例图 所示 是 一个 随机 Petri 网 实线 部分 ， 显然 该网 存在 死锁 状态 为 考虑 该网 死锁 的 随机性 能 ， 现 增加 消解 变迁 t 及其 有关 弧 虚线 部分 其中 abc 及 t 服从 负 指数分布 ， 且 λ a λ b λ c ， λ t 是 参变量 ； de 服从 正态分布 ， 且 均值 满足 τ d τ e ， 方差 满足 σ d σ e 分别 考虑 该网 的 周期 时延 、 死锁 时延 及 死锁 概率 与 参变量 λ t 的 关系 图 　 无界 Petri 网 　 　 为了 估计 该网 的 周期 时延 ， 需要 计算 它 的 周期 行为 表达式 的 传递函数 从而 有 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 所以 时延 周期 为 因为 ［ ］ 　 　 为了 计算 死锁 时延 ， 在 s 中 分别 令 WasWbsWcsWds 和 Wes 中 的 s 从而 得 则 死锁 时延 d 为 这样 ， 死锁 的 稳态 概率 pd 为 从而 得 d 及 pd 与 λ t 的 关系 如图所示 图 　 T ， Td 及 pd 与 λ t 的 关系 　 　 上面 利用 网 的 行为 表达式 求得 它 的 传递函数 ， 并 利用 矩母 函数 思想 ， 实现 了 该 无界网 的 性能 评估 这是 现有 其它 方法 都 不能 解决 的 ， 也 是 文献 ［ ］ 中 指出 的 一个 困难 而 有 理论意义 的 待 解决问题 下面 通过 对 一个 实际 系统 的 分析 ， 证实 本文 方法 的 应用 价值 　 　 　 一个 实际 系统分析 　 　 例图 是 一个 加工 装配 系统 的 示意图 系统 有 一个 装配 站 A 一个 机器人 R 两台 加工 机器 M 和 M ， 对应 的 两个 传输 带 分别 将 两类 原材料 δ 和 δ 从库 S 和 S 中 取出 ， 并 送到 相应 机器 M 和 M 上 进行 加工 ； 然后 分别 经 R 将 半成品 δ ′ 和 δ ′ 从 M 和 M 上 卸载 并 送到 A ， 经 A 装配成 产品 由 运输 带 运到 库 S 中图 　 一个 架工 装配 系统 　 　 为 讨论 方便 起 见 ， 做 如下 假设 ： 　 　 SS 中 原材料 从不 短缺 ； 　 　 S 中 产品 从不 溢出 ； 　 　 传输 过程 很快 ， 看做 立即 动作 ； 　 　 Mi 加工 δ i 的 速率 服从 负 指数分布 ， 且 参数 分别 是 ； 　 　 R 从 Mi 上 卸载 速率 是 一个 常量 ， 记 作 χ 　 　 A 装配 速率 服从 负 指数分布 ， 且 参数 是 建立 该 系统 的 Petri 网 模型 如图所示 其中 a — — M 加工 δ ； b — — M 加工 δ c — — R 从 Mi 上 卸载 δ ′ iid — — A 对 δ ′ 与 δ ′ 进行 装配图 　 加工 装配 系统 的 Petri 网 模型 取 λ a λ b λ d χ 是 一个 参量 按 本文 方法 得到 已 标号 的 周期 行为 表达式 是 ab ′ ba ′ cb ″ da ′ cadca ″ d ″ ″ b ′ cb ″ ″ dcd ″ 其中 　 　 　 　 　 　 　 　 　 根据 本 方法 第四步 ， 求得 的 传递函数 从而 该 系统 平均 生产 周期 是 　 　 在 一个 生产 周期 中 ， 为 考虑 卸载 的 时延 c ， 令 Wis 中 s ， 其中 i ∈ aba ′ b ′ a ″ b ″ d ″ adb ″ ″ d ″ ″ 从而 得到 此时 的 传递函数 因此 ， 这样 ， 处于 卸载 的 稳态 概率 是 由此 可 得 ， cpc 对 χ 的 曲线 如图所示 图 　 ， cpc 对 χ 的 曲线 　 　 　 结 　 　 语 　 　 本文 给出 一个 基于 行为 表达式 的 任意 随机 Petri 网 的 性能 分析方法 通过 对 一个 无界 AGSPN 的 品质 分析 ， 展示 了 该 方法 的 理论意义 并 通过 对 一个 加工 装配 系统 的 品质 分析 ， 说明 了 该 方法 的 实际意义 进一步 要 做 的 工作 应该 是 开发 出 基于 行为 表达式 的 并发 系统 建模 、 分析 、 控制 、 评估 和 优化 的 Petri 网 语言 方法 的 计算机软件 ， 使 之 真正 成为 强有力 的 工具 国家自然科学基金 资助 课题 作者简介 ： 蒋昌俊 　 简介 见 本刊 第卷 第期 　 　 　 　 　 郑应平 　 简介 见 本刊 第卷 第期 　 　 　 　 　 疏松 桂 　 简介 见 本刊 第卷 第期 作者 单位 ： 中国科学院自动化研究所 　 北京 　 参考文献 　 　 MolloyMKPerformanceanalysisusingstochasticPetrinetsIEEETransonComputers 　 　 MarsanMABalboGConteGAclassofgeneralizedstochasticPetrinetsforperformanceanalysisofmultiprocessorsystemsACMTOCS 　 　 DuganJBTrivediKSGeistRMNicolaVFExtendedstochasticPetrinetsapplicationandanalysisinProcPERFORMANCEParisDecember 　 　 ZhouMCGuoDLDiCesareFIntegrationofPetrinetsandmomentgeneratingfunctionapproachesforsystemperformanceevaluationJofSystemsIntegration 　 　 PritskerAABModelingandanalysisusingQGERTnetworksNewYorkJohnWileyandSons 　 　 JiangCJWuZHNetoperations Ⅰ JofComputSciTechnol 　 　 JiangCJNetoperations Ⅱ JofComputSciTechnol 　 　 JiangCJZhengYPShengSGSynthesisandanalysisofsystemsbasedonPetrinetsIntConferenceonSystemsandControlNanKaiOctober 收稿 日期 　