自动化 学报 ACTAAUTOMATICASINICA 年 第卷 第期 VolNo 用 神经网络 实现 精密 伺服系统 中 扰动 力矩 的 动态 补偿 徐 立新 　 张宇河 　 王常虹 　 庄显义 摘 　 要 　 分析 了 扰动 力矩 对 精密 伺服系统 的 影响 提出 使用 神经网络 方法 建立 扰动 力矩 的 数学模型 ， 并 根据 全 补偿 原则 设计 补偿 环节 ， 实现 扰动 力矩 的 动态 补偿 试验 结果表明 这种 新 的 补偿 方法 对 提高 伺服系统 的 精度 十分 有效 ， 具有 实际 应用 价值 关键词 　 伺服系统 ， 扰动 力矩 ， 神经网络 ， 动态 补偿 DYNAMICCOMPENSATIONFORDISTURBINGMOMENTINACCURATESERVOSYSTEMBASEDONNEURALNETWORKSXULIXIN 　 　 ZHANGYUHEDepartmentofAutomaticControlBeijingInstituteofTechnologyBeijingWANGCHANGHONG 　 　 ZHUANGXIANYIDepartmentofControlEngineeringHarbinInstituteofTechnologyHarbinAbstract 　 TheaffectionofdisturbingmomentinservosystemisdiscussedinthisarticleatfirstthenweusethefeedforwardneuralnetworktobuildthemathematicmodelofthedisturbingmomentanddesignthetransferfunctinforcompensationExperimentshowsthatthenewmethodiseffectivetoimprovetheaccuracyoftheservosystemKeywords 　 Servosystemdisturbingmomentneuralnetworkdynamiccompensation 　 引言 　 　 精密 伺服系统 已 被 广泛应用 于 航天 控制 领域 ， 如 惯性导航 设备 中 的 测试 转台 ， 导弹 半 实物 仿真 中 的 仿真 转台 ， 红外 目标 背景 模拟 装置 中 的 光学 随动 系统 这些 系统 均 要求 有 较 高 的 跟踪 和 定位精度 但 伺服系统 精度 的 提高 却 受到 以 摩擦 力矩 为主 的 扰动 力矩 的 限制 　 　 本文 首先 回顾 了 历史 上 对 扰动 力矩 的 补偿 方法 ， 指出 其 局限性 ， 进而 应用 神经网络 技术 建立 扰动 力矩 模型 ， 最后 使用 工控 计算机 实现 扰动 力矩 的 动态 补偿 　 扰动 力矩 模型 建立 　 扰动 力矩 分析 　 　 精密 伺服系统 中 的 扰动 力矩 主要 是 摩擦 力矩 ， 此外 还有 负载 阻转 力矩 摩擦 力矩 的 大小 与 电机 结构 ， 润滑 特性 ， 负载 大小 和 速率 有关 负载 阻转 力矩 主要 与 负载 有关 由于 扰动 力矩 是 提高 伺服系统 精度 的 主要 障碍 ， 已有 许多 学者 在 这 一 领域 做 了 大量 工作 ， 取得 了 一些 成果 文献 ［ ］ 考察 冷轧机 ， 造纸机 等 对象 ， 将 负载 力矩 看做 是 阶跃 型 “ 常值 ” 的 ， 设计 状态 观测器 以 测量 负载 力矩 ， 并 使用 前馈 控制 加以 补偿 ， 取得 了 较 好 的 效果 文献 ［ ］ 研究 了 精密 转台 中 的 摩擦 力矩 模型 ， 在 负载 力矩 一定 的 条件 下 ， 实验 测 得 摩擦 力矩 与 速率 的 关系 ， 提出 了 摩擦 力矩 的 两种 数学模型 ， 其中 摩擦 力矩 表示 为 MF ， 速率 表示 为 ω 　 　 分段 线性 模型 　 如图所示 　 　 　 　 　 　 　 　 　 　 　 　 图 　 分段 线性 模型 其中 MS 与 MC 分别 为 最大 静摩擦力 矩 和 库仑 摩擦 力矩 ， M 为 转台 运行 过程 中 对应 速率 ω 所测 得 的 摩擦 力矩 　 　 慢变 常值 模型 ， 即 认为 摩擦 力矩 在 一定 范围 内 是 常值 ， 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 文献 ［ ］ 根据上述 摩擦 力矩 模型 设计 状态 观测器 ， 使用 不变性 原理 进行 前馈 补偿 ， 切实 提高 了 转台 系统 的 跟踪 精度 但是 ， 文献 ［ ］ 中仅 考察 了 常值 阻转 力矩 作为 扰动 力矩 文献 ［ ］ 给出 摩擦 力矩 的 分段 线性 模型 由于 近似 模型 比较 粗糙 ， 不能 如实 反映 摩擦 力矩 的 真实情况 ， 当 摩擦 力矩 处于 过 零 和 零 附近 的 过渡 过程 状态 时 ， 难以获得 有效 结果 综上所述 ， 能否 同时 考虑 摩擦 力矩 和 负载 力矩 ， 并 建立 较为 精确 的 摩擦 力矩 和 负载 力矩 模型 是 提高 伺服系统 精度 的 关键问题 　 神经网络 建模 方法 　 　 用 神经网络 方法 建立 扰动 力矩 模型 神经网络 是 近 十几年 发展 起来 的 一门 新兴学科 ， 主要 研究 由 简单 处理单元 大规模 互连 而成 的 网络 的 整体 特性 控制 和 辨识 领域 中 所 广泛 利用 的 是 其 逼近 非线性 函数 的 能力 ［ ］ 和 自 组织 、 自 适应 、 自 学习 的 特点 　 　 设计 较为简单 的 前 向 网络 ， 利用 其 逼近 非线性 函数 能力 ， 建立 起 扰动 力矩 的 数学模型 由于 扰动 力矩 主要 是 摩擦 力矩 和 恒值 负载 阻 转矩 ， 忽略 随机 扰动 力矩 影响 ， 可 认为 当 系统 和 负载 一定 时 ， 扰动 力矩 是 速率 ω 的 非线性 函数 显然 这 是 一 静态 过程 使用 前向 神经元网络 建立 这一 非线性 模型 为 使 训练 方便 ， 分别 对于 正转 ω ＞ 和 反转 ω ＜ 建立 神经网络 模型 由于 分别 逼近 较为简单 的 非线性 函数 ， 网络 权值 训练 容易 收敛 选用 多层 前向 网络 实现 ， 设计 每个 网络 含 一个 输入 节点 ， 一个 输出 节点 ， 根据 样本 数量 ， 选用 个 隐 节点 隐 节点 激励函数 为 双曲 正切 函数 tanhxexpxexpx ， 输出 节点 激励函数 为 线性 函数 网络结构 建立 以后 ， 设计 试验 获得 输入 为 速率 ， 输出 为 扰动 力矩 的 数据 样本 给定 某恒值 角 速率 ω ， 测量 电机 电枢 电流 I 已知 电机 力矩 平衡 关系式 其中 KM 为 转矩 常数 因 速率 为定值 ， 即 有 即可 由 电枢 电流 换算 出 扰动 力矩 这样 我们 就 得到 一组 数据 样本 ω 以 其 作为 教师 训练 多层 前向 网络 权值 为 保证 训练 网络 的 有效性 ， 训练样本 数据 应 覆盖 较大 范围 　 神经网络 学习 算法 　 　 BP 算法 是 一种 常用 的 神经网络 训练方法 ， 但 存在 局部 极小 总理 ， 本文 使用 一种 随机 寻优 方法 训练 前向 网络 权值 这 是 一种 具有 较强 全局 收敛性 ， 不 依赖于 网络结构 和 激励函数 的 并行 寻优 方法 ， 该 算法 建立 在 模拟退火 思想 上 ， 所谓 模拟退火 是 基于 统计 物理 中 ， 对 固体 物质 进行 退火 处理 时 ， 通常 先 将 它 加温 ， 使 其中 的 粒子 可以 自由 运动 ， 然后 随着 温度 的 逐渐 下降 ， 粒子 也 逐渐 形成 了 低能 态 的 晶格 若 在 凝结点 附近 的 温度 下降 速率 足够 慢 ， 则 固体 物质 一定 会 形成 最低 能量 的 基态 对于 组合 优化 问题 来说 ， 它 也 有 这样 类似 的 过程 这里 将 网络 学习 视作 组合 优化 问题 ， 目标 是 通过 调整 连接 权值 以 极小 化 误差 函数 E 　 　 设 Wij 为 神经元 i 和 神经元 j 之间 的 连接 权 ， 在 第 k 次 迭代 ， WijkWijk δ ijk 　 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 　 　 　 　 　 　 　 　 　 　 　 　 　 　 δ 为 一小 正数 ， 即 权值 每次 依 概率 前进 或 回退 一个 δ 概率 pijk 为 玻尔兹曼 分布 　 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 Tk 与 模拟退火 算法 相似 ， 被称作 温度 ， 在 优化 过程 中其应 逐渐 降低 ， Ci ， jk 表示 权值 改变 与 误差 变化 的 相关 量 　 　 　 　 　 　 　 　 　 　 　 　 　 　 其中 算法 总是 倾向 于 使 误差 目标 函数 E 减小 的 权值 变化 ［ ］ ， 大量 仿真 结果表明 该 算法 有 较 好 的 全局 收敛 能力 ， 且 计算速度 比 BP 算法 快 ［ ］ 用该 方法 训练 多层 前向 网络 ， 算法 实现 简单 ， 效果 良好 　 扰动 力矩 的 动态 补偿 　 补偿 装置 设计 　 　 网络 权值 经 离线 训练 后 ， 即 获得 扰动 力矩 的 神经网络 模型 与 图 所示 的 摩擦 力矩 分段 线性 模型 相比 ， 低速 段 表现 为 光滑 的 非线性 曲线 ， 高速 段 接近 线性关系 　 　 伺服系统 及 补偿 环节 设计 如图所示 实时 采样 测速 反馈 信号 ， 通过 神经网络 模型 计算 扰动 力矩 的 大小 ， 为 实现 扰动 力矩 的 全 补偿 ， 计算 补偿 环节 传函为 若 使用 硬件 电路 网络 实现 ， 可 在 原传函 基础 上 增加 一个 具有 较 小 的 时间常数 的 惯性 环节 这里 ， 由于 神经网络 模型 及 前馈 补偿 均 在 计算机 中以 软件 实现 ， 所以 传函 φ s 容易 由 编程 实现 图 　 系统结构 框图 　 试验 结果 　 　 由于 扰动 力矩 主要 影响 伺服系统 的 低速 跟踪 特性 及 定位精度 ， 本文 重点 考察 补偿 前后 这 两个 指标 的 变化 情况 设计 试验 使 系统 跟踪 恒定 速度 信号 ， 并 考察 其 定位精度 试验 以 红外 目标 背景 模拟 装置 中 的 光学 随动 系统 为 对象 ， 采用 对比 方法 ， 对 引入 扰动 补偿 前后 的 误差 进行 比较 首先 选择 区间 内 的 个 均匀分布 的 速率 样本 单位 rads 训练 网络 权值 ， 测试 信号 为 速率 rads 的 低速 斜坡 信号 ， 比较 补偿 前后 系统 的 跟踪 精度 ， 在 跟踪 过程 中 再 给出 定位 信号 ， 试验 结果 如图 a 和 图 b 所示 ， 其中 ， 图 a 是 补偿 前 的 误差 曲线 ， 图 b 是 补偿 后 的 误差 曲线 在 每条 曲线 中 ， 前半段 记录 了 对于 斜坡 信号 的 跟踪 误差 ， 后半段 为 定位 误差 ， 其中 较大 跳跃 是 由于 试验 状态 切换 引起 的 试验 结果表明 ： 图 　 补偿 前后 的 误差 曲线 　 　 速度 环死区 电压 由 V 减小 到 低于 V ； 　 　 跟踪 误差 由于 mrad 减小 到 低于 mrad 　 　 稳态 误差 由 mrad 降低 到 接近 无静差 此外 ， 对于 神经网络 模型 补偿 范围 内 的 其他 速率 信号 ， 补偿 控制 均 可 明显降低 跟踪 误差 ， 降低 系统 死 区 电压 试验 结果表明 本文 所 提出 的 补偿 方法 切实 提高 了 伺服系统 的 低速 跟踪 精度 和 定位精度 　 结果 讨论 　 　 本文 用 神经网络 方法 建立 起 扰动 力矩 的 数学模型 ， 与 以前 的 分段 线性 模型 和 常值 模型 相比 ， 更 能够 真实 反映 扰动 力矩 的 变化 过程 依据 全 补偿 原则 设计 补偿 环节 传递函数 ， 补偿 环节 结构 简单 ， 容易 实现 试验 结果表明 这种 新 的 补偿 方法 是 可行 和 有效 的 若 用 其 补偿 更 精密 的 伺服系统 ， 效果 会 更加 显著 　 　 文中 未 考虑 随机 扰动 力矩 的 影响 实际 伺服系统 中 ， 扰动 力矩 也 是 角 位置 和 时间 的 随机 函数 ， 较大 的 随机 波动 将 严重 影响 伺服系统 的 精度 本文 所述 方法 同样 适用 于 其他 类型 扰动 力矩 如 负载 偏心 力矩 的 动态 补偿 作者 单位 ： 徐 立新 　 张宇河 　 北京理工大学 自动控制 系 　 北京 　 　 　 　 　 　 王常虹 　 庄显义 　 哈尔滨工业大学 控制 工程系 　 哈尔滨 　 参考文献 　 高龙 ， 熊光 愣 ， 梁德全 状态 观测器 在 调速 系统 中 的 应用 清华大学 学报 ， ， ： 　 杨元恺 ， 郎 需英 精密 转台 中 摩擦 力矩 的 动态 补偿 ， 自动化 学报 ， ， ： 　 FunahashiKOntheapproximaterealizationofcontinuousmappingsbyneuralnetworksNeuralNetworks 　 UnnikrishnanKPetalAlopexAcorrelationbasedlearningalgorithmforfeedforwardandrecurrentneuralnetworkneuralcomputation 　 徐 立新 ， 王常虹 ， 庄显义 神经网络 训练 的 一种 随机 方法 研究 哈尔滨工业大学 学报 ， 收稿 日期 　