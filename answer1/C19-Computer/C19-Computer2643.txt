软件 学报 JOURNALOFSOFTWARE 年 第卷 第期 VolNo 一种 基于 信念 期望 意图 和 效用 的 社会 承诺 机制 徐晋晖石 纯一 摘要 　 在 多 智能 体 系统 中为 完成 问题 求解 智能 体 之间 需 建立 起 社会 承诺 文章 将 信念 期望 意图 和 效用 理论 结合 起来 提出 了 一种 社会 承诺 机制 保证 了 智能 体 行为 的 逻辑 理性 和 决策 理性 该文 的 工作 将 RaoGeorgeff 的 信念 期望 意图 理论 和 SKraus 的 激励 承包 思想 有机 地 结合 起来 改进 了 Haddadi 的 社会 承诺 机制 为 Castelfranchi 的 社会 承诺 提供 了 实现 支持 关键词 　 多 智能 体 系统 信念 期望 意图 效用 社会 承诺 中图法 分类号 　 TPOneMechanismofSocialCommitmentBasedonBeliefDesireIntentionandUtilityXUJinhuiSHIChunyiDepartmentofComputerScienceandTechnologyTsinghuaUniversityBeijingAbstract 　 ThesocialcommitmentbetweenagentsneedstobebuiltforproblemsolvinginthemultiagentsystemsAmechanismofsocialcommitmentbycombiningBeliefDesireIntentionandUtilitytheoryispresentedinthispaperwhichguaranteesagentsrationalactiononlogicanddecisionTheRaoGeorgeffsBeliefDesireIntentiontheoryandSKraussideaofincentivecontractarecombinedtheHaddadismechanismofsocialcommitmentismodifiedandtheCastelfranchisconceptofsocialcommitmentwithimplementingsupportisprovidedinthispaperKeywords 　 Multiagentsystemsbeliefdesireintentionutilitysocialcommitment 　 　 在 MASmultiagentsystems 中当 一个 Agent 组 如果 不 特殊 说明 是 一组 Agent 根据 目前 的 情景 难以完成 一个 任务 （ 目标 ） 时 可以 通过 支付 报酬 委托 其他 的 Agent 来 完成 全部 或 部分 任务 这是 一种 承包 现象 　 　 可 将 承包 中 涉及 的 两个 Agent 称为 委托 者 D 和 采纳者 A 所 委托 的 任务 称为 项目 PP 可以 是 D 的 目标 或 规划 中 的 一个 子目标 目前 的 研究 工作 中 ［ ～ ］ 将 A 有 意图 完成 D 委托 的 项目 P 称为 A 对 D 的 社会 承诺 其 作用 是 共同 联合 行为 的 胶合剂 个体 承诺 向 集体 承诺 过渡 的 桥梁 组队 合作 的 基础 　 　 Castelfranchi ［ ］ 对 社会 承诺 进行 了 定性 的 分析 指出 社会 承诺 中 存在 双方 的 社会 约束 不足之处 是 没有 考虑 社会 承诺 的 建立 、 解除 过程 社会 承诺 的 定义 没有 能 反映 社会 约束 Haddadi ［ ］ 讨论 了 组内 agent 之间 的 社会 承诺 建立 和 解除 的 通讯 问题 但 没有 考虑 社会 约束 社会 承诺 局限于 组内 不 具有 普遍性 　 　 那么 如何 结合 社会 约束 给出 社会 承诺 的 概念 ？ 如何 在 自主 自利 的 agent 之间 建立 社会 承诺 ？ 在 环境 动态变化 的 情况 下 社会 承诺 如何 变化 ？ 将 是 本文 所 要 解决 的 问题 　 　 本文 通过 合同 结构 来 描述 社会 承诺 合同 结构 描述 了 双方 的 责任 、 禁止 、 允许 等 社会 约束 社会 承诺 与 BDIbeliefdesireintention 之间 有 密切 的 关系 甚至 社会 承诺 可以 通过 BDI 来 进行 定义 这样 社会 承诺 的 建立 和 解除 可以 通过 BDI 的 演化 来 进行 分析 对 agent 的 BDI 可以 从 不同 的 角度 来 观察 我们 从 agent 角度 考虑 社会 承诺 的 建立 和 解除 　 　 Agent 是 自主 自利 的 这样 D 委托 给 A 一个 PA 可能 采纳 也 可能 不 采纳 这 是 由 A 自主 决定 的 同样 当 D 有 多个 候选 委托 者 时 也 要 根据 某种 利益 标准 选择 合适 的 A 而 当 不 存在 候选者 时需 激励 Agent 去 采纳 其 项目 那么 如何 作出 选择 ？ 如何 激励 ？ 这是 社会 承诺 建立 过程 中 需要 考虑 的 问题 在 本文 中以 效用 理论 为 基础 来 讨论 　 　 在 MAS 研究 中 要求 Agent 的 行为 是 理性 的 从 逻辑 角度 说 Agent 的 行为 可以 通过 逻辑 的 方式 推导 出来 从 决策 的 角度 说 Agent 的 行为 应该 符合 效用 最大化 我们 将 BDI 和 效用 理论 结合 建立 的 社会 承诺 机制 满足 了 理性 的 这 两种 解释 　 　 我们 假定 Agent 的 能力 是 有限 的 和 不同 的 Agent 是 自主 自利 的 Agent 可以 在 同一个 组内 通讯 渠道 是 正常 的 基本 框架 效用 概念 　 　 效用 理论 是 Agent 追求 效用 最大化 的 一种 决策 理论 有关 的 概念 阐述 如下 　 　 代价 （ Cost ） 是 Agent 完成 一个 活动 所 需要 的 资源 耗费 代价 函数 C 是 ACTIVITY （ 活动 集 ） → R （ 实数 集 ） 的 映射 　 　 收益 （ Benifit ） 是 Agent 实现 一个 目标 所 带来 的 经济 价值 收益 函数 B 是 GOAL （ 目标 集 ） → R 的 映射 　 　 报酬 （ Reward ） 是 D 对 A 完成 P 的 奖励 报酬 函数 R 是 ACTIVITYGOAL → R 的 映射 报酬 对 D 而言 是 代价 对 A 而言 是 收益 　 　 委托 者 效用 （ Utility ） 是 D 通过 将 P 委托 给 A 来 完成 所 获得 的 利益 委托 者 效用函数 UD 是 BENEFITREWARD → R 的 映射 　 　 采纳者 效用 是 A 通过 完成 D 委托 的 P 所 获得 的 利益 采纳者 效用函数 UA 是 COSTREWARD → R 的 映射 结合 效用 的 BDI 理论 　 　 Agent 的 BDI 理论 以 RaoGeorgeff ［ ］ 的 工作 为 基础 本文 考虑 到 BDI 与 效用 的 结合 做 如下 说明 　 　 信念 Belief 是 Agent 对于 世界 或 环境 的 知识 用 （ BELX φ ） 表示 agentX 相信 φ 　 　 目标 （ Goal ） 是 Agent 希望 达到 的 世界 状态 用 （ GOALX φ ） 表示 X 期望 φ 成立 　 　 目标 有 多种 来源 可以 是 用户 或 其他 的 Agent 提出 的 也 可以 是 用户 自己 产生 的 目标 的 实现 可以 给 Agent 带来 一定 的 收益 b 收益 函数 B 依赖 目标 的 来源 可以 是 用户 或 其他 Agent 说明 的 也 可以 是 根据 信念 和 动机 确定 的 或 根据 总 目标 计算 的 以 （ GOALX φ b ） 表示 X 有 目标 φ 且 收益 是 b 有 （ GOALX φ b ） ≡ （ GOALX φ ∧ BELXB φ b 　 　 规划 （ Plan ） 是 一个 有 目标 的 活动 用 （ HasPlanXPL φ ） 表示 X 有 完成 φ 的 规划 PL 　 　 Agent 执行 规划 必然 带来 资源 的 耗费 c 可以 根据 行为 序列 的 构成 由 基本 行为 求得 就是 代价 函数 C 依赖于 基本 行为 的 耗费 和 规划 的 构成 形式 以 （ HasPlanXPL φ c ） 表示 X 有 完成 φ 的 规划 PL 且 代价 是 c 有 （ HasPlanXPL φ c ） ≡ （ HasPlanXPL φ ） ∧ BELXCPLc 　 　 意图 （ Intention ） 是 Agent 打算 按 相应 的 规划 去 实现目标 用 （ INTX φ ） 表示 X 有 意图 去 实现 φ 　 　 Agent 对于 这种 意图 的 结果 用 效用 u 来 判断 u 可以 通过 目标 收益 和 规划 代价 来 确定 以 （ INTX φ u ） 表示 X 有 意图 去 实现 φ 且 效用 是 u 有 （ INTX φ u ） ≡ （ INTX φ ） ∧ BELXUbcu 其中 U 是 效用函数 为了 简化 令 ubc 　 　 RaoGeorgeff 公理 　 　 HasPlanXPL φ ∧ GOALX φ ∧ BELXPrePL ∧ ChooseXPL φ INTXBodyPL 这里 将 PL 分为 前提条件 和 实体 公理 意指 X 有 目标 φ 完成 φ 的 规划 相信 规划 的 前提条件 存在 选择 该 规划 作为 实现 φ 的 规划 可以 推出 X 有 意图 去 执行 规划 的 实体 部分 根据 公理 本文 引入 效用 得到 　 　 定理 HasPlanXPL φ c ∧ GOALX φ b ∧ BELXPrePL ∧ BELXUbc ＞ ∧ MaxUbcINTXBodyPLu 　 　 证明 提示 由于 BELXUbc ＞ ∧ MaxUbc 可以 保证 ChooseXPL φ 　 　 意指 X 有 收益 是 b 的 目标 φ 完成 φ 的 代价 为 c 的 规划 PL 相信 PL 规划 的 前提条件 存在 效用 大于 且 在 所有 的 可选 规划 中 效用 最大 可以 推出 X 有 意图 去 执行 带来 效用 u 的 规划 的 实体 部分 　 　 定理 说明 了 结合 效用 的 BDI 理论 可以 保证 两种 理性 的 解释 合同 结构 和 社会 承诺 　 　 关于 社会 承诺 的 定义 ［ ］ 只是 从 BDI 的 角度 给出 的 忽略 了 D 和 A 的 责任 、 禁止 和 允许 如 SCOMMXY φ ≡ INTX φ ∧ GOALYDONEX φ 在 人类 承包 现象 中 通常 用 合同 来 描述 委托 者 和 采纳者 双方 的 责任 等 约束 这样 我们 引入 合同 结构 令 　 　 　 　 　 　 　 　 　 　 　 　 合同 结构 CS 合同 号 对象 组 约束 期限 其中 对象 组 DA 对象 DA 　 　 约束 对象 约束 说明 约束 说明 责任 禁止 允许 　 　 责任 责任 描述 表 责任 描述 责任 条件 必须 执行 行为 报酬 　 　 禁止 禁止 描述 表 禁止 描述 禁止 条件 不能 执行 行为 罚金 　 　 允许 允许 描述 表 允许 描述 允许 条件 行为 　 　 期限 有效期 开始 时间 到 结束 时间 　 　 从 外部 观察者 的 角度 可以 通过 合同 结构 来 建立 社会 承诺 　 　 　 　 SCOMMXYcs ≡ MBELXYcs ∧ EINTXYcs ∧ MBELXYEINTXYcs 这里 cs 是 一个 具体 的 合同 MBEL 是 相互 信念 EINT 是 每 一个 Agent 都 有 意图 EINTXYcs ≡ INTXcs ∧ INTYcs 　 　 从 Agent 角度 来 定义 　 　 　 　 　 　 SCOMMdDAcs ≡ BELDcs ∧ INTDcsuD ∧ BELDINTAcs 　 　 　 　 　 　 SCOMMAADcs ≡ BELAcs ∧ INTAcsuA ∧ BELAINTDcs 其中 INTXcs 是 指 X 有 意图 去 履行合同 csuD 和 uA 分别 是 D 和 A 履行合同 的 效用 根据 定理 对于 D 而言 有 　 　 GOALD φ b ∧ HasPlanDcs φ c ∧ BELDUbc ＞ ∧ MaxUbcINTDcsu 这里 D 的 目标 是 φ cs 是 D 实现 该 目标 的 规划 c 是 D 付给 A 的 报酬 　 　 对于 A 而言 有 　 　 GOALAcsr ∧ HasPlanAPLcsc ∧ BELAUrc ＞ ∧ MaxUrcINTAcsu 这里 A 的 目标 是 cs 并且 有 实现 该 目标 的 规划 r 是 执行 合同 的 报酬 　 　 这样 通过 合同 使得 D 和 A 之间 建立 起 社会 承诺 与 现有 的 定义 相比 一是 确立 了 双方 的 约束 二是 强调 了 社会 承诺 的 相互 性 社会 承诺 过程 　 　 社会 承诺 的 建立 过程 是 D 和 A 之间 通过 协商 达到 一个 共同 同意 的 合同 并且 作出 意图 去 履行合同 的 决定 社会 承诺 的 解除 过程 是 在 合同 履行 中 责任 、 禁止 和 允许 所 描述 的 条件 出现 导致 D 和 A 需要 重新考虑 合同 作出 有关 的 决定 和 行为 D 的 社会 承诺 建立 　 　 发现自己 不能 完成 的 目标 GOALD φ b ∧ HasplanDPL φ 　 　 产生 委托 其他 Agent 完成 φ 的 目标 GOALDContract φ 由于 存在 实现 委托 目标 的 规划 执行 下面 的 有关 步骤 　 　 通知 其他 Agent 信息 ContractD φ rD 响应 时间 这里 rD 是 D 提出 的 初始 报酬 通知 可以 有 针对性 发送 　 　 在 响应 时间 内 无 CanAdoptA φ rAc 消息 接收 可以 认为 委托 规划 失败 结束 下面 的 执行 rA 是 A 要求 的 初始 报酬 c 是 A 实现 φ 的 代价 如果 A 与 D 不 在 同一个 合作 组内 该 信息 可以 为 （ A 对 D 保密 其 实际 的 投入 ） 　 　 从 多个 候选者 中 选择 一个 A 　 　 ① 计算 由 每 一个 候选者 完成 φ 带来 的 效用 IFA 和 D 在 同 一组 内 THENuD ＝ bcELSEuDbrA 这 说明 A 和 D 在 一个组 内 追求 整体 效用 （ 因为 uD ＝ bc ＝ brArAc ） 否则 考虑 D 的 自身 效用 　 　 ② 将 uD 从大到 小 排队 　 　 ③ 从中 取出 第个 就是 预选 的 A 　 　 如果 uD ＜ 需要 重新 设计 对 A 的 报酬 到 uD ＞ 满意 为止 这时 有 WantDA φ r 将 该 信息 通知 对应 的 A 　 　 在 规定 的 时间 内 没有 收到 WillingA φ 这时 可以 认为 A 不 满意 需要 重新考虑 报酬 或 其他 的 候选者 　 　 建立 合同 　 　 ① 如果 D 收到 A 的 合同 cs 信息 可以 根据 情况 确定 是否 满意 如果 满意 则 形成 履行合同 的 意图 INTDcsuD 并 通知 A 否则 对 合同 进行 修改 并 将 修改 的 cs 通知 A 　 　 ② 如果 D 没收 到 A 的 合同 cs 信息 D 可以 生成 cs 并 通知 A 　 　 ③ 如果 D 收到 A 的 INTAcs 认为 A 同意 cs 　 　 直到 相互 满意 或 达 不成 一致意见 为止 如果 是 后者 需 考虑 其他 的 候选者 　 　 社会 承诺 建立 　 　 满足 以下 两个 条件 D 就 建立 起 对应 的 社会 承诺 　 　 ① 当 D 发出 cs 信息 且 收到 INTAcs 这时 应有 INTDcs 　 　 ② 当 D 收到 cs 信息 且 作出 INTDcs 并 收到 INTAcs 　 　 对于 A 来说 基本上 是 对 D 社会 承诺 建立 的 反 过程 D 的 社会 承诺 解除 　 　 情形 （ BELDGOALD φ bD 原有 的 实现 φ 的 目标 不 存在 　 　 如果 A 和 D 在 一个组 内 或 cs 不 在 合同 期限内 那么 D 可以 解除 承诺 同时 告知 A 及 原应 （ 所有 承诺 解除 原则上 要求 通知 对方 并 附上 原应 ） 　 　 如果 cs 在 期限内 且 解除 承诺 带来 的 罚金 ≤ 报酬 那么 D 可以 解除 承诺 同时 支付 相应 的 罚金 否则 罚金 ＞ 报酬 D 需 根据 问题 领域 进行 决定 　 　 情形 （ BELDGOALD φ bn ∧ bn ＜ bD 原有 目标 存在 但是 收益 要 比 起初 相信 的 小 　 　 如果 A 和 D 在 一个组 内且 bn ＜ c 那么 解除 承诺 否则 bn ＞ c 可以 继续 进行 　 　 如果 A 和 D 不 在 一个组 内 cs 不 在 期限内 且 bn ＜ r 那么 D 有 两种 选择 解除 承诺 或 减少 r 这 需要 与 A 协商 否则 bn ＞ r 可以 继续 进行 　 　 如果 A 和 D 不 在 一个组 内 cs 在 期限内 bn ＜ r 且 bn 罚金 ＜ r 那么 D 也 有 类似 的 两种 选择 否则 bn 罚金 ＞ r 可以 继续 进行 　 　 情形 接收 A 发来 的 协商 要么 是 解除 承诺 要么 是 增加 报酬 支付 　 　 计算 解除 承诺 和 增加 支付 的 效用 选择 效用 大者 必要 时 修改 cs 　 　 情形 接收 A 发来 的 解除 承诺 信息 D 相应 解除 　 　 类似 地有 对 A 的 社会 承诺 解除 例子 　 　 我们 以 卡车 运输 调度 问题 为例 说明 社会 承诺 的 建立 和 解除 过程 　 　 一个 车场 agentD 接收 到 用户 的 任务 P 对应 的 约束 包括 责任 （ 最迟 完成 时间 T ） 、 禁止 （ 打开 货物 ） 、 允许 （ 分批 运输 ） 完成 任务 的 报酬 是 元 根据 目前 的 情况 D 难以完成 P 产生 GOALDContractPD 知 存在 可能 的 车场 A （ 属于 同一 公司 ） 和 A （ 不 属于 同一 公司 ） 这时 向 他们 发送 ContractDP 元 分钟 　 　 分钟 内 收到 （ CanAdoptAP 元 代价 元 ） 和 （ CanAdoptAP 元 代价 元 ） D 计算 得 委托 A 的 效用 是 元 委托 A 的 效用 是 元 这时 选择 A 作为 委托 对象 经过 协商 产生 如下 的 合同 C 　 　 合同 号 DA 　 　 　 　 D 责任 A 完成 P 支付 报酬 元 报酬 元 ） 　 　 　 　 禁止 非 特殊 情况 禁止 终止 合同 罚金 元 　 　 　 　 允许 意外 情况 与 A 通讯 　 　 　 A 责任 条件 正常 完成 P 报酬 元 　 　 　 　 禁止 运输 中 禁止 打开 货物 罚金 元 　 　 　 　 禁止 非 特殊 情况 禁止 终止 合同 罚金 元 　 　 　 　 允许 意外 情况 与 D 通讯 　 　 　 有效期 T 到 T ） 这时 有 （ INTDC 元 ） 和 （ INTAC 元 ） 并且 作出 对应 的 社会 承诺 　 　 当 D 发现 原有 的 报酬 是 元 时 根据 ＋ ＞ 保持 合同 的 继续执行 　 　 用 Haddadi 的 社会 承诺 机制 难以 反映 该例 中 的 社会 约束 和 效用 决策 方面 结语 　 　 Castelfranchi ［ ］ 提出 的 社会 承诺 的 概念 讨论 了 社会 承诺 的 性质 但是 没有 给出 社会 承诺 的 建立 和 解除 机制 也 没有 考虑 效用 对 社会 承诺 的 影响 虽然 也 意识 到 了 社会 承诺 中 双方 的 责任 等 约束 但是 没 给出 合同 结构 的 概念 利用 合同 结构 来 描述 双方 在 社会 承诺 中 的 约束 　 　 SKraus ［ ］ 提出 的 在 MAS 中 激励 承包 的 思想 和 在 不同 情况 下 计算 报酬 的 方法 从 效用 理论 的 观点 出发 考虑 如何 计算 合适 的 报酬 才能 使得 其他 的 Agent 采纳 其 委托 的 目标 但是 没有 考虑 社会 承诺 的 概念 以及 与 BDI 理论 的 结合 问题 　 　 AHaddadi ［ ］ 基于 RaoGeorgeff 的 BDI 理论 研究 了 组内 Agent 之间 的 社会 承诺 建立 机制 提出 了 合作 可能 、 预 承诺 、 承诺 的 概念 以及 相应 的 通讯 策略 问题 但 工作 局限于 D 和 A 在 一个 合作 组内 这样 Agent 是非 自利 的 不 需要 效用 理论 来 调节 可是 D 可以 将 P 委托 给 非 组内 的 A 来 完成 这样 他 的 工作 具有 局限性 另外 没有 考虑 双方 的 责任 等 约束 而 本文 通过 合同 的 概念 将 D 和 A 连接起来 更 符合 人类 承包 现象 　 　 本文 提出 了 合同 结构 的 概念 用来 联系 社会 承诺 的 双方 并 给出 了 社会 承诺 的 定义 社会 承诺 是 双方 的 并且 意图 去 履行合同 对 BDI 和 效用 理论 结合 进行 了 尝试 从 Agent 的 角度 来 分析 社会 承诺 机制 所 给 的 描述 类似 于 算法 形式 因而 具有 一定 的 可操作性 注 ： 本文 研究 得到 国家自然科学基金 资助 本文 通讯联系 人 徐晋晖 北京 清华大学 计算机科学 与 技术 系 作者简介 ： 徐晋晖 年生 博士生 主要 研究 领域 为 分布式 人工智能 应用 基础 石纯 一年生 教授 博士生 导师 主要 研究 领域 为 人工智能 应用 基础 作者 单位 ： 清华大学 计算机科学 与 技术 系 北京 参考文献 HaddadiASCommunicationandCooperationinAgentSystemsBerlinSpringerVerlag ～ CastelfranchiCCommitmentsfromindividualintentionstogroupsandorganizationsInVictorLesseredProceedingsofthestInternationalConferenceonMultiagentSystemsMenloParkCambridgeLondonAAAIPressTheMITPress ～ CastelfranchiCModelingsocialactionforAIagentsInPollackMEedProceedingsofthethInternationalJointConferenceonArtificialIntelligenceCaliforniaMorganKaufmannPublishers ～ DuninKepliczBVerbruggeRCollectivecommitmentsInDurfeeFedProceedingsofthendInternationalConferenceonMultiagentSystemsMenloParkCaliforniaAAAIPress ～ RaoGeorgeffModelingrationalagentswithinaBDIarchitectureInLlenJAFikesRSandewallWedsProceedingsofthePrinciplesofKnowledgeRepresentationandReasoningCaliforniaMorganKaufmannPublishers ～ RaoGeorgeffAnabstractarchitectureforrationalagentsInNebelBRichCSwartoutWedsProceedingsofthePrinciplesofKnowledgeRepresentationandReasoningCaliforniaMorganKaufmannPublishers ～ KrausSAnoverviewofincentivecontractingArtificialIntelligence ～ 本文 收到 原稿 收到 修改稿