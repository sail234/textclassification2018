自动化 学报 AGTAAUTOMATICASINICA 年 第卷 第期 VolNo 微进 给 装置 的 计算机 数字 控制系统 的 设计 与 实现 邓中亮 　 王先逵 摘 　 要 　 提出 了 微进 给 装置 的 数字 PID 控制 及其 参数 的 寻优 控制 方法 ， 设计 出 了 自寻 优 数字 PID 调节 控制 模型 分析 了 微进 给 装置 数字 控制系统 的 影响 因素 ， 并 对 微进 给 装置 控制系统 相移 校正 方法 进行 了 探讨 与 实验 分析 ， 提出 了 超前 输出 控制 相移 校正 方法 ， 取得 了 较 好 的 控制 效果 关键词 　 微进 给 装置 ， 数字 PID ， 自寻 优 ， 相移 校正 DESIGNANDREALIZATIONOFCOMPUTERNUMERICALCONTROLSYSTEMOFMICROFEEDDEVICEDENGZhongliangDeptofElectromechanicalEngineeringBeijingUnivofPostsTelecommunicationsBeijing 　 WANGXiankuiDeptofPrecisionInstrumentsMechanicsTsinghuaUniversityBeijing 　 Abstract 　 AmethodofnumericalPIDcontrolformicrofeeddeviceandanalgorithmforacceleratingoptimizationofitsparametersareputforwardinthispaperAmodelofnumericaladjustmentcontroloptimizedbyitselfisbuiltandthefactorsthataffectthenumericalcontrolsystemareanalyzedDiscussionandexperimentonphaseshiftcorrectionofmicrofeeddeviceshowthatahighcorrectionaccuracycanbeobtainedwiththeadvancedoutputmethodKeywords 　 MicrofeeddevicenumericalPIDoptimizationphaseshiftcorrection 　 微进 给 装置 的 特点 　 　 在 非圆 截面 车削 时 ， 当 主轴 转速 为 rmin 时 ， 加工 四曲 边形 的 进 给 轨迹 频谱 特性 中 的 最高 角频率 为 Hz ， 而 加工 八曲边 形时 进给 运行 轨迹 频谱 特性 中 的 最高 角频率 则 达 Hz 以上 ， 因此 相应 的 采样 角频率 应 在 Hz 以上 ， 才能 保证 良好 的 进 给 运动 轨迹 控制 效果 　 　 微进 给 装置 是 精密 加工 、 位移 误差 补偿 所 需 重要环节 为了 满足 多种 非圆 截面 零件 加工 需要 ， 微进 给 装置 数字 控制系统 的 最低 采样 频率 确定 为 k ～ kHz ， 这样 才能 保证 在 加工 八曲边 形等 复杂 零件 时 ， 进 给 运行 轨迹 信号 变化 一周 内 可 采集 到 ～ 个点 的 信息 工件 转速 为 rmin 用于 数字控制 的 计算机 应 具有 足够 高 的 运算 速度 　 　 在 精密 加工 中 ， 微进 给 位移 精度 要求 为 ～ μ m ， 所 需 刚度 取决于 驱动 载荷 ～ N μ m 一般 情况 下 ， 微进 给 装置 包括 驱动 源 与 执行机构 两 部分 ， 其 结构 尺寸 与 驱动 负载 有关 在 轻 负载 情况 下 ， 执行机构 与 驱动 源 的 尺寸 较 小 mm 以下 ； 而 在 大 负载 情况 下 如 直接 驱动 来刀 运行 ， 则 要求 执行机构 有 足够 的 承载能力 ， 尺寸 也 相应 增大 要 获取 很 高 的 位移 精度 ， 还 必须 通过 合理 的 控制系统 来 实现 　 微进 给 装置 的 数字 PID 控制 　 　 利用计算机 实现 数字 PID 控制 具有 以下 优点 ： 可以 将 PID 算法 修改 得 更为 合理 ； 对于 参数 的 整定 和 修改 更为 方便 ； 一台 计算机 可以 同时 控制 多个 参数 、 多个 回路 　 　 数字 PID 调节器 的 离散 化 形式 为 其中 kp 为 比例 系数 ； Ti 为 积分 时间常数 ； Td 为 微分 时间常数 ； ekT 为 误差 信号 对式 进行 z 变换 得 令 　 　 要 获得 良好 的 控制 特性 ， 必须 合理 地 确定 PID 调节器 的 各项 系数 kpkikd 通常 ， 数字 PID 调节器 参数 的 整定 ， 需要 进行 对象 参数 与 过渡 特性 的 测试 与 分析 计算 ， 或 借助于 调试 经验 来 获得 比较满意 的 结果 这种 参数 整定 方法 的 工作 十分 繁琐 ， 而且 当 对象 参数 改变 时 ， 必须 重新 调整 PID 的 控制参数 为了 提高 数字 PID 参数 整定 速度 ， 在 微进 给 装置 数字 控制系统 中 ， 采用 了 自寻 最优控制 策略 来 实现 数字 PID 参数 的 快速 自动 整定 　 　 要 完成 数字 PID 参数 自寻 优整定 ， 则 事先 必须 确定 寻优 控制 的 性能指标 J 及 寻优 方法 其 性能指标 J 可 确定 ， 当 采样 周期 T 为定值 时 ， 则 可 确定 J 为 J 　 　 在 微进 给 装置 的 数字 PID 参数 自寻 优 控制 中 采用 了 单纯形 加速 寻优法 来 整定 各 调节 参数 kpkikd ［ ］ 由于 数字 PID 中 需要 整定 的 参数 有 三个 ， 因此 初始 单纯形 的 顶点 应 取 四点 ： kpkikdkpkikdkpkikdkpkikd 令 ： xikpikiikdi 　 自寻 优 数字 PID 调节 控制系统 的 设计 　 　 为了 便于 控制系统 具有 较强 的 适应能力 ， 针对 微进 给 装置 设计 了 数字 PID 参数 自寻 最优控制 器 ， 其 控制结构 模型 如图所示 图 　 自寻 优 数字 PID 调节 控制结构 模型 　 　 图 所示 数字控制 结构 具有 以下 两大 特点 ： 　 　 具有 自 学习 功能 　 　 利用 该 控制系统 可 控制 微进 给 装置 实现 多种形式 的 响应 过程 ， 如 阶跃 响应 、 频率响应 等等 首先 通过 多次 响应 实验 ， 自动 采集 输出 信号 ， 并 辨识 出 传递函数 KGsKD 的 参数 ［ ］ ； 然后 根据 这些 参数 ， 在 数字 计算机 上用 自寻 优 方法 求出 kpkikd 当 被控 对象 改变 时 ， 同样 可 通过 多次 瞬态 响应 过程 获取 最优控制 参数 　 　 具有 最佳 控制 效果 　 　 系统 PID 参数 是 依据 目标 函数 自动 整定 ， 整定 后 控制系统 的 动态 特性 将 取决于 系统 的 控制参数 与 所 设定 的 目标 函数 ， 通过 合理 地 选择 目标 函数 ， 可 获得 所 需要 的 动态 特性 故 利用 图 所示 数字控制 结构 可 得到 最佳 控制 状态 　 　 微进 给 装置 数字 PID 控制算法 如下 ： 式 中 ekTyrkTykTyrkT 为 目标 位置 值 ； ykT 为 实际 位移 值 ； T 为 采样 周期 　 　 在 数字 PID 控制系统 中 ， 由于 加入 了 积分 校正 ， 有时 会 产生 较大 的 超 调量 ， 这 对于 精密 切削 加工 十分 不利 ， 因此 有 必要 对 数字 PID 控制 过程 进行 改进 ， 可 采用 积分 分离 PID 控制算法 来 降低 超调量 积分 分离 PID 控制算法 可 描述 如下 ： 上式 中 E 为 积分 分离 阈 ， 当 ｜ ekT ｜ ≤ ｜ E ｜ ， 微进 给 数字 控制系统 为 PID 控制系统 　 　 图是 TH 型 微进 给 装置 数字 PID 控制系统 在 阶跃 输入 下 的 瞬态 响应 过程 ， 实验 在 精密 数控车床 上 进行 ， 电源 稳定 精度 为 从 图 可知 ， 利用 数字 PID 控制 也 可以 使 微进 给 装置 获得 较 好 的 控制 效果 ， 经 PID 校正 后 ， 微进 给 系统 的 固有频率 可 提高 到 Hz 以上 ， 超调量 可 降低 到 以内 图 　 单位 阶跃 响应 　 采样 周期 对 微进 给 装置 数字 控制系统 的 影响 　 　 在 PID 控制 过程 中 ， 积分 环节 与 微分 环节 都 与 采样 时间 T 有关 在 T 为 恒定 值时 ， 可 利用 查表 方式 来 计算 输出 控制 量 ， 以 提高 实时 运行 速度 当 T 不为 恒定 值时 ， 则 不可避免 地 采用 乘 、 除 运算 以 确定 输出 控制 量 　 　 在 非圆 截面 零件 车削 系统 中 ， 当 径向 进给 插 补 过程 为 非 定时 过程 时如 等 误差 插补 等 ， 在 单 CPU 控制系统 中 ， 微进 给 装置 的 采样 及 控制 周期 通常 由 插 补 过程 来 确定 ， 采样 周期 不 为 恒定 值 ， 故 数字 PID 调节 过程 的 计算 难度 也 因此 而 增加 所以 ， 最好 的 解决 方法 为 采用 多 CPU 控制 方案 ， 用 单独 的 CPU 子系统 来 实现 微进 给 装置 的 运行 过程 控制 　 微进 给 装置 控制系统 相移 校正 控制 　 　 微进 给 装置 的 闭环控制 系统 随着 频率 ω 的 变化 而 存在 着 相位差 ， 频率 愈高 ， 则 其 相位差 愈大 在 非圆 截面 零件 加工过程 中 ， 这种 滞后 的 相位差 会 导致 工件 表面 形状 在 横截面 上 的 分布 产生 偏移 ， 严重 影响 加工 质量 ， 因此 必须 对 微进 给 装置 控制系统 实行 相移 校正 控制 可 实现 控制系统 超前 校正 的 途径 有 以下 三类 ： 一是 模拟式 超前 校正 ； 二是 数字式 超前 校正 ； 三是 超前 输出 控制 　 　 模拟式 校正网络 可用 来 校正 某一 选定 频率 处 的 相位 φ ， 并 使 之 为 零 ［ ， ］ ， 倘若 微进 给 系统 工作 在 某 一 固定 频率 处时 ， 用 模拟式 超前 校正网络 可 获得 很 好 的 相移 校正 效果 ， 但 要 在 较 宽 的 通 频带 内 都 达到 零 相位差 的 校正 仍 存在 着 较大 的 困难 　 　 在 数字式 超前 校正 控制结构 中 ， 由于 采用 计算机 来 实现 数字 相移 校正 ， 因此 可 根据 控制 对象 的 相频特性 确定 通 频带 内 各 频率 点 的 校正 参数 ， 对于 不同 频率 的 输入 信号 ， 可 使用 对应 的 校正 参数 来 实现 相移 校正 ， 从而 达到 全通 频带 内 实现 零 相位 跟踪 的 控制 效果 数字式 超前 校正 控制结构 如图所示 图 　 数字式 超前 校正 控制结构 框图 　 　 超前 输出 控制 的 原理 是 提前 输出 目标 控制 量 ， 由此 来 减少 控制系统 的 相位 误差 这一 控制策略 是 通过 多次 微进 给 控制 实验 总结 出来 的 ， 并且 在 微进 给 装置 控制 过程 中 能 取得 良好 的 相位 补偿 效果 见 图图 　 超前 输出 控制 校正 效果 　 　 设 信号 频率 为 ω ， 微进 给 系统 输出 相位滞后 量 为 φ ， T 为 采样 周期 ， 则 超前 输出 控制 过程 为 上式 中 Xr 为 目标值 ； X 为 超前 校正 的 输出量 　 　 图 所示 是 在 频率 为 Hz ， 幅值 为 mm 时 ， 超前 输出 控制 的 校正 结果 ， 由图 可知 利用 该 策略 能 达到 较 好 的 相位 校正 效果 　 结论 　 　 微进 给 装置 是 实现 精密 切削 与 位移 补偿 的 重要环节 本文 提出 了 微进 给 装置 的 数字 PID 控制系统 ， 在 此基础 上 ， 介绍 了 自寻 优 PID 参数 整定 算法 ， 利用 该 算法 ， 较 方便 地 确定 PID 的 最佳 控制参数 本文 还 探讨 了 自寻 优数 PID 调节 控制 模型 及其 影响 因素 ， 并 分别 介绍 了 三种 相移 校正 控制 方法 ： 模拟式 超前 校 控制 、 数字式 超前 校正 控制 与 超前 输出 控制 ， 利用 超前 输出 控制 在 微进 给 装置 的 控制系统 中 ， 能 获得 良好 的 相移 校正 控制 效果 ， 并 使 微进 给 装置 达到 了 预定 的 设计 要求 国家自然科学基金 资助 项目 作者简介 ： 邓中亮 　 年 出生 年于 清华大学 获工学 博士学位 ， 年 从 北京航空航天大学 博士后 流动站 出站 现任 北京邮电大学 教授 、 系 副 主任 已 发表 论文 五十余 篇 ， 出版 专 、 译著 部 主要 研究 领域 有 ： 智能 控制 、 CADCAM 技术 、 邮政 自动化 、 精密 加工 与 微电子 技术 　 　 　 　 　 王先逵 　 年 出生 清华大学 精密仪器 与 机械学系 教授 、 博士生 导师 主要 研究 领域 有 ： 机械工程 及 自动化 、 CADCAM 技术 、 CAPP 技术 、 精密 加工 与 超 精密 加工 技术 等 主持 并 完成 国家自然科学基金 项目 、 高技术 课题 多项 ， 并 多次 获奖 作者 单位 ： 邓中亮 北京邮电大学 机械 电子 工程系 　 北京 　 　 　 　 　 　 王先逵 清华大学 精仪系 　 北京 　 参考文献 　 徐殿国 ， 王宗培 伺服 驱动 系统 发展 概况 微电机 ， ， ： — 　 邓中亮 用 微机 实现 步进 电机 的 智能 控制 微特 电机 ， ， ： — 　 邓中亮 ， 王先逵 直线 电机 的 智能化 PID 控制 电气传动 ， ， ： — 　 邓中亮 ， 王先逵 ， 冯之敬 等 中 凸变 椭圆 活塞 数控 车削 系统 的 研究 机床 ， ， ： — 　 邓中亮 ， 王先逵 ， 冯之敬 等 用 直线 电机 作 刀具 进 给 驱动 的 变 椭圆 活塞 车削 系统 的 研究 内燃机 学报 ， ， ： — 　 邓中亮 高频 响大 行程 微给 机构 的 研究 ［ 博士学位 论文 ］ 北京 ： 清华大学 ， 　 吴丹 直线 电机 微 位移 装置 的 设计 与 实验 研究 ［ 硕士学位 论文 ］ 北京 ： 清华大学 ， 收稿 日期 　 收 修改稿 日期 　