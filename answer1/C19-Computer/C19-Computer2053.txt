计算机 工程 ComputerEngineering 年 　 第卷 　 第期 　 Vol 　 No 　 对象 数据库 设计 的 EER 方法 邱锡锋 　 陈 家训 摘 　 要 　 EER 方法 虽然 没有 形成 标准 ， 但 它 将 重点 放在 对象 的 结构 、 联系 和 完整性 上 ， 不失为 一种 有效 的 OODB 设计 方法 。 结合 科研 实践 探索 了 EER 的 概念 ， 模式 以及 改进 方法 。 关键词 　 面向对象 数据库 管理系统 扩充 实体 关系 DesignofOODBwithEERQiuXifengChenJiaxun （ DepartmentofComputerScienceandTechnology ， ChinaTextileUniversityShanghai ） Abstract ： EER （ ExtendedofComputerScienceandTechnologyisconsideringsuitableforthisjobwithitsstrongpointsonobjects ’ structure ， relationship ， andintegirty ； thoughtheremaylacksomestandardsThispaperdescribestheconceptionimplementationandsomeimprovementofEERbasedontheresultsofworkcarriedoutinthisareaKeywordsObjectorientedOODBMSEER 　 EER 建模 方法 　 　 EER 建模 方法 是 对 ER 模型 的 扩充 ， 而 ER 模型 是 一种 较为 流行 的 语义 数据模型 ， 能 表示 实体 及 实体 间 丰富 的 语义 结构 ， 如 实体 间 联系 和 制约 。 EER 可 用于 数据 逻辑 模型 的 设计 ， 也 是 一种 重要 的 文档 形式 。 其 主要 元素 有 ： 实体 用 矩形框 表示 ； 属性 用 椭圆 表示 ； 联系 用 菱形 表示 ， 表明 两个 实体 间 的 关系 ： 线上 括号 内 的 数字 表示 对应 实体 的 最小 数量 和 最大 数量 ， 条上加 箭头 表示 依赖 关系 ； 继承 关系 用 粗线条 表示 。 　 EER 建模 实例 分析 　 　 本文 所举 例子 为 关于 服装 设计师 及 模特 的 已 简化 的 模型 。 主要 步骤 如下 ： 　 　 根据 事务 模型 确定 实体 　 　 涉及 到 的 主要 有 ： 设计师 Designer ， 模特 Model ， 经纪人 Manager ， 公司 Company 时装表演 Show ， 时装 Fashion ， 它们 各自 有 自己 的 属性 。 　 　 对 实体 进行 抽象 以 确定 实体 层次 关系 　 　 DesignerModelManager 具有 一些 共同 的 属性 ， 可 抽象 出 一个 父 实体 PersonPerson 具有 这些 共同 的 属性 ， 为 它们 所 共享 。 　 　 确定 实体 间 的 联系 　 　 DesignerModelManager 都 应 属于 某 一个 Company 故 Person 与 Company 之间 有 联系 workatCompany 举办 Show 故有 联系 controlModel 可 在 Show 上 表演 ， 故有 联系 performDesigner 设计 时装 Fashion 故有 联系 design 。 　 　 详细描述 实体 的 属性 、 联系 ， 以作 文档 　 　 当 模型 复杂 时 还 可以 将 实体 分组 ， 以 简化 结构 。 　 　 如图所示 ， manager 、 designer 、 model 从 person 继承 而 来 ， 因而 具有 person 的 所有 属性 和 联系 。 modeldesigner 由 model 、 designer 多重 继承 而 来 。 person 具有 一个 复合 属性 address 包括 city 、 street 、 apartmentnumber 和 zip 子 属性 。 model 和 show 之间 的 联系 为 多 对 多 联系 。 show 具有 一个多 值 属性 location 。 图 　 EER 模型 图例 　 用 EER 进行 OO 设计 的 原则 　 　 实体 开放性 与 独立性 原则 　 　 开放性 ， 指 易于 被 继承 扩展 ， 如 Person 被 抽象 为 具有 nameaddress 属性 的 类 ， 它 可 被 多样 的 子类 继承 。 　 　 独立性 ， 指类 的 行为 可以 变化 扩充 ， 而 不必要 对类 的 定义 有 任何 改动 ， 例如 ： 　 　 在 Person 上 定义方法 getbonus 则 下列 语句 　 　 BagPersonps 　 　 Personp 　 　 psPersonfromPerson 　 　 scanpsp 　 　 pgetbonusprint 　 　 　 　 可 得到 Person 类中 包括 Model 、 Designer 、 Manager 在内 的 奖金 列表 ， 当 Person 有 新 的 子类 如 Saleman 时 ， 仍 可以 用 上述 相同 语句 得到 ， 包括 Saleman 在内 的 奖金 列表 。 　 　 这 一点 集中体现 了 对象 模式 的 长处 ， 即可 重用 性 和 可维护性 ， 子类 的 改变 不 影响 父类 。 　 　 子 实体 对象 必需 满足 父 实体 的 界面 定义 ， 这 是 的 逻辑 扩充 ， 在 父类 上 定义 的 方法 自动 被子 类 继承 使用 ， 而 用户 不需 知道 子类 和 父类 之间 的 显式 差别 ， 有 反例 ， 如 定义 一个 四方形 类 和 它 的 两个 子类 长方形 和 正方形 ； 在 四方形 类中 定义方法 setration 用来 将长 和 宽 的 比设 为 n 很 明显 正方形 子 实体 不 适合 此 方法 ， 要 使 方法 继续 有效 ， 则 必须 修改 setration ， 在 其中 显式 指明 不适 用于 正方形 ， 但 这样 就 违反 了 原则 即 父类 失去 了 独立性 。 　 EER 到 OMT 的 转化 　 　 EER 具有 丰富 的 语义 表示 能力 ， 其 模型 不 限于 某一 特定 模式 ， 它 可以 用于 关系 型 模式 、 对象 模式 、 网络 模式 ， 或 层次 模式 。 在 将 EER 模型 转化 为 对象 模式 之前 ， 有 两点 需要 特别 指出 ， 一点 是 实体 间 的 联系 ， EER 中 实体 间 的 联系 被 显式 地用 菱形 表示 ， 相关 实体 间 的 数量 限制 和 依赖 关系 也 有 显式 的 图形 表示 ， 甚至 可以 在 EER 模型 图上加 文字 来 表述 更 复杂 的 制约 关系 。 而 这些 在 对象 模式 中是 通过 方法 来 隐含地 表示 的 。 第二 ， 在 EER 模型 中 使用 关键字 段 属性 来 描述 一个 实体 的 特性 ， 来 区别 实体 中 不同 的 实例 ， 而 这 在 对象 模式 中是 没有 必要 的 ， 因为 对象 是 通过 系统 赋予 的 对象 标识符 来 唯一 表示 的 ， 而 不 需要 有 关键 属性 来 进行 完整性 约束 ， 但是 在 对象 模式 中 ， 关键 属性 仍能 起到 帮助 查询 的 作用 ， 即可 作为 查询 的 条件 项 ， 也 能 用于 创建 索引 ， 以 提高 查询 效率 。 在 对象 模式 中 占 重要 地位 的 方法 method 在 EER 中 却 没有 相应 的 表示 ， 这 是否 意味着 EER 不足以 描述 对象 数据库 模式 ？ 答案 是 否定 的 。 事实上 ， 从 数据库 结构设计 本身 的 角度 来看 ， 方法 并 不是 一个 必要 的 组成部分 ， 方法 在 很大 程度 上 是 一种 较 先进 的 编程技术 ， 用以 对 某些 数据结构 进行 封装 ， 或者 当 在 对象 模式 中 无法 用 其他 手段 表示 一种 制约 时 ， 方法 被 用来 表示 这种 语义 。 所以 当 我们 能够 在 EER 中用 显示 的 符号 进行 语义 表示 时 ， 其实 没有 必要 用 方法 。 即使 是 在 对象 数据库 模式 中 ， 随着 应用 系统 的 开发 ， 不可避免 地会 出现 新 的 应用 需求 ， 需要 在 数据库 结构 中 增加 新 的 方法 来 满足 它 ， 因此 在 系统分析 和 设计阶段 ， 从 数据库 结构设计 本身 出发 ， EER 模型 已 足以 表达 对象 模式 所 能 要求 的 语义 。 　 　 在 图 中 可知 ， 一个 company 最多 可 有 个 manager ， 此 制约 可用 以下 方法 实现 ： 　 　 companyaddmanagermanagerm 　 　 　 　 ifcountmanager 　 　 　 　 　 errorConstructionViolation 　 　 　 　 　 exit 　 　 　 　 　 　 　 　 　 manageraddm 　 　 　 　 　 在 将 EER 转化 为 OMT 时 可 分步 走 　 　 将 EER 中 实体 对应 OMT 中 的 类图 ， 属性 不变 ， 但 应该 增加 相应 的 方法 来 代替 OMT 中 无法 显式 表示 的 语义 。 　 　 从 实际 出发 ， 将 某些 联系 转化 为 OMT 中 的 类 。 　 　 从 应用 角度 出发 ， 增加 附加 的 方法 。 图 　 OMT 模型 图例 　 　 图 　 OMT 模型 是从 EER 模型 转化 而来 的 。 在 第一步 中 注意 以下几点 。 　 　 实体 ： EER 中 的 每个 实体 都 被 OMT 中 一个 类图 所 对应 ， 实体 中 的 继承 关系 对应 类图 的 继承 关系 。 一个 共享 的 子 实体 对应 于 一个 多重 继承 的 子类 如 modeldesigner 。 复合 属性 对应 复合 属性 ， 多值 属性 对应 集合 属性 如 set ， ag ， ist 等 。 　 　 联系 ： EER 中 的 联系 ， 在 对象 模式 中 可以 用 对象 引用 方便 地 表示 ， 即以 另 一个 对象 作为 自己 的 一个 属性 。 有些 对象 数据库系统 如 ORION 还 支持 双向 引用 ， 即 两个 对象 可 相互 引用 。 一对 多 联系 可 通过 将 另一方 对象 的 集合 作为 自己 的 一个 属性 实现 ， 多 对 多 联系 在 对象 模式 中 也 可以 同样 方便 地 实现 。 在 一个多 对 多 联系 中 ， 当 联系 本身 具有 的 专有 的 属性 时 ， 可以 将 该 联系 转化 为 对象 模式 中 的 一个 类 。 如 model 和 show 之间 的 多 对 多 联系 performance 它 具有 自己 的 专有 属性 hours 表示 一个 model 在 某 一次 show 中 的 表演 时间 。 可以 在 对象 模式 中 建立 一个 类 performance 。 见图 。 图 　 对象 模式 中 建立 类 Preformance 　 　 制约 ： EER 中 的 制约 可以 由 对象 模式 中 的 方法 来 实现 ， 对于 联系 一级 的 制约 ， 可 为 相应 的 实体 创建 new 和 remove 方法 和 adddelete 方法 在 这些 方法 中 用 程序 体现 制约 。 　 总结 　 　 EER 方法 将 设计 分成 两步 ， 第一步 是 语义 层次 上 的 结构设计 ； 第二步 则 集中 在 应用 层次 上 的 行为 设计 。 它 丰富 的 语义 表示 能力 和 易 理解 的 表示 方式 使 它 成为 数据库系统 前期 设计 的 有力 工具 ， 并 能 方便 地 转化 为 特定 系统 的 模型表示 方式 。 从 EER 开始 设计 对象 数据库系统 将 是 一件 令人高兴 的 事 。 作者简介 ： 邱锡锋 　 男 ， 岁 ， 研究生 主要 研究 方向 ： 数据库 网络 集成 作者 单位 ： 中国 纺织 大学 计算机系 　 上海 参考文献 　 　 ElmasriR ， NavatheSFundamentalsofDatabaseSystemsndedBenjaminCummings ， RedwoodCity ， CA ， 　 　 SpecialReportSROPTInformationModelingConceptsandGuidelinesIssue ： InformationExchangeManagementBellcore ， Morristown ， NJ ， 　 　 KemperAMoerkotteGObjectorientedDatabaseManagementPrenticeHallEnglewoodCliffsNJ 收稿 日期 ：