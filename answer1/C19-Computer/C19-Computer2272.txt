计算机 应用 研究 APPLICATIONRESEARCHOFCOMPUTERS 　 Vol 　 No 　 P ， 基于 分布 环境 的 电信 网络 管理系统 的 设计 和 实现 毛云峰 　 董金 祥 摘要 在 分析 现有 的 电信 网络管理 技术 的 基础 上 ， 提出 了 基于 分布 环境 的 网络 管理系统 体系结构 ， 并 对 关键技术 、 具体 设计 和 实现 进行 介绍 。 关键词 电信 网络管理 CMIPSNMPCORBA 引言 　 　 电信网 是 由 各个 时期 的 多 厂商 的 各种 设备 组成 的 异质 网络 ， 大量 分布 在 不同 地域 的 各种 网元 协同工作 ， 为 用户 提供 通信 服务 。 电信 网络 管理系统 提供 对 这些 分散 、 复杂 的 通信 设备 进行 有效 地 管理 的 手段 ， 从而 更好 地 组织 和 提供 业务 。 传统 的 网络管理 体系结构 主要 包括 管理者 Manager 、 代理 Agent 和 网络管理 协议 三大 要素 。 当前 存在 的 并 得到 广泛应用 的 网络管理 标准协议 主要 包括 两大类 ， 即 ： TMN 采用 的 基于 OSI 的 公共 管理 信息 服务 公共 管理 信息 协议 CMISCMIPCommonManagementInformationServicesCommonManagementInformationProtocol ； 基于 TCPIP 网络 的 简单 网络管理 协议 SNMPSimpleNetworkManagementProtocol 。 采用 CMIP 、 SNMP 管理 协议 构造 的 集中 网管 平台 基本模式 相同 ， 都 采用 管理者 代理 模型 ， 对 被 管理 对象 进行 抽象 形成 MIB ， 采用 标准 的 协议 来 访问 管理 数据 ， 实现 对 网元 进行 监控 和 操作 。 这 其实 是 标准 客户端 服务器 模式 。 管理者 、 代理 者 与 被 管理 对象 之间 的 关系 如图 。 图 管理者 、 代理 者 、 对象 之间 的 关系 　 　 前期 网络管理 技术 的 研究 和 开发 主要 集中 在 网元层 的 信息 模型 和 管理 协议 标准化 的 工作 上 ， 取得 很大 成果 。 在 这些 基础 上 ， 大量 的 对 网元 的 监控 和 操作 维护 系统 被 投入使用 。 但是 现有 的 解决 方法 有 以下 不足 ： 注重 网元 细节 ， 在 对象 的 颗粒 度 较 小时 效果 较 好 ， 但 缺乏 对 更 高层次 大 对象 的 管理 能力 ； 采用 “ 主从 ” 式 集中 结构 ， 不太 适用 业务 的 端 — 端 peertopeer 交互 模式 ； CMIPSNMP 开发 难度 较大 ， 实现 代价 较 高 。 　 　 电信业 目前 较 多 采用 的 网络管理 规范 是 ITUT 提出 的 电信 管理 网 TMN 。 TMN 构思 中 ， 一个 关键 是 运用 面向对象 和 信息 建模 InformationModeling 技术 ， 对 网络 中 被 管理 的 资源 包括 设备 和 业务 建立 抽象 模型 ； 管理系统 中 的 所有 管理 功能 都 基于 网络资源 的 抽象 模型 视图 又称 公共 管理 信息 ， 而 不 直接 和 实际 资源 打交道 。 按照 TMN 的 逻辑 分层 体系结构 ， 管理 业务 由 商务 管理层 BusinessManagementLayer 、 业务 管理层 ServiceManagementLayer 、 网络 管理层 NetworkManagementLayer 及 网元 管理层 NetworkElementManagementLayer 四个 层次 组成 。 以上 各层 管理 职责 不 一样 ， 上 一层 通过 下 一层 实现 其 任务 ， 自上而下 形成 “ 金字塔 ” 型 管理 结构 。 TMN 层次模型 大大 扩展 了 传统 的 网络管理 概念 ， 更 符合 当代 电信 发展 的 需要 。 该 模型 虽然 概念 简单明了 ， 但 实现 非常复杂 。 ITUT 制定 的 这些 标准 ， 主要 关注 于 网元层 和 网络层 ， 但 对 业务 和 商务 层 只是 给出 一些 纲领性 的 建议 。 这 就 使得 很难 采用 这些 现有 的 标准 来 满足要求 ， 迫切需要 我们 提出 新 的 方法 来 充实 层次模型 。 　 　 在 今天 ， 提供 强大 的 电信 网络管理 直接 面临 两个 挑战 ： 网络 的 异质性 严重 和 网络 规模 的 不断扩大 。 目前 电信网 是 由 多 厂家 的 各个 时期 产品 组成 的 典型 异质 网络 ， 从 网络管理 的 角度 来看 ， 目前 通信网 中有 以下 几类 设备 组成 ： 大量 网上 运行 的 较 早 的 网元 只能 提供 厂家 专有 接口 ； 新 的 通信 设备 如 SDH ， ATM 等 采用 ITUTOSI 标准 来 构造 其 网管 系统 ； 新 的 基于 计算机技术 的 网元 通常 采用 SNMP 为 管理手段 。 电信网 上 并存 具有 这 三种 管理 接口 的 网元 ， 从而 要求 网络 管理系统 有 能力 来 灵活 支持 具有 不同 接口 的 网元 。 通过 在 开发 网络 管理系统 的 框架 中 引入 “ 中间件 ” 技术 可 有效 解决 这一 问题 。 另 一个 挑战 是 电信网 正以 飞快 的 速度 发展 ， 网络 规模 迅速 扩大 ， 需 管理 的 对象 以 几何级数 的 倍数 增加 ， 管理 功能 也 要求 不断 扩充 ， 这 就 需要 有效 的 分级管理 。 目前 缺乏 被 广泛 采用 的 管理 大批量 网元 的 有效 方法 。 管理 大 的 网络 需要 高度 的 抽象 来 抓住 网络 状态 的 基本 因素 而 略去 过多 的 细节 。 　 　 我们 可以 借鉴 TMN 的 思想 ， 建立 通用 的 信息 模型 ， 选择 面向对象 分布 系统 ， 来 构造 网络 管理系统 ， 避免 现有 网管 系统 的 缺陷 。 系统 体系结构 　 　 我们 参照 TMN 模型 来 设计 网络 管理系统 ， 将 注意力 集中 在 功能 的 实现 上 ， 选用 成熟 、 通用 的 技术 来 实现 管理系统 。 为 满足 目前 和 今后 电信 网络 维护 管理 和 提供 更好 电信业务 的 要求 ， 一个 现代 的 理想 网络 管理系统 应 符合 以下 设计 目标 ： 实现 分布式 管理 、 实现 数据 的 共享 、 组件 可 重用 、 采用 面向对象 的 设计 、 与 现有 系统 的 集成 、 通用 的 系统 访问 界面 。 　 　 通过考察 TMN 的 方案 ， 我们 可以 看到 信息 模型 在 网络管理 中 的 重要性 。 在 网管 领域 ， 已有 的 信息 模型 都 依赖 特定 的 协议 和 实现 技术 ， 在 体系结构 设计 中 ， 我们 认为 关键 是 建立 一个 新 的 管理 信息 模型 来 自然 描述 网络 状态 的 聚合 Aggregation 。 信息 模型 独立 于 应用 ， 能 被 用于 大量 的 管理 域 。 通过 该 模型 ， 管理人员 能 按 监控 的 目的 “ 客户 化 ” 他们 所 看到 的 网络 ， 提供 高层 结构 “ 组 ” 来 隐藏 网元 ； 定义 被 管理 对象 来 描述 管理 信息 的 “ 计算 视图 ” Computedviews ； 提供 高层 监控 元语 来 使 管理者 在 业务 层 与 管理系统 交互 。 　 　 系统 的 总体 体系结构 如图所示 。 图 网络 管理系统 总体 体系结构 　 　 该 系统结构 框图 概括 地 表示 了 我们 系统 的 总体 框架 。 体系结构 分为 三层 ， 简介 如下 ： 底层 为 网元 管理 信息 ， 它们 可能 驻留 在 网元 或 其 管理 代理 中 ； “ 中间件 层 ” 由 一组 管理 服务器 构成 ， 是 系统 的 核心部件 ； 管理应用程序 提供 某种 可视化 的 方式 来 表现 管理 信息 和 实现 管理 操作 ， 即 客户端程序 。 分布 计算环境 提供 系统 内 各 部件 间 的 通信 。 对于 已经 存在 的 网元 代理 ， 我们 不 打算 把 它们 替换 掉 ， 而是 通过 “ 中间件 层 ” 服务器 以 同步 异步 方式 或 通过 专有 接口 聚合 底层 的 数据 ， 提供 被 管理 对象 的 计算 视图 。 在 “ 中间件 层 ” 中 ， 信息 按照 我们 的 信息 模型 进行 组织 。 管理 服务器之间 的 通讯 通过 分布 处理 环境 提供 的 服务 来 实现 。 其它 的 管理者 或 业务 系统 也 可 通过 分布 处理 环境 ， 采用 直接 访问 对象 或 调用 系统 提供 的 API 的 方式 来 获得 系统 提供 的 服务 。 本文 接下来 的 描述 将 围绕 着 这种 体系结构 展开 。 关键技术 分析 系统 的 信息 模型 　 　 在 当前 的 大型 网络 中 管理 信息 通常 分布 在 网元 的 MIB 中 ， 这种 方式 造成 只 描述 了 这些 网元 的 配置 和 操作 的 部分 细节 方面 ， 而 不能 把 网络 作为 一个 整体 来 看待 。 现代 的 网络 管理系统 需要 对 更 高层 的 管理 信息 和 服务 进行 操作 。 我们 在 框架 中 提出 了 一个 面向对象 的 信息 模型 。 在 该 模型 中 一个 对象 的 属性 值 可以 被 定义 为 在 其它 属性 值上 的 进行 任意 计算 的 结果 ， 后者 可以 是 网元 管理 代理 中 的 信息 或 其它 通过 计算 获得 的 属性 。 我们 的 模型 可以 看作 是 对 基于 协议 的 模型 中 结构化 管理 信息 SMIStructuringmanagementinformation 如 SNMPSMI 、 CMIPGDMO 的 扩展 。 管理 信息 的 计算 视图 　 　 我们 可以 通过 在 从 网元 中 收集 的 管理 信息 上 施加 聚合 操作 来 构造 计算 视图 。 在 我们 的 框架 中 每个 计算 视图 保存 在 一个 对象 中 ， 并且 有 一个 或 多个 以下 部件 ： 　 　 ． 监视 视图 ： 负责 对 网络 状态 提供 高层 描述 ； 　 　 ． 控制 视图 ： 描述 为 高层 网络管理 服务 提供 的 控制 界面 。 　 　 对象 的 属 性能 很 好 地 表示 对象 监视 视图 和 控制 视图 描述 的 网络 状态 。 我们 可以 通过 说明 参与 计算 的 每个 属性 的 聚合 规则 来 定义新 的 计算 视图 。 聚合 可以 基于 空间和时 态 。 　 　 空间 聚合 　 　 空间 聚合 通过 引入 网 元组 来 减少 分布 在 大量 网元 中 的 管理 信息量 。 通过 定义 恰当 的 组 ， 管理者 可以 获得 网络 配置 和 性能 等 的 高层 视图 。 为 有效 地 描述 空间 聚合 ， 用户 可 按 地理位置 、 功能 或 两者 组合 来 动态 定义 组 。 当 存在 网络 配置 数据库 时 ， 组 的 成员 关系 可 通过 网元 属性 符合 某一 查询 条件 来 容易 地 定义 。 一个组 可以 被 定义 为 另 一个组 的 成员 。 这样 ， 每个 网络 的 组 的 层次 形成 一棵树 ， 树 的 叶子 节点 为 网元 。 每个 组有 一个 与 树 的 深度 关联 的 级别 标志 。 Level 代表 网元 代理 ， 属于 Leveln 的 组可 包含 LevelnLevel 组 。 一旦 组 的 层次 被 定义 好 ， 我们 可以 参照 组而 不是 网元来 定义 高层 管理 视图 和 服务 。 　 　 为 计算 与 某个 组 关联 的 属性 的 值 ， 组 必须 被 分解成 包含 所 需 属性 的 一系列 网元 代理 中 。 分解 可 看成 是 组 的 形成 的 逆 过程 。 当 信息 部件 被 确定 ， 它们 的 值 被 取得 ， 然后 属性 的 新值 通过 计算 得到 。 同样 ， 在 组 施加 的 控制 操作 也 被 映射 为 对 组 的 部件 的 一系列 控制 操作 。 　 　 时态 聚合 　 　 时态 聚合 揭示 管理 信息 的 时态变化 性质 。 为 计算 某 时态 聚合 ， 信息 被 周期性 采集 后 作为 输入 提供 给 聚合 函数 。 这一 过程 也 可 被 用于 自动 采集 。 属性 的 声明 和 解析 　 　 对象 的 属性 可 通过 声明 来 描述 ， 属性 通常 和 一个组 的 列表 关联 。 为 计算 属性 的 值 ， 组 的 Groups 列表 被 进一步 展开 为 一系列 描述 计算 视图 的 其它 对象 Objects 或 指向 网元 代理 中 信息 的 指针 。 当 需要 的 属性 Attribute 值 从 每个 对象 中 取得 后 ， 采用 一个 过滤 函数 Filterfunction 来 计算 最终 结果 。 例如 SUM 操作 汇总 取回 值 并 把 结果 保存 为 新 的 属性 值 。 　 　 通常 ， 每个 属性 可以 采用 以下 公式 来 表示 ： VfGoaGoaGnonan 　 　 式 中 f 表示 过滤 函数 ， Gi 为组 ， ai 是 属性 名 ， oi 为 一 对象 选择 谓语 ， 用于 从 组内 选择 包含 被 采集 属性 的 管理 对象 MOs 。 依靠 底层 管理 协议 ， 对象 和 属性 选择 谓语 将 被 说明 为 不同 的 语法 来 适应 网元 代理 中 的 特定 管理 信息结构 如 SNMP 或 CMIP 。 　 　 过滤 函数 通过 引用 Reference 来 说明 和 调用 。 在 这种 情况 下 所 需 的 代码段 可以 从 一 外部 的 函数 字典 中 动态 调入 。 这种 方法 的 优点 是 过滤 函数 不需 和 管理 服务器 集成 在 一起 ， 可以 在 不 影响 管理系统 运行 的 情况 下 修改 提高 原有 函数 或 定义新 函数 。 　 　 与 已有 的 模型 相比 如 OSI ， 我们 的 信息 模型 建立 在 已有 的 模型 结构 的 基础 之上 ， 提出 视图 和 聚合 的 概念 进行 扩展 。 通过 提供 过滤 函数 来 简单 地 声明 对象 的 属性 ， 隐去 了 传统 实现 方法 的 编程 开销 。 虽然 从 理论 上 讲 ， 该 信息 聚合 模型 独立 于 实现 技术 ， 但 从 前面 的 讨论 中 可以 看到 其实 面向对象 和 分布 处理 的 思想 已 贯穿 了 我们 的 信息 模型 设计 过程 ， 采用 分布 对象 处理 技术 能 使 我们 模型 的 优越性 得到 更好 的 体现 。 分布 计算 模型 　 　 在 总体 体系结构 设计 中 ， 我们 指出 网络 管理系统 由 管理 服务器 群 组成 ， 这些 管理 服务器 通过 分布 计算环境 联系 在 一起 。 管理 服务器 的 数量 和 位置 的 设定 可 根据 管理 的 需要 来 决定 。 例如 我们 可 参考 TMN 的 子网 概念 来 构造 管理 服务器 群 的 体系 。 如图 ， 最 下层 管理者 Level 采用 某种 标准协议 从 网元 代理 中 收集 数据 ， 它们 完成 的 功能 和 TMN 的 子网 层 相近 。 上 一层 的 管理者 能 针对 网络层 和 业务 层 生成 管理 视图 ， 访问 该 管理 服务器 可 获得 高层 的 服务 。 图 管理 服务器 的 层次 组织 　 　 由于 历史 的 原因 ， 电信网 上 运行 的 大量 设备 不 提供 基于 标准协议 的 管理系统 和 管理 接口 ， 短期内 这些 设备 不 可能 退出 通信网 。 我们 的 方法 是 设计 一个 适配器 ， 采用 “ 包装 ” 处理 ， 即 在 现有 系统 外 提供 管理 对象 ， 在 该 对象 上 实现 定义 的 标准接口 ， 然后 将 这些 接口 映射 到 现有 系统 的 操作 上 。 对于 上层 管理系统 来说 ， 它们 不用 关心 到底 MIB 数据 是 在 网元 中 ， 还是 在 适配器 中 ， 只 需要 通过 标准 的 接口 来 访问 这些 数据 ， 执行 管理 操作 。 　 　 为 有效 管理 和 组织 被 管理 对象 和 管理 服务器 ， 采用 了 一个 统一 的 外部 字典 来 储藏 每个 管理者 的 拓扑 和 配置 信息 。 这是 我们 的 分布式 结构 中 唯一 的 集中 部件 ， 通过 对 该 字典 的 搜索 ， 每个 管理者 可以 找到 其 父亲 、 兄弟 和 子孙 管理 服务器 。 通过 前面 步骤 获得 其它 管理 服务器 的 入口 指针 后 ， 管理者 能 访问 其它 服务器 和 它们 的 对象 。 实现 技术 　 　 下面 我们 简介 基于 分布 对象 技术 的 管理 服务器 的 具体 实现 。 当前 的 分布 对象 计算环境 主要 有 两大阵营 ： OMG 的 CORBA 和 Microsoft 的 DCOM 。 考虑 到 DCOM 和 CORBA 的 互连 可 通过 网关 或 桥接 技术 实现 ， 选择 独立 于 某 一 特定 厂家 ， 在 通信 领域 得到 大量 应用 的 CORBA 技术 是 更 合乎逻辑 的 。 采用 CORBA 技术 ， 有利于 平滑 地 融合 专有 网管 系统 ； 提供 跨 不同 管理 技术 的 端 — 端 管理 ； 保护 已有 的 在 管理 信息 模型 、 已 使用 的 管理系统 上 的 投资 。 　 　 对于 CORBA 技术 和 传统 网络管理 技术 的 结合 需 解决 两类 问题 ： 两个 管理 域间 管理 对象 的 转换 ； 管理 操作 到 CORBA 服务 的 转换 。 它们 都 属于 两个 管理 域 之间 的 映射 。 目前 对此 有 两种 解决方案 ： 静态 和 动态 的 方法 。 由于 国际 组织 JIDMJointInterDomainManagement 组 制定 的 静态 解决 方法 已 相当 成熟 ， 我们 的 系统 采用 静态 的 翻译 方法 。 　 　 管理 服务器 的 实现 如图 ， 管理 服务器 由 一系列 的 子系统 构成 ， 对 前面 已 描述 过 的 部件 ， 我们 对 其作 简略 说明 ， 重点 介绍 Web 技术 在 本 系统 中 的 应用 。 图 管理 服务器 的 结构 　 　 在 管理 服务器 中 ， 核心部件 是 对象 。 对象 被 储存 在 数据库 中 。 每个 对象 都 采用 CORBA 的 定义 来 实现 ， 对象 按 继承 关系 组成 树 ， 并 使用 CORBA 的 命名 服务 Namingservice 来 区分 。 一个 外部 配置 字典 被 用于 储存 整个 系统 的 信息 如 管理 服务器 群 拓扑 、 组 的 定义 等 。 与 对象 数据库 紧密 相连 的 是 聚合 处理 引擎 ， 该 引擎 包括 从 外部 采集 数据 的 协议 适配器 ， 并 以 前面 说明 的 方法 来 计算 属性 值 。 对于 从 CMIPSNMP 代理 中 采集 数据 ， 采用 JIDM 定义 的 CORBA 到 标准 协议映射 规则 。 生成 一系列 的 转换 构件 “ 插 ” 到 ORB 总线 上 。 管理系统 之间 的 通讯 采用 CORBA 的 标准 IIOP 进行 。 　 　 对于 网络 管理系统 的 另 一 重要 组成部分 — 用户界面 ， 目前 一个 流行 的 趋势 是 采用 Web 技术 进行 “ 瘦 客户端 ” 管理 。 通常 ， Web 技术开发 的 网络管理 应用 有 管理 简单 和 使用方便 等 优点 ， 然而 ， Web 技术 也 有 其 局限性 而 不能 完全 替代 现有 的 网络 管理应用程序 ， 尤其 是 对于 电信 网络管理 这种 通常 在 大型 网络 操作 中心 运行 的 系统 ， 原因 如下 ： 　 　 大型 网络 管理系统 需要 一个 很大 的 显示 区域 来 显示 反映 网络 不同 逻辑 视图 的 拓扑 地图 。 而 现有 的 Web 技术 在 多 页面 间 进行 相互 访问 上 提供 的 支持 很少 ； 　 　 Web 页面 需要 从 服务器 上 下载 大量 的 代码 和 状态 信息 。 因此 ， 与 传统 的 集中式 网络 管理系统 相比 ， Web 所能 提供 的 显示信息 的 速率 要慢 得 多 ； 　 　 JAVA 安全 模型 不 允许 客户 APPLETS 使用 一些 本地 资源 如 文件系统 ， 与 其它 服务器 的 网络连接 等 ， 为了 传送 这些 信息 而 浪费 了 大量 的 带宽 和 服务器 的 计算能力 。 　 　 为 解决 这些 问题 ， 我们 采取 混合 传统 GUI 和 Web 技术 的 解决 方法 。 具体来说 ， 就是 需要 强大 图形 能力 的 如 网络 的 拓扑图 显示 、 告警 事件 分析 定位 等 传统 关键 任务 使用 C 开发 ； 对于 实时性 要求 不太高 的 如 性能 分析 和 某些 配置 操作 ， 采用 Web 技术 来 实现 。 出于 性能 考虑 ， 我们 在 管理 服务器 内部 集成 了 一个 HTTP 服务器 ， 从 客户端 来 的 HTTP 请求 被 转化 为 对 对象 方法 的 直接 调用 ， 结果 直接 返回 到 浏览器 中 。 通过 这种 方法 ， 避免 传统 的 类似 CGI 等 技术 的 低效 问题 。 结论 和 展望 　 　 本文 提出 的 技术 具有 通用性 ， 独立 于 具体 应用 。 我们 应用 这些 技术开发 了 第一个 电信 网络 管理系统 ： 杭州市 本地网 交换 网管 监控 系统 。 该 系统 在 较 短时间 内 完成 ， 已 投入 运行 。 通过 使用 该 系统 ， 实现 了 程控 交换机 维护 的 无人 和 少人 值守 ， 提高 了 工作效率 。 这 也 验证 了 前面 提出 的 系统结构 和 模型 具有 一定 的 先进性 和 易于 实现 ， 其 应用 前景 是 不容 怀疑 的 。 　 　 当前 的 电信网 和 通信 技术 还 处在 飞速发展 的 过程 中 ， 而 网络 的 复杂性 、 服务 的 多样性 和 用户 对 网络管理 的 需求 也 正在 逐步提高 。 因此 ， 到 目前为止 ， 本 系统 的 设计 和 开发 工作 只能 说 是 告一段落 ， 远未到 彻底 完成 的 阶段 。 考虑 本 系统 今后 的 发展 ， 将 致力于 解决 以下 问题 ： 　 　 进一步 完善 系统 的 功能 ， 接入 其它 网元 ； 　 　 对 已 实现 系统 的 各 模块 进行 优化 和 进一步 增强 程序 的 功能 ， 并 形成 可 重用 的 构件 ； 　 　 采用 完全 的 “ 瘦 客户端 ” 方式 提供方便 的 系统 访问 的 手段 。 毛云峰 浙江大学 CADCG 国家 重点 实验室 杭州 董金 祥 浙江大学 CADCG 国家 重点 实验室 杭州 参考文献 ， YYeminiGGoldszmidtandSYeminiNetworkManagementbyDelegationndIntSymposiumonIntegratedNetworkManagementApril ， ObjectManagementGroupCorbabasedTelecommunicationNetworkManagementSystemOMGWhitePaperMay ， TeleManagementForumSMARTTMNTechnologyIntegrationMapTMFNMFIssueOctober 收稿 日期 ：