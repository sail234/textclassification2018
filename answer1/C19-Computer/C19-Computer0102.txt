计算机 工程 ComputerEngineering 年 　 第卷 　 第期 　 VolNoWBTool ： 一个 基于 多层 ClientServer 结构 的 白板 工具 徐 保民 　 唐 东升 　 石 　 磊 　 　 摘 　 要 ： 通过 对 白板 工具 所 提供 功能 的 分析 ， 提出 一个 多层 结构 模型 ， 用于 支持 实时 、 异步 和 临时 种 讲座 方式 ； 同时 就 该 工具 所 采用 的 通信协议 集 、 发言权 控制 以及 动态 组合 语义 光标 技术 等 问题 进行 论述 ． 　 　 关键词 ： 白板 工具 ； 控制 机制 ； 协同 感 ； 组合 光标 WBToolWhiteboardToolBasedonMultilayerClientServerArchitectureXuBaominCAdLabInstituteofComputingTechnologyAcademiofScienceofChinaBeijingTangDongshengInformationCenterofStateTaxBureauofHenanProvinceZhenzhouShiLeiComputerDepartmentofZhenzhouUniversityZhenzhou 　 　 Abstract 　 ThepaperprovidesamultilayerClientServerarchitecturemodelbyanalzingfunctionssuppliedbyWBToolItcansupportrealtimeasynchronousandtemporarydiscussionmodesandcommunicationproptocolsetsspeakingcontrolmechanismanddynamicintegrationsemanticscursorarediscussedalso 　 　 Keywords 　 WhteboardtoolControlmechanismCooperativeawarenessDynamicintegrationsemanticscursor 　 　 随着 计算机技术 及 网络 技术 的 发展 ， 计算机 应用 系统 正 从 传统 的 支持 个体 工作 的 人机交互 方式 向 支持 群体 工作 的 人机交互 方式 发展 。 特别 自年 MIT 的 Grief 和 DEC 的 Cashman 正式 提出 CSCWComputerSupportedCooperativeWork 概念 以来 ， CSCW 技术 得到 了 迅速 发展 。 　 　 目前 ， CSCW 已 广泛应用 于 CAD 、 远程 医疗 诊断 、 多媒体 协同 编著 、 电子 会议 等 领域 。 其中 白板 工具 是 CSCW 的 一个 重要 研究 领域 ， 它 通过 向 协作者 提供 一 虚拟 共享 空间 ， 支持 处于 异地 的 群体 成员 在 各自 的 计算机屏幕 上来 观看 同一 内容 以及 对 同一 问题 进行 讨论 ， 也 是 实现 群体 协同工作 的 主要 方式 之一 。 　 　 以 白板 工具 － WBTool 的 设计 为 背景 ， 首先 论述 了 WBTool 的 通信协议 和 实现 模型 ， 然后 深入探讨 了 该 工具 所 采用 的 发言权 控制 机制 和 动态 组合 光标 技术 。 系统 功能 和 实现 模型 　 　 尽管 听 与 说 是 人们 最 常用 的 交流 手段 ， 但 文字 、 图形 也 是 十分 重要 的 交流 媒介 ， 因 作为 支持 群体 协同工作 的 通用 白板 工具 WBTool ， 除 提供 基本 的 文字 、 图形处理 功能 外 ， 应 具有 以下 功能 特性 ： 　 　 支持 多 输入 流 的 同步 、 异步 操作 。 　 　 支持 多 交谈 室 同时 工作 ， 对于 同一 交谈 室 的 交流信息 其它 交谈 室 不 可见 。 　 　 针对 上述 特性 ， WBTool 提供 种 讨论 方式 ： 实时 、 异步 方式 和 临时 方式 。 用来 真实 地 模拟 现实 世界 中 人们 的 讨论 方式 。 用户 可以 根据 实际 情况 ， 灵活 地 在 这种 工作 方式 中 进行 选择 ， 从而 增强 系统 的 实用性 。 　 　 工作 方式 　 　 要求 与会者 在 同一时间 内 对 同一 问题 进行 实时 讨论 ， 并 保存 讨论 结果 ， 当 讨论 结束 后 ， 用户 可以 随时 查看 讨论 结果 以及 对 整个 讨论 过程 进行 跟踪 和 分析 。 　 　 临时 工作 方式 　 　 与 同步 工作 方式 基本一致 ， 不同之处 在于 它 不 对 讨论 过程 及 结果 进行 保存 。 当 讨论 结束 后 ， 用户 无法 查看 讨论 过程 中 的 各种 信息 。 　 　 异步 工作 方式 　 　 不 要求 用户 同时 工作 ， 用户 产生 的 信息 也 不是 在 用户 间 实时 传输 。 当 一个 用户 向 服务器 发出 信息 时 ， 服务器 会 将 这些 信息 存储 到 数据库 中 ， 以便 其他 用户 请求 这些 信息 时 ， 服务器 能够 从 数据库 中 读取 信息 并 送给 用户 。 　 　 典型 ClientServer 结构 并 不能 充分体现 上述 种 工作 方式 ， 因此 ， 结合 WBTool 工具 的 特点 ， 对 典型 的 ClientServer 体系结构 进行 改进 ， 构造 出 一个 更 适合 WBTool 工具 的 ， 由 服务器 、 消息 转发器 和 EDBMS 数据库 管理系统 等 组成 的 多层 ClientServer 结构 模型 见图 。 图 扩展 ClientServer 结构 模型 　 　 在 WBTool 中 ， 服务器 负责 用户 登录 、 整个 系统 的 管理 以及 用户 交谈 信息 的 存储 等 工作 。 消息 转发器 主要 负责 同步 和 临时 讨论 方式 下 ， 白板 工具 所 产生 的 控制 信息 及 数据 的 转发 。 对于 每 一个 交谈 室 ， 系统 均 能 动态 构造 一个 相应 的 消息 转发器 为 其 服务 。 　 　 由 上 可知 ， WBTool 工具 所 采用 的 结构 模型 与 典型 的 ClientServer 结构 不同之处 在于 它 增加 了 一个 消息 转发器 ， 其 优点 在于 ： 当 系统 同时 有 多个 组 分别 进行 讨论 时 ， 消息 转发器 和 服务器 可以 分担 消息 及 数据 的 转发 工作 ， 这样 可 降低 服务器 负担 ， 减少 通信 链路 发生 阻塞 的 次数 ， 提高 通信 质量 ， 从而 有效 地 提高 整个 系统 的 健壮性 。 关键技术 通信协议 集 　 　 WBTool 工具 采用 Java 语言 开发 ， 由于 该 语言 支持 标准 通信协议 族 TCPIP ， 所以 用户 只 需 建立 应用层 协议 集 即可 。 依据 白板 工具 的 功能 和 实现 模型 ， WBTool 工具 采用 ClientServer 的 请求 应答 和 主动 广播 相结合 的 协议 集 模型 。 协议 集中 包括 ： 登录 、 退出 、 控制 信息 传输 及 数据传输 等 协议 。 数据包 格式 的 BNF 描述 为 ： 　 　 数据包 ： 控制 信息 ｜ 数据 信息 　 　 控制 信息 ： 操作码 ｜ 信息 发送者 　 　 数据 信息 ： 文本 内容 ｜ 文本 控制 信息 ｜ 图形控制 信息 ｜ 定位 信息 ｜ 颜色 信息 　 　 定位 信息 ： 坐标 位置 XY 　 　 文本 控制 信息 ： 字体 　 　 图形控制 信息 ： 宽度 　 　 由 上 可知 ， 该 协议 集 可扩充性 强 ， 用户 可 随时 增加 所 需 协议 。 发言权 控制 机制 　 　 白板 工具 支持 多 人间 的 协同工作 ， 因此 冲突 是 不可避免 的 。 当 出现 冲突 时 ， 为了 使 协同工作 能够 继续 进行 下去 ， 系统 必须 提供 显式 或 和 隐式 的 解决 冲突 的 机制 。 目前 ， WBTool 工具 所 提供 的 发言权 控制 机制 有 ： · 　 　 自由竞争 的 民主 式 控制 机制 　 　 各 协作者 的 地位 平等 ， 对 共享 空间 的 操作控制 由 协作者 自由 争夺 使用 ， 谁 获取 控制权 ， 谁 就 可以 对 共享 空间 进行 操作 。 协作者 凭借 良好 的 愿望 、 常识 和 社会 行为 来 避免 冲突 。 · 　 　 主席 制 的 集中式 控制 机制 　 　 通过 主席 来 维护 整个 讨论 的 正常 发起 、 进行 ， 直到 结束 。 WBTool 工具 对 主席 采用 动态 法 确定 ， 即 发起 讨论 的 人 由 系统 缺省 为 该 讨论 室 的 主席 ， 在 讨论 过程 中 缺省 主席 可 放弃 其 主席 地位 而 重新 指定 某 成员 为 主席 ， 该 讨论 室 的 成员 由 主席 指定 。 主席 通过 维护 一张 参加 讨论 人员 状态表 对 讨论 人员 的 状态 进行 管理 ， 并 通过 一个 优先权 队列 对 讨论 人员 的 发言权 进行 分配 。 　 　 无锁 控制 机制 　 　 每个 参与者 可 自由 访问共享 空间 ， WBTool 工具 通过 提供 能 充分体现 社会 规则 与 社会 协议 的 界面 规范 着 每个 人 对 共享 空间 的 使用 。 同时 该 工具 通过 提供 一隐式 的 冲突检测 和 协调 算法 来 解决 用户 间 出现 的 冲突 。 动态 组合 语义 光标 技术 　 　 为了 更好 地 进行 协同工作 ， 协作者 需要 知道 同组 内 其他 用户 的 存在 、 行为 及 状态 ， 这种 感知 能力 是 CSCW 系统 区别 于 非 协同 系统 的 显著标志 之一 。 　 　 通过 对 目前 CSCW 系统 通常 采用 的 感知 技术 如多 光标 、 远程 指针 优缺点 的 分析 ， 并 考虑 到 系统 可 利用 图标 资源 的 有限性 和 协作 过程 中 人员 的 动态性 ， WBTool 工具 对 一般 的 远程 指针 技术 加以 推广 ， 提出 了 动态 组合 语义 光标 的 概念 。 在 WBTool 工具 中 ， 动态 组合 语义 光标 由 行为 、 识别 、 位置 部分 感知 信息 组成 。 　 　 行为 　 　 由于 WBTool 工具 提供 基本 图形 绘制 、 文本 输入 及 对象 擦除 等 操作 ， 为 体现 用户 当前 的 操作 行为 ， 动态 组合 语义 光标 中 提供 操作 行为 域 ， 并 通过 形状 可变 的 光标 技术 加以 表现 ， 如手 形 光标 表示 用户 进行 擦除 操作 。 　 　 识别 　 　 共享 空间 好比 实际 社会 中 的 群体 工作 空间 ， 既应 显示 行为 结果 ， 也 应 标明 该 行为 的 发出 者 。 WBTool 工具 由 颜色 标示 法 和 用户名 构造 的 字符 光标 组成 ， 其中 颜色 和 用户名 是 一对一 的 关系 ． 　 　 位置 　 　 当 用户 在 本地 进行 鼠标 操作 时 ， 鼠标 位置 不仅 能 显示 在 本地 共享 空间 上 同时 也 能 显示 在 其他 协作者 的 共享 空间 上 。 该 信息 通过 行为 和 识别 域 隐含 实现 。 总之 ， 通过 动态 组合 语义 光标 技术 ， WBTool 工具 为 协作者 提供 了 比较 完美 的 WYSIWIS 效果 。 结束语 　 　 介绍 了 一个 支持 群体 协同工作 的 白板 工具 WBTool 。 它 采用 多层 ClientServer 结构 模型 ， 支持 实时 、 异步 和 临时 种 讨论 方式 。 同时 对 该 工具 采用 的 通信协议 集 ， 发言权 控制 机制 和 动态 组合 语义 光标 技术 进行 论述 。 　 　 该 工具 目前 已经 在 WindowsNT 环境 下 ， 用 Java 语言 开发 完毕 ， 并 在 并行工程 桌面 电子 会议 系统 中 得到 了 成功 的 应用 。 作者简介 ： 徐 保民 ～ ， 男 ， 博士生 ， 研究 方向 ： CSCW 工程 数据库 作者 单位 ： 徐 保民 　 中科院 计算机所 开放 研究 实验室 ， 北京 　 　 　 　 　 　 唐 东升 　 河南省 国家税务局 信息中心 ， 郑州 　 　 　 　 　 　 石 　 磊 　 郑州大学 计算机系 ， 郑州 　 参考文献 XuBShiHLinSSomeIssuesinImplementationofa 解 情况 WhiteboardToolProceedingsoftheThirdInternationalWorkshoponCSCWinDesignJapan 徐 保民 林守勋 CSCW 中 的 并发 控制技术 第八届 全国 数字 系统 设计 自动化 暨 协同 设计 研讨会 郑州 徐 保民 施航 郭 玉钗 多 用户界面 与 群体 感知 技术 第一次 全国 CSCW 学术会议 北京 收稿 日期 ：