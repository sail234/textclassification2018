自动化 学报 ACTAAUTOMATICASINICA 　 Vol 　 No 　 P 适于 估计 OD 矩阵 的 交通 检测点 的 最优 分布 周晶 　 盛昭瀚 　 何建敏 　 杨海 　 王长君 摘 　 要 　 讨论 了 适于 估计 起 迄点 出行分布 矩阵 OD 矩阵 的 交通 检测点 的 合理 分布 问题 根据 检测点 应当 满足 的 规则 ， 建立 了 关于 检测点 分布 的 非线性 规划 模型 在 已知 极点 间 转移 概率 的 前提 下 ， 将 检测点 的 分布 问题 描述 成 一个 平均 报酬 Markov 决策 过程 并 通过 转化 为 一个 等价 的 整数 线性规划 问题 来 求解 最后 实例 结果表明 该 模型 是 有效 的 、 合理 的 关键词 　 起 迄点 出行分布 矩阵 ， 交通 检测点 ， 平均 报酬 马尔可夫 决策 过程 ， 整数 线性规划 OPTIMALLOCATIONOFTRAFFICCOUNTINGPOINTSFORESTIMATINGODTRIPMATRIXZHOUJing 　 SHENGZhaohan 　 HEJianminSchoolofEconomicsandManagementSoutheastUniversityNanjing 　 YANGHaiDeptofCivilStructuralEngineeringtheHongKongUniversityofScienceTechnologyHongKongWANGChangjunTrafficManagementResearchInstituteWuxi 　 Abstract 　 　 ThispaperdiscusseshowtodeterminetheoptimalnumberandlocationsoftrafficcountingpointsinaroadnetworkforestimatingtheorigindestinationtripmatrixBasedonlocationrulesanonlinearprogrammingmodelfordeterminingtheoptimallocationsoftrafficcountingpointsisaddressedunderagivenODdistributionpatternSuchproblemcanalsobedescribedasanaveragerewardMarkovdecisionprocessMDPwithadditionalconstraintswhichcanbeequivalenttoanintegerlinearprogrammingproblemThecomputationalexampleshowsthattheresultsobtainedaresatisfactoryKeywords 　 OrigindestinationtripmatrixtrafficcountingpointsaveragerewardMarkovdecisionprocessintegerlinearprogramming 　 引言 　 　 起 迄点 出行分布 矩阵 Origindestination 简称 OD 矩阵 是 一项 非常 重要 的 交通 数据 近年来 ， 国内外 已有 许多 学者 致力于 通过 路段 检测 流量 估计 OD 分布 矩阵 的 研究 ［ ， ］ 文 ［ ］ 归纳 了 选择 检测点 应当 遵循 的 四个 规则 基于 这些 规则 ， 在 已知 OD 间 出行 路径 的 条件 下 ， 建立 了 确定 检测点 分布 的 整数 规划 模型 本文 将 该 问题 扩展 到 无须 枚举 OD 间 出行 路径 的 一般 情形 检测点 分布 问题 被 描述 为 一个 平均 报酬 马尔可夫 决策 过程 最后 ， 根据 文 ［ ］ 中 的 基本 定理 ， 可 通过 求解 一个 等价 的 线性 整数 规划 问题 而 获得 检测点 的 最优 分布 　 检测点 分布 的 数学 规划 模型 　 检测点 分布 问题 的 描述 　 　 考虑 交通网络 GNA 根据 实际 情况 ， 可以 将 点集 N 分为 三类 ： 令 NO 表示 所有 起点 集合 ； ND 表示 所有 终点 集合 ； NT 表示 所有 中间 点 集合 由于 有些 点 可能 是 混合型 的 点 ， 即 既 是 起点 又 是 终点 为 便于 分析 ， 可以 通过 引入 一个 虚拟 点将 其 分开 于是 ， 有 NO ∩ ND ， NNO ∪ ND ∪ NT 设 已知 一个 先验 的 OD 出行分布 矩阵 Ttij 用 E ＝ eij 表示 转移 概率 矩阵 ， eij 表示 从 i 到 j 的 转移 概率 ， 若 ijA 则 令 eij 事实上 ， 转移 概率 与 OD 出行 量 在 路 网上 的 分配 是 密切相关 的 ， 我们 可以 借助 与 流量 分配 算法 ［ ］ 而 间接 获得 转移 概率 矩阵 此外 ， 还 可以 根据 先验 OD 矩阵 T 计算 每 一起 点 的 出行 量 占 总 的 OD 出行 量 的 比值 对 所有 非 起始 点 i 令 β i ， 则 可 得到 网络 上 每 一点 的 初始 出行分布 β β β … β ｜ N ｜ ， 称之为 初始 分布 向量 ， ｜ N ｜ 表示 集合 N 中 的 元素 个数 　 检测点 分布 的 数学 规划 模型 　 　 考虑 到 用于 估计 OD 出行分布 矩阵 的 交通 检测点 必须 分布 在 路段 上 ， 而 不是 极点 上 ， 不妨 将 每 一路 段 都 作为 一个 假想 的 极点 即 路段 ij 中 增加 一 虚拟 极点 k 这样 检测点 只能 分布 在 这些 虚拟 点上 此时 转移 概率 矩阵 也 将 发生变化 ： eikeijekjeij 令 NA 表示 所有 这些 虚拟 点 组成 的 集合 相应 的 网络 GNA 也 被 称为 扩充 网络 NNO ∪ ND ∪ NT ∪ NA 为 方便 起 见 ， 引入 向量 z 表示 检测点 的 分布 z 中 分量 取 或 ： 若 极点 i 被 检测 ， 对应 zi 称 i 为 测点 ； 否则 zi ， 称 i 为 非 测点 事实上 ， 若 iNA 则 必有 zi 布置 检测点 时 ， 还 应当 注意 避免 重复 计数 的 问题 为此 ， 可以 通过 改变 转移 概率 来 实现 令 　 　 　 　 　 　 对 一个 给定 的 检测点 分布 向量 z ， 令 φ ijz 表示 从 极点 i 出发 到达 极点 j 的 概率 ， 满足 如下 递推 关系 　 　 　 　 则 从 i 到 k 的 OD 对间 的 流量 经过 路段 j 即为 虚拟 点 的 比例 为 β ik φ ijz 根据 最大 流量 比 规则 ， 检测点 分布 向量 z 的 选择 应使 β ik φ ijz 尽可能 大令 表示 所有 满足 OD 覆盖 规则 的 分布 向量 组成 的 集合 ， 表示 给定 的 检测点 的 数目 ， 则 有 如下 非线性 整数 规划 模型 　 　 　 　 　 　 　 　 　 　 显然 ， 目标 函数 是 指 整个 路 网上 被 检测 到 车 总量 的 期望值 ， 约束条件 保证 满足 OD 覆盖 规则 ［ ］ 由于 对 每 一 测点 即时 按式 改变 其 转移 概率 ， 避免 了 重复 计数 ， 从而 也 保证 满足 独立性 规则 ［ ］ 因为 目标 函数 中 的 φ ijz 是 一个 隐 函数 ， 直接 求解 TCLP 非常 困难 下面 将 TCLP 描述 为 一个 有 约束 的 平均 报酬 马尔可夫 决策 过程 　 马尔可夫 决策问题 的 描述 　 测点 分布 问题 的 马尔可夫 特性 描述 　 　 已知 极点 间 的 转移 矩阵 E 和 初始 出行分布 β 可以 将 车辆 在 路 网上 的 运行 看作 一个 马尔可夫 点 过程 每 一点 是否 配置 检测点 即 为 一个 决策 ， 而 将 每 一点 检测 到 的 流量 比率 看作 “ 报酬 ” 定义 如下 的 马尔可夫 决策 过程 ： 状态 集合 N ， 对 每 一 i ∈ N 其 决策 集 Ai 至多 包含 两个 元素 ， 即 Ai 或 Ai 前者 表示 将点 i 作为 测点 ， 而 后者 表示 点 i 为 非 测点 由此 ， 可以 在 检测点 分布 向量 z 与 一个 确定性 策略 d 之间 建立 一一对应 的 关系 　 　 　 　 这样 即可 通过 求解 最优 马尔可夫 策略 d 而 间接 获得最佳 检测点 分布 向量 z 显然 ， 只有 当 i ∈ NA ， 才 可以 有 Ai 令 piaj 表示 一个 平稳 马尔可夫 过程 在 状态 i 选择 决策 a ， 在 下 一 时刻 到达 状态 j 的 转移 概率 ， 可由 下式 获得 　 　 　 可见 ， piaj 与 分布 过 测点 后 的 转移 概率 ij 是 一致 的 定义 在 状态 i 选择 决策 a 的 报酬 为 riaariaa 而 β 相当于 该 马氏 决策 过程 的 初始 分布 ， 即 每点 的 初始 出行 车辆 比例 另一方面 ， 注意 到 检测点 分布 向量 必须 满足 OD 覆盖 规则 ， 即 z ∈ 但是 ， 由 一个 马尔可夫 确定性 策略 d 确定 的 分布 向量 z 不 一定 能 满足 这一 规则 为此 ， 我们 首先 建立 一个 确定 满足 OD 覆盖 规则 的 最小 检测点 数目 的 模型 TCLP 　 　 　 　 　 　 　 za 　 a ∈ A 　 　 　 　 当 第 w 对 OD 对间 的 出行 量 经过 路段 a ， δ aw ； 否则 δ aw 求解 TCLP 获得 一个 满足 OD 覆盖 规则 的 检测点 分布 向量 z 和 测点 个数 l 令 NAD ｛ i ∈ NA ｜ zi ｝ 　 NAT ｛ i ∈ NA ｜ zi ｝ 　 　 　 　 　 其中 zi 是 z 的 第 i 个 分量 若 为 预定 的 测点 个数 ， 则 l 为 剩余 测点 个数 后面 将 给出 的 确定 方法 NAT 将 成为 检测点 的 候选 点集 即 iNATzj 则 问题 TCLP 转变 为 如下 形式 　 　 　 　 a 　 　 　 　 　 b 　 　 zj 　 j ∈ NAT 　 　 　 　 　 c 　 　 令 Ddd 是 马尔可夫 策略 ， 恰好 在 个 不同 的 状态 选择 决策 a 可以 证明 问题 RTCLP 与 如下 的 马尔可夫 决策问题 是 等价 的 参见 文献 ［ ］ 　 　 　 　 　 其中 表示 由 策略 d 引导 的 一个 马尔可夫 决策 过程 MDP 的 平均 期望 报酬 而 直接 求解 这一 马尔可夫 决策问题 也 是 非常 困难 的 ， 所幸 该 马尔克 夫 决策问题 可 通过 构造 一个 等价 的 线性规划 问题 来 求解 　 等价 的 线性规划 问题 　 　 对 任意 的 一个 马氏 策略 ξ 和 时间 T 令 　 　 　 　 即 表示 当 状态 j 的 决策 为 a 时 ， 在 时间段 T 内 ， 系统 到达 状态 j 的 平均 频数 若 xja ξ 存在 ， 则 xja ξ 可以 解释 为 在 策略 ξ 的 引导 下 ， 且 状态 j 的 决策 为 a 时 ， 在 极限 时刻 或 长远 时刻 系统 的 出行 到达 状态 j 的 期望值 不难 证明 下列 命题 参见 文献 ［ ］ 　 　 命题 对 任何 平稳 策略 ξ 　 　 　 　 　 　 　 命题 令 z 是 一个 分布 向量 ， d 是 由 z 根据 式 定义 的 策略 ， 则 　 　 　 　 式 说明 xidz 给出 了 出 行车 在 测点 i 被 观测 到 的 期望值 　 　 Kallenberg ［ ］ 建立 了 一个 平稳 的 马氏 决策 过程 与 一个 线性规划 问题 之间 的 关系 据此 可 有 如下 的 定理 　 　 定理 考虑 整数 规划 问题 　 　 　 a 　 　 　 b 　 　 　 cxi ≤ zi 　 i ∈ N 　 　 　 　 　 d 　 　 　 exiayia ≥ zi 　 i ∈ Na ∈ Ai 　 　 　 f 　 　 若 xyz 是 MIP 的 最优 解则 z 是 RTCLP 的 最优 解 dz 是 MDPD 的 最优 策略 　 　 若 z 是 RTCLP 的 最优 解且 ddzxxd 则 存在 向量 y 使得 xyz 成为 MIP 的 最优 解 　 　 由此 定理 可知 ， 若 xyz 是 问题 MIP 的 最优 解 ， 则 ddz 即为 相应 的 最优 策略 ， 从而 xxd 最后 MIP 可 化简 为