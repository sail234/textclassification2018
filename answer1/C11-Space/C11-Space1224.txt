航空 制造 技术 AERONAUTICAL 　 MANUFACTURING 　 TECHNOLOGY 年 　 第期 　 no 　 开放式 数控系统 — — 新一代 NC 的 主流 游有鹏 　 董伟杰 　 张晓峰 　 王 　 珉 　 　 ［ 摘要 ］ 　 在 分析 传统 数控 封闭 体系结构 固有 不足 的 基础 上 ， 引入 了 开放式 数控系统 的 概念 ， 并 对 其 技术 特征 和 开放 途径 进行 了 探讨 。 简要 介绍 了 国外 开放式 数控 的 研究 动态 ， 指出 了 开展 开放式 数控 研究 对 国产 数控技术 进步 的 重要 意义 。 　 　 关键词 ： CNC 　 开放式 体系结构 　 制造 技术 OpenArchitectureCNC — — MainTrendofNewGenerationNC 　 　 ［ ABSTRACT ］ AfteranalyzingthedrawbacksofclosedarchitectureCNCthispaperintroducestheconceptandcharacteristicsofopenarchitectureCNCTheapproachestoimplementopenCNCarediscussedandabriefsurveyisalsogivenaboutthedevelopmentinopenCNCFurthermoreitispointedoutthattheresearchesonopenarchitectureCNCisveryimportanttoournationalCNCdevelopment 　 　 KeywordsCNC 　 Openarchitecture 　 Manufacturingtechnology 　 　 计算机 数控 （ CNC 系统 作为 制造 形状 复杂 、 高质量 、 高精度 产品 所 必备 的 基础 设备 ， 已 成为 当今 先进 制造 技术 的 一个 重要 组成部分 。 然而 ， 现今 市场 上 组成 CNC 系统 （ 以 FANUC ， SIEMENS 等 为 代表 ） 的 硬件 模块 和 软件结构 绝大多数 是 专用 的 、 互不 兼容 的 ， 系统 各 模块 间 的 交互方式 、 通信 机制 也 各不相同 ， 这 就 造成 了 不同 厂家 控制系统 的 相对 独立 、 彼此 封闭 。 　 　 随着 技术 的 进步 ， 市场竞争 的 加剧 ， 这种 专用 体系结构 的 数控系统 越来越 暴露出 其 固有 的 缺陷 。 一方面 ， 各 控制系统 间 互连 能力差 ， 影响 了 系统 的 相互 集成 ， 风格 不一 的 操作 方式 以及 专用 件 的 大量 使用 ， 不但 使 用户 培训 费用 增加 ， 还给 数控 设备 用户 （ NC 系统 的 最终用户 ） 带来 很多 不便 ； 另一方面 ， 系统 的 封闭性 使 它 的 扩充 和 修改 极为 有限 ， 造成 数控 设备 制造商 （ NC 系统 中间 用户 ） 对系统 供应商 的 依赖 ， 并 难以 将 自己 的 专门 技术 、 工艺 经验 集成 入 控制系统 并 形成 自己 的 产品 特点 ， 这 将 不利于 提高 主机 产品 的 竞争力 。 此外 ， 专用 的 硬 、 软件结构 也 限制 了 系统 本身 的 持续 开发 ， 使 系统 的 开发 投资 大 、 周期长 、 风险 高 、 更新换代 慢 ， 不利于 数控 产品 的 技术 进步 。 总之 ， 数控系统 的 这 一 现状 已 不能 适应 当今 制造业 市场 变化 与 竞争 ， 也 不能 满足 现代 制造业 向 信息化 、 敏捷 制造 模式 发展 的 需要 。 　 数控系统 开放 的 概念 及 途径 　 概念 　 　 研究 开放式 数控系统 的 主要 目的 是 解决 变化 频繁 的 需求 与 封闭 控制系统 之间 的 矛盾 ， 从而 建立 一个 统一 的 可 重构 的 系统 平台 ， 增强 数控系统 的 柔性 。 通俗 地 讲 ， 开放 的 目的 就是 使 NC 控制器 与 当今 的 PC机 类似 ， 系统 构筑 于 一个 开放 的 平台 之上 ， 具有 模块化 组织 结构 ， 允许 用户 根据 需要 进行 选配 和 集成 ， 更改 或 扩展 系统 的 功能 迅速 适应 不同 的 应用 需求 ， 而且 ， 组成 系统 的 各 功能模块 可以 来源于 不同 的 部件 供应商 并 相互 兼容 。 　 　 事实上 ， 基于 上述 指导思想 的 开放式 数控系统 也 符合 IEEE 关于 开放式系统 的 定义 ： 能够 在 多种 平台 上 运行 ， 可以 和 其他 系统 互操作 ， 并 能 给 用户 提供 一种 统一 风格 的 交互方式 。 根据 这一 定义 ， 开放式 数控系统 应 具有 以下 基本特征 ： 　 　 （ ） 可 互操作性 。 通过 提供 标准化 接口 、 通信 和 交互 机制 ， 使 不同 功能模块 能以 标准 的 应用 程序接口 运行 于 系统 平台 之上 ， 并 获得 平等 的 相互 操作能力 ， 协调 工作 。 　 　 （ ） 可移植性 。 系统 的 功能 软件 与 设备 无关 ， 即 应用 统一 的 数据格式 、 交互 模型 、 控制 机理 ， 使 构成 系统 的 各 功能模块 可 来源于 不同 的 开发商 ， 并且 通过 一致 的 设备 接口 ， 使 各 功能模块 能 运行 于 不同 供应商 提供 的 硬件平台 之上 。 　 　 （ ） 档次 皆宜 性 。 CNC 系统 的 功能 、 规模 可以 灵活 设置 ， 方便 修改 ， 既 可以 增加 硬件 或 软件 构成 功能 更强 的 系统 ， 也 可以 裁减 其 功能 以 适应 低端 应用 。 　 　 （ ） 可 互补性 。 指 构成 系统 的 各 硬件 模块 、 功能 软件 的 选用 不 受 单一 供应商 的 控制 ， 可 根据 其 功能 、 可靠性 及 性能 要求 相互 替换 ， 而 不 影响 系统 整体 的 协调 运行 。 　 开放 途径 　 　 如何 使 传统 的 专用型 封闭式 系统 走向 开放 ， 不同 的 系统 开发商 及 研究 机构 对此 提出 了 一些 解决方案 。 按 开放 的 层次 不同 可分种 途径 ， 它们 的 开放 层次 不同 ， 难度 不 等 ， 获得 的 开放 效果 也 相差 很大 。 如图所示 ， 虚线 将 控制系统 划分 为 人机 控制 （ ManMachineControlMMC 层 和 控制 内核 层 两个 层面 。 其中 ， 控制 内核 是 CNC 系统 完成 实时 加工过程 调度 和 控制 的 核心 部分 ， 一般 和 系统 实时性 相 联系 。 种 方式 就是 基于 对 这 两个 层面 开放 的 不同 处理 来 区分 的 。 图 　 控制系统 的 开放 途径 Fig 　 ApproachestoimplementtheopenCNC 　 　 （ ） 开放 人机 控制 接口 。 　 　 这种 方式 允许 开发商 或 用户 构造 或 集成 自己 的 模块 到 人机 控制 接口 （ ManMachineInterfaceMMI 中 。 这一 手段 为 用户 提供 灵活 制定 适用 于 各自 特殊要求 的 操作界面 和 操作步骤 的 途径 ， 一般 使用 于 基于 PC 作为 图形化 人机 控制 界面 的 系统 中 。 　 　 （ ） 开放 系统核心 接口 。 　 　 此 方式 除了 提供 上述 方式 的 开放 性能 外 ， 还 允许 用户 添加 自己 特殊 的 模块 到 控制 核心 模块 中 。 通过 开放系统 的 核心 接口 ， 用户 可 按照 一定 的 规范 将 自己 特有 的 控制软件 模块 加 到 系统 预先 留出 的 内核 接口 上 。 　 　 （ ） 开放 体系结构 。 　 　 开放 体系结构 的 解决方案 是 一种 更 彻底 的 开放 方案 。 它 试图 提供 从 软件 到 硬件 ， 从 人机 操作界面 到 底层 控制 内核 的 全方位 开放 。 人们 可以 在 开放 体系结构 的 标准 及 一系列 规范 的 指导 下 ， 按 需 配置 成功 能 可 繁简 、 性能 可 高低 、 价格 可 控制 、 不 依赖于 单一 卖方 的 总成 系统 。 　 　 从 实现 方法 上 ， PCNC （ 个人 计算机 数控 ） 是 目前 比较 现实 的 NC 开放 化 的 途径 。 也 就是 在 PC机 硬件平台 和 操作系统 的 基础 上 ， 使用 市售 的 软件 和 硬件 插卡 ， 构造 出 数控系统 功能 。 但是 ， 现有 PC 的 操作系统 缺乏 实时性 ， 可靠性 尚有 待 提高 。 PCNC 主要 可 归纳 为种 ： NC 板 插入 到 PC 中 、 PC 板 插入 NC 装置 中 、 软件 NC 。 NC 板 插入 PC 中 的 形式 ， 就是 将 运动 控制板 或 整个 CNC 单元 （ 包括 集成 的 PLC 插入 到 个人 计算机 的 扩展槽 中 。 PC机 作非 实时处理 ， 实时控制 由 CNC 单元 或 运动 控制板 来 承担 ， 这种 方法 能够 方便 地 实现 人机界面 的 开放 化 和 个性化 ， 即 上述 第 层次 的 开放 ； 在 此基础 上 ， 借助于 所 插入 NC 板 的 可编程 能力 ， 能 部分 实现 系统核心 接口 的 开放 ， 即 上述 第 层次 的 开放 。 PC 板 插入 NC 中 这 一 形式 ， 主要 为 一些 大型 CNC 控制器 制造商 所 采用 。 其 原因 有 两 方面 ： 一是 许多 用户 对 他们 的 产品 很 熟悉 ， 也 习惯 使用 ； 另一方面 是 控制器 制造商 不 可能 在 短时间 内 放弃 他们 传统 的 专用 CNC 技术 。 因此 ， 才 出现 了 这种 折中 方案 ， 其 做法 就是 在 传统 的 CNC 中 提供 PC 前端 接口 ， 使 其 具有 PC 处理 的 柔性 。 显然 ， 这种 系统 的 NC 内核 保持 了 原有 的 封闭性 ， 故 只能 实现 上述 第 层次 的 开放 。 所谓 软件 NC ， 是 指 NC 系统 的 各项 功能 ， 如 编译 、 解释 、 插补 和 PLC 等 ， 均 由 软件 模块 来 实现 。 这 类 系统 借助 现有 的 操作系统 平台 （ 如 DOS ， Windows 等 ） ， 在 应用软件 （ 如 VisualC ＋ ＋ ， VisualBasic 等 ） 的 支持 下 ， 通过 对 NC 软件 的 适当 组织 、 划分 、 规范 和 开发 ， 可望 实现 上述 各个 层次 的 开放 。 　 　 应该 指出 ， 将 开放系统 的 概念 引入 CNC 系统 的 发展 需求 中 ， 表明 系统 走向 开放 的 条件 日趋 成熟 。 然而 ， 具有 开放系统 特征 的 开放 体系结构 CNC 系统 仍 处在 成长期 ， 有关 开放 体系结构 CNC 系统 科学 、 明确 的 定义 及 相应 的 规范 标准 尚 处在 进一步 的 发展 完善 中 。 　 研究 动态 　 　 控制系统 的 开放式 结构 的 出现 将 导致 新一代 控制器 的 产生 ， 并 成为 未来 制造业 的 一大 支柱 。 因此 ， 欧美 及 日本 各国 都 相继 进行 了 大量 研究 工作 ， 并 出台 了 各自 的 开放式 体系结构 规范 。 　 　 年 ， 美国 由 政府 资助 的 NGC （ NextGenerationController 研究 计划 ， 作为 开放性 结构 控制器 的 标准 提案 受到 了 广泛 关注 。 NGC 与 传统 CNC 的 显著 差别 是 它 基于 “ 开放 体系结构 ” ， 其 首要 目标 是 开发 “ 开放式系统 体系结构 标准规范 ” （ SpecificationforanOpenSystemArchitectureStandardSOSAS ， 此 规范 用来 管理 工作站 和 机床 控制器 的 设计 和 结构 组织 。 NGC 计划 于 年 完成 了 原型 研究 ， 并 转入 了 工业 开发 应用 。 例如 ， 美国 Ford ， GM 和 Chrylser 等 公司 在 NGC 计划 的 指导 下 ， 联合 提出 了 OMACOpenModularArchitectureController 开发计划 。 该 计划 定义 了 一个 应用 于 汽车 工业 的 开放 、 模块化 体系结构 控制器 的 规范 ， 其 硬件 继承 了 VME 系列 的 VMS 。 尽管 目前 还 不够 完善 ， 但 由于 “ API 的 接口 层 ” 的 标准化 ， 使 用户 能够 充分发挥 自己 的 主动性 ， 从而 可 装入 自己 所 需 的 独特 功能 ； 甚至 可以 装入 WindowsOS ， 将 CAM 等 现有 的 PC机 资源 移植 到 控制器 中 ； 同时 ， 利用 实时 数据库 ， 可以 实现 数据 的 高效 、 便携 化 ， 具有 极高 的 实用价值 。 实现 OMAC 的 好处 在于 能 减少 投资 和 生产 周期 的 费用 ， 容易 将 市场化 的 通用 技术 与 用户 自身 的 专有 技术 融为一体 ， 从而 能 高效 地 重构 用于 新 程序 的 控制器 ， 使得 不断涌现 的 新 技术 能 及时 植入 。 　 　 与 NGC 同步 ， 日本 一项 面向 世纪 制造 产业 的 长期 研究 计划 — — 智能 制造 系统 （ IntelligentManufacturingSystemIMS 也 在 讨论 中 ， 该项 计划 由 日本 工业界 领导 ， 同时 ， 也 与 其他 国家 合作 。 年 ， 日本 IMS 中心 成立 。 年 ， 历时 年 的 IMS 计划 日程表 发表 并 开始 启动 ， 大部分 计划 都 与 先进 制造 系统 与 自动化 相关 ， 如 多功能 机床 系统 、 敏捷 制造 系统 、 基于 知识 的 人工智能 表达式 系统 和 智能 监控 系统 等 。 这些 计划 对 将来 控制系统 技术 的 发展 将 产生 深远影响 。 同时 ， 日本 还 启动 了 另 一项 开放系统 计划 — — OSECOpenSystemEnvironmentforController 计划 。 其 主要 内容 是 基于 PC 平台 的 开放式系统 ， 宗旨 就 在于 确定 “ 不 依赖于 特定 卖主 的 开放性 控制器 ” 的 结构 。 这一 计划 由家 机床 企业 （ 东芝 机械 、 丰田 工机 、 山崎 ） 与 家 信息系统 开发 企业 （ 日本 IBM 、 三菱 电机 、 SML ） 发起 ， 提出 了 控制器 的 分层 模型 ， 明确 了 各层次 模块 的 功能 、 服务 内容 及 接口 规范 。 此外 ， 还 定义 了 一种 新 的 N C语言 — — FADL 语言 。 目前 ， 该 组织 已经 发展 到 由家 公司 和 一家 社团 共同 参与 的 致力于 推进 CNC 系统 开放 化 的 协会 。 　 　 面对 国际 市场 的 形势 和 制造业 的 发展趋势 ， 欧洲 采取 的 对策 是 ： 联合 起来 发挥 各家 的 长处 ， 积极 吸收 世界 上 各种 新 技术 ， 开发 满足 世界市场 尤其 是 亚洲 市场 的 产品 。 要 达到 这一 目的 ， 首先 要 具有 能 容纳 或 联合 各家 技术 的 新型 控制器 。 早 在 年 月 ， 在 德国 机床厂 联合会 （ VDW ） 的 支持 下 ， 就 曾 由 斯图加特 大学 的 制造 控制技术 研究所 （ ISW 对 “ 未来 控制技术 ” 进行 了 研究 ， 提出 的 新型 控制器 方案 的 原则 为 ： 可 组配 、 模块化 和 开放式 。 年 月 ， 一项 涉及 欧洲各国 的 控制系统 计划 OSACA （ OpenSystemArchitectureforControlwithinAutomationSystem 开始 启动 ， 它 是 欧洲各国 的 合作 计划 ， 立足于 提高 机床 和 控制系统 制造商 在 世界市场 中 的 竞争力 。 项目 工期 从 年 月 到 年 月 ， 历时 个 月 。 其 主要 任务 是 制定 一个 与 制造商 无关 的 开放 控制系统 结构 。 OSACA 计划 的 成功 将 减少 新 产品 的 上市 时间 ， 提供 更强 的 客户 定制 功能 和 柔性 程度 ， 减少 了 开发 、 维护 、 培训 和 文档 建立 的 费用 。 　 结束语 　 　 采用 开放式 控制系统 结构 对 数控系统 的 生产厂家 和 用户 都 有 好处 。 对于 控制系统 生产厂家 ， 他们 可 在 共同 的 标准 平台 上 建立 广泛 的 合作 ， 实现 协作 式 开发 ， 大大缩短 了 系统 的 开发周期 ， 降低 了 成本 ， 增强 了 产品 竞争力 ； 对于 机床 生产厂 ， 不仅 可以 根据 需要 配置 最合适 的 控制系统 ， 还 可 将 自己 独特 的 软件 集成 到 系统 控制器 ， 形成 自己 的 产品 特色 ； 最终用户 可以 说 是 开放式 控制系统 的 最大 受益者 ， 他们 可以 最大 限度 地 按照 自己 的 需要 选择 产品 ， 配备 合适 的 功能 部件 ， 实现 系统 的 集成 和 扩展 ， 同时 ， 开放 也 使 系统 的 操作 、 维护 更为 方便 。 此外 ， 控制器 的 结构 开放性 也 为 数控技术 能 持续 不断 地 吸收 日新月异 的 计算机 硬 软件 最新 成果 创造 了 条件 ， 有利于 数控 产品 自身 的 更新换代 ， 提高 性能 ， 增强 竞争力 。 这 也 正是 开放式 NC 控制器 之所以 被 各 发达国家 视为 重要 的 战略 技术 、 纷纷 投入 研究 的 重要 原因 。 　 　 我国 是 一个 机床 生产 和 应用 大国 ， 但 数控技术 的 应用 水平 还 不 高 ， 严重 制约 着 我国 制造业 水平 的 提高 。 国际 上 的 相关 开发计划 对 我国 的 数控技术 的 发展 提出 了 严峻 的 挑战 ， 同时 也 带来 了 机遇 。 首先 ， 开放系统 计划 的 实施 ， 把 世界 上 所有 系统 开发商 推到 了 同一 起跑线 上 。 在 这个 起跑线 上 ， 我们 可以 建立 以 国际 采购 为 思路 的 系统集成 开发 之 路 ， 为 我国 制造 高性能 、 高可靠性 CNC 系统 创造条件 ； 其次 ， 通过 一致 的 编程 应用 界面 ， 容易 形成 自己 的 集成 方案 ， 进一步 减小 对 卖方市场 的 依赖性 。 此外 ， 随着 开放系统 计划 的 实施 ， 统一 开发 平台 的 建立 ， 将来 CNC 系统 的 高技术 附加值 将 主要 体现 在 软件 上 ， 为 我国 发展 民族 软件产业 创造 了 一个 良好 的 契机 。 我们 应 充分 把握 机会 ， 扬长避短 ， 迎头赶上 ， 研制 出 适合 我国 国情 的 新一代 国产 高性能 CNC 控制器 。 作者 单位 ： 游有鹏 　 董伟杰 　 张晓峰 　 王 　 珉 　 南京航空航天大学 机电 工程学院 参考文献 　 　 徐守祥 开放式 数控系统 — — 欧洲 数控 业 的 发展 策略 制造 技术 与 机床 ， （ ） 　 　 李爱平 ， 张 曙 开放式 CNC 的 概念 和 应用 制造 技术 与 机床 ， 　 　 刘 　 利 （ 编译 ） 当前 NC 的 热点 — — 开放 化 和 PC 化 机电 一体化 ， 　 　 PrischowGDanielChJunghansGetalOpensystemcontrollers — — achallengeforthefutureofthemachinetoolindustryAnnalsoftheCIRP 　 　 AltintasYMunasingheWKAmierarchicalopenarchitectureCNCsystemformachinetoolsAnnalsoftheCIRP 　 　 ParkJPasekZJShanYetalAnopenarchitecturerealtimecontrollerformachiningprocessesProceedingsofthethCIRPISMS ～ ～ 　 　 SzafarczykMAnopenarchitecturerealtimecontrollerformachiningprocessesProceedingsofthethCIRPISMS ～ （ 责编 　 小 　 目 ）