航空 工艺技术 AERONAUTICALMANUFACTURINGTECHNOLOGY 年 第期 No 气体 渗碳 过程 中 的 计算机 两级 全过程 动态控制 曾 　 杰 　 　 摘要 　 利用 仿真 数学模型 推导 出 的 渗层 碳 浓度 分布 与 渗碳 时间 、 渗碳 温度 、 气氛 碳势 之间 的 关系式 以及 三点 自 调整 控制 原理 ， 编制 了 气体 渗碳 的 全过程 动态 控制软件 ， 并且 安装 、 调试 了 两级 全过程 动态 控制系统 的 硬件 ， 从而 开发 了 气体 渗碳 过程 的 计算机 两级 全过程 动态 控制系统 。 　 　 关键词 ： 气体 渗碳 　 动态控制 　 两级 系统 TwoLevelComputerDynamicControlintheWholeProcessoftheGasCarburizing 　 　 ABSTRACT 　 BytheaidofthreepointcontroltheoryofautomaticadjustmentandtherelationshipbetweencarbonconcentrationdistributionofcarburizedlayerandcycleofcarburizingcarburizingtemperatureandcarbonpotentialoffurnaceatmospherethispapercomposestheapplicationsoftwareforthedynamiccontrollinginthewholeofthegascarburizingMeanwhilethehardwaresofthetwoleveldynamiccontrolforthewholeprocessofthegascontrollingsystemisinstalledandtestedthereforedevelopingthetwoleveldynamiccontrollingsystemforthewholeprocessofthegascarburizing 　 　 KeywordsGascarburizing 　 Dynamiccontrol 　 Twolevelsystem 　 　 航空 发动机 上 齿轮 等 表面 要求 耐磨 的 零件 需 渗碳 处理 。 传统 的 手工 控制 渗碳 工艺 已 远远 不能 满足要求 ， 为 保证 和 提高 军工 产品质量 ， 对 渗碳 工艺 采用 微机 控制 已 是 必然 。 目前 ， 国内外 对 渗碳 工艺 的 微机 控制 ， 基本上 采用 单级 控制 。 　 　 PC机 的 单机 控制 ， 尽管 所 使用 的 各种 数学模型 不同 ， 所 依据 的 理论 各异 ， 但 现在 国内 所有 基于 计算 碳 扩散 浓度 分布 控制 渗碳 过程 的 计算机程序 都 只用 个 目标 点 ： 表面层 含碳量 和 层 深 ， 在 此点间 碳 浓度 分布 形状 是 任意 的 ， 得不到 最佳 的 S 形 分布 。 因此 ， 基于 本人 的 研究 实践 ， 本文 针对 单级 控制 的 缺陷 和 点 动态控制 的 不足 ， 着重 阐明 了 气体 渗碳 的 两级 全过程 动态控制 。 　 　 所谓 两级 控制 ， 就是 利用 上位 机和前 位机 进行 控制 。 从 过程 控制 理论 来看 ， 它 实质 上 属于 随动 控制系统 。 这 类 控制 的 任务 是 保证 在 各种 条件 下 系统 的 输出 被控 变量 以 一定 的 精度 跟 随着 给定 信号 的 变化 而 变化 。 所以 这 类 控制系统 又称 跟踪 系统 ， 此时 给定 信号 又称 参比 信号 。 两级 控制 中 上位 机 根据 程序 要求 给出 参比 信号 ， 送给 前 位机 ， 前 位机 以此 信号 为 设定 信号 与 采集 的 实际 信号 进行 比较 ， 输出 控制变量 ， 从而 实现 控制 。 　 　 采用 两级 控制 ， 有 以下 优点 ： 　 　 两级 控制 中 ， 前位 机可 使用 工业 控制机 STD ， 其 抗干扰能力 很强 ， 且 成本低 ， 易于 维修 ， 而且 上位 机 可以 显示 、 打印 等 。 一 台上 位机 可以 控制 多 台前 位机 ， 从而 实现 一机 控多炉 的 目的 。 　 　 在 两级 控制 中 ， 由于 上位 机可 根据 实际 工作 情况 智能化 地 给出 参比 信号 ， 从而 可 随时 改变 前位 机 的 设定 信号 ， 实现 全过程 动态控制 ， 使 控制 具有 通用性 。 　 　 在 两级 控制 中 ， 操作 人员 可 根据 现场 实际 状况 ， 随时 与 上位 机 进行 人机对话 ， 修正 控制程序 ， 排除 各种 警报 ， 达到 较 高 的 控制 要求 。 　 渗碳 过程 中碳 浓度 分布 曲线 的 自动 调整 原理 　 　 西德 BerndEdenhofer 等 人 提出 了 两段 渗碳 过程 中碳 浓度 分布 曲线 的 自动 调整 即 全过程 动态控制 ［ ］ 。 碳 浓度 自动 调整 的 主要 原理 是 给 计算机 一个 指令 以 帮助 它 决定 何时 从强 渗 阶段 转 到 扩散 阶段 ； 同时 ， 该 指令 也 可 作为 一个 指示器 ， 以 判明 是否 有 足够 的 碳 进入 表面 。 这样 ， 如果 在 该点 碳势 应该 提高 的 情况 下 ， 即使 已 进入 扩散 期 ， 计算机 仍会 使 过程 重新 回到 强 渗期 的 高碳 势 状态 。 　 　 在 讨论 碳 浓度 分布 曲线 自动 调整 之前 ， 他 先 研究 了 三点 自 调整 系统 。 所谓 三点 是 指 除了 表面 点和层 深点 ， 再 在 所 希望 得到 的 最终 的 碳 在 表面层 中 分布 曲线 上 设定 一个点 k ， 称之为 转折点 ， 见图 a 。 在 计算 的 碳 浓度 曲线 接触 到 k 点 以前 ， 计算机 使 渗碳 过程 保持 在 强 渗 阶段 ， 见图 b 曲线 。 在 达到 k 点后 ， 计算机 将 降低 碳势 ， 并 进行 扩散 ， 一直 到 计算 的 碳 浓度 分布 曲线 达到 所 要求 的 表面 碳 含量 和 层 深 。 ab 图 　 使用 第 目标 点 实现 自 调整 碳 浓度 分布 控制 Fig 　 Automaticadjustmentofcarbondistributionbyusingthethirdaimpoint 　 　 如果 在 达到 所 希望 的 层 深 或 表面 含碳量 以前 ， 计算 的 碳 浓度 分布 曲线 在 扩散 时 降到 转折点 k 以下 ， 那么 计算机 将 重新 把 碳势 提高 到 以前 强 渗期 的 水平 ， 并 进行 渗碳 ， 直到 重新 达到 k 点 。 然后 ， 再次 降低 碳势 和 扩散 ， 直到 达到 所 需求 的 层 深 。 　 　 这是 第一个 调节 系统 ， 它 可以 从 扩散 期碳势 回到 强 渗期 碳势 ， 因此 实现 了 自 调节 系统 ， 并 可以 克服 过程 的 失调 。 同时 ， 它 也 百分之百 地 保证 得到 了 一个 S 形 的 碳 浓度 分布 。 　 　 第三个 目标 点 ， 即 曲线 上 的 转折点 k ， 定义 是 较 容易 的 。 大体上 这个 位置 是 在 表面 碳 含量 减少 和 层 深 的 处 。 　 　 从个 目标 点 方法 很 自然 推论 应该 有个 或 个 目标 点 甚至 无数个 目标 点 ， 但 最终 则 规定 碳 浓度 分布 作为 目标值 。 　 　 图 表示 规定 的 作为 目标 的 碳 浓度 分布 曲线 ， 这种 自 调节 系统 的 功能 为 ： 　 　 可 计算 在 任何 时候 的 实际 碳 浓度 曲线 。 　 　 计算 实际 碳 浓度 曲线 的 面积 ， 并且 从 目标 碳 浓度 曲线 面积 中 减去 。 　 　 渗碳 过程 一直 持续 到 实际 的 和 目标 给定 的 碳 浓度 分布 曲线 轮廓 之差 为 零 。 　 　 本文 研究 的 是 动态控制 工艺 的 自动 调整 系统 ， 与 上述 两个 阶段 渗碳 的 自动 调整 不同 。 本文 借鉴 了 其 方法 ， 也 从 三点 自 调整 控制 入手 ， 但 控制 的 具体 方案 不同 。 因此 自行 编制 了 适合 动态控制 的 三点 自动 调整 程序 ， 为 达到 此 目的 ， 必须 首先 推导 渗层 碳 浓度 分布 与 渗碳 时间 、 渗碳 温度 、 气氛 碳势 之间 的 关系式 因为 在 全过程 动态 控制程序 中要 用到 此 关系式 。 详见 文献 ［ ］ ， 其 过程 是 首先 推导 了 气体 渗碳 物质 传递 的 数学模型 ， 并 利用 有限 差分法 解出 其 数值 解 ， 通过 调整 模型 中 的 参数 ， 来 仿真 计算 碳 浓度 分布 ， 与 同样 工艺 条件 下 渗碳 处理 得到 的 剥层 数据 相 比较 ， 两者 偏差 ≤ ± 。 然后 利用 调整 过 参数 后 的 数学模型 计算 出 不同 温度 、 不同 碳势 、 不同 时间 下 渗碳 得到 的 碳 浓度 分布 。 接着 ， 利用计算机 拟合 出碳 浓度 分布 上 各点 与 时间 、 温度 、 气氛 碳势 的 关系式 。 经 试验 得到 对 动态控制 起 主要 作用 的 表面 处 、 要求 的 层 深处 、 要求 层深 的 处 的 碳 浓度 与 此个 参数 的 关系式 ： 　 　 表面 处 ： yxxx 　 　 　 　 　 　 r 　 　 层 深处 ： yxxx 　 　 　 　 　 　 r 　 　 层深 的 处 ： yxxx 　 　 　 　 　 　 　 　 r 式 中 ： x 代表 渗碳 时间 ； x 代表 渗碳 温度 ； x 代表 气氛 碳势 ； y 代表 碳 浓度 ； r 代表 相关系数 。 图 　 总 的 碳 浓度 分布 曲线 作为 目标值 Fig 　 Generalcarbondistributioncurveasanaimvalue 　 上位 机中 气体 渗碳 全过程 动态控制 具体 方案 的 实现 　 　 目前 ， 国内 大多数 厂家 采用 的 气体 渗碳 工艺 多为 排气 — 强渗 — 扩散 三段 控制 方法 ， 按照 经验 确定 各段 的 时间 及 在 各段 载气 与 富 化剂 的 比例 。 在 全过程 动态 控制系统 中 ， 利用 建立 的 气体 渗碳 数学模型 ， 充分发挥 计算机 快速 计算 控制 功能 ， 对 上述 传统 强渗 — 扩散 两段 法 进行 改进 。 整个 渗碳 过程 基本 分为 如下 个 阶段 ： 　 　 升温 阶段 。 工件 入炉 后 ， 若 炉温 达 ℃ 以上 ， 可 滴入 煤油 排气 ， 因为 一般 井式 气体 渗碳 炉 的 热电偶 在 马弗炉 外 ， 在 升温 阶段 仪表 检测 温度 高于 罐外 的 实际 温度 。 因此 煤油 过早 滴入 而炉 内 温度 偏低 ， 会 产生 大量 不 完全 分解 的 产物 ， 不利于 炉气 碳势 建立 和 控制 。 当 炉温 达 设定 温度 后 ， 开始 通入 空气 ， 以 在 短时间 内 建立 碳势 。 　 　 建立 炉气 碳势 阶段 。 当 工件 均温 完成 后 ， 微机 根据 对 炉气 中 O 或 CO 和 各区 炉温 的 实时 采样 值 开始 连续 计算 炉气 碳势 、 工件 渗碳 层碳 浓度 分布 、 工件 表面 含碳量 和 硬化 层 深度 。 此后 在 保持 炉气 不 出现 碳黑 的 前提 下 ， 将 炉气 碳势 控制 在 尽可能 高 的 水平 上 ， 并 保持 这一炉 气 碳势 ， 使 工件 表面 碳 浓度 迅速 提高 ， 直到 工件 表面 碳 浓度 达到 将要 发生 碳化物 转变 值 为止 。 对 CrNiA 而言 ， ℃ 下 临界值 可取 。 　 　 自 适应控制 阶段 。 此 阶段 炉气 碳势 的 控制 值 不是 预先 设定 的 ， 而是 在 实时控制 过程 中 ， 由 微机 系统 根据 工件 的 钢材 成分 和 物质 传递 数学模型 ， 随机 确定 每一 时刻 的 炉气 碳势 控制 值 ， 并 由 前 位机 自动 对 炉气 碳势 进行 调节 ， 保证 每一 时刻 从 炉气 转移 到 工件 表面 的 碳 流量 恰好 等于 碳 从 工件 表面 向 工件 内部 的 扩散 流量 ， 即 工件 表面 碳 浓度 始终保持 在 这 一 临界值 。 这样 既 能 保证 工件 表面 不 出现 碳化物 ， 又 能 保证 以 最大 的 碳 浓度梯度 向 内 进行 扩散 ， 提高 渗碳 速度 。 　 　 扩散 阶段 。 在 此 阶段 逐渐 降低 碳势 ， 使 工件 表面 碳 浓度 逐渐 接近 最终 要求 的 表面 碳 浓度 Cs 。 在 扩散 阶段 ， 若 Ckk 点 的 碳 浓度 ， 下同 低于 Cs ， 系统 可 自动 又 将 碳势 恢复 到 最大值 ， 使 Ck 又 大于 Cs ， 实现 自动 调整 。 此 阶段 既 能 保持 较大 的 渗入 速度 ， 在 较 短 的 时间 内 将 表面 碳 浓度 、 碳 浓度 Ck 、 渗层 深处 浓度 Cc 调到 所 要求 范围 又 不至于 出现 碳 浓度 分布 “ 低头 ” 现象 ， 尤其 是 在 渗碳 层较 深时 ， 保证 获得 良好 的 碳 浓度 分布 特性 。 出炉 要 同时 满足 下列 个 条件 ： 　 　 表面 碳 浓度 分布 曲线 无 “ 低头 ” 现象 ； 　 　 表面 碳 浓度 符合 设计 要求 ； 　 　 渗碳 浓度 达到 设计 值 ； 　 　 第三 控制点 达到 要求 值 。 　 　 在 上述 软件 支持 下 ， 对 炉气 碳势 采用 自 适应 调节 ， 从而 实现 全过程 动态控制 。 　 　 此 控制系统 软件 主 框图 见图 。 图 　 控制系统 软件 主 框图 Fig 　 Mainframechartofsoftwareforcontrolsystem 　 　 整个 控制 过程 由 下列 子程序 构成 ： 数据 采集 子程序 ， 控制数据 输出 子程序 ， 碳 浓度 分布 计算 子程序 ， 图形 打印 子程序 ， 三点 动态控制 子程序 ， 输出 的 PID 数值 调节 运算子 程序 。 　 气体 渗碳 的 两级 全过程 控制系统 的 硬件 实现 　 　 本 系统 的 框图 如图所示 ， 上位 机为 美国 Apple 公司 的 Apple Ⅱ e 型 苹果机 ， 并 配有 位 AD ， DA 转换 板 MS ， 为了 充分利用 位 转换 精度 ， 对 采集 的 反馈 信号 进行 了 信号 调理 ， 使 温度 θ 的 识别 精度 为 ℃ 。 另外 ， 还 配备 了 EPSONRX 打印机 ， 记录 试验 数据 ， 打印 图形 。 前 位机 采用 北京 远东 仪表 公司 生产 的 EKD 表 。 因 经费有限 ， 又 由于 温度 的 前位 控制 仪表 较 完善 ， 所以 在 本 系统 中 炉温 并未 采用 两级 控制 ， 而 由 上位 机 直接 控制 ， 而 炉气 碳势 是 由 上位 机和前 位机 进行 两级 控制 的 。 图 　 两级 控制系统 流程 框图 Fig 　 Flowchartoftwolevelcontrolsystem 　 　 从图 可 看出 ， 系统 有个 闭环 回路 ， 一路 是 碳势 控制 ： 经 DA 转换 的 ～ V 参比 信号 ， 由 上位 机 送入 EKD 表前 位机 ， 再 与 EKD 表 采集 的 碳势 信号 相 比较 ， 给出 控制 信号 。 此 控制 信号 再经 VI ， If 电压 电流 ， 电流 频率 两次 转换 ， 以 控制 电磁阀 的 滴油 频率 和 时间 来 达到 控制 碳势 的 目的 。 　 　 本 试验 中 利用 BH 型 隔离 放大器 来 放大 炉气氧势 电压 信号 ， 利用 BH 型 滴注 控制 仪来 控制 执行器 电磁阀 。 在 碳势 信号 采集 中 利用 氧 探头 为 传感器 。 　 　 另 一路 是 炉温 控制 ： 温度 只 采用 单级 控制 ， 直接 由 上位 机 控制 。 经 DA 转换成 ～ mA 电流 触发 可控硅 调控 器 ， 对 炉温 进行 控制 。 控温 执行器 采用 的 是 SMD 型 脉冲 调节 温度控制 柜 。 炉温 信号 的 采集 采用 热电偶 来 实现 ， 经 DDZ Ⅱ 型 温度 变送器 放大 后 ， 通过 AD 转换 进入 上位 机 。 　 　 在 炉温 控制 时 ， 需要 一个 UI 转换 ， 本 课题 中 自行设计 了 电路 ， 并 自制 了 电路板 ， 其 电路图 见图 。 图 　 UI 转换 电路图 Fig 　 SwitchingcircuitdrawingofUI 　 　 本 试验 是 在 kW 井式 气体 渗碳 炉上 进地 的 ， 炉膛 容积 为 dm ， 风扇 轴 采用 水冷 密封 装置 ， 炉盖 上 设有 滴液 孔 、 取 气孔 和 氧 探头 安装 孔 ， 前 两孔 均 有 水冷却 。 进入 炉内 的 空气 由 小型 空气 泵 供给 ， 是 恒定 的 ， 经 过滤器 到 减压阀 ， 使 压力 稳定 在 kPa 左右 ， 再 经 流量计 进入 炉中 。 　 试验 　 　 为 验证 本 系统 的 控制 情况 ， 在 进行 的 开炉 试验 中 采用 种 试验 材料 ： CrNiACrNiW 。 　 　 开炉 渗碳 的 工艺 参数 见表 。 表 　 渗碳 工艺 参数 渗碳 时间 min 碳势 总 渗碳 时间 min 渗碳 温度 ℃ 全过程 动态控制 　 　 　 　 注 ： 空气 煤油 空气 流量 为 Lh 。 　 　 试样 在 渗碳 后空 冷 ， 然后 进行 退火 ， 其 处理 规范 为 ： 退火 温度 ， ± ℃ ； 保温 h ， 随后 炉冷 ； 然后 对 试样 进行 剥层 分析 ， 得出 的 数值 见表 。 程序 模拟计算 值见表 。 计算 值 与 剥层值 比较 曲线 见图 ， 图 。 表 　 剥层 试样 的 碳 浓度 化验 结果 w ％ 材料 距 表面 的 距离 mm ． ． ． ． ． ． ． ． ． ． ． ． CrNiA ． ． ． ． ． ． ． ． ． ． ． ． CrNiW ． ． ． ． ． ． ． ． ． ． ． ． 表 　 碳 浓度 分布 的 计算 模拟 值 w ％ 材料 距 表面 的 距离 mm ． ． ． ． ． ． ． ． ． ． ． ． CrNiA ． ． ． ． ． ． ． ． ． ． ． ． CrNiW ． ． ． ． ． ． ． ． ． ． ． ． 图 　 CrNiA 比较 曲线 Fig 　 ComparisoncurveofCrNiA 图 　 CrNiW 比较 曲线 Fig 　 ComparisoncurveofCrNiW 　 结论 　 　 利用 仿真 碳 浓度 分布 计算 模型 ， 得出 碳 浓度 分布 与 渗碳 时间 、 渗碳 温度 、 气氛 碳势 的 关系式 在 一般 渗碳 条件 下 误差 很小 ， 证明 了 个 参数 之间 存在 多元 线性关系 ， 为 下 一步 的 动态控制 提供 了 理论指导 。 为 便于 实际 应用 ， 建议 建立 不同 材料 的 上述 参数 的 关系式 数据库 。 　 　 采用 三点 动态控制 方案 进行 的 全过程 动态 两级 微机 控制 渗碳 是 可行 的 ， 结果 也 是 令人满意 的 。 要 使 软件 实用化 ， 还 必须 对 其 完善 。 　 　 两级 控制 是 工业 控制 的 方向 ， 它 具有 控制精度 高 ， 成本低 ， 维修 调试 方便 ， 外界 干扰 小 等 优点 。 作者 单位 ： 曾 　 杰 （ 沈阳 黎明 发动机 制造 公司 军代表 室 ） 参考文献 　 EdenhoferB 等 渗碳 过程 中碳 浓度 分布 曲线 的 自动 调整 见 ： 第六届 国际 材料 热处理 大会 论文集 西德 　 张建华 井式炉 微机 控制 精确 渗碳 见 ： 中国 机械工程 学会 热处理 学会 第五届 年会 论文集 责编 　 朝 　 晖