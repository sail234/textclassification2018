计算机 研究 与 发展 JOURNALOFCOMPUTERRESEARCHANDDEVELOPMENT 　 Vol 　 No 　 P 支持 资源 预定 的 多目 通信 的 路由 算法 及其 性能 分析 黄浩 　 杜 建成 　 谢立 　 孙钟秀 摘 　 要 ： 目前 Internet 上 的 路由 协议 仅 支持 “ 尽力 传送 服务 ” 新型 的 应用 问题 如 视屏 会议 、 分布式 模拟 等 需要 有 保障 的 服务质量 资源 预定 协议 如 RSVP 等 可以 用来 提供 有 保障 的 服务质量 ， 但是 它 需要 有 新 的 路由 协议 文中 研究 了 支持 资源 预定 的 多目 通信 的 路由 问题 ， 提出 了 两个 路由 算法 算法 采用 了 避免 使用 高 负载 链路 的 机制 ， 从而 使得 多目 通信 的 通信 树 的 分配 成功率 有 很大 的 提高 文中 还 给出 了 模拟实验 的 结果 ， 并 对 其 进行 了 分析 关键词 ： 单目 通信 ， 多目 通信 ， 资源 预定 ， 服务质量 分类号 ： TPMULTIPOINTTOMULTIPOINTCOMMUNICATIONROUTINGSCHEMEANDPERFORMANCEANALYSISHUANGHao ， DUJianCheng ， XIELi ， SUNZhongXiuStateKeyLaboratoryforNovelSoftwareTechnologyNanjingUniversityNanjingDepartmentofComputerScienceandTechnologyNanjingUniversityNanjingAbstract ： ThecurrentroutingprotocolsintheInternetonlysupport “ besteffortservice ” NewapplicationssuchasvideoconferenceanddistributedemulationneedguaranteedqualityofserviceResourcereservationprotocolssuchasRSVPareusedtoguaranteethequalityofservicebuttheyneednewroutingprotocolstocooperatewiththemInthepaperhereroutingalgorithmsformultipointtomultipointcommunicationsupportingresourcereservationarestudiedTworoutingschemesareproposedUsingtheroutingalgorithmafeasiblecommunicationdistributiontreecanbeconstructedSincealgorithmadoptsthemechanismthatavoidsusingthehighloadlinksmorecommunicationdistributiontreecanbeallocatedinanetworkSimulationresultsandtheiranalysisarealsogivenKeywords ： unicastmultipointtomultipointconmmunicationresourcereservationqualityofservice ▲ 　 引 　 　 言 　 　 计算机网络 技术 已 成为 计算机 应用 的 核心技术 之一 它 是 分布式计算 、 计算机辅助 协同工作 、 计算机 多媒体 应用 技术 、 自动化 技术 、 通信 技术 、 信息系统 工程 等 新 技术 的 基础 　 　 目前 Internet 所 提供 的 服务 主要 是 “ 尽力 传送 besteffort ” 的 服务 即 尽 最大 努力 传送 但 不能 保证质量 为了 能 满足 不断涌现 的 新型 应用 的 要求 ， 例如 远程 视频会议 、 分布式 模拟 等 ， 计算机网络 除了 在 硬件 设备 ， 如 光缆 、 通信卫星 等 提供 支持 外 ， 还 必须 在 网络协议 、 软件 方面 予以 支持 如 提供 实时 的 服务质量 保障 ， 提供 合理 地 共享 链路 的 带宽 等 网络资源 的 控制措施 ［ ］ 资源 预定 协议 RSVP ［ ］ 为 网络资源 利用 提供 了 一个 控制 方法 为了 在 Internet 上 提供 综合 业务 的 服务 ， 支持 资源 预定 协议 ， 现有 的 路由 协议 必须 加以 扩充 　 　 计算机 通信 从 信息 发送者 和 信息 接收者 的 个数 来看 ， 有 一个 发送者 和 一个 接收者 的 通信 ， 即 单目 通信 还有 一个 发送者 和 多个 接收者 以及 多个 发送者 和 多个 接收者 的 通信 ， 即多目 通信 一些 多目 通信协议 已经 提出 ， 例如 MOSPF ［ ］ ， DVMP ［ ］ 它们 建立 一个 以 发送者 为根 的 最 短距离 树 对于 MOSPF ， DVMP 协议 来说 ， 同一个 通信 组中 若 有 多个 发送者 就 会 建立 多棵 以 发送者 为根 的 通信 树 对于 以往 的 以 “ 尽力 传送 ” 的 服务 来说 ， 多棵 通信 树 除了 在 路由器 上 保留 的 路由 信息 比 一棵 通信 树 保留 的 要 多一些 之外 ， 其它 的 网络资源 利用效率 方面 本质 的 区别 不 大 可是 ， “ 尽力 传送 ” 服务 已 不能 满足 不断涌现 的 新型 的 通信 任务 的 要求 当前 一些 应用 问题 对 通信 的 质量 很 敏感 ， 例如 视屏 电视会议 、 分布式 模拟 等 要求 保证 有 足够 带宽 ， 对 时延 和 丢失 率 都 有 具体 的 限制 因此 ， 对于 这 类 通信 问题 不仅 要求 根据 当前 的 拓扑 结构 寻找 通信 路径 或 通信 树 ， 而且 要求 在 所 找到 的 路径 或 通信 树上 有 足够 的 资源 网络系统 通过 资源 预定 等 机制 来 保障 服务质量 一个多 目 通信 任务 往往 有 多个 发送者 例如 ， 视频会议 有 几个 有 发言权 的 与会者 就 有 几个 发送者 若 给 每 一个 发送者 都 预定 一棵 通信 树 ， 则 会 占用 大量 的 网络资源 而 像 视频会议 这样 的 通信 任务 多个 有 发言权 的 与会者 同时 发言 的 情况 是 很少 的 ， 这样 可能 造成 预定 的 大量 的 网络资源 被 闲置 ， 而 需要 使用 网络资源 的 通信 任务 又 无法 使用 网络资源 　 　 在 任 一时期 ， 网络资源 总是 有限 的 为了 利用 有限 的 网络资源 提供 尽可能 多 尽可能 高 的 服务质量 ， 我们 研究 了 在 提供 资源 服务 也 能 充分利用 带宽 资源 的 路由 算法 给出 了 两个 不同 的 多目 通信 的 路由 算法 它们 为 每个 通信 组 预定 一棵 共享 的 通信 树 ， 同一 通信 组 的 成员 利用 这棵 通信 树 接收 和 发送数据 第节 给出 了 一些 基本概念 第节 阐述 了 我们 提出 的 两个 算法 第节 对 算法 的 性能 进行 了 分析 与 比较 　 多目 通信 的 路由 问题 　 　 为了 研究 路由 问题 我们 首先 将 一个 计算机网络 抽象 成 一个 赋权 有向图 图 描述 了 一个 计算机网络 的 自治 系统 ［ ］ 图是 图 所示 的 计算机网络 的 抽象 的 赋权 有向图 ， 图中 每 对 相邻 结点 之间 应该 有 两条 不同 方向 的 弧 为了 简单 起 见 ， 图中 每 对 相邻 结点 之间 只画 了 一条 弧 ， 并且 表示 方向 的 箭头 及 弧 上 的 权 也 都 省略 了 图 中 RT ～ RT 是 路由器 ， 用 椭圆 表示 ； N ～ N 是 共享 介质 的 局域网 ， 用 一条 直线 或 折线 如 N ， N ， N 表示 ； H ， Ma 都 是 局域网 中 的 主机 ， 用 矩形 表示 各 主机 Ma 都 是 同一 通信 组 A 中 的 成员 从 路由 的 角度 来讲 ， 从 局域网 中 的 一个 主机 到 自治 系统 中 的 某 结点 的 路径 与 从 这个 局域网 到 这个 结点 的 路径 是 一样 的 所以 从 路由 的 角度 来讲 ， 我们 可以 不 区分 局域网 和 局域网 中 的 主机 ， 在 下面 的 讨论 中 结点 集 的 成员 往往 位于 局域网 中 的 主机 中 例如 图中 的 结点 集中 没有 画出 局域网 N ， N ， N ， N ， N ， N 等 局域网 中 通信 组 A 的 组成员 Ma 实际上 ， 从 某个 主机 Ma 到 某个 结点 的 路径 与 图 中 Ma 所在 的 局域网 到 这个 结点 的 路径 是 一样 的 由此 ， 我们 在 下面 给出 了 计算机网络 的 抽象 表示 图 　 一个 计算机网络 自治 系统 图 　 一个 计算机网络 自治 系统 对应 的 图 　 　 计算机网络 的 抽象 表示 ： 在 研究 计算机网络 的 路由 问题 时 ， 其 拓扑 结构 可用 一个 赋权 有向图 来 表示 在 本文 中 ， 用 赋权 有向图 GVECD 表示 一个 计算机网络 ， 其中 V 是 结点 的 集合 ， 一个 结点 或者 是 路由器 或者 是 一个 局域网 ； E 是 弧 的 集合 ； 权函数 C ： E → R 是 弧 的 集合 E 到 实数 集 R 的 函数 ， 若 e ∈ E 则 Ce 表示 链路 e 上 的 可用 的 资源 总量 如 总 的 可用 的 带宽 ； 权函数 D ： E → R 是 弧 的 集合 E 到 实数 集 R 的 函数 ， 若 e ∈ E 则 De 表示 报文 经过 链路 e 时 的 长度 如 平均 时延 　 　 在 计算机网络 中 通信 问题 按照 发送者 和 接收者 的 数量 来分 可以 分成 两类 单目 通信 ， 即 一个 发送者 和 一个 接收者 多目 通信 ， 即 一个 多个 发送者 和 多个 接收者 单目 通信 的 路由 问题 就是 要 寻找 一条 从 发送者 到 接收者 的 路径 参加 一个多 目 通信 的 发送者 和 接收者 全体 称为 多目 通信 组 一个多 目 通信 组 使用 一个 D 类 IP地址 多目 通信 的 路由 问题 就是 要 寻找 一条 连接 这个 多目 通信 组 的 所有 成员 的 一棵树 ， 称为 通信 树 不同 的 多目 通信 的 路由 算法 构造 不同 的 通信 树 目前 主要 有 两种 一种 是 整个 多目 通信 组 共享 的 通信 树 另 一种 是 以 发送者 为根 的 通信 树 ， 在 这种 情况 下 若 有 多个 发送者 ， 则 有 多棵 通信 树 每个 路由器 利用 路由表 的 一个 项来 标记 通信 树 的 一个 结点 一个 路由器 通过 路由表 中 的 一项 来 表示 自己 是 某个 多目 通信 组 的 通信 树上 的 一个 结点 路由器 根据 报文 的 目标 地址 单目 通信 是 接收者 的 地址 ， 多目 通信 是 组 地址 以及 路由表 中 相应 的 项来 确定 向 哪个 接口 单目 通信 是 一个 接口 ， 多目 通信 可能 是 多个 接口 转发 路由 协议 的 任务 就是 要 规定 在 路由器 之间 交换 路由 信息 的 方式 ， 根据 收集 的 路由 信息 利用 路由 算法 计算 出 到 任意 一个 目标 地址 应 向 哪些 接口 转发 ， 即 构造 出 路由表 　 　 为了 叙述 问题 和 描述 算法 方便 起 见 ， 先对 本文 中 将要 用到 的 几个 符号 做 一些 说明 　 　 一个多 目 通信 ， 一般 有 一个 或 多个 发送者 和 多个 接收者 在 考虑 像 电视会议 这样 的 多目 通信 时 ， 往往 要 考虑 这个 多目 通信 任务 要求 保障 的 带宽 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， 我们 用 STf 表示 一个 通信 任务 ， 其中 SV ， TV ， f 为 一 正数 ， S 称为 通信 任务 的 发送者 集 ， T 称为 通信 任务 的 接收者 集合 f 称为 通信 任务 的 通信量 ， 即 这个 多目 通信 任务 要求 保障 的 带宽 ， 关于 f 的 商定 的 问题 我们 将 在 下面 作 进一步 讨论 G 上 的 通信 任务 全体 记为 TG 当 S ， T 为 单点 集时 ， 即 S ， T 时 ， 通信 任务 就 成为 单目 通信 unicast 当 S ≥ ， T ＞ 时 通信 任务 就 成为 多目 通信 multicast 　 　 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， 若有 ai ∈ V ， i … k ， st ∈ V 使得 sa ∈ E ， akt ∈ E ， aiai ∈ E ， i … k 则 将 s 到 t 的 路径 ssaaaaa … akakt 记为 pst ， s 到 t 的 不同 的 路径 的 全体 记为 st 对于 任一 图 G ， 用 VG 表示 图 G 的 结点 的 集合 ， 用 EG 表示 图 G 的 边 的 集合 设 st ∈ V ， 从 s 到 t 的 最 短距离 记为 dst 在 本文 中距离 dst 都 是 按 权函数 D 计算 的 ， T 是 G 的 一棵 子树 ， 则 记 dsTmindstt ∈ T 为 结点 到子 树 T 的 距离 ， 记 psTargmindstpst ∈ Pstt ∈ T 为 s 到子 树 T 的 一条 最 短路 的 路径 ， 为了 符号 简单 起 见 ， 我们 也 用 psT 表示 在 这条 路径 上 所有 边 的 集合 　 　 当为 一个 通信 任务 预定 一棵 通信 树时 ， 就是 要 在 计算机网络 的 抽象 图中 选择 一个 边 的 集合 ， 对 这个 边 的 集合 中 每 条边 所 对应 链路 预定 这个 通信 任务 所有 求 的 带宽 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， qSTf 为 一个 通信 任务 ， DTE ， 若 s ∈ S ， t ∈ T ， pst ∈ Pst ， 使 EpstDT ， 则 称 DT 为 通信 任务 qSTf 的 一个 通信 树 DTq 表示 通信 任务 q 的 所有 通信 树 的 集合 也就是说 通信 任务 q 的 一个 通信 树是 一棵 包含 通信 任务 q 的 所有 发送者 和 所有 接收者 的 一棵 子树 　 　 问题 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， qSTf 为 一个 通信 任务 ， 问题 称为 最小 资源 通信 树 问题 若 R ∈ DTq ， 且 对 任意 的 R ∈ DTq 满足 ， 则 称 R 为 通信 任务 q 的 最小 资源 通信 树 　 　 设 GVED 是 一个 有 向 赋权 图 ， SV ， T 是 G 的 子树 ， 若 SVT ， 且 任意 给定 G 的 子树 T ′ 当 VT ′ S ， 必有 则 称 T 为 G 中 关于 S 的 Steiner 树 VSED 表示 上述 的 Steiner 树 问题 　 　 对于 单目 通信 来说 最小 资源 通信 树 就是 两 结点 间 的 最 短路 对于 多目 通信 来说 最小 资源 通信 树 就是 Steiner 树 　 　 在 支持 资源 预定 的 路由 协议 中 ， 为 一个 通信 组 选择 通信 树时 ， 不仅 要 考虑 通信 树要 能 连接 所有 的 通信 组成员 ， 还要 考虑 这棵 通信 树 的 每 条边 是否 都 能 满足 资源 预定 的 条件 而 通信 树 的 每 条边 是否 都 能 满足 资源 预定 的 条件 又 与 网络系统 内 的 当前 的 负载 状态 有关 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， 我们 用 赋权 图 SVEF 表示 G 的 一个 状态 ， 其中 F 是 E 到 实数 集 R 的 映射 ， e ∈ E ， Fe 表示 当前 链路 e 上 的 可用 带宽 SG 表示 G 的 所有 的 状态 的 集合 设 SVEF 是 G 的 一个 状态 ， qSTf 是 一个 通信 任务 ， DT ∈ DTq 是 通信 任务 q 的 一棵 通信 树 ， 若 minFee ∈ DT ≥ f ， 则 称 DT 是 在 状态 S 下 通信 任务 q 的 可行 通信 树 ， 即 一个 任务 的 可行 通信 树中 的 每 一条 边 的 剩余 可用 带宽 都 必须 大于 该 通信 任务 所 要求 的 带宽 映射 P ： SG × TG → E 称为 G 的 一个 路由 算法 ， 其中 E 为 集合 E 的 所有 子集 的 集合 ， 符号 × 是 笛卡尔 积 ， 也就是说 一个 路由 算法 就是 根据 网络 的 当前 状态 和 一个 给定 的 通信 任务 选择 出 一个 可行 通信 树 的 方法 　 　 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， P 为 G 的 一个 路由 算法 ； qiSiTifi ， i … n ， 是 一个 通信 任务 序列 ， 记为 Q ； sVEF 是 分配 q 之前 的 状态 ； 若 psiqi 是 在 状态 siVEFi 下 qi 的 可行 通信 树 ， 则 当 e ∈ psiqi 时 ， 令 FieFiefi ； 当 epsiqi 时 ， 令 FieFie ； 并令 SiEVFi ， 继续 分配任务 qi ； 否则 停止 分配 ， 并称 i 为 在 状态 s 下 分配任务 序列 Q ： qq … ， qn 的 首次 失败 时刻 ， 记为 tsqq … ， qn 或 tsQ 　 　 问题 在 网络 某 一个 状态 下 ， 随后 到达 的 通信 任务 序列 一般 是 随机 的 ， 因而 tsQ 是 一个 随机变量 随机变量 tsQ 的 数学 期望 反映 了 一个 网络 分配 通信 树时 首次 失败 时间 的 平均值 所以 我们 希望 找到 一个 路由 算法 P 使得 首次 失败 时间 的 数学 期望 达到 最大 ： EtsQmaxEtsQP 是 G 的 路由 算法 其中 EX 表示 随机变量 X 的 数学 期望 　 多目 通信 的 路由 算法 　 　 设有 向 赋权 图 GVECD 是 一个 计算机网络 的 抽象 ， 本 节 研究 SSf 类型 的 通信 任务 的 路由 算法 通信 组 S 中 的 每个 成员 既 是 发送者 又 是 接收者 我们 给出 两个 路由 算法 的 方案 ， 在 下 一节 通过 模拟实验 比较 了 它们 的 性能 ， 即 首次 失败 时间 的 数学 期望 　 算法 　 　 设 qSSf 是 网络 GVECD 的 一个 通信 任务 若 R 是 Steiner 树 问题 VSED 的 一个 解 显然 ， R 是 通信 任务 q 的 占用 资源 最少 的 通信 树 但 遗憾 的 是 一般 Steiner 树 的 求解 是 一个 NP 难题 ［ ］ 所以 一般 只能 用 启发式 方法 来求 其 近似 解 对于 Steiner 问题 VSED ， 目前 构造 Steiner 树 的 启发式 算法 主要 有 两类 一类 是从 树 Tw 开始 ， 其中 w ∈ S ， 逐步 将 不 在 T 中 的 基本点 S 中 的 结点 到 T 的 路径 添进 T 中 另一类 是从 G 的 子 图 TS 开始 ， 逐步 将 链接 T 的 两个 不同 的 连通 子图 的 链路 添进 T 中 如果 用 Zopt 表示 Steiner 树 的 总 权数 即 树上 所有 的 弧 的 权 的 总和 ， Z 表示 用 启发式 算法 得到 的 近似 解 的 总权 许多 Steiner 问题 的 启发式 算法 的 计算结果 在 最坏 的 情况 下 比值 ZZopt ≤ SV 大量 的 统计 结果表明 ， 大多数 算法 的 比值 ZZoptZopt 小于 ［ ］ 下面 给出 的 算法 和 算法 的 统计 结果表明 比值 ZZoptZopt 小于 在 设计 网络 路由 算法 的 时候 ， 要 考虑 通信 树 占用 的 资源 要少 ， 但 更 要 考虑 协议 设计 的 问题 ， 即使 得 传送 的 路由 信息 要少 ， 计算 量 要 少 ， 算法 简单 且 易于 实现 并 能 适应 多目 通信 组成员 的 动态变化 本文 考虑 了 协议 实现 的 因素 后 ， 提出 以下 的 基于 Steiner 树 的 路由 算法 　 　 算法 　 　 ① 考虑 赋权 有向图 QVED 计算 集合 S 中 任意 两点 间 的 最 短距离 　 　 ② 找出 S 中距离 最小 的 两点 ， 记为 s ， s ， 令 DTss 　 　 ③ 如果 SDT ， 则 停止 否则 转 ④ 　 　 ④ 求 SDT 中到 DT 距离 最短 的 点 sargmindsDTs ∈ SDT 令 DTDT ∪ psDT ， SSs 转 ③ 　 算法 　 　 为了 能 使 更 多 的 通信 任务 得到 分配 ， 当给 一个 通信 任务分配 通信 树时 应 尽量避免 分配 那些 剩余 带宽 少 的 链路 这 在 网络带宽 资源 紧张 的 情况 下 尤其 重要 为了 使 网络 中 能 容纳 下 尽可能 多 的 通信 任务 ， 我们 通过 求解 以下 图论 的 优化 问题 来 分配 通信 任务 的 通信 树 　 　 适当 地 选择 一个 数 M ， 当 链路 e ∈ E 的 剩余 带宽 Fe ≥ M 时 ， 则 认为 链路 e ∈ E 是 低 负载 的 链路 ； 否则 ， 则 认为 链路 e ∈ E 是 高 负载 的 链路 设 f 为 通信 任务 的 流量 ， 当 Fe ≥ M 时 ， 令 σ e ； 当 M ≥ Fe ≥ f 时 ， 令 σ e ； 当 fFe 时 ， 令 σ e ∞ 考虑 下面 的 问题 ： 　 　 其中 其中 DTq 是 通信 任务 q 的 所有 的 可行 的 通信 树 　 　 问题 表明 给 通信 任务分配 通信 树时 ， 在 包含 所有 组成员 集 S 的 子树 中先 选择 出 包含 高 负载 链路 最少 的 子树 ， 然后 再 在 这些 子树中 选择 出总权 最小 的 子树 　 　 如果 直接 求解 问题 ， 则 计算 量 非常 大为 此 我们 先 将 它 变换 成 另 一 容易 求解 的 问题 在 算法 中 ， 计算 距离 时用 的 是 网络图 GVECD 中 的 权函数 D 这里 我们 根据 权函数 D 和 网络 的 状态 构造 新 的 权函数 D ′ ， 然后 将 问题 变换 成问题 ， 然后 再 求解 设 分配 通信 任务 qSSf 时 ， 网络 的 状态 为 VEF ， 适当 选择 两个 充分 大 的 正数 NN 当 FeM 时 ， 令 D ′ eDe ； 当 M ≥ Fe ≥ f 时 ， 令 D ′ eN ， 当 fFe 时令 D ′ eN 　 　 容易 证明 适当 选择 两个 正数 N ， N ， 问题 与 问题 是 等价 的 　 　 算法 基于 Steiner 树 的 多目 通信 SSf 的 减少 拥塞 的 路由 算法 　 　 ① 构造函数 D ′ 及 赋权 有向图 Q ′ VED ′ 　 　 ② 计算 赋权 有向图 Q ′ VED ′ 的 结点 集合 S 中 任意 两点 间 的 最 短距离 　 　 ③ 找出 S 中距离 最小 的 两点 ， 记为 s ， s ， 令 DTss ， k 　 　 ④ 如果 SDT ， 则 停止 ； 否则 转 ⑤ 　 　 ⑤ 求 SDT 中到 DT 距离 最短 的 点 s ′ argmindsDTsSDT 令 DTDT ∪ ps ′ DT ， SSs ′ 转 ③ 　 网络 路由 信息 的 传播 和 路由表 的 构造 与 修改 　 路由 信息 的 交换 　 　 网络 的 拓扑 结构 和 各 链路 上 的 负载 情况 等 路由 信息 是 动态变化 的 为了 获得 当前 的 路由 信息 ， 所有 的 路由 算法 都 必须 定期 地 与 相邻 的 结点 交换 路由 信息 算法 和 算法 所 需要 的 路由 信息 包括 每条 链路 的 链接 状态 、 链路 允许 的 最大 带宽 、 当前 的 可用 带宽 等 我们 可以 用 OSPF 的 Hello 报文 、 DatabaseDescription 报文 、 LinkStateRequest 报文 、 LinkStateUpdate 报文 、 LinkStateAcknowledgment 报文 但是 必须 增加 这些 报文 的 域 ， 用来 交换 关于 链路 的 带宽 等 资源 的 路由 信息 　 　 多目 通信 通过 相应 的 通信 树来 传送数据 报文 通信 树 的 结点 就是 网络 当中 的 路由器 例如 ， 在 图 所示 的 网络系统 中 ， 设 子网 N ， N ， N ， N ， N ， N 中 的 标记 为 Ma 的 主机 为 通信 组 A 的 组成员 ， 这个 通信 组 的 一棵 通信 树 可用 图中 的 子树 ： 　 　 　 　 　 来 表示 为了 记录 这些 路由 信息 ， 每个 路由器 都 维护 一个多 目 通信 路由表 ， 表中 的 每一项 记录 一个 通信 组 的 路由 信息 ， 表中 的 每一项 包括 组 地址 、 转发 接口 等 内容 ： 组 地址 ， 接口 ， … ， 接口 n ， 其中 组 地址 就是 多目 通信 组 的 地址 当 一个 路由器 收到 一个 报文 时 ， 首先 从 报文 头 中 找出 其组 地址 ， 然后 再 从 多目 通信 路由表 中 找到 与其 组 地址 相匹配 的 项 ， 最后 将 报文 向 该项 中所列 的 每 一个 接口 转发 出去 这样 ， 在 路由器 RT ， RT ， RT ， RT ， RT ， RT ， RT ， RT 都 有 组 地址 为 A 的 表项 例如 在 RT 上 具有 表项 A 当 RT 从 接口 收到 给 组 A 的 报文 时 ， 向 接口 转发 ； 从 接口 收到 给 组 A 的 报文 时 ， 向 接口 转发 ； 从 接口 收到 给 组 A 的 报文 时 ， 丢弃 这个 报文 　 通信 树 的 建立 　 　 当 一个 不 在 现有 的 通信 组中 的 主机 要 加入 这个 组时 ， 这个 主机 所 连接 的 路由器 必须 为 其 寻找 一条 到 这个 通信 组 的 通信 树 的 最 短 路径 　 　 为了 阐述 通信 树 的 建立 方法 ， 我们 先举 一个 具体 的 例子 假设 多目 通信 组 A 的 成员 为 图 标记 为 Ma 的 主机 而且 目前 每 一条 链路 都 是 低 负载 链路 现在 子网 N 的 一台 主机 要 加入 多目 通信 组 A 则 子网 N 所 连接 的 路由器 RT 根据 当前 的 路由 信息 ， N 到 多目 通信 组 A 的 通信 树 的 最 短 路径 为 L ： NNRTRTRTRTRTRT 就 向 RT 发送 “ 加入 ” 消息 ， 而 路径 L 上 的 路由器 收到 这个 消息 后 都 在 自己 的 多目 路由表 中 增加 多目 通信 组 A 的 表项 ， 而 路由器 RT 则 在 已有 的 多目 通信 组 A 的 表项 中 增加 一个 RT 到 N 的 接口 多目 通信 组 A 的 通信 树 就 成为 T ∪ L 了 在此之后 子网 N 中 的 主机 就 可以 收到 发给 多目 通信 组 A 的 报文 或向子 多目 通信 组 A 发送 报文 了 　 　 当 一个 路由器 要 加入 一个 通信 组 A 时 ， 并 按 算法 构造 通信 树时 ： 　 　 ① 发送 一个 广播 消息 ， 表明 要 加入 通信 组 A ， 我们 称其为 “ 组 加入 请求 消息 ” 　 　 ② 收到 “ 组 加入 请求 消息 ” 的 路由器 ， 检查 这 条 “ 组 加入 消息 ” 是否 从 到 发送 这 条 “ 组 加入 消息 ” 的 源 结点 的 接口 上 到达 ， 若 不是 ， 则 丢弃 这 条 消息 否则 继续 处理 ： 检查 自己 的 路由表 中 是否 有 与 通信 组 A 匹配 的 表项 ； 若 无 ， 则 向 除了 这 条 “ 组 加入 消息 ” 的 到达 接口 外 的 所有 接口 转发 ； 若有 ， 则 向 发送 这个 “ 组 加入 请求 消息 ” 的 路由器 发送 一个 “ 组 加入 回答 消息 ” ， 表明 自己 处于 这个 通信 组 的 通信 树 的 一个 结点 上 ， 再 向 除了 这 条 “ 组 加入 请求 消息 ” 的 接口 外 的 所有 接口 转发 　 　 ③ 发送 “ 组 加入 请求 消息 ” 的 路由器 收到 所有 的 “ 组 加入 回答 消息 ” 用 计时器 控制 ， 即 等待 一段时间 后 ， 认为 所有 能 给予 回答 的 路由器 的 回答 消息 都 应 收到 后 ， 选择 一个 距离 自己 最近 的 结点 假设 为 B ， 向 B 发送 “ 组 加入 消息 收到 “ 组 加入 消息 ” 的 路由器 ， 检查 这 条 “ 组 加入 消息 ” 是否 从 到 发送 这 条 “ 组 加入 消息 ” 的 源 结点 的 接口 上 到达 ， 若 不是 ， 则 丢弃 这 条 消息 否则 继续 处理 ： 往 自己 的 路由表 中 增加 一项 组 地址 为 A 的 表项 ； 若 这个 路由器 不是 这 条 “ 组 加入 消息 ” 的 目的 结点 ， 则 向 到达 结点 B 的 接口 转发 　 　 当 一个 路由器 要 加入 一个 通信 组 A 时 ， 并 按 算法 构造 通信 树时 ： 　 　 ① 发送 一个 广播 消息 ， 表明 要 加入 通信 组 A ， 我们 称其为 “ 组 加入 请求 消息 ” ； 启动 定时器 　 　 ② 收到 “ 组 加入 请求 消息 ” 的 路由器 ， 检查 这 条 “ 组 加入 消息 ” 是否 从 到 发送 这 条 “ 组 加入 请求 消息 ” 的 源 结点 的 接口 上 到达 ， 若 不是 ， 则 丢弃 这 条 消息 否则 继续 处理 ： 检查 自己 的 路由表 中 是否 有 与 通信 组 A 匹配 的 表项 ； 若 无 ， 则 向 除了 这 条 “ 组 加入 请求 消息 ” 的 到达 接口 外 的 所有 低 负载 链路 的 接口 转发 若有 ， 则 向 发送 这个 “ 组 加入 请求 消息 ” 的 路由器 发送 一个 “ 组 加入 回答 消息 ” ， 表明 自己 处于 这个 通信 组 的 通信 树 的 一个 结点 上 ， 再 向 除了 这 条 “ 组 加入 请求 消息 ” 的 到达 接口 外 的 所有 低 负载 链路 的 接口 转发 　 　 ③ 如果 发送 “ 组 加入 请求 消息 ” 的 路由器 在 定时器 超时 之前 ， 收到 了 至少 一条 “ 组 加入 回答 消息 ” ， 选择 一个 距离 自己 最近 的 发送 “ 组 加入 回答 消息 ” 的 结点 假设 为 B ， 向 B 发送 “ 组 加入 消息 ” 若 在 定时器 超时 之前 ， 未 收到 一条 “ 组 加入 回答 消息 ” ， 则 广播 一条 “ 组 通信 树 请求 消息 ” 收到 “ 组 通信 树 请求 消息 ” 的 位于 通信 树上 的 路由器 向源 结点 发送 “ 组 通信 树 回答 消息 ” 收到 所有 的 “ 组 通信 树 回答 消息 ” 之后 ， 该 结点 则 掌握 了 整棵 通信 树 ， 从而 可以 计算 出 自己 到 这棵 通信 树 的 最 短 路径 ， 这 条 路径 的 另一端 假设 为 B 向 B 发送 “ 组 加入 消息 ” 收到 “ 组 加入 消息 ” 的 路由器 ， 处理 方法 同 前 　 性能 分析 　 实验 的 目的 　 　 本文 给出 的 多目 通信 不同 的 路由 算法 ， 从 不同 的 方面 考虑 网络 的 利用效率 算法 的 目的 是 使得 每 一个 正在 分配 通信 树 的 任务 占用 的 网络资源 尽可能 地少 而 算法 不仅 考虑 使得 每 一个 正在 分配 通信 树 的 任务 占用 的 网络资源 尽可能 地少 ， 而且 考虑 怎样 使 网络 能 容纳 下 尽可能 多 的 通信 任务 我们 通过 实验 来 观察 这 两个 算法 的 性能 本文 研究 了 以下 两个 性能指标 ： 　 　 首次 分配 失败 时 已 分配 的 任务 数从 一个 给定 的 网络 状态 开始 ， 按照 一定 的 路由 算法 给 随后 到达 的 一系列 通信 任务分配 通信 树 ， 直到 按照 此 算法 不能 给 某 一个 到达 的 任务分配 通信 树时 已经 分配 到 通信 树 的 通信 任务 的 数量 在 此 我们 称此 性能指标 为 首次 失败 时刻 FFTfirstfailuretime 　 　 通信 树 的 直径 通信 树 的 直径 是 在 一棵 通信 树中 相距 最远 的 两个 结点 的 距离 如果 两点 间 的 距离 表示 的 是 通信 的 时延 ， 则 通信 树 的 直径 反映 了 多目 通信 的 最大 时延 　 模拟实验 方法 　 　 每 一个 阶段 随机 地 产生 一组 结点 号 ， 作为 多目 通信 的 通信 组成员 　 　 根据 路由 算法 生成 通信 树 ， 并 计算 通信 树 的 直径 　 　 记录 下 网络 中 各条 边 的 剩余 的 带宽 ， 即 分别 记录 下 各个 阶段 网络 的 状态 分配 通信 树后 ， 则 根据 通信 树来 修正 网络 的 状态 　 　 如果 所 分配 的 通信 树中 有 某 条边 的 剩余 带宽 为 ， 则 通信 树 分配 失败 记录 下 首次 通信 树 分配 失败 时 已经 连续 分配 的 通信 组 的 组数 ， 即 首次 失败 时间 并 记录 下 通信 树 的 平均 直径 否则 进入 下一阶段 　 实验 结果 分析 　 　 我们 选择 了 几个 典型 的 网络拓扑 结构 作为 实验 对象 ． 从 初始状态 开始 ， 连续 分配 随机 产生 的 一系列 多目 通信 任务 ， 观察 它们 的 首次 失败 时间 和 通信 树 的 平均 直径 图 所示 的 是 江苏省 数字 数据网 JSDDN 的 拓扑 结构 （ 为了 避免 连线 在 示意图 上 相交 ， 我们 将 淮阴 与 连云港 两个 结点 的 位置 略作 了 改变 ） 图 所示 的 是 APARNET 的 网络拓扑 结构图 是 × 共个 结点 的 mesh 网 × 共个 结点 的 mesh 网 与 图 相似 ， 故 略去 其 网络 示意图 我们 在 这个 不同 的 网络 上 进行 了 模拟实验 网络 中 的 每 条边 的 初始 带宽 设置 为个 单位 ， 通信 树中 每 条边 占用 的 带宽 为个 单位 每个 数据 都 从次 的 实验 结果 求 平均值 得到 实验 在 IBMRS 工作站 上 进行 图 　 JSDDN 图 　 ARPANET 拓扑 结构图 　 mesh 网络 　 　 图 描述 了 在 JSDDN 、 ARPANET 、 结点 的 mesh 网 、 结点 的 mesh 网个 不同 的 网络 中 经过 模拟实验 得到 的 首次 失败 时间 的 平均值 图 描述 了 在 个 不同 的 网络 中 经过 模拟实验 得到 的 平均 直径 图 　 几种 网络 的 平均 首次 失败 时间 图 　 几种 网络 的 通信 任务 通道 的 平均 直径 　 　 从图 可以 看出 ， 算法 的 首次 失败 时间 明显 比 算法 的 迟 ， 约 从 ％ 到 ％ 也就是说 在 同样 的 网络资源 条件 下 算法 能 容纳 的 通信 任务 数比 算法 的 要 多 ％ 到 ％ 算法 由于 采用 避免 使用 剩余 带宽 少 的 链路 而 使 路径 长度 有所增加 ， 但 从 图 的 实验 结果 可以 看出 两个 算法 分配 通信 树 的 平均 直径 差别 极小 ， 即 算法 对 通信 的 最大 时延 基本 没有 影响 从图 还 可以 看出 ， mesh 网 的 首次 失败 时间 明显 比 JSDDN 和 ARPANET 的 要 迟 其 原因 是 mesh 网 的 各 结点 的 度 的 平均值 比 JSDDN 和 ARPANET 的 要 大 所以 网络 的 拓扑 结构 对 网络资源 利用率 会 产生 影响 ， 结点 的 度 大 的 在 同等 的 网络带宽 的 条件 下 将 容纳 更 多 的 通信 任务 　 结 　 　 语 　 　 本文 提出 了 构造 共享 的 通信 树 的 算法 ， 根据 算法 构造 的 通信 树 能够 满足 多目 通信 的 通信量 的 要求 由于 算法 避免 使用 高 负载 链路 ， 从而 增加 了 通信 树 预定 成功 的 概率 这样 的 路由 算法 能 与 资源 预定 协议 相配合 ， 并 能 支持 资源 的 重新 商定 的 服务 如何 确定 多路复用 链路 例如 以太网 上 的 服务质量 的 可用性 仍然 是 一个 公开 问题 ， IETF 的 ISSLLintegratedserviceoverspecificlinklayer 工作组 与 IEEE 组正 设法 解决 这个 问题 关于 通信 的 安全 与 权限 等 问题 本文 还 未 涉及 ， 需要 进一步 地 研究 ■ 基金项目 ： 本 课题 得到 国家 基础 研究 攀登 计划 基金 和 日本 邮政 省 TAOTelecommunication 　 　 　 　 　 　 AdvancesOrganization 项目 基金 的 资助 作者简介 ： 黄浩 ， 男 ， 年月生 ， 博士 研究生 ， 副教授 ， 主要 研究 方向 为 计算机网络 、 分 　 　 　 　 　 　 布式 计算 　 　 　 　 　 杜 建成 ， 男 ， 年月生 ， 博士 研究生 ， 主要 研究 方向 为 并行 编译 、 计算机网络 　 　 　 　 　 谢立 ， 男 ， 年月生 ， 副校长 ， 教授 ， 博士生 导师 ， 主要 研究 方向 为 分布式 计 　 　 　 　 　 　 算 、 并行处理 、 计算机网络 孙钟秀 ， 男 ， 年月生 ， 中国科学院 院士 ， 教 　 　 　 　 　 　 授 ， 博士生 导师 ， 主要 研究 方向 为 分布式 处理 系统 作者 单位 ： 黄浩 （ 南京大学 计算机软件 新 技术 国家 重点 实验室 　 南京 　 ） 　 　 　 　 　 杜 建成 （ 南京大学 计算机软件 新 技术 国家 重点 实验室 　 南京 　 ） 　 　 　 　 　 谢立 （ 南京大学 计算机软件 新 技术 国家 重点 实验室 　 南京 　 ） 　 　 　 　 　 孙钟秀 （ 南京大学 计算机软件 新 技术 国家 重点 实验室 　 南京 　 ） 　 　 　 　 　 黄浩 （ 南京大学 计算机科学 与 技术 系 　 南京 　 ） 　 　 　 　 　 杜 建成 （ 南京大学 计算机科学 与 技术 系 　 南京 　 ） 　 　 　 　 　 谢立 （ 南京大学 计算机科学 与 技术 系 　 南京 　 ） 　 　 　 　 　 孙钟秀 （ 南京大学 计算机科学 与 技术 系 　 南京 　 ） 参考文献 ： ［ ］ BradenRClarkDShankerSIntegratedserviceinInternetarchitectureRFC ［ ］ BradenRZhangLBersonSetalResourcereservationprotocolRSVPversion — FunctionalspecificationInternetDrafthttpftpietforginternetdraftsdraftietfrsvpspectxt ［ ］ 黄浩 谢立 孙钟秀 支持 综合 业务 的 InternetATM 网络 及 互联 计算机 研究 与 发展 ～ 　 　 　 HUANGHaoXIELiSUNZhongXiuInternetATMnetworkforintegratedserviceandinternetworkingJournalofComputerResearchandDevelopment ～ ［ ］ MoyJMulticastextentiontoOSPFRFC ［ ］ PusateriTDistancevectormulticastprotocolInternetDrafthttpftpietforginternetdraftsdraftietfidmrdvmrpv ［ ］ DuinCVo β SEfficientpathandvertexexchangeinSteinertreealgorithmsNetworks ～ 收稿 日期 ： 修稿 日期 ：